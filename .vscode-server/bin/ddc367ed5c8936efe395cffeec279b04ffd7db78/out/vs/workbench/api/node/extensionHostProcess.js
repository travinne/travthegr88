/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var dm=function(e,t){return dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},dm(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dm(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,f=!1,p=r.length-1;p>=0;p--){var g={};for(var v in i)g[v]=v==="access"?{}:i[v];for(var v in i.access)g.access[v]=i.access[v];g.addInitializer=function(x){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(x||null))};var b=(0,r[p])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(u.get=h),(h=o(b.set))&&(u.set=h),(h=o(b.init))&&s.unshift(h)}else(h=o(b))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),f=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){i[p]&&(s[p]=function(v){return new Promise(function(b,x){n.push([p,v,b,x])>1||c(p,v)})},g&&(s[p]=g(s[p])))}function c(p,g){try{l(i[p](g))}catch(v){f(n[0][3],v)}}function l(p){p.value instanceof __await?Promise.resolve(p.value.v).then(u,h):f(n[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,g){p(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var $P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return $P(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var CP=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new CP(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var IP=Object.create,fm=Object.defineProperty,PP=Object.getOwnPropertyDescriptor,v4=Object.getOwnPropertyNames,DP=Object.getPrototypeOf,AP=Object.prototype.hasOwnProperty,TP=(e,t)=>function(){return t||(0,e[v4(e)[0]])((t={exports:{}}).exports,t),t.exports},RP=(e,t)=>{for(var r in t)fm(e,r,{get:t[r],enumerable:!0})},LP=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of v4(t))!AP.call(e,s)&&s!==r&&fm(e,s,{get:()=>t[s],enumerable:!(i=PP(t,s))||i.enumerable});return e},w4=(e,t,r)=>(r=e!=null?IP(DP(e)):{},LP(t||!e||!e.__esModule?fm(r,"default",{value:e,enumerable:!0}):r,e)),b4=TP({"node_modules/minimist/index.js"(e,t){"use strict";function r(n,o){var a=n;o.slice(0,-1).forEach(function(l){a=a[l]||{}});var c=o[o.length-1];return c in a}function i(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function s(n,o){return o==="constructor"&&typeof n[o]=="function"||o==="__proto__"}t.exports=function(n,o){o||(o={});var a={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(a.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?a.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(U){a.bools[U]=!0});var c={};function l(U){return c[U].some(function(oe){return a.bools[oe]})}Object.keys(o.alias||{}).forEach(function(U){c[U]=[].concat(o.alias[U]),c[U].forEach(function(oe){c[oe]=[U].concat(c[U].filter(function(le){return oe!==le}))})}),[].concat(o.string).filter(Boolean).forEach(function(U){a.strings[U]=!0,c[U]&&[].concat(c[U]).forEach(function(oe){a.strings[oe]=!0})});var u=o.default||{},h={_:[]};function f(U,oe){return a.allBools&&/^--[^=]+$/.test(oe)||a.strings[U]||a.bools[U]||c[U]}function p(U,oe,le){for(var me=U,qe=0;qe<oe.length-1;qe++){var G=oe[qe];if(s(me,G))return;me[G]===void 0&&(me[G]={}),(me[G]===Object.prototype||me[G]===Number.prototype||me[G]===String.prototype)&&(me[G]={}),me[G]===Array.prototype&&(me[G]=[]),me=me[G]}var B=oe[oe.length-1];s(me,B)||((me===Object.prototype||me===Number.prototype||me===String.prototype)&&(me={}),me===Array.prototype&&(me=[]),me[B]===void 0||a.bools[B]||typeof me[B]=="boolean"?me[B]=le:Array.isArray(me[B])?me[B].push(le):me[B]=[me[B],le])}function g(U,oe,le){if(!(le&&a.unknownFn&&!f(U,le)&&a.unknownFn(le)===!1)){var me=!a.strings[U]&&i(oe)?Number(oe):oe;p(h,U.split("."),me),(c[U]||[]).forEach(function(qe){p(h,qe.split("."),me)})}}Object.keys(a.bools).forEach(function(U){g(U,u[U]===void 0?!1:u[U])});var v=[];n.indexOf("--")!==-1&&(v=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var b=0;b<n.length;b++){var x=n[b],k,I;if(/^--.+=/.test(x)){var A=x.match(/^--([^=]+)=([\s\S]*)$/);k=A[1];var R=A[2];a.bools[k]&&(R=R!=="false"),g(k,R,x)}else if(/^--no-.+/.test(x))k=x.match(/^--no-(.+)/)[1],g(k,!1,x);else if(/^--.+/.test(x))k=x.match(/^--(.+)/)[1],I=n[b+1],I!==void 0&&!/^(-|--)[^-]/.test(I)&&!a.bools[k]&&!a.allBools&&(!c[k]||!l(k))?(g(k,I,x),b+=1):/^(true|false)$/.test(I)?(g(k,I==="true",x),b+=1):g(k,a.strings[k]?"":!0,x);else if(/^-[^-]+/.test(x)){for(var _=x.slice(1,-1).split(""),q=!1,z=0;z<_.length;z++){if(I=x.slice(z+2),I==="-"){g(_[z],I,x);continue}if(/[A-Za-z]/.test(_[z])&&I[0]==="="){g(_[z],I.slice(1),x),q=!0;break}if(/[A-Za-z]/.test(_[z])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(I)){g(_[z],I,x),q=!0;break}if(_[z+1]&&_[z+1].match(/\W/)){g(_[z],x.slice(z+2),x),q=!0;break}else g(_[z],a.strings[_[z]]?"":!0,x)}k=x.slice(-1)[0],!q&&k!=="-"&&(n[b+1]&&!/^(-|--)[^-]/.test(n[b+1])&&!a.bools[k]&&(!c[k]||!l(k))?(g(k,n[b+1],x),b+=1):n[b+1]&&/^(true|false)$/.test(n[b+1])?(g(k,n[b+1]==="true",x),b+=1):g(k,a.strings[k]?"":!0,x))}else if((!a.unknownFn||a.unknownFn(x)!==!1)&&h._.push(a.strings._||!i(x)?x:Number(x)),o.stopEarly){h._.push.apply(h._,n.slice(b+1));break}}return Object.keys(u).forEach(function(U){r(h,U.split("."))||(p(h,U.split("."),u[U]),(c[U]||[]).forEach(function(oe){p(h,oe.split("."),u[U])}))}),o["--"]?h["--"]=v.slice():v.forEach(function(U){h._.push(U)}),h}}}),NP=w4(b4(),1);import*as FP from"net";var y4;function pm(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function OP(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var YV=class{static{y4=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[y4]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},MP=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?ui.isErrorNoTelemetry(e)?new ui(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Wc=new MP;function gm(e){Wc.setUnexpectedErrorHandler(e)}function UP(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function Ch(e){Wc.onUnexpectedError(e)}function mt(e){ji(e)||Wc.onUnexpectedError(e)}function E4(e){ji(e)||Wc.onUnexpectedExternalError(e)}function ea(e){if(e instanceof Error){const{name:t,message:r,cause:i}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:s,noTelemetry:ui.isErrorNoTelemetry(e),cause:i?ea(i):void 0,code:e.code}}return e}function x4(e){let t;return e.noTelemetry?t=new ui:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=x4(e.cause)),t}var Ih="Canceled";function ji(e){return e instanceof er?!0:e instanceof Error&&e.name===Ih&&e.message===Ih}var er=class extends Error{constructor(){super(Ih),this.name=this.message}};function zc(){const e=new Error(Ih);return e.name=e.message,e}function $e(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function mm(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var On=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};function k4(e){return e?e.message?e.message:e.stack?e.stack.split(`
`)[0]:String(e):"Error"}var jP=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},vm=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},ui=class zy extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof zy)return t;const r=new zy;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},ta=class XC extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,XC.prototype)}};function Ph(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}function BP(e,t,r=e.length-1){const i=_P(e,t,r);if(i!==-1)return e[i]}function _P(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function HP(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}function WP(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?n=o:s=o+1}return s}var XV=class ZC{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(ZC.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=HP(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Bi(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function zP(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function S4(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function VP(e,t,r){const i=S4(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function qP(e,t,r,i,s){return r===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+i,a);l<a;l=u,u=Math.min(u+i,a)){if(l>r&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new er;GP(e,t,c,l,u)}return c})().then(n,o)})}function GP(e,t,r,i,s){for(const n=r.length;i<s;i++){const o=e[i];if(t(o,r[n-1])<0){r.pop();const a=WP(r,c=>t(o,c)<0);r.splice(a,0,o)}}}function Pt(e){return e.filter(t=>!!t)}function JP(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function wm(e){return!Array.isArray(e)||e.length===0}function Vc(e){return Array.isArray(e)&&e.length>0}function ra(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function $4(e,t){return e.push(t),()=>QP(e,t)}function QP(e,t){const r=e.indexOf(t);if(r>-1)return e.splice(r,1),t}function C4(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function Dh(e,t){return Array.isArray(e)?e.map(t):t(e)}function Zr(e){return Array.isArray(e)?e:[e]}var bm;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(bm||(bm={}));function YP(e,t){return(r,i)=>t(e(r),e(i))}var XP=(e,t)=>e-t,ZV=class Gg{static{this.empty=new Gg(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new Gg(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new Gg(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||bm.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},I4,P4,D4;function ZP(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var KP=class{constructor(e,t){this.uri=e,this.value=t}};function eD(e){return Array.isArray(e)}var Vt=class mh{static{this.c=t=>t.toString()}constructor(t,r){if(this[I4]="ResourceMap",t instanceof mh)this.d=new Map(t.d),this.e=r??mh.c;else if(eD(t)){this.d=new Map,this.e=r??mh.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??mh.c}set(t,r){return this.d.set(this.e(t),new KP(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(I4=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},A4=class{constructor(e,t){this[P4]="ResourceSet",!e||typeof e=="function"?this.c=new Vt(e):(this.c=new Vt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(P4=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},T4;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(T4||(T4={}));var tD=class{constructor(){this[D4]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.n(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.n(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.l(i);break;case 1:this.k(i);break;case 2:this.l(i);break;default:this.l(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[(D4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},rD=class extends tD{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},qc=class extends rD{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},R4=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function dr(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function iD(e,t="Unreachable"){throw new Error(t)}function sD(e,t="unexpected state"){if(!e)throw typeof t=="string"?new ta(`Assertion Failed: ${t}`):t}function L4(e){if(!e()){debugger;e(),mt(new ta("Assertion Failed"))}}function Pe(e){return typeof e=="string"}function nD(e){return Array.isArray(e)&&e.every(t=>Pe(t))}function bt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function oD(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function Kr(e){return typeof e=="number"&&!isNaN(e)}function aD(e){return!!e&&typeof e[Symbol.iterator]=="function"}function N4(e){return e===!0||e===!1}function Gc(e){return typeof e>"u"}function Mn(e){return!Dt(e)}function Dt(e){return Gc(e)||e===null}function F4(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function ia(e){return sD(e!=null,"Argument is `undefined` or `null`."),e}var cD=Object.prototype.hasOwnProperty;function O4(e){if(!bt(e))return!1;for(const t in e)if(cD.call(e,t))return!1;return!0}function lD(e){return typeof e=="function"}function uD(e,t){if(Pe(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(lD(t)){try{if(e instanceof t)return}catch{}if(!Dt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var Ar;(function(e){function t(A){return A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(A){yield A}e.single=s;function n(A){return t(A)?A:s(A)}e.wrap=n;function o(A){return A||r}e.from=o;function*a(A){for(let R=A.length-1;R>=0;R--)yield A[R]}e.reverse=a;function c(A){return!A||A[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(A){return A[Symbol.iterator]().next().value}e.first=l;function u(A,R){let _=0;for(const q of A)if(R(q,_++))return!0;return!1}e.some=u;function h(A,R){for(const _ of A)if(R(_))return _}e.find=h;function*f(A,R){for(const _ of A)R(_)&&(yield _)}e.filter=f;function*p(A,R){let _=0;for(const q of A)yield R(q,_++)}e.map=p;function*g(A,R){let _=0;for(const q of A)yield*R(q,_++)}e.flatMap=g;function*v(...A){for(const R of A)aD(R)?yield*R:yield R}e.concat=v;function b(A,R,_){let q=_;for(const z of A)q=R(q,z);return q}e.reduce=b;function*x(A,R,_=A.length){for(R<-A.length&&(R=0),R<0&&(R+=A.length),_<0?_+=A.length:_>A.length&&(_=A.length);R<_;R++)yield A[R]}e.slice=x;function k(A,R=Number.POSITIVE_INFINITY){const _=[];if(R===0)return[_,A];const q=A[Symbol.iterator]();for(let z=0;z<R;z++){const U=q.next();if(U.done)return[_,e.empty()];_.push(U.value)}return[_,{[Symbol.iterator](){return q}}]}e.consume=k;async function I(A){const R=[];for await(const _ of A)R.push(_);return Promise.resolve(R)}e.asyncToArray=I})(Ar||(Ar={}));var hD=!1,sa=null,KV=class KC{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:KC.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,f){for(;h.length>0&&f.some(p=>typeof p=="string"?p===h[0]:h[0].match(p));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new R4;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(YP(c=>c.idx,XP));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${f}`;const g=n.get(l.slice(0,h).join(`
`)),v=pm([...g].map(b=>s(b)[h]),b=>b);delete v[l[h]];for(const[b,x]of Object.entries(v))u.unshift(`    - stacktraces of ${x.length} other leaks continue with ${b}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function dD(e){sa=e}if(hD){const e="__is_disposable_tracked__";dD(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==ee.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==ee.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function na(e){return sa?.trackDisposable(e),e}function oa(e){sa?.markAsDisposed(e)}function Jc(e,t){sa?.setParent(e,t)}function fD(e,t){if(sa)for(const r of e)sa.setParent(r,t)}function pD(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function hi(e){if(Ar.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function M4(...e){const t=te(()=>hi(e));return fD(e,t),t}function te(e){const t=na({dispose:Ph(()=>{oa(t),e()})});return t}var se=class eI{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,na(this)}dispose(){this.g||(oa(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{hi(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Jc(t,this),this.g?eI.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Jc(t,null))}},ee=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new se,na(this),Jc(this.q,this)}dispose(){oa(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},ls=class{constructor(){this.b=!1,na(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Jc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,oa(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Jc(e,null),e}},Ah=class{constructor(){this.a=new Map,this.b=!1,na(this)}dispose(){oa(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{hi(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},At=class Jg{static{this.Undefined=new Jg(void 0)}constructor(t){this.element=t,this.next=Jg.Undefined,this.prev=Jg.Undefined}},Qc=class{constructor(){this.a=At.Undefined,this.b=At.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===At.Undefined}clear(){let e=this.a;for(;e!==At.Undefined;){const t=e.next;e.prev=At.Undefined,e.next=At.Undefined,e=t}this.a=At.Undefined,this.b=At.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new At(e);if(this.a===At.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==At.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==At.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==At.Undefined&&e.next!==At.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===At.Undefined&&e.next===At.Undefined?(this.a=At.Undefined,this.b=At.Undefined):e.next===At.Undefined?(this.b=this.b.prev,this.b.next=At.Undefined):e.prev===At.Undefined&&(this.a=this.a.next,this.a.prev=At.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==At.Undefined;)yield e.element,e=e.next}},gD=globalThis.performance&&typeof globalThis.performance.now=="function",Tr=class tI{static create(t){return new tI(t)}constructor(t){this.c=gD&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},U4=!1,mD=!1,Be;(function(e){e.None=()=>ee.None;function t(G){if(mD){const{onDidAddListener:B}=G,Z=ym.create();let H=0;G.onDidAddListener=()=>{++H===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Z.print()),B?.()}}}function r(G,B){return p(G,()=>{},0,void 0,!0,void 0,B)}e.defer=r;function i(G){return(B,Z=null,H)=>{let ce=!1,be;return be=G(de=>{if(!ce)return be?be.dispose():ce=!0,B.call(Z,de)},null,H),ce&&be.dispose(),be}}e.once=i;function s(G,B){return e.once(e.filter(G,B))}e.onceIf=s;function n(G,B,Z){return h((H,ce=null,be)=>G(de=>H.call(ce,B(de)),null,be),Z)}e.map=n;function o(G,B,Z){return h((H,ce=null,be)=>G(de=>{B(de),H.call(ce,de)},null,be),Z)}e.forEach=o;function a(G,B,Z){return h((H,ce=null,be)=>G(de=>B(de)&&H.call(ce,de),null,be),Z)}e.filter=a;function c(G){return G}e.signal=c;function l(...G){return(B,Z=null,H)=>{const ce=M4(...G.map(be=>be(de=>B.call(Z,de))));return f(ce,H)}}e.any=l;function u(G,B,Z,H){let ce=Z;return n(G,be=>(ce=B(ce,be),ce),H)}e.reduce=u;function h(G,B){let Z;const H={onWillAddFirstListener(){Z=G(ce.fire,ce)},onDidRemoveLastListener(){Z?.dispose()}};B||t(H);const ce=new D(H);return B?.add(ce),ce.event}function f(G,B){return B instanceof Array?B.push(G):B&&B.add(G),G}function p(G,B,Z=100,H=!1,ce=!1,be,de){let tt,Ye,Mt,Nt=0,Zt;const at={leakWarningThreshold:be,onWillAddFirstListener(){tt=G(Qs=>{Nt++,Ye=B(Ye,Qs),H&&!Mt&&(lr.fire(Ye),Ye=void 0),Zt=()=>{const Mi=Ye;Ye=void 0,Mt=void 0,(!H||Nt>1)&&lr.fire(Mi),Nt=0},typeof Z=="number"?(clearTimeout(Mt),Mt=setTimeout(Zt,Z)):Mt===void 0&&(Mt=0,queueMicrotask(Zt))})},onWillRemoveListener(){ce&&Nt>0&&Zt?.()},onDidRemoveLastListener(){Zt=void 0,tt.dispose()}};de||t(at);const lr=new D(at);return de?.add(lr),lr.event}e.debounce=p;function g(G,B=0,Z){return e.debounce(G,(H,ce)=>H?(H.push(ce),H):[ce],B,void 0,!0,void 0,Z)}e.accumulate=g;function v(G,B=(H,ce)=>H===ce,Z){let H=!0,ce;return a(G,be=>{const de=H||!B(be,ce);return H=!1,ce=be,de},Z)}e.latch=v;function b(G,B,Z){return[e.filter(G,B,Z),e.filter(G,H=>!B(H),Z)]}e.split=b;function x(G,B=!1,Z=[],H){let ce=Z.slice(),be=G(Ye=>{ce?ce.push(Ye):tt.fire(Ye)});H&&H.add(be);const de=()=>{ce?.forEach(Ye=>tt.fire(Ye)),ce=null},tt=new D({onWillAddFirstListener(){be||(be=G(Ye=>tt.fire(Ye)),H&&H.add(be))},onDidAddFirstListener(){ce&&(B?setTimeout(de):de())},onDidRemoveLastListener(){be&&be.dispose(),be=null}});return H&&H.add(tt),tt.event}e.buffer=x;function k(G,B){return(H,ce,be)=>{const de=B(new A);return G(function(tt){const Ye=de.evaluate(tt);Ye!==I&&H.call(ce,Ye)},void 0,be)}}e.chain=k;const I=Symbol("HaltChainable");class A{constructor(){this.f=[]}map(B){return this.f.push(B),this}forEach(B){return this.f.push(Z=>(B(Z),Z)),this}filter(B){return this.f.push(Z=>B(Z)?Z:I),this}reduce(B,Z){let H=Z;return this.f.push(ce=>(H=B(H,ce),H)),this}latch(B=(Z,H)=>Z===H){let Z=!0,H;return this.f.push(ce=>{const be=Z||!B(ce,H);return Z=!1,H=ce,be?ce:I}),this}evaluate(B){for(const Z of this.f)if(B=Z(B),B===I)break;return B}}function R(G,B,Z=H=>H){const H=(...tt)=>de.fire(Z(...tt)),ce=()=>G.on(B,H),be=()=>G.removeListener(B,H),de=new D({onWillAddFirstListener:ce,onDidRemoveLastListener:be});return de.event}e.fromNodeEventEmitter=R;function _(G,B,Z=H=>H){const H=(...tt)=>de.fire(Z(...tt)),ce=()=>G.addEventListener(B,H),be=()=>G.removeEventListener(B,H),de=new D({onWillAddFirstListener:ce,onDidRemoveLastListener:be});return de.event}e.fromDOMEventEmitter=_;function q(G,B){return new Promise(Z=>i(G)(Z,null,B))}e.toPromise=q;function z(G){const B=new D;return G.then(Z=>{B.fire(Z)},()=>{B.fire(void 0)}).finally(()=>{B.dispose()}),B.event}e.fromPromise=z;function U(G,B){return G(Z=>B.fire(Z))}e.forward=U;function oe(G,B,Z){return B(Z),G(H=>B(H))}e.runAndSubscribe=oe;class le{constructor(B,Z){this._observable=B,this.f=0,this.g=!1;const H={onWillAddFirstListener:()=>{B.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{B.removeObserver(this)}};Z||t(H),this.emitter=new D(H),Z&&Z.add(this.emitter)}beginUpdate(B){this.f++}handlePossibleChange(B){}handleChange(B,Z){this.g=!0}endUpdate(B){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function me(G,B){return new le(G,B).emitter.event}e.fromObservable=me;function qe(G){return(B,Z,H)=>{let ce=0,be=!1;const de={beginUpdate(){ce++},endUpdate(){ce--,ce===0&&(G.reportChanges(),be&&(be=!1,B.call(Z)))},handlePossibleChange(){},handleChange(){be=!0}};G.addObserver(de),G.reportChanges();const tt={dispose(){G.removeObserver(de)}};return H instanceof se?H.add(tt):Array.isArray(H)&&H.push(tt),tt}}e.fromObservableLight=qe})(Be||(Be={}));var vD=class Vy{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Vy.f++}`,Vy.all.add(this)}start(t){this.g=new Tr,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},j4=-1,wD=class rI{static{this.f=1}constructor(t,r,i=(rI.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new bD(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},ym=class iI{static create(){const t=new Error;return new iI(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},bD=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},yD=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},ED=0,Th=class{constructor(e){this.value=e,this.id=ED++}},xD=2,B4=(e,t)=>{if(e instanceof Th)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},D=class{constructor(e){this.z=0,this.f=e,this.g=j4>0||this.f?.leakWarningThreshold?new wD(e?.onListenerError??mt,this.f?.leakWarningThreshold??j4):void 0,this.j=this.f?._profName?new vD(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(U4){const e=this.u;queueMicrotask(()=>{B4(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new yD(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||mt)(l),ee.None}if(this.m)return ee.None;t&&(e=e.bind(t));const i=new Th(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=ym.create(),s=this.g.check(i.stack,this.z+1)),U4&&(i.stack=n??ym.create()),this.u?this.u instanceof Th?(this.w??=new kD,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=te(()=>{s?.(),this.A(i)});return r instanceof se?r.add(o):Array.isArray(r)&&r.push(o),o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*xD<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||mt;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Th)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},kD=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Yc=class extends D{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new Qc),B4(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){mt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&mt(c.reason)})}}},Xc=class extends D{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Qc,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},SD=class extends Xc{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},$D=class{constructor(){this.f=!1,this.g=Be.None,this.h=ee.None,this.j=new D({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},_4=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),Xe;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof Rh?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Be.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_4})})(Xe||(Xe={}));var Rh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?_4:(this.b||(this.b=new D),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},it=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Rh),this.f}cancel(){this.f?this.f instanceof Rh&&this.f.cancel():this.f=Xe.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Rh&&this.f.dispose():this.f=Xe.None}};function CD(){return globalThis._VSCODE_NLS_MESSAGES}function H4(){return globalThis._VSCODE_NLS_LANGUAGE}var ID=H4()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Lh(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),ID&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function d(e,t,...r){return Lh(typeof e=="number"?W4(e,t):t,r)}function W4(e,t){const r=CD()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function Em(e,t,...r){let i;typeof e=="number"?i=W4(e,t):i=t;const s=Lh(i,r);return{value:s,original:t===i?s:Lh(t,r)}}var Xs="en",Zc=!1,Kc=!1,el=!1,PD=!1,z4=!1,xm=!1,DD=!1,km=!1,V4=!1,q4=!1,Nh=void 0,Fh=Xs,G4=Xs,AD=void 0,us=void 0,hs=globalThis,Wr=void 0;typeof hs.vscode<"u"&&typeof hs.vscode.process<"u"?Wr=hs.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Wr=process);var J4=typeof Wr?.versions?.electron=="string",TD=J4&&Wr?.type==="renderer";if(typeof Wr=="object"){Zc=Wr.platform==="win32",Kc=Wr.platform==="darwin",el=Wr.platform==="linux",PD=el&&!!Wr.env.SNAP&&!!Wr.env.SNAP_REVISION,DD=J4,V4=!!Wr.env.CI||!!Wr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Nh=Xs,Fh=Xs;const e=Wr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Nh=t.userLocale,G4=t.osLocale,Fh=t.resolvedLanguage||Xs,AD=t.languagePack?.translationsConfigFile}catch{}z4=!0}else typeof navigator=="object"&&!TD?(us=navigator.userAgent,Zc=us.indexOf("Windows")>=0,Kc=us.indexOf("Macintosh")>=0,km=(us.indexOf("Macintosh")>=0||us.indexOf("iPad")>=0||us.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,el=us.indexOf("Linux")>=0,q4=us?.indexOf("Mobi")>=0,xm=!0,Fh=H4()||Xs,Nh=navigator.language.toLowerCase(),G4=Nh):console.error("Unable to resolve platform.");var Q4;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Q4||(Q4={}));function RD(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Oh=0;Kc?Oh=1:Zc?Oh=3:el&&(Oh=2);var Ue=Zc,Tt=Kc,yt=el,Y4=z4,tl=xm,LD=xm&&typeof hs.importScripts=="function",ND=LD?hs.origin:void 0,FD=km,OD=q4,Un=V4,MD=Oh,_i=us,Zs=Fh,X4;(function(e){function t(){return Zs}e.value=t;function r(){return Zs.length===2?Zs==="en":Zs.length>=3?Zs[0]==="e"&&Zs[1]==="n"&&Zs[2]==="-":!1}e.isDefaultVariant=r;function i(){return Zs==="en"}e.isDefault=i})(X4||(X4={}));var UD=typeof hs.postMessage=="function"&&!hs.importScripts,Z4=(()=>{if(UD){const e=[];hs.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),hs.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),K4;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(K4||(K4={}));var Sm=Kc||km?2:Zc?1:3,e5=!0,t5=!1;function r5(){if(!t5){t5=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,e5=new Uint16Array(e.buffer)[0]===513}return e5}var $m=!!(_i&&_i.indexOf("Chrome")>=0),jD=!!(_i&&_i.indexOf("Firefox")>=0),BD=!!(!$m&&_i&&_i.indexOf("Safari")>=0),i5=!!(_i&&_i.indexOf("Edg/")>=0),eq=!!(_i&&_i.indexOf("Android")>=0),jn,Cm=globalThis.vscode;if(typeof Cm<"u"&&typeof Cm.process<"u"){const e=Cm.process;jn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?jn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:jn={get platform(){return Ue?"win32":Tt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Bn=jn.cwd,aa=jn.env,_D=jn.platform,tq=jn.arch,HD=65,WD=97,zD=90,VD=122,_n=46,tr=47,Rr=92,ds=58,qD=63,s5=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function GD(e,t){if(e===null||typeof e!="object")throw new s5(t,"Object",e)}function Ft(e,t){if(typeof e!="string")throw new s5(t,"string",e)}var Lr=_D==="win32";function De(e){return e===tr||e===Rr}function Im(e){return e===tr}function fs(e){return e>=HD&&e<=zD||e>=WD&&e<=VD}function Mh(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=tr}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==_n||s.charCodeAt(s.length-2)!==_n){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===_n&&a!==-1?++a:a=-1}return s}function JD(e){return e?`${e[0]==="."?"":"."}${e}`:""}function n5(e,t){GD(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${JD(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var Ot={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Ft(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=Bn():(n=aa[`=${t}`]||Bn(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Rr)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)De(u)&&(a=1,l=!0);else if(De(u))if(l=!0,De(n.charCodeAt(1))){let h=2,f=h;for(;h<o&&!De(n.charCodeAt(h));)h++;if(h<o&&h!==f){const p=n.slice(f,h);for(f=h;h<o&&De(n.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!De(n.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${p}\\${n.slice(f,h)}`,a=h)}}}else a=1;else fs(u)&&n.charCodeAt(1)===ds&&(c=n.slice(0,2),a=2,o>2&&De(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=Mh(r,!i,"\\",De),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){Ft(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return Im(n)?"\\":e;if(De(n))if(s=!0,De(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!De(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!De(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else fs(n)&&e.charCodeAt(1)===ds&&(i=e.slice(0,2),r=2,t>2&&De(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?Mh(e.slice(r),!s,"\\",De):"";if(o.length===0&&!s&&(o="."),o.length>0&&De(e.charCodeAt(t-1))&&(o+="\\"),!s&&i===void 0&&e.includes(":")){if(o.length>=2&&fs(o.charCodeAt(0))&&o.charCodeAt(1)===ds)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||De(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){Ft(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return De(r)||t>2&&fs(r)&&e.charCodeAt(1)===ds&&De(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];Ft(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&De(r.charCodeAt(0))){++s;const n=r.length;n>1&&De(r.charCodeAt(1))&&(++s,n>2&&(De(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&De(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Ot.normalize(t)},relative(e,t){if(Ft(e,"from"),Ft(t,"to"),e===t)return"";const r=Ot.resolve(e),i=Ot.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";if(r.length!==e.length||i.length!==t.length){const g=r.split("\\"),v=i.split("\\");g[g.length-1]===""&&g.pop(),v[v.length-1]===""&&v.pop();const b=g.length,x=v.length,k=b<x?b:x;let I;for(I=0;I<k&&g[I].toLowerCase()===v[I].toLowerCase();I++);return I===0?i:I===k?x>k?v.slice(I).join("\\"):b>k?"..\\".repeat(b-1-I)+"..":"":"..\\".repeat(b-I)+v.slice(I).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===Rr;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Rr;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Rr;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Rr;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const g=e.charCodeAt(s+f);if(g!==t.charCodeAt(a+f))break;g===Rr&&(h=f)}if(f!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+f)===Rr)return i.slice(a+f+1);if(f===2)return i.slice(a+f)}o>u&&(e.charCodeAt(s+f)===Rr?h=f:f===2&&(h=3)),h===-1&&(h=0)}let p="";for(f=s+h+1;f<=n;++f)(f===n||e.charCodeAt(f)===Rr)&&(p+=p.length===0?"..":"\\..");return a+=h,p.length>0?`${p}${i.slice(a,c)}`:(i.charCodeAt(a)===Rr&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Ot.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Rr){if(t.charCodeAt(1)===Rr){const r=t.charCodeAt(2);if(r!==qD&&r!==_n)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(fs(t.charCodeAt(0))&&t.charCodeAt(1)===ds&&t.charCodeAt(2)===Rr)return`\\\\?\\${t}`;return t},dirname(e){Ft(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return De(s)?e:".";if(De(s)){if(r=i=1,De(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!De(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else fs(s)&&e.charCodeAt(1)===ds&&(r=t>2&&De(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if(De(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&Ft(t,"suffix"),Ft(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&fs(e.charCodeAt(0))&&e.charCodeAt(1)===ds&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(De(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(De(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Ft(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===ds&&fs(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(De(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===_n?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:n5.bind(null,"\\"),parse(e){Ft(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return De(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(De(s)){if(i=1,De(e.charCodeAt(1))){let h=2,f=h;for(;h<r&&!De(e.charCodeAt(h));)h++;if(h<r&&h!==f){for(f=h;h<r&&De(e.charCodeAt(h));)h++;if(h<r&&h!==f){for(f=h;h<r&&!De(e.charCodeAt(h));)h++;h===r?i=h:h!==f&&(i=h+1)}}}}else if(fs(s)&&e.charCodeAt(1)===ds){if(r<=2)return t.root=t.dir=e,t;if(i=2,De(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),De(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===_n?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},QD=(()=>{if(Lr){const e=/\\/g;return()=>{const t=Bn().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>Bn()})(),Le={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=0&&!r;i--){const s=e[i];Ft(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===tr)}if(!r){const i=QD();t=`${i}/${t}`,r=i.charCodeAt(0)===tr}return t=Mh(t,!r,"/",Im),r?`/${t}`:t.length>0?t:"."},normalize(e){if(Ft(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===tr,r=e.charCodeAt(e.length-1)===tr;return e=Mh(e,!t,"/",Im),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Ft(e,"path"),e.length>0&&e.charCodeAt(0)===tr},join(...e){if(e.length===0)return".";const t=[];for(let r=0;r<e.length;++r){const i=e[r];Ft(i,"path"),i.length>0&&t.push(i)}return t.length===0?".":Le.normalize(t.join("/"))},relative(e,t){if(Ft(e,"from"),Ft(t,"to"),e===t||(e=Le.resolve(e),t=Le.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===tr&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===tr)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===tr?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===tr)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Ft(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===tr;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===tr){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&Ft(t,"suffix"),Ft(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===tr){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===tr){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Ft(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:n5.bind(null,"/"),parse(e){Ft(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===tr;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===tr){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===_n?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Le.win32=Ot.win32=Ot,Le.posix=Ot.posix=Le;var ps=Lr?Ot.normalize:Le.normalize,di=Lr?Ot.isAbsolute:Le.isAbsolute,Ze=Lr?Ot.join:Le.join,YD=Lr?Ot.resolve:Le.resolve,ca=Lr?Ot.relative:Le.relative,Nr=Lr?Ot.dirname:Le.dirname,vt=Lr?Ot.basename:Le.basename,Uh=Lr?Ot.extname:Le.extname,rq=Lr?Ot.format:Le.format,iq=Lr?Ot.parse:Le.parse,sq=Lr?Ot.toNamespacedPath:Le.toNamespacedPath,wt=Lr?Ot.sep:Le.sep,o5=Lr?Ot.delimiter:Le.delimiter;function XD(e){return e}var ZD=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=XD):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},mr=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function jh(e){return!e||typeof e!="string"?!0:e.trim().length===0}var KD=/{([^}]+)}/g;function a5(e,t){return Object.keys(t).length===0?e:e.replace(KD,(r,i)=>t[i]??r)}function Ks(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function e2(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function t2(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function en(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function r2(e){return e.replace(/\*/g,"")}function c5(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Ks(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function l5(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function u5(e){return e.split(/\r\n|\r|\n/)}function Pm(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function i2(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function s2(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function Hn(e,t){return e<t?-1:e>t?1:0}function Dm(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function h5(e,t){return rl(e,t,0,e.length,0,t.length)}function rl(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Dm(e.toLowerCase(),t.toLowerCase(),r,i,s,n);d5(c)&&(c-=32),d5(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function d5(e){return e>=97&&e<=122}function f5(e){return e>=65&&e<=90}function fi(e,t){return e.length===t.length&&rl(e,t)===0}function Bh(e,t){const r=t.length;return t.length>e.length?!1:rl(e,t,0,r)===0}function n2(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function _h(e){return 55296<=e&&e<=56319}function Hh(e){return 56320<=e&&e<=57343}function Am(e,t){return(e-55296<<10)+(t-56320)+65536}function p5(e,t,r){const i=e.charCodeAt(r);if(_h(i)&&r+1<t){const s=e.charCodeAt(r+1);if(Hh(s))return Am(i,s)}return i}function o2(e,t){const r=e.charCodeAt(t-1);if(Hh(r)&&t>1){const i=e.charCodeAt(t-2);if(_h(i))return Am(i,r)}return r}var a2=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=o2(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=p5(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},c2=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new a2(e,t)}nextGraphemeLength(){const e=E5.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(b5(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=E5.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(b5(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function g5(e,t){return new c2(e,t).nextGraphemeLength()}var Tm=void 0;function l2(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function m5(e){return Tm||(Tm=l2()),Tm.test(e)}var u2=/^[\t\n\r\x20-\x7E]*$/;function h2(e){return u2.test(e)}var d2=/[\u2028\u2029]/;function v5(e){return d2.test(e)}var f2="\uFEFF";function p2(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function g2(e,t){if(!e||!t||e.length<t.length)return!1;const r=t.length,i=e.toLowerCase();let s=0,n=-1;for(;s<r;){const o=i.indexOf(t[s],n+1);if(o<0)return!1;n=o,s++}return!0}function w5(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function m2(e){return e.charAt(0).toUpperCase()+e.slice(1)}function v2(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function b5(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var y5;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(y5||(y5={}));var E5=class vh{static{this.c=null}static getInstance(){return vh.c||(vh.c=new vh),vh.c}constructor(){this.d=w2()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function w2(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var x5;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(x5||(x5={}));var nq=class wh{static{this.c=new mr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new ZD({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let f=0;f<u.length;f+=2)h.set(u[f],u[f+1]);return h}function i(u,h){const f=new Map(u);for(const[p,g]of h)f.set(p,g);return f}function s(u,h){if(!u)return h;const f=new Map;for(const[p,g]of u)h.has(p)&&f.set(p,g);return f}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new wh(l)})}static getInstance(t){return wh.d.get(Array.from(t))}static{this.e=new mr(()=>Object.keys(wh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return wh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},oq=class bh{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(bh.c())].flat())),this.d}static isInvisibleCharacter(t){return bh.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&(bh.isInvisibleCharacter(i)||i===32))return!0}return!1}static get codePoints(){return bh.e()}};function tn(e){return e===47||e===92}function k5(e){return e.replace(/[\\/]/g,Le.sep)}function b2(e){return e.indexOf("/")===-1&&(e=k5(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function Rm(e,t=Le.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(tn(i)){if(tn(e.charCodeAt(1))&&!tn(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!tn(e.charCodeAt(n));n++);if(o!==n&&!tn(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(tn(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(S5(i)&&e.charCodeAt(1)===58)return tn(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(tn(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var y2=/[\\/:\*\?"<>\|]/g,E2=/[/]/g,x2=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function k2(e,t=Ue){const r=t?y2:E2;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&x2.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Wh(e,t,r){const i=e===t;return!r||i?i:!e||!t?!1:fi(e,t)}function Wn(e,t,r,i=wt){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!Bh(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function S5(e){return e>=65&&e<=90||e>=97&&e<=122}function S2(e){return Ue?(e=en(e,wt),e.endsWith(":")&&(e+=wt)):(e=en(e,wt),e||(e=wt)),e}function $5(e){const t=ps(e);return Ue?e.length>3?!1:Lm(t)&&(e.length===2||t.charCodeAt(2)===92):t===Le.sep}function Lm(e,t=Ue){return t?S5(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function C5(e,t=Ue){return Lm(e,t)?e[0]:void 0}var $2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",C2="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function I2(e,t,r=8){let i="";for(let n=0;n<r;n++){let o;n===0&&Ue&&!t&&(r===3||r===4)?o=C2:o=$2,i+=o.charAt(Math.floor(Math.random()*o.length))}let s;return t?s=`${t}-${i}`:s=i,e?Ze(e,s):s}var P2=/^\w[\w\d+.-]*$/,D2=/^\//,A2=/^\/\//;function T2(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!P2.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!D2.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(A2.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function R2(e,t){return!e&&!t?"file":e}function L2(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==pi&&(t=pi+t):t=pi;break}return t}var ft="",pi="/",N2=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,E=class Qg{static isUri(t){return t instanceof Qg?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ft,this.authority=t.authority||ft,this.path=t.path||ft,this.query=t.query||ft,this.fragment=t.fragment||ft):(this.scheme=R2(t,o),this.authority=r||ft,this.path=L2(this.scheme,i||ft),this.query=s||ft,this.fragment=n||ft,T2(this,o))}get fsPath(){return zh(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=ft),i===void 0?i=this.authority:i===null&&(i=ft),s===void 0?s=this.path:s===null&&(s=ft),n===void 0?n=this.query:n===null&&(n=ft),o===void 0?o=this.fragment:o===null&&(o=ft),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new la(r,i,s,n,o)}static parse(t,r=!1){const i=N2.exec(t);return i?new la(i[2]||ft,Vh(i[4]||ft),Vh(i[5]||ft),Vh(i[7]||ft),Vh(i[9]||ft),r):new la(ft,ft,ft,ft,ft)}static file(t){let r=ft;if(Ue&&(t=t.replace(/\\/g,pi)),t[0]===pi&&t[1]===pi){const i=t.indexOf(pi,2);i===-1?(r=t.substring(2),t=pi):(r=t.substring(2,i),t=t.substring(i)||pi)}return new la("file",r,t,ft,ft)}static from(t,r){return new la(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Ue&&t.scheme==="file"?i=Qg.file(Ot.join(zh(t,!0),...r)).path:i=Le.join(t.path,...r),t.with({path:i})}toString(t=!1){return Nm(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Qg)return t;{const r=new la(t);return r._formatted=t.external??null,r._fsPath=t._sep===P5?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function I5(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var P5=Ue?1:void 0,la=class extends E{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=zh(this,!1)),this._fsPath}toString(e=!1){return e?Nm(this,!0):(this._formatted||(this._formatted=Nm(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=P5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},D5={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function A5(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=D5[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function F2(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=D5[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function zh(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,Ue&&(r=r.replace(/\//g,"\\")),r}function Nm(e,t){const r=t?F2:A5;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=pi,i+=pi),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:A5(c,!1,!1)),i}function T5(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+T5(e.substr(3)):e}}var R5=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Vh(e){return e.match(R5)?e.replace(R5,t=>T5(t)):e}var W;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(W||(W={}));function Fm(e,t){return E.isUri(e)?fi(e.scheme,t):Bh(e,t+":")}function O2(e,...t){return t.some(r=>Fm(e,r))}var M2="tkn",U2=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Le.join(t??"/",j2(e))}getServerRootPath(){return this.f}get g(){return Le.join(this.f,W.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return mt(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${M2}=${encodeURIComponent(s)}`),E.from({scheme:tl?this.d:W.vscodeRemoteResource,authority:`${r}:${i}`,path:this.g,query:n})}},L5=new U2;function j2(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var N5="vscode-app",B2=class Yg{static{this.a=N5}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===W.vscodeRemote?L5.rewrite(t):t.scheme===W.file&&(Y4||ND===`${W.vscodeFileResource}://${Yg.a}`)?t.with({scheme:W.vscodeFileResource,authority:t.authority||Yg.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===W.vscodeFileResource?t.with({scheme:W.file,authority:t.authority!==Yg.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(E.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return E.joinPath(E.parse(i,!0),t);const s=Ze(i,t);return E.file(s)}return E.parse(r.toUrl(t))}},F5=new B2,aq=Object.freeze({"Cache-Control":"no-cache, no-store"}),O5;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:E.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(O5||(O5={}));function gi(e){return zh(e,!0)}var il=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:Hn(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===W.file)return Wn(gi(e),gi(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(j5(e.authority,t.authority))return Wn(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return E.joinPath(e,...t)}basenameOrAuthority(e){return mi(e)||e.authority}basename(e){return Le.basename(e.path)}extname(e){return Le.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===W.file?t=E.file(Nr(gi(e))).path:(t=Le.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===W.file?t=E.file(ps(gi(e))).path:t=Le.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!j5(e.authority,t.authority))return;if(e.scheme===W.file){const s=ca(gi(e),gi(t));return Ue?k5(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return Le.relative(r,i)}resolvePath(e,t){if(e.scheme===W.file){const r=E.file(YD(gi(e),t));return e.with({authority:r.authority,path:r.path})}return t=b2(t),e.with({path:Le.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&fi(e,t)}hasTrailingPathSeparator(e,t=wt){if(e.scheme===W.file){const r=gi(e);return r.length>Rm(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=wt){return B5(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=wt){let r=!1;if(e.scheme===W.file){const i=gi(e);r=i!==void 0&&i.length===Rm(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!B5(e,t)?e.with({path:e.path+"/"}):e}},_e=new il(()=>!1),Om=new il(e=>e.scheme===W.file?!yt:!0),_2=new il(e=>!0),sl=_e.isEqual.bind(_e),cq=_e.isEqualOrParent.bind(_e),lq=_e.getComparisonKey.bind(_e),Mm=_e.basenameOrAuthority.bind(_e),mi=_e.basename.bind(_e),M5=_e.extname.bind(_e),nl=_e.dirname.bind(_e),St=_e.joinPath.bind(_e),uq=_e.normalizePath.bind(_e),U5=_e.relativePath.bind(_e),hq=_e.resolvePath.bind(_e),H2=_e.isAbsolutePath.bind(_e),j5=_e.isEqualAuthority.bind(_e),B5=_e.hasTrailingPathSeparator.bind(_e),dq=_e.removeTrailingPathSeparator.bind(_e),fq=_e.addTrailingPathSeparator.bind(_e),_5;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(_5||(_5={}));var W2=Symbol("MicrotaskDelay");function rn(e){return!!e&&typeof e.then=="function"}function gs(e){const t=new it,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new er)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function H5(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function z2(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new er)});e.then(r,i).finally(()=>s.dispose())})}function or(e){return new Promise((t,r)=>{const i=e();rn(i)?i.then(t,r):t(i)})}function W5(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var V2=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},q2=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},G2=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},z5=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===W2?G2(r):q2(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new er),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},qh=class{constructor(e){this.a=new z5(e),this.b=new V2}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},ei=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function ar(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new er)})}):gs(r=>ar(e,r))}function Um(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=te(()=>{clearTimeout(i),r?.delete(s)});return r?.add(s),s}function J2(e,t=i=>!!i,r=null){if(e.length===0)return Promise.resolve(r);let i=e.length;const s=()=>{i=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--i>=0&&t(c)?(s(),n(c)):i===0&&n(r)}).catch(c=>{--i>=0&&(s(),o(c))})})}var Q2=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new D}whenIdle(){return this.size>0?Be.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},Y2=class extends Q2{constructor(){super(1)}},V5=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new sn;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=_e){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=_e){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new Y2;const n=this.f++,o=Be.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Ah),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},q5=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new ta("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=te(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},ms=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},G5=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}},X2=class extends ms{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},Z2=class extends ee{constructor(e,t){super(),this.h=e,this.j=t,this.a=[],this.b=this.B(new ls),this.f=!1,this.g=0}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.h.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.h.maxBufferedWork)return!1}else if(this.pending+e.length-this.h.maxWorkChunkSize>this.h.maxBufferedWork)return!1}for(const r of e)this.a.push(r);const t=Date.now()-this.g;return!this.b.value&&(!this.h.waitThrottleDelayBetweenWorkUnits||t>=this.h.throttleDelay)?this.m():!this.b.value&&this.h.waitThrottleDelayBetweenWorkUnits&&this.r(Math.max(this.h.throttleDelay-t,0)),!0}m(){this.g=Date.now(),this.j(this.a.splice(0,this.h.maxWorkChunkSize)),this.a.length>0&&this.r()}r(e=this.h.throttleDelay){this.b.value=new ms(()=>{this.b.clear(),this.m()},e),this.b.value.schedule()}dispose(){super.dispose(),this.f=!0}},J5,Gh;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Gh=(e,t,r)=>{Z4(()=>{if(i)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:Gh=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},J5=(e,t)=>Gh(globalThis,e,t)})();var K2=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=Gh(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},eA=class extends K2{constructor(e){super(globalThis,e)}};async function tA(e,t,r){let i;for(let s=0;s<r;s++)try{return await e()}catch(n){i=n,await ar(t)}throw i}var Q5;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(Q5||(Q5={}));var sn=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new er)}},nn;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(nn||(nn={}));var Y5;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(Y5||(Y5={}));var ol=class Qr{static fromArray(t){return new Qr(r=>{r.emitMany(t)})}static fromPromise(t){return new Qr(async r=>{r.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Qr(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new Qr(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=Qr.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new D,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await Be.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new Qr(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return Qr.map(this,t)}static filter(t,r){return new Qr(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return Qr.filter(this,t)}static coalesce(t){return Qr.filter(t,r=>!!r)}coalesce(){return Qr.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return Qr.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},jm=class{constructor(e){this.a=new sn,this.b=new ol(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}};function X5(e,t){return new rA(e,t)}var rA=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?mt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let r;switch(e){case"data":r=this.c.data;break;case"end":r=this.c.end;break;case"error":r=this.c.error;break}if(r){const i=r.indexOf(t);i>=0&&r.splice(i,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function iA(e,t){return new Promise((r,i)=>{const s=[];Z5(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function Z5(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}function sA(e,t,r){const i=X5(r);return Z5(e,{onData:s=>i.write(t.data(s)),onError:s=>i.error(t.error?t.error(s):s),onEnd:()=>i.end()}),i}var Jh=typeof Buffer<"u",nA=new mr(()=>new Uint8Array(256)),Bm,_m,J=class ai{static alloc(t){return Jh?new ai(Buffer.allocUnsafe(t)):new ai(new Uint8Array(t))}static wrap(t){return Jh&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new ai(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&Jh?new ai(Buffer.from(t)):(Bm||(Bm=new TextEncoder),new ai(Bm.encode(t)))}static fromByteArray(t){const r=ai.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=ai.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=ai.alloc(this.byteLength);return t.set(this),t}toString(){return Jh?this.buffer.toString():(_m||(_m=new TextDecoder),_m.decode(this.buffer))}slice(t,r){return new ai(this.buffer.subarray(t,r))}set(t,r){if(t instanceof ai)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Qh(this.buffer,t)}writeUInt32BE(t,r){Yh(this.buffer,t,r)}readUInt32LE(t){return lA(this.buffer,t)}writeUInt32LE(t,r){uA(this.buffer,t,r)}readUInt8(t){return hA(this.buffer,t)}writeUInt8(t,r){dA(this.buffer,t,r)}indexOf(t,r=0){return oA(this.buffer,t instanceof ai?t.buffer:t,r)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((r,i)=>r===t.buffer[i])}};function oA(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=nA.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function aA(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function cA(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function Qh(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Yh(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function lA(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function uA(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function hA(e,t){return e[t]}function dA(e,t,r){e[r]=t}function fA(e){return iA(e,t=>J.concat(t))}function pA(e){return sA(e,{data:t=>typeof t=="string"?J.fromString(t):J.wrap(t)},t=>J.concat(t))}function Xh(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return J.wrap(s).slice(0,o)}var gA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Zh({buffer:e},t=!0,r=!1){const i=r?mA:gA;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}function Hm(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function r(s,n){t.push(s,n?.startTime??Date.now())}function i(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:r,getMarks:i}}function vA(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?Hm():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const r of performance.getEntriesByType("mark"))t.push({name:r.name,startTime:Math.round(e+r.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return Hm(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),Hm()}function wA(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=vA()),e.MonacoPerformanceMarks}var K5=wA(globalThis),$t=K5.mark,bA=K5.getMarks;import*as al from"fs";var Kh={};RP(Kh,{Promises:()=>st,RimRafMode:()=>zn,SymlinkSupport:()=>vr,configureFlushOnWrite:()=>Vm,readdirSync:()=>IA,rimrafSync:()=>$A,whenDeleted:()=>DA,writeFileSync:()=>LA});import*as Me from"fs";import{tmpdir as yA}from"os";import{promisify as cl}from"util";var EA=new qc(1e4);function ed(e){return t6(e,"NFC",EA)}var xA=new qc(1e4);function e6(e){return t6(e,"NFD",xA)}var kA=/[^\u0000-\u0080]/;function t6(e,t,r){if(!e)return e;const i=r.get(e);if(i)return i;let s;return kA.test(e)?s=e.normalize(t):s=e,r.set(e,s),s}var zn;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(zn||(zn={}));async function r6(e,t=zn.UNLINK,r){if($5(e))throw new Error("rimraf - will refuse to recursively delete root");return t===zn.UNLINK?Wm(e):SA(e,r)}async function SA(e,t=I2(yA())){try{try{await Me.promises.rename(e,t)}catch(r){return r.code==="ENOENT"?void 0:Wm(e)}Wm(t).catch(r=>{})}catch(r){if(r.code!=="ENOENT")throw r}}async function Wm(e){return Me.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}function $A(e){if($5(e))throw new Error("rimraf - will refuse to recursively delete root");Me.rmSync(e,{recursive:!0,force:!0,maxRetries:3})}async function td(e,t){return i6(await(t?CA(e):Me.promises.readdir(e)))}async function CA(e){try{return await Me.promises.readdir(e,{withFileTypes:!0})}catch(i){console.warn("[node.js fs] readdir with filetypes failed with error: ",i)}const t=[],r=await td(e);for(const i of r){let s=!1,n=!1,o=!1;try{const a=await Me.promises.lstat(Ze(e,i));s=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:i,isFile:()=>s,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function IA(e){return i6(Me.readdirSync(e))}function i6(e){return e.map(t=>typeof t=="string"?Tt?ed(t):t:(t.name=Tt?ed(t.name):t.name,t))}async function PA(e){const t=await td(e),r=[];for(const i of t)await vr.existsDirectory(Ze(e,i))&&r.push(i);return r}function DA(e,t=1e3){return new Promise(r=>{let i=!1;const s=setInterval(()=>{i||(i=!0,Me.access(e,n=>{i=!1,n&&(clearInterval(s),r(void 0))}))},t)})}var vr;(function(e){async function t(s){let n;try{if(n=await Me.promises.lstat(s),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await Me.promises.stat(s),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(Ue&&o.code==="EACCES")try{return{stat:await Me.promises.stat(await Me.promises.readlink(s)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function r(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=r;async function i(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=i})(vr||(vr={}));var AA=new V5;function TA(e,t,r){return AA.queueFor(E.file(e),()=>{const i=s6(r);return new Promise((s,n)=>RA(e,t,i,o=>o?n(o):s()))},Om)}var zm=!0;function Vm(e){zm=e}function RA(e,t,r,i){if(!zm)return Me.writeFile(e,t,{mode:r.mode,flag:r.flag},i);Me.open(e,r.flag,r.mode,(s,n)=>{if(s)return i(s);Me.writeFile(n,t,o=>{if(o)return Me.close(n,()=>i(o));Me.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),Vm(!1)),Me.close(n,c=>i(c))))})})}function LA(e,t,r){const i=s6(r);if(!zm)return Me.writeFileSync(e,t,{mode:i.mode,flag:i.flag});const s=Me.openSync(e,i.flag,i.mode);try{Me.writeFileSync(s,t);try{Me.fdatasyncSync(s)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),Vm(!1)}}finally{Me.closeSync(s)}}function s6(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function NA(e,t,r=6e4){if(e!==t)try{Ue&&typeof r=="number"?await n6(e,t,Date.now(),r):await Me.promises.rename(e,t)}catch(i){if(e.toLowerCase()!==t.toLowerCase()&&i.code==="EXDEV"||e.endsWith("."))await o6(e,t,{preserveSymlinks:!1}),await r6(e,zn.MOVE);else throw i}}async function n6(e,t,r,i,s=0){try{return await Me.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-r>=i)throw console.error(`[node.js fs] rename failed after ${s} retries with error: ${n}`),n;if(s===0){let o=!1;try{const{stat:a}=await vr.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await ar(Math.min(100,s*10)),n6(e,t,r,i,s+1)}}async function o6(e,t,r){return c6(e,t,{root:{source:e,target:t},options:r,handledSourcePaths:new Set})}var a6=511;async function c6(e,t,r){if(r.handledSourcePaths.has(e))return;r.handledSourcePaths.add(e);const{stat:i,symbolicLink:s}=await vr.stat(e);if(s){if(r.options.preserveSymlinks)try{return await MA(e,t,r)}catch{}if(s.dangling)return}return i.isDirectory()?FA(e,t,i.mode&a6,r):OA(e,t,i.mode&a6)}async function FA(e,t,r,i){await Me.promises.mkdir(t,{recursive:!0,mode:r});const s=await td(e);for(const n of s)await c6(Ze(e,n),Ze(t,n),i)}async function OA(e,t,r){await Me.promises.copyFile(e,t),await Me.promises.chmod(t,r)}async function MA(e,t,r){let i=await Me.promises.readlink(e);Wn(i,r.root.source,!yt)&&(i=Ze(r.root.target,i.substr(r.root.source.length+1))),await Me.promises.symlink(i,t)}var st=new class{get read(){return(e,t,r,i,s)=>new Promise((n,o)=>{Me.read(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,r,i,s)=>new Promise((n,o)=>{Me.write(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return cl(Me.fdatasync)}get open(){return cl(Me.open)}get close(){return cl(Me.close)}get realpath(){return cl(Me.realpath)}get ftruncate(){return cl(Me.ftruncate)}async exists(e){try{return await Me.promises.access(e),!0}catch{return!1}}get readdir(){return td}get readDirsInDir(){return PA}get writeFile(){return TA}get rm(){return r6}get rename(){return NA}get copy(){return o6}};async function l6(e){try{return await st.realpath(e)}catch{const r=u6(e);return await al.promises.access(r,al.constants.R_OK),r}}function UA(e){try{return al.realpathSync(e)}catch{const r=u6(e);return al.accessSync(r,al.constants.R_OK),r}}function u6(e){return en(ps(e),wt)}function h6(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n||typeof r=="symbol")throw new Error("not supported");i[s]=e(n,r)}}function d6(e,t,r){let i=null,s=null;if(typeof r.value=="function"?(i="value",s=r.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(i="get",s=r.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;r[i]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[n]}}function rd(e,t,r){return h6((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function jA(e,t,r){return h6((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function BA(e){return JSON.stringify(e,_A)}function f6(e){let t=JSON.parse(e);return t=Qt(t),t}function _A(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Qt(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return E.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof J||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=Qt(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=Qt(e[r],t+1))}return e}var p6;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(p6||(p6={}));function g6(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var m6;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(m6||(m6={}));function v6(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var Vn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(Vn||(Vn={}));function ua(e){let t=0;for(let r=0;;r+=7){const i=e.read(1);if(t|=(i.buffer[0]&127)<<r,!(i.buffer[0]&128))return t}}var HA=on(0);function ha(e,t){if(t===0){e.write(HA);return}let r=0;for(let s=t;s!==0;s=s>>>7)r++;const i=J.alloc(r);for(let s=0;t!==0;s++)i.buffer[s]=t&127,t=t>>>7,t>0&&(i.buffer[s]|=128);e.write(i)}var WA=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},zA=class{constructor(){this.a=[]}get buffer(){return J.concat(this.a)}write(e){this.a.push(e)}},fr;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(fr||(fr={}));function on(e){const t=J.alloc(1);return t.writeUInt8(e,0),t}var qn={Undefined:on(fr.Undefined),String:on(fr.String),Buffer:on(fr.Buffer),VSBuffer:on(fr.VSBuffer),Array:on(fr.Array),Object:on(fr.Object),Uint:on(fr.Int)},VA=typeof Buffer<"u";function qm(e,t){if(typeof t>"u")e.write(qn.Undefined);else if(typeof t=="string"){const r=J.fromString(t);e.write(qn.String),ha(e,r.byteLength),e.write(r)}else if(VA&&Buffer.isBuffer(t)){const r=J.wrap(t);e.write(qn.Buffer),ha(e,r.byteLength),e.write(r)}else if(t instanceof J)e.write(qn.VSBuffer),ha(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(qn.Array),ha(e,t.length);for(const r of t)qm(e,r)}else if(typeof t=="number"&&(t|0)===t)e.write(qn.Uint),ha(e,t);else{const r=J.fromString(JSON.stringify(t));e.write(qn.Object),ha(e,r.byteLength),e.write(r)}}function Gm(e){switch(e.read(1).readUInt8(0)){case fr.Undefined:return;case fr.String:return e.read(ua(e)).toString();case fr.Buffer:return e.read(ua(e)).buffer;case fr.VSBuffer:return e.read(ua(e));case fr.Array:{const r=ua(e),i=[];for(let s=0;s<r;s++)i.push(Gm(e));return i}case fr.Object:return JSON.parse(e.read(ua(e)).toString());case fr.Int:return ua(e)}}var w6;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(w6||(w6={}));var b6=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=Vn.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new D,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(r=>this.s(r)),this.j=t}getChannel(e){const t=this;return{call(r,i,s){return t.a?Promise.reject(new er):t.m(e,r,i,s)},listen(r,i){return t.a?Be.None:t.o(e,r,i)}}}m(e,t,r,i=Xe.None){const s=this.g++,o={id:s,type:100,channelName:e,name:t,arg:r};if(i.isCancellationRequested)return Promise.reject(new er);let a,c;return new Promise((u,h)=>{if(i.isCancellationRequested)return h(new er);const f=()=>{const v=b=>{switch(b.type){case 201:this.f.delete(s),u(b.data);break;case 202:{this.f.delete(s);const x=new Error(b.data.message);x.stack=Array.isArray(b.data.stack)?b.data.stack.join(`
`):b.data.stack,x.name=b.data.name,h(x);break}case 203:this.f.delete(s),h(b.data);break}};this.f.set(s,v),this.p(o)};let p=null;this.b===Vn.Idle?f():(p=gs(v=>this.u()),p.then(()=>{p=null,f()}));const g=()=>{p?(p.cancel(),p=null):this.p({id:s,type:101}),h(new er)};a=i.onCancellationRequested(g),c={dispose:Ph(()=>{g(),a.dispose()})},this.d.add(c)}).finally(()=>{a?.dispose(),this.d.delete(c)})}o(e,t,r){const i=this.g++,n={id:i,type:102,channelName:e,name:t,arg:r};let o=null;const a=new D({onWillAddFirstListener:()=>{const l=()=>{this.d.add(a),this.p(n)};this.b===Vn.Idle?l():(o=gs(u=>this.u()),o.then(()=>{o=null,l()}))},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:i,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(i,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${g6(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,g6(e.type));return}}}q(e,t=void 0){const r=new zA;return qm(r,e),qm(r,t),this.r(r.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new WA(e),r=Gm(t),i=Gm(t),s=r[0];switch(s){case 200:return this.j?.logIncoming(e.byteLength,0,0,v6(s)),this.t({type:r[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,r[1],0,v6(s),i),this.t({type:r[0],id:r[1],data:i})}}t(e){if(e.type===200){this.b=Vn.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return Be.toPromise(this.onDidInitialize)}u(){return this.b===Vn.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),hi(this.d.values()),this.d.clear()}};__decorate([d6],b6.prototype,"onDidInitializePromise",null);function qA(e){let t=!1;return{call(r,i,s){return t?e.call(r,i,s):ar(0).then(()=>t=!0).then(()=>e.call(r,i,s))},listen(r,i){if(t)return e.listen(r,i);const s=new $D;return ar(0).then(()=>t=!0).then(()=>s.input=e.listen(r,i)),s.event}}}var Jm;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)i(h)&&u.set(h,Be.buffer(c[h],!0,void 0,o));return new class{listen(h,f,p){const g=u.get(f);if(g)return g;const v=c[f];if(typeof v=="function"){if(s(f))return v.call(c,p);if(i(f))return u.set(f,Be.buffer(c[f],!0,void 0,o)),u.get(f)}throw new ui(`Event not found: ${f}`)}call(h,f,p){const g=c[f];if(typeof g=="function"){if(!l&&Array.isArray(p))for(let b=0;b<p.length;b++)p[b]=Qt(p[b]);let v=g.apply(c,p);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new ui(`Method not found: ${f}`)}}}e.fromService=t;function r(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):s(l)?function(u){return n.listen(l,u)}:i(l)?n.listen(l):async function(...u){let h;o&&!Dt(o.context)?h=[o.context,...u]:h=u;const f=await n.call(l,h);return a?f:Qt(f)};throw new ui(`Property not found: ${String(l)}`)}})}e.toService=r;function i(n){return n[0]==="o"&&n[1]==="n"&&f5(n.charCodeAt(2))}function s(n){return/^onDynamic/.test(n)&&f5(n.charCodeAt(9))}})(Jm||(Jm={}));var y6;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(y6||(y6={}));var id;(function(e){e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let r=0;function i(n,o){if(!t.has(n)){const a=String(++r);t.set(n,a)}return t.get(n)}function s(n,o,a,c){if(!e.enableDiagnostics)return;const l=i(n,o);if(c instanceof J||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=J.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=s})(id||(id={}));var E6;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(E6||(E6={}));var Qm=null;function an(){return Qm||(Qm=J.alloc(0)),Qm}var x6=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return an();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const r=J.alloc(e);let i=0,s=0;for(;e>0;){const n=this.a[s];if(n.byteLength>e){const o=n.slice(0,e);r.set(o,i),i+=e,t&&(this.a[s]=n.slice(e),this.b-=e),e-=e}else r.set(n,i),i+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):s++,e-=n.byteLength}return r}},k6;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive"})(k6||(k6={}));function S6(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var $6;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})($6||($6={}));var Hi=class{constructor(e,t,r,i){this.type=e,this.id=t,this.ack=r,this.data=i,this.writtenTime=0}get size(){return this.data.byteLength}},C6=class extends ee{constructor(e){super(),this.f=this.B(new D),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new x6,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:S6(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const r=this.g.messageType,i=this.g.id,s=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new Hi(r,i,s,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},I6=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=J.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:S6(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const r=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,r}h(){const e=J.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},Gn=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new D({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},GA=class{constructor(e){this.data=e,this.next=null}},JA=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,r=this.a;for(;r;)e[t++]=r.data,r=r.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new GA(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},QA=class rs{static{this.a=10}static{this.b=null}static getInstance(){return rs.b||(rs.b=new rs),rs.b}constructor(){this.c=[];const t=Date.now();for(let r=0;r<rs.a;r++)this.c[r]=t-1e3*r;setInterval(()=>{for(let r=rs.a;r>=1;r--)this.c[r]=this.c[r-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),r=(1+rs.a)*1e3;let i=0;for(let s=0;s<rs.a;s++)t-this.c[s]<=r&&i++;return 1-i/rs.a}hasHighLoad(){return this.d()>=.5}},Ym=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.v=new Gn,this.onControlMessage=this.v.event,this.w=new Gn,this.onMessage=this.w.event,this.x=new Gn,this.onDidDispose=this.x.event,this.y=new Gn,this.onSocketClose=this.y.event,this.z=new Gn,this.onSocketTimeout=this.z.event,this.t=e.loadEstimator??QA.getInstance(),this.u=e.sendKeepAlive??!0,this.a=!1,this.c=new JA,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.s=new se,this.p=e.socket,this.q=this.s.add(new I6(this.p)),this.r=this.s.add(new C6(this.p)),this.s.add(this.r.onMessage(t=>this.A(t))),this.s.add(this.p.onClose(t=>this.y.fire(t))),e.initialChunk&&this.r.acceptChunk(e.initialChunk),this.u?this.m=setInterval(()=>{this.E()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.s.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new Hi(5,0,0,an());this.q.write(e),this.q.flush()}}sendPause(){const e=new Hi(7,0,0,an());this.q.write(e)}sendResume(){const e=new Hi(8,0,0,an());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.r.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.s.dispose(),this.s=new se,this.v.flushBuffer(),this.y.flushBuffer(),this.z.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.s.add(new I6(this.p)),this.r=this.s.add(new C6(this.p)),this.s.add(this.r.onMessage(r=>this.A(r))),this.s.add(this.p.onClose(r=>this.y.fire(r))),this.r.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new Hi(3,0,this.j,an());this.q.write(e);const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C()}acceptDisconnect(){this.x.fire()}A(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new Hi(6,0,0,an())))}else this.h=e.id,this.k=Date.now(),this.B(),this.w.fire(e.data);break}case 2:{this.v.fire(e.data);break}case 3:break;case 5:{this.x.fire();break}case 6:{const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break}}readEntireBuffer(){return this.r.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const r=new Hi(1,t,this.j,e);this.c.push(r),this.a||(this.q.write(r),this.C())}sendControl(e){const t=new Hi(2,0,0,e);this.q.write(t)}B(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.D();return}this.l=setTimeout(()=>{this.l=null,this.B()},2e3-e+5)}C(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,r=Date.now()-this.r.lastReadTime,i=Date.now()-this.o;if(t>=2e4&&r>=2e4&&i>=2e4&&!this.t.hasHighLoad()){this.o=Date.now(),this.z.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:r});return}const s=Math.max(2e4-t,2e4-r,2e4-i,500);this.g=setTimeout(()=>{this.g=null,this.C()},s)}D(){if(this.h<=this.j)return;this.j=this.h;const e=new Hi(3,0,this.j,an());this.q.write(e)}E(){this.j=this.h;const e=new Hi(9,0,this.j,an());this.q.write(e)}};import"crypto";import"net";import{tmpdir as YA}from"os";import{createDeflateRaw as XA,createInflateRaw as ZA}from"zlib";var Ct=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let r=0;r<256;r++)t.push(r.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,s="";return s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s}}(),KA=3e4,ll=class{traceSocketEvent(e,t){id.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=i=>{if(this.traceSocketEvent("error",{code:i?.code,message:i?.message}),i){if(i.code==="EPIPE")return;mt(i)}},this.socket.on("error",this.a);let r;this.b=i=>{this.traceSocketEvent("close",{hadError:i}),this.f=!1,r&&clearTimeout(r)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,r=setTimeout(()=>e.destroy(),KA)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=r=>{this.traceSocketEvent("read",r),e(J.wrap(r))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=r=>{e({type:0,hadError:r,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;mt(t)}})}catch(t){if(t.code==="EPIPE")return;mt(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const r=()=>{this.socket.off("close",r),this.socket.off("end",r),this.socket.off("error",r),this.socket.off("timeout",r),this.socket.off("drain",r),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",r),this.socket.on("end",r),this.socket.on("error",r),this.socket.on("timeout",r),this.socket.on("drain",r)})}},P6;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(P6||(P6={}));var D6;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(D6||(D6={}));var eT=class extends ee{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,r,i){super(),this.f=this.B(new D),this.g=this.B(new D),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:r?.byteLength||0,recordInflateBytes:i}),this.a=this.B(new tT(this,t,r,i,this.f,(s,n)=>this.m(s,n))),this.B(this.a.onError(s=>{console.error(s),mt(s),this.g.fire({type:0,hadError:!0,error:s})})),this.b=new x6,this.B(this.socket.onData(s=>this.n(s))),this.B(this.socket.onClose(async s=>{this.a.isProcessingReadQueue()&&await Be.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(s)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:r}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let i=2;e.byteLength<126?i+=0:e.byteLength<2**16?i+=2:i+=8;const s=J.alloc(i),n=t?64:0,o=r&15;if(s.writeUInt8(128|n|o,0),e.byteLength<126)s.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){s.writeUInt8(126,1);let a=1;s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}else{s.writeUInt8(127,1);let a=1;s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(e.byteLength>>>24&255,++a),s.writeUInt8(e.byteLength>>>16&255,++a),s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(J.concat([s,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),r=t.readUInt8(0),i=(r&128)>>>7,s=(r&64)>>>6,n=r&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=i,this.j.firstFrameOfMessage&&(this.j.compressed=!!s),this.j.firstFrameOfMessage=!!i,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),r=t.readUInt8(1),i=(r&128)>>>7;let s=r&127,n=1;s===126?s=t.readUInt8(++n)*2**8+t.readUInt8(++n):s===127&&(s=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;i&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=s,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),sT(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await Be.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},tT=class extends ee{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:J.alloc(0)}constructor(e,t,r,i,s,n){super(),this.n=e,this.r=s,this.s=n,this.a=this.B(new D),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new D),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new D),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new rT(this.n,i,r,{windowBits:15})),this.f=this.B(new iT(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const r=await this.w(this.f,e);this.s(r,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((r,i)=>{e.write(t),e.flush(s=>r(s))})}acceptFrame(e,t,r){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:r}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,r){return new Promise((i,s)=>{e.write(t),r&&e.write(J.fromByteArray([0,0,255,255])),e.flush(n=>i(n))})}},rT=class extends ee{get recordedInflateBytes(){return this.j?J.concat(this.f):J.alloc(0)}constructor(e,t,r,i){super(),this.h=e,this.j=t,this.a=this.B(new D),this.onError=this.a.event,this.f=[],this.g=[],this.b=ZA(i),this.b.on("error",s=>{this.h.traceSocketEvent("zlibInflateError",{message:s?.message,code:s?.code}),this.a.fire(s)}),this.b.on("data",s=>{this.h.traceSocketEvent("zlibInflateData",s),this.g.push(J.wrap(s))}),r&&(this.h.traceSocketEvent("zlibInflateInitialWrite",r.buffer),this.b.write(r.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=J.concat(this.g);this.g.length=0,e(t)})}},iT=class extends ee{constructor(e,t){super(),this.g=e,this.a=this.B(new D),this.onError=this.a.event,this.f=[],this.b=XA({windowBits:15}),this.b.on("error",r=>{this.g.traceSocketEvent("zlibDeflateError",{message:r?.message,code:r?.code}),this.a.fire(r)}),this.b.on("data",r=>{this.g.traceSocketEvent("zlibDeflateData",r),this.f.push(J.wrap(r))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=J.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function sT(e,t){if(t===0)return;const r=e.byteLength>>>2;for(let c=0;c<r;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const i=r*4,s=e.byteLength-i,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;s>=1&&e.writeUInt8(e.readUInt8(i)^n,i),s>=2&&e.writeUInt8(e.readUInt8(i+1)^o,i+1),s>=3&&e.writeUInt8(e.readUInt8(i+2)^a,i+2)}var A6=process.env.XDG_RUNTIME_DIR,nT={2:107,1:103};function oT(){const e=Ct();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&A6?A6:YA(),r=Ze(t,`vscode-ipc-${e}.sock`);return aT(r),r}function aT(e){const t=nT[MD];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function Ve(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?Ve(i):i}),t}function T6(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(R6.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!oD(s)&&t.push(s)}}return e}var R6=Object.prototype.hasOwnProperty;function da(e,t){return Xm(e,t,new Set)}function Xm(e,t,r){if(Dt(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Xm(n,t,r));return s}if(bt(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)R6.call(e,n)&&(s[n]=Xm(e[n],t,r));return r.delete(e),s}return e}function vs(e,t,r=!0){return bt(e)?(bt(t)&&Object.keys(t).forEach(i=>{i in e?r&&(bt(e[i])&&bt(t[i])?vs(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function vi(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!vi(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!vi(s,n))return!1;for(r=0;r<s.length;r++)if(!vi(e[s[r]],t[s[r]]))return!1}return!0}function cT(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if(bt(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function lT(e,t){const r=t.toLowerCase(),i=Object.keys(e).find(s=>s.toLowerCase()===r);return i?e[i]:e[t]}function L6(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var N6={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},F6="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function uT(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of F6)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var hT=uT();function O6(e){let t=hT;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var M6=new Qc;M6.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function U6(e,t,r,i,s){if(t=O6(t),s||(s=Ar.first(M6)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),U6(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=dT(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function dT(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var Fr,Zm=globalThis.vscode;if(typeof Zm<"u"&&typeof Zm.context<"u"){const e=Zm.context.configuration();if(e)Fr=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Fr=globalThis._VSCODE_PRODUCT_JSON,aa.VSCODE_DEV&&Object.assign(Fr,{nameShort:`${Fr.nameShort} Dev`,nameLong:`${Fr.nameLong} Dev`,dataFolderName:`${Fr.dataFolderName}-dev`,serverDataFolderName:Fr.serverDataFolderName?`${Fr.serverDataFolderName}-dev`:void 0}),!Fr.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Fr,{version:e.version})}}else Fr={nameShort:"Code",nameLong:"Visual Studio Code",applicationName:"code",win32x64AppId:"{{EA457B21-F73E-494C-ACAB-524FDE069978}",win32arm64AppId:"{{A5270FC5-65AD-483E-AC30-2C276B63D0AC}",win32x64UserAppId:"{{771FD6B0-FA20-440A-A002-3B3BAC16DC50}",win32arm64UserAppId:"{{D9E514E7-1A56-452D-9337-2990C0DC4310}",win32NameVersion:"Microsoft Visual Studio Code",win32DirName:"Microsoft VS Code",win32SetupExeBasename:"VSCodeSetup",win32AppUserModelId:"Microsoft.VisualStudioCode",win32ShellNameShort:"Code",win32MutexName:"vscode",win32RegValueName:"VSCode",darwinCredits:"resources/darwin/Credits.rtf",darwinBundleIdentifier:"com.microsoft.VSCode",darwinExecutable:"VSCode",linuxIconName:"vscode",licenseFileName:"LICENSE.rtf",licenseName:"Multiple, see https://code.visualstudio.com/license",serverGreeting:[],serverLicense:["*","* Visual Studio Code Server","*","* By using the software, you agree to","* the Visual Studio Code Server License Terms (https://aka.ms/vscode-server-license) and","* the Microsoft Privacy Statement (https://privacy.microsoft.com/en-US/privacystatement).","*"],serverLicensePrompt:"Do you accept the terms in the License Agreement (Y/n)?",serverApplicationName:"code-server",urlProtocol:"vscode",dataFolderName:".vscode",serverDataFolderName:".vscode-server",downloadUrl:"https://code.visualstudio.com",updateUrl:"https://update.code.visualstudio.com",webUrl:"https://vscode.dev",webEndpointUrl:"https://main.vscode-cdn.net",webEndpointUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}",nlsCoreBaseUrl:"https://www.vscode-unpkg.net/nls/",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",quality:"stable",extensionsGallery:{nlsBaseUrl:"https://www.vscode-unpkg.net/_lp/",serviceUrl:"https://marketplace.visualstudio.com/_apis/public/gallery",itemUrl:"https://marketplace.visualstudio.com/items",publisherUrl:"https://marketplace.visualstudio.com/publishers",resourceUrlTemplate:"https://{publisher}.vscode-unpkg.net/{publisher}/{name}/{version}/{path}",extensionUrlTemplate:"https://www.vscode-unpkg.net/_gallery/{publisher}/{name}/latest",controlUrl:"https://main.vscode-cdn.net/extensions/marketplace.json"},profileTemplatesUrl:"https://main.vscode-cdn.net/core/profile-templates.json",extensionPublisherOrgs:["microsoft"],trustedExtensionPublishers:["microsoft","github"],extensionRecommendations:{"ms-dotnettools.csdevkit":{onFileOpen:[{pathGlob:"{**/*.cs,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln}",important:!0},{languages:["csharp"],important:!0},{pathGlob:"{**/project.json,**/appsettings.json}"}]},"ms-python.python":{onFileOpen:[{pathGlob:"{**/*.py}",important:!0},{languages:["python"],important:!0},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.jupyter":{onFileOpen:[{pathGlob:"{**/*.py}",contentPattern:"^#\\s*%%$",important:!0,whenInstalled:["ms-python.python"]},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.datawrangler":{onFileOpen:[{pathGlob:"{**/*.ipynb}",contentPattern:"import\\s*pandas|from\\s*pandas",whenInstalled:["ms-toolsai.jupyter"]}]},"golang.Go":{onFileOpen:[{pathGlob:"**/*.go",important:!0},{languages:["go"],important:!0}]},"vscjava.vscode-java-pack":{onFileOpen:[{pathGlob:"{**/*.java}",important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},{languages:["java"],important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}]},"ms-vscode.PowerShell":{onFileOpen:[{pathGlob:"{**/*.ps1,**/*.psd1,**/*.psm1}",important:!0},{languages:["powershell"],important:!0},{pathGlob:"{**/*.ps.config,**/*.ps1.config}"}]},"ms-toolsai.prompty":{onFileOpen:[{pathGlob:"{**/*.prompty}",important:!1}]},"ms-vscode.cpptools-extension-pack":{onFileOpen:[{pathGlob:"{**/*.c,**/*.cpp,**/*.cc,**/.cxx,**/*.hh,**/*.hpp,**/*.hxx,**/*.h}",important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]},{languages:["c","cpp"],important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]}]},"ms-azuretools.vscode-docker":{onFileOpen:[{pathGlob:"{**/dockerfile,**/Dockerfile,**/docker-compose.yml,**/docker-compose.*.yml}",important:!0},{languages:["dockerfile"],important:!0},{pathGlob:"{**/*.cs,**/project.json,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln,**/appsettings.json,**/*.py,**/*.ipynb,**/*.js,**/*.ts,**/package.json}"}]},"vue.volar":{onFileOpen:[{pathGlob:"{**/*.vue}",important:!0},{languages:["vue"],important:!0}]},"ms-vscode.makefile-tools":{onFileOpen:[{pathGlob:"{**/makefile,**/Makefile}",important:!0},{languages:["makefile"],important:!0}]},"ms-vscode.cmake-tools":{onFileOpen:[{pathGlob:"{**/CMakeLists.txt}",important:!0}]},"ms-azure-devops.azure-pipelines":{onFileOpen:[{pathGlob:"{**/azure-pipelines.yaml}",important:!0}]},"msazurermtools.azurerm-vscode-tools":{onFileOpen:[{pathGlob:"{**/azuredeploy.json}",important:!0}]},"ms-vscode-remote.remote-containers":{onFileOpen:[{pathGlob:"{**/devcontainer.json}",important:!0}]},"ms-azuretools.vscode-bicep":{onFileOpen:[{pathGlob:"{**/*.bicep}",important:!0,whenNotInstalled:["ms-azuretools.rad-vscode-bicep"]}]},"svelte.svelte-vscode":{onFileOpen:[{pathGlob:"{**/*.svelte}",important:!0}]},"ms-vscode.vscode-github-issue-notebooks":{onFileOpen:[{pathGlob:"{**/*.github-issues}",important:!0}]},"ms-playwright.playwright":{onFileOpen:[{pathGlob:"{**/*playwright*.config.ts,**/*playwright*.config.js,**/*playwright*.config.mjs}",important:!0}]},"vscjava.vscode-gradle":{onFileOpen:[{pathGlob:"{**/gradlew,**/gradlew.bat,**/build.gradle,**/build.gradle.kts,**/settings.gradle,**/settings.gradle.kts}",important:!0}]},"REditorSupport.r":{onFileOpen:[{pathGlob:"{**/*.r}",important:!0},{languages:["r"],important:!0}]},"firefox-devtools.vscode-firefox-debug":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.es6,**/.babelrc}"}]},"ms-edgedevtools.vscode-edge-devtools":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.css,**/*.html}"}]},"Ionide.Ionide-fsharp":{onFileOpen:[{pathGlob:"{**/*.fsx,**/*.fsi,**/*.fs,**/*.ml,**/*.mli}"}]},"dbaeumer.vscode-eslint":{onFileOpen:[{pathGlob:"{**/*.js,**/*.jsx,**/*.es6,**/.eslintrc.*,**/.eslintrc,**/.babelrc,**/jsconfig.json}"}]},"bmewburn.vscode-intelephense-client":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"xdebug.php-debug":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"rust-lang.rust-analyzer":{onFileOpen:[{pathGlob:"{**/*.rs,**/*.rslib}"}]},"DavidAnson.vscode-markdownlint":{onFileOpen:[{pathGlob:"{**/*.md}"}]},"EditorConfig.EditorConfig":{onFileOpen:[{pathGlob:"{**/.editorconfig}"}]},"HookyQR.beautify":{onFileOpen:[{pathGlob:"{**/.jsbeautifyrc}"}]},"donjayamanne.githistory":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"eamodio.gitlens":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"Shopify.ruby-lsp":{onFileOpen:[{pathGlob:"{**/*.rb,**/*.erb,**/*.reek,**/.fasterer.yml,**/ruby-lint.yml,**/.rubocop.yml}"}]},"DotJoshJohnson.xml":{onFileOpen:[{pathGlob:"{**/*.xml}"}]},"stylelint.vscode-stylelint":{onFileOpen:[{pathGlob:"{**/.stylelintrc,**/stylelint.config.js}"}]},"ms-mssql.mssql":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"mtxr.sqltools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"usqlextpublisher.usql-vscode-ext":{onFileOpen:[{pathGlob:"{**/*.usql}"}]},"ms-vscode.sublime-keybindings":{onFileOpen:[{pathGlob:"{**/.sublime-project,**/.sublime-workspace}"}]},"k--kato.intellij-idea-keybindings":{onFileOpen:[{pathGlob:"{**/.idea}"}]},"christian-kohler.npm-intellisense":{onFileOpen:[{pathGlob:"{**/package.json}"}]},"cake-build.cake-vscode":{onFileOpen:[{pathGlob:"{**/build.cake}"}]},"Angular.ng-template":{onFileOpen:[{pathGlob:"{**/.angular-cli.json,**/angular.json,**/*.ng.html,**/*.ng,**/*.ngml}"}]},"vscjava.vscode-maven":{onFileOpen:[{pathGlob:"**/pom.xml"}]},"ms-azuretools.vscode-azureterraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"HashiCorp.terraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"vsciot-vscode.vscode-arduino":{onFileOpen:[{pathGlob:"**/*.ino"}]},"ms-kubernetes-tools.vscode-kubernetes-tools":{onFileOpen:[{pathGlob:"{**/Chart.yaml}"}]},"Oracle.oracledevtools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"betterthantomorrow.calva":{onFileOpen:[{pathGlob:"{**/*.clj,**/*.cljs}"}]},"vmware.vscode-boot-dev-pack":{onFileOpen:[{pathGlob:"{**/application.properties}"}]},"GitHub.copilot":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.py,**/*.go,**/*.rb,**/*.html,**/*.css,**/*.php,**/*.cpp,**/*.vue,**/*.c,**/*.sql,**/*.java,**/*.cs,**/*.rs,**/*.dart,**/*.ps,**/*.ps1,**/*.tex}"}],onSettingsEditorOpen:{descriptionOverride:"GitHub Copilot is an AI pair programmer tool that helps you write code faster and smarter."}},"GitHub.vscode-github-actions":{onFileOpen:[{pathGlob:"{**/.github/workflows/*.yml}",important:!0}]},"circleci.circleci":{onFileOpen:[{pathGlob:"{**/.circleci/config.yml}"}]},"mechatroner.rainbow-csv":{onFileOpen:[{pathGlob:"**/*.csv",important:!0}]},"tomoki1207.pdf":{onFileOpen:[{pathGlob:"**/*.pdf",important:!0}]},"Redis.redis-for-vscode":{onFileOpen:[{pathGlob:"{**/redis.*,**/redis-server.*,**/redis_*,**/redisinsight.*}",important:!0}]}},keymapExtensionTips:["vscodevim.vim","ms-vscode.sublime-keybindings","ms-vscode.atom-keybindings","ms-vscode.brackets-keybindings","ms-vscode.vs-keybindings","ms-vscode.notepadplusplus-keybindings","k--kato.intellij-idea-keybindings","lfs.vscode-emacs-friendly","alphabotsec.vscode-eclipse-keybindings","alefragnani.delphi-keybindings"],languageExtensionTips:["ms-python.python","ms-vscode.cpptools-extension-pack","ms-dotnettools.csdevkit","ms-toolsai.jupyter","vscjava.vscode-java-pack","ecmel.vscode-html-css","vue.volar","bmewburn.vscode-intelephense-client","dsznajder.es7-react-js-snippets","golang.go","ms-vscode.powershell","dart-code.dart-code","rust-lang.rust-analyzer","Shopify.ruby-lsp","GitHub.copilot"],configBasedExtensionTips:{git:{configPath:".git/config",configName:"Git",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",contentPattern:"^\\s*url\\s*=\\s*https:\\/\\/github\\.com.*$"},"eamodio.gitlens":{name:"GitLens"}}},devContainer:{configPath:".devcontainer/devcontainer.json",configName:"Dev Container",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0}}},maven:{configPath:"pom.xml",configName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},"vmware.vscode-boot-dev-pack":{name:"Spring Boot Extension Pack",isExtensionPack:!0}}},gradle:{configPath:"build.gradle",configName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"github-pull-request":{configPath:".vscode/.github-pull-request.rec",configName:"GitHub",configScheme:"vscode-vfs",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",important:!0}}},"pyproject-formatter":{configPath:"pyproject.toml",configName:"Python Formatter",recommendations:{"ms-python.black-formatter":{name:"Black Formatter",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?black"?\\s*[\\].])|("black\\s*["[(<=>!~;@])'},"ms-python.autopep8":{name:"Autopep8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?autopep8"?\\s*[\\].])|("autopep8\\s*["[(<=>!~;@])'}}},"pep8-formatter":{configPath:".pep8",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8"}}},"python-setup-cgf-formatter":{configPath:"setup.cfg",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"tox-ini-formatter":{configPath:"tox.ini",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"pyproject-linter":{configPath:"pyproject.toml",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?pylint"?\\s*[\\].])|("pylint\\s*["[(<=>!~;@])'},"charliermarsh.ruff":{name:"Ruff",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?ruff"?\\s*[\\].])|("ruff\\s*["[(<=>!~;@])'},"ms-python.mypy-type-checker":{name:"Mypy Type Checker",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?mypy"?\\s*[\\].])|("mypy\\s*["[(<=>!~;@])'},"ms-python.flake8":{name:"Flake8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?flake8"?\\s*[\\].])|("flake8\\s*["[(<=>!~;@])'}}},".pylintrc-linter":{configPath:".pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"pylintrc-linter":{configPath:"pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"mypy-ini-linter":{configPath:".mypy.ini",configName:"Python Linter",recommendations:{"ms-python.mypy-type-checker":{name:"Mypy Type Checker"}}},"tox-ini-linter":{configPath:"tox.ini",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}},".flake8-linter":{configPath:".flake8",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8"}}},"python-setup-cgf-linter":{configPath:"setup.cfg",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}}},exeBasedExtensionTips:{az:{friendlyName:"Azure CLI",windowsPath:"%ProgramFiles(x86)%\\Microsoft SDKs\\Azure\\CLI2\\wbin\\az.cmd",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},azd:{friendlyName:"Azure Dev CLI",windowsPath:"%USERPROFILE%\\AppData\\Local\\Programs\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},"azd-user":{friendlyName:"Azure Dev CLI",windowsPath:"%ProgramFiles%\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},heroku:{friendlyName:"Heroku CLI",windowsPath:"%ProgramFiles%\\Heroku\\bin\\heroku.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"pkosta2005.heroku-command":{name:"heroku-cli"}}},mongo:{friendlyName:"Mongo",windowsPath:"%ProgramFiles%\\MongoDB\\Server\\3.6\\bin\\mongod.exe",recommendations:{"ms-azuretools.vscode-cosmosdb":{name:"Azure Databases"}}},serverless:{friendlyName:"Serverless framework",windowsPath:"%APPDATA%\\npm\\serverless.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},func:{friendlyName:"Azure Function SDK",windowsPath:"%APPDATA%\\npm\\func.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},mysql:{friendlyName:"MySQL",windowsPath:"%ProgramFiles%\\MySQL\\MySQL Server 8.0\\bin\\mysqld.exe",recommendations:{"mtxr.sqltools":{name:"SQLTools"}}},postgres:{friendlyName:"PostgreSQL",windowsPath:"%ProgramFiles%\\PostgreSQL\\11\\bin\\psql.exe",recommendations:{"ms-ossdata.vscode-postgresql":{name:"PostgreSQL"},"mtxr.sqltools":{name:"SQLTools"}}},sqlcmd:{friendlyName:"SQL CLI",recommendations:{"ms-mssql.mssql":{name:"SQL Server (mssql)"}}},now:{friendlyName:"Now CLI",windowsPath:"%APPDATA%\\npm\\now.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"ms-azuretools.vscode-docker":{name:"Docker"}}},docker:{friendlyName:"Docker",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\docker.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker",important:!0},"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},kubectl:{friendlyName:"Kubernetes",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\kubectl.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},ng:{friendlyName:"Angular CLI",windowsPath:"%APPDATA%\\npmexit\\ng.cmd",recommendations:{"johnpapa.Angular2":{name:"Angular Snippets"}}},"create-react-app":{friendlyName:"Create React App",windowsPath:"%APPDATA%\\npm\\create-react-app.cmd",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},"react-native":{friendlyName:"React Native",windowsPath:"%APPDATA%\\npm\\react-native-cli",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},p4:{friendlyName:"Perforce",recommendations:{"slevesque.perforce":{name:"Perforce for VS Code"}}},hg:{friendlyName:"Mercurial",recommendations:{"mrcrowl.hg":{name:"Hg"}}},git:{friendlyName:"Git",windowsPath:"%ProgramFiles%\\Git\\git-bash.exe",recommendations:{"eamodio.gitlens":{name:"GitLens"}}},svn:{friendlyName:"Subversion",windowsPath:"%ProgramFiles%\\TortoiseSVN\\bin\\TortoiseProc.exe",recommendations:{"johnstoncode.svn-scm":{name:"SVN"}}},subl:{friendlyName:"Sublime",windowsPath:"%ProgramFiles%\\Sublime Text3\\sublime_text.exe",recommendations:{"ms-vscode.sublime-keybindings":{name:"Sublime Text Keymap and Settings Importer"}}},atom:{friendlyName:"Atom",windowsPath:"%USERPROFILE%\\AppData\\Local\\atom\\bin\\atom.cmd",recommendations:{"ms-vscode.atom-keybindings":{name:"Atom Keymap"}}},brackets:{friendlyName:"Brackets",windowsPath:"%ProgramFiles(x86)%\\Brackets\\Brackets.exe",recommendations:{"ms-vscode.brackets-keybindings":{name:"Brackets Keymap"}}},notepadplusplus:{friendlyName:"Notepad++",windowsPath:"%ProgramFiles%\\Notepad++\\Notepad++.exe",recommendations:{"ms-vscode.notepadplusplus-keybindings":{name:"Notepad++ keymap"}}},vi:{friendlyName:"VIM",windowsPath:"%ProgramFiles(x86)%\\Vim\\vim80\\gvim.exe",recommendations:{"vscodevim.vim":{name:"Vim"}}},mvn:{friendlyName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},gradle:{friendlyName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"Microsoft Edge":{friendlyName:"Microsoft Edge",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Dev":{friendlyName:"Microsoft Edge Dev",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Dev\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Beta":{friendlyName:"Microsoft Edge Beta",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Beta\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Canary":{friendlyName:"Microsoft Edge Canary",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge SxS\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Mozilla Firefox (x86)":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles(x86)%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition (x86)":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles(x86)%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},cordova:{friendlyName:"Cordova",windowsPath:"%APPDATA%\\npm\\cordova",recommendations:{"msjsdiag.cordova-tools":{name:"Cordova Tools"}}},gcloud:{friendlyName:"Google GCloud CLI",windowsPath:"%ProgramFiles(x86)%\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd",recommendations:{"GoogleCloudTools.cloudcode":{name:"Cloud Code"}}},skaffold:{friendlyName:"Skaffold Code to Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},minikube:{friendlyName:"MiniKube Local Kubernetes Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},podman:{friendlyName:"Podman",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},wsl:{friendlyName:"Windows Subsystem for Linux (WSL)",windowsPath:"%WINDIR%\\system32\\lxss\\LxssManager.dll",important:!0,recommendations:{"ms-vscode-remote.remote-wsl":{name:"WSL",important:!0}}}},webExtensionTips:["tyriar.luna-paint","codespaces-contrib.codeswing","ms-vscode.vscode-github-issue-notebooks","esbenp.prettier-vscode","hediet.vscode-drawio"],virtualWorkspaceExtensionTips:{"vscode-vfs":{friendlyName:"Remote Repositories",extensionId:"ms-vscode.remote-repositories",startEntry:{helpLink:"https://aka.ms/vscode-remote/remote-repositories",startConnectLabel:"Remote Repository",startCommand:"remoteHub.continueOn.openRepository",priority:5}}},remoteExtensionTips:{wsl:{friendlyName:"WSL",extensionId:"ms-vscode-remote.remote-wsl",supportedPlatforms:["Windows","Web"],startEntry:{helpLink:"https://aka.ms/vscode-remote/wsl",startConnectLabel:"WSL",startCommand:"remote-wsl.connect",priority:3}},"ssh-remote":{friendlyName:"Remote - SSH",extensionId:"ms-vscode-remote.remote-ssh",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/ssh",startConnectLabel:"SSH ",startCommand:"opensshremotes.openEmptyWindowInCurrentWindow",priority:1}},"dev-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/containers",startConnectLabel:"Dev Container",startCommand:"remote-containers.reopenInContainer",priority:2}},"attached-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers"},codespaces:{friendlyName:"GitHub Codespaces",extensionId:"github.codespaces",startEntry:{helpLink:"https://aka.ms/vscode-remote-codespaces",startConnectLabel:"GitHub Codespace ",startCommand:"github.codespaces.connect",priority:4}},tunnel:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server",startEntry:{helpLink:"https://aka.ms/remote-tunnels-doc",startConnectLabel:"Tunnel",startCommand:"remote-tunnels.connectCurrentWindowToTunnel",priority:0}}},commandPaletteSuggestedCommandIds:["workbench.action.files.openFile","workbench.action.files.openFileFolder","workbench.action.files.openFolder","workbench.action.remote.showMenu","editor.action.formatDocument","editor.action.commentLine","workbench.action.tasks.runTask","workbench.action.openSettings2","workbench.action.selectTheme","workbench.action.openWalkthrough","workbench.action.openIssueReporter"],extensionKeywords:{md:["Markdown"],js:["JavaScript"],jsx:["JavaScript"],es6:["JavaScript"],html:["Html"],ts:["TypeScript"],tsx:["TypeScript"],css:["CSS"],scss:["SASS"],txt:["Text"],php:["PHP"],php3:["PHP"],php4:["PHP"],ph3:["PHP"],ph4:["PHP"],xml:["XML"],py:["Python"],pyc:["Python"],pyd:["Python"],pyo:["Python"],pyw:["Python"],pyz:["Python"],java:["Java"],class:["Java"],jar:["Java"],c:["c","objective c","objective-c"],m:["objective c","objective-c"],mm:["objective c","objective-c"],cpp:["cpp","c plus plus","c","c++"],cc:["cpp","c plus plus","c","c++"],cxx:["cpp","c plus plus","c++"],hh:["cpp","c plus plus","c++"],hpp:["cpp","c++"],h:["cpp","c plus plus","c++","c","objective c","objective-c"],sql:["sql"],sh:["bash"],bash:["bash"],zsh:["bash","zshell"],cs:["c#","csharp"],csproj:["c#","csharp"],sln:["c#","csharp"],go:["go"],sty:["latex"],tex:["latex"],ps:["powershell"],ps1:["powershell"],rs:["rust"],rslib:["rust"],hs:["haskell"],lhs:["haskell"],scm:["scheme"],ss:["scheme"],clj:["clojure"],cljs:["clojure"],cljc:["clojure"],edn:["clojure"],erl:["erlang"],hrl:["erlang"],scala:["scala"],sc:["scala"],pl:["perl"],pm:["perl"],t:["perl"],pod:["perl"],groovy:["groovy"],swift:["swift"],rb:["ruby"],rbw:["ruby"],jl:["julia"],f:["fortran"],for:["fortran"],f90:["fortran"],f95:["fortran"],coffee:["CoffeeScript"],litcoffee:["CoffeeScript"],yaml:["yaml"],yml:["yaml"],dart:["dart"],json:["json"]},extensionAllowedBadgeProviders:["api.bintray.com","api.travis-ci.com","api.travis-ci.org","app.fossa.io","badge.buildkite.com","badge.fury.io","badge.waffle.io","badgen.net","badges.frapsoft.com","badges.gitter.im","badges.greenkeeper.io","cdn.travis-ci.com","cdn.travis-ci.org","ci.appveyor.com","circleci.com","cla.opensource.microsoft.com","codacy.com","codeclimate.com","codecov.io","coveralls.io","david-dm.org","deepscan.io","dev.azure.com","docs.rs","flat.badgen.net","gemnasium.com","githost.io","gitlab.com","godoc.org","goreportcard.com","img.shields.io","isitmaintained.com","marketplace.visualstudio.com","nodesecurity.io","opencollective.com","snyk.io","travis-ci.com","travis-ci.org","visualstudio.com","vsmarketplacebadge.apphb.com","www.bithound.io","www.versioneye.com"],extensionAllowedBadgeProvidersRegex:["^https:\\/\\/github\\.com\\/[^/]+\\/[^/]+\\/(actions\\/)?workflows\\/.*badge\\.svg"],crashReporter:{productName:"VSCode",companyName:"Microsoft"},appCenter:{"win32-x64":"appcenter://code?aid=a4e3233c-699c-46ec-b4f4-9c2a77254662","win32-arm64":"appcenter://code?aid=3712d786-7cc8-4f11-8b08-cc12eab6d4f7","linux-x64":"appcenter://code?aid=fba07a4d-84bd-4fc8-a125-9640fc8ce171",darwin:"appcenter://code?aid=860d6632-f65b-490b-85a8-3e72944f7774","darwin-arm64":"appcenter://code?aid=be71415d-3893-4ae5-b453-e537b9668a10","darwin-universal":"appcenter://code?aid=de75e3cc-e22f-4f42-a03f-1409c21d8af8"},enableTelemetry:!0,aiConfig:{ariaKey:"5bbf946d11a54f6783919c455abaddaf-fd62977b-c92d-4714-a45d-649d06980372-7168"},msftInternalDomains:["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],documentationUrl:"https://go.microsoft.com/fwlink/?LinkID=533484#vscode",serverDocumentationUrl:"https://aka.ms/vscode-server-doc",releaseNotesUrl:"https://go.microsoft.com/fwlink/?LinkID=533483#vscode",keyboardShortcutsUrlMac:"https://go.microsoft.com/fwlink/?linkid=832143",keyboardShortcutsUrlLinux:"https://go.microsoft.com/fwlink/?linkid=832144",keyboardShortcutsUrlWin:"https://go.microsoft.com/fwlink/?linkid=832145",introductoryVideosUrl:"https://go.microsoft.com/fwlink/?linkid=832146",tipsAndTricksUrl:"https://go.microsoft.com/fwlink/?linkid=852118",newsletterSignupUrl:"https://www.research.net/r/vsc-newsletter",youTubeUrl:"https://aka.ms/vscode-youtube",requestFeatureUrl:"https://go.microsoft.com/fwlink/?LinkID=533482",reportIssueUrl:"https://github.com/Microsoft/vscode/issues/new",reportMarketplaceIssueUrl:"https://github.com/microsoft/vsmarketplace/issues/new",licenseUrl:"https://go.microsoft.com/fwlink/?LinkID=533485",serverLicenseUrl:"https://aka.ms/vscode-server-license",privacyStatementUrl:"https://go.microsoft.com/fwlink/?LinkId=521839",showTelemetryOptOut:!0,npsSurveyUrl:"https://aka.ms/vscode-nps",checksumFailMoreInfoUrl:"https://go.microsoft.com/fwlink/?LinkId=828886",electronRepository:"Microsoft/vscode-electron-prebuilt",nodejsRepository:"Microsoft/vscode-node",settingsSearchUrl:"https://bingsettingssearch.trafficmanager.net/api/Search",surveys:[{surveyId:"cpp.1",surveyUrl:"https://www.research.net/r/VBVV6C6",languageId:"cpp",editCount:10,userProbability:.15},{surveyId:"java.2",surveyUrl:"https://www.research.net/r/vscodejava",languageId:"java",editCount:10,userProbability:.3},{surveyId:"javascript.1",surveyUrl:"https://www.research.net/r/vscode-js",languageId:"javascript",editCount:10,userProbability:.05},{surveyId:"typescript.1",surveyUrl:"https://www.research.net/r/vscode-ts",languageId:"typescript",editCount:10,userProbability:.05},{surveyId:"csharp.1",surveyUrl:"https://www.research.net/r/8KGJ9V8",languageId:"csharp",editCount:10,userProbability:.1}],extensionsEnabledWithApiProposalVersion:["GitHub.copilot-chat","ms-vscode.vscode-commander","ms-vscode.vscode-copilot-vision"],extensionEnabledApiProposals:{"ms-vscode.vscode-selfhost-test-provider":["testObserver","testRelatedCode"],"VisualStudioExptTeam.vscodeintellicode-completions":["inlineCompletionsAdditions"],"ms-vsliveshare.vsliveshare":["contribMenuBarHome","contribShareMenu","contribStatusBarItems","diffCommand","documentFiltersExclusive","fileSearchProvider","findTextInFiles","notebookCellExecutionState","notebookLiveShare","terminalDimensions","terminalDataWriteEvent","textSearchProvider"],"ms-vscode.js-debug":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-toolsai.vscode-ai-remote":["resolvers"],"ms-python.python":["codeActionAI","contribEditorContentMenu","quickPickSortByLabel","portsAttributes","testObserver","quickPickItemTooltip","terminalDataWriteEvent","terminalExecuteCommandEvent","notebookReplDocument","notebookVariableProvider","terminalShellEnv","terminalShellType"],"ms-python.vscode-python-envs":["terminalShellEnv","terminalShellType"],"ms-dotnettools.dotnet-interactive-vscode":["notebookMessaging"],"GitHub.codespaces":["contribEditSessions","contribMenuBarHome","contribRemoteHelp","contribViewsRemote","resolvers","tunnels","terminalDataWriteEvent","treeViewReveal","notebookKernelSource"],"ms-vscode.azure-repos":["extensionRuntime","fileSearchProvider","textSearchProvider"],"ms-vscode.remote-repositories":["canonicalUriProvider","contribEditSessions","contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","contribShareMenu","documentFiltersExclusive","editSessionIdentityProvider","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","shareProvider","scmActionButton","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-vscode-remote.remote-wsl":["resolvers","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode-remote.remote-ssh":["resolvers","tunnels","terminalDataWriteEvent","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode.remote-server":["resolvers","tunnels","contribViewsWelcome"],"ms-vscode.remote-explorer":["contribRemoteHelp","contribViewsRemote","extensionsAny"],"ms-vscode-remote.remote-containers":["contribEditSessions","resolvers","portsAttributes","tunnels","workspaceTrust","terminalDimensions","contribRemoteHelp","contribViewsRemote"],"ms-vscode.js-debug-nightly":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-vscode.lsif-browser":["documentFiltersExclusive"],"ms-vscode.vscode-speech":["speech"],"GitHub.vscode-pull-request-github":["activeComment","codiconDecoration","codeActionRanges","commentingRangeHint","commentReactor","commentReveal","commentThreadApplicability","contribAccessibilityHelpContent","contribCommentEditorActionsMenu","contribCommentPeekContext","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","contribEditorContentMenu","contribMultiDiffEditorMenus","contribShareMenu","diffCommand","quickDiffProvider","shareProvider","tabInputTextMerge","tokenInformation","treeViewMarkdownMessage"],"GitHub.copilot":["inlineCompletionsAdditions"],"GitHub.copilot-nightly":["inlineCompletionsAdditions"],"GitHub.copilot-chat":["interactive","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","chatParticipantAdditions","defaultChatParticipant","embeddings","chatEditing","chatProvider","mappedEditsProvider","aiRelatedInformation","codeActionAI","findTextInFiles","textSearchProvider","textSearchProvider2","activeComment","commentReveal","contribSourceControlInputBoxMenu","contribCommentEditorActionsMenu","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","newSymbolNamesProvider","findFiles2","chatReferenceDiagnostic","extensionsAny","authLearnMore","testObserver","aiTextSearchProvider","chatReadonlyPromptReference","documentFiltersExclusive","chatParticipantPrivate","contribDebugCreateConfiguration","inlineEdit","inlineCompletionsAdditions","chatReferenceBinaryData","languageModelSystem","languageModelCapabilities"],"GitHub.remotehub":["contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","documentFiltersExclusive","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-python.gather":["notebookCellExecutionState"],"ms-python.vscode-pylance":[],"ms-python.debugpy":["contribViewsWelcome","debugVisualization","portsAttributes"],"ms-toolsai.jupyter-renderers":["contribNotebookStaticPreloads"],"ms-toolsai.jupyter":["notebookDeprecated","notebookMessaging","notebookMime","portsAttributes","quickPickSortByLabel","notebookKernelSource","interactiveWindow","notebookControllerAffinityHidden","contribNotebookStaticPreloads","quickPickItemTooltip","notebookExecution","notebookCellExecution","notebookVariableProvider","notebookReplDocument"],"ms-toolsai.tensorboard":["portsAttributes"],"dbaeumer.vscode-eslint":[],"ms-vscode.azure-sphere-tools-ui":["tunnels"],"ms-azuretools.vscode-azureappservice":["terminalDataWriteEvent"],"ms-vscode.anycode":["extensionsAny"],"ms-vscode.cpptools":["terminalDataWriteEvent","chatParticipantAdditions"],"vscjava.vscode-java-pack":[],"ms-dotnettools.csdevkit":["inlineCompletionsAdditions"],"ms-dotnettools.vscodeintellicode-csharp":["inlineCompletionsAdditions"],"microsoft-IsvExpTools.powerplatform-vscode":["fileSearchProvider","textSearchProvider"],"microsoft-IsvExpTools.powerplatform-vscode-preview":["fileSearchProvider","textSearchProvider"],"TeamsDevApp.ms-teams-vscode-extension":["chatParticipantAdditions","languageModelSystem"],"ms-toolsai.datawrangler":[],"ms-vscode.vscode-commander":[],"ms-vscode.vscode-websearchforcopilot":[],"ms-vscode.vscode-copilot-vision":["chatReferenceBinaryData","codeActionAI"],"ms-autodev.vscode-autodev":["chatParticipantAdditions"]},tasConfig:{endpoint:"https://default.exp-tas.com/vscode/ab",telemetryEventName:"query-expfeature",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext"},extensionKind:{"Shan.code-settings-sync":["ui"],"shalldie.background":["ui"],"techer.open-in-browser":["ui"],"CoenraadS.bracket-pair-colorizer-2":["ui"],"CoenraadS.bracket-pair-colorizer":["ui","workspace"],"hiro-sun.vscode-emacs":["ui","workspace"],"hnw.vscode-auto-open-markdown-preview":["ui","workspace"],"wayou.vscode-todo-highlight":["ui","workspace"],"aaron-bond.better-comments":["ui","workspace"],"vscodevim.vim":["ui"],"ollyhayes.colmak-vim":["ui"]},extensionPointExtensionKind:{typescriptServerPlugins:["workspace"]},extensionSyncedKeys:{"ritwickdey.liveserver":["liveServer.setup.version"]},extensionVirtualWorkspacesSupport:{"esbenp.prettier-vscode":{default:!1},"msjsdiag.debugger-for-chrome":{default:!1},"redhat.java":{default:!1},"HookyQR.beautify":{default:!1},"ritwickdey.LiveServer":{default:!1},"VisualStudioExptTeam.vscodeintellicode":{default:!1},"octref.vetur":{default:!1},"formulahendry.code-runner":{default:!1},"xdebug.php-debug":{default:!1},"ms-mssql.mssql":{default:!1},"christian-kohler.path-intellisense":{default:!1},"eg2.tslint":{default:!1},"eg2.vscode-npm-script":{default:!1},"donjayamanne.githistory":{default:!1},"Zignd.html-css-class-completion":{default:!1},"christian-kohler.npm-intellisense":{default:!1},"EditorConfig.EditorConfig":{default:!1},"austin.code-gnu-global":{default:!1},"johnpapa.Angular2":{default:!1},"ms-vscode.vscode-typescript-tslint-plugin":{default:!1},"DotJoshJohnson.xml":{default:!1},"techer.open-in-browser":{default:!1},"tht13.python":{default:!1},"bmewburn.vscode-intelephense-client":{default:!1},"Angular.ng-template":{default:!1},"xdebug.php-pack":{default:!1},"dbaeumer.jshint":{default:!1},"yzhang.markdown-all-in-one":{default:!1},"Dart-Code.flutter":{default:!1},"streetsidesoftware.code-spell-checker":{default:!1},"rebornix.Ruby":{default:!1},"ms-vscode.sublime-keybindings":{default:!1},"mitaki28.vscode-clang":{default:!1},"steoates.autoimport":{default:!1},"donjayamanne.python-extension-pack":{default:!1},"shd101wyy.markdown-preview-enhanced":{default:!1},"mikestead.dotenv":{default:!1},"pranaygp.vscode-css-peek":{default:!1},"ikappas.phpcs":{default:!1},"platformio.platformio-ide":{default:!1},"jchannon.csharpextensions":{default:!1},"gruntfuggly.todo-tree":{default:!1}},linkProtectionTrustedDomains:["https://*.visualstudio.com","https://*.microsoft.com","https://aka.ms","https://*.gallerycdn.vsassets.io","https://*.github.com","https://login.microsoftonline.com","https://*.vscode.dev","https://*.github.dev","https://gh.io","https://portal.azure.com","https://raw.githubusercontent.com","https://private-user-images.githubusercontent.com","https://avatars.githubusercontent.com"],trustedExtensionAuthAccess:{github:["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot"],"github-enterprise":["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot"],microsoft:["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"microsoft-sovereign-cloud":["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azure-github-copilot","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"__GitHub.copilot-chat":["ms-azuretools.vscode-azure-github-copilot"]},trustedExtensionProtocolHandlers:["vscode.git","vscode.github-authentication","vscode.microsoft-authentication"],inheritAuthAccountPreference:{"github.copilot":["github.copilot-chat"]},auth:{loginUrl:"https://login.microsoftonline.com/common/oauth2/authorize",tokenUrl:"https://login.microsoftonline.com/common/oauth2/token",redirectUrl:"https://vscode-redirect.azurewebsites.net/",clientId:"aebc6443-996d-45c2-90f0-388ff96faa56"},"configurationSync.store":{url:"https://vscode-sync.trafficmanager.net/",stableUrl:"https://vscode-sync.trafficmanager.net/",insidersUrl:"https://vscode-sync-insiders.trafficmanager.net/",canSwitch:!1,authenticationProviders:{github:{scopes:["user:email"]},microsoft:{scopes:["openid","profile","email","offline_access"]}}},"editSessions.store":{url:"https://vscode-sync.trafficmanager.net/",authenticationProviders:{microsoft:{scopes:["openid","profile","email","offline_access"]},github:{scopes:["user:email"]}}},tunnelServerQualities:{stable:{serverApplicationName:"code-server"},exploration:{serverApplicationName:"code-server-exploration"},insider:{serverApplicationName:"code-server-insiders"}},tunnelApplicationName:"code-tunnel",tunnelApplicationConfig:{editorWebUrl:"https://vscode.dev",extension:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server"},authenticationProviders:{github:{scopes:["user:email","read:org"]},microsoft:{scopes:["46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2/.default","profile","openid"]}}},win32TunnelServiceMutex:"vscode-tunnelservice",win32TunnelMutex:"vscode-tunnel",commonlyUsedSettings:["files.autoSave","editor.fontSize","editor.fontFamily","GitHub.copilot.manageExtension","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"],aiGeneratedWorkspaceTrust:{title:"This workspace was generated by GitHub Copilot",checkboxText:"Trust the contents of all files in this workspace",trustOption:"Yes, I trust the contents",dontTrustOption:"No, I don't trust the contents",startupTrustRequestLearnMore:"If you don't trust the contents of the files generated by GitHub Copilot, we recommend continuing in restricted mode. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more. "},defaultChatAgent:{extensionId:"GitHub.copilot",chatExtensionId:"GitHub.copilot-chat",documentationUrl:"https://aka.ms/github-copilot-overview",termsStatementUrl:"https://aka.ms/github-copilot-terms-statement",privacyStatementUrl:"https://aka.ms/github-copilot-privacy-statement",skusDocumentationUrl:"https://aka.ms/github-copilot-plans",publicCodeMatchesUrl:"https://aka.ms/github-copilot-match-public-code",manageSettingsUrl:"https://aka.ms/github-copilot-settings",managePlanUrl:"https://aka.ms/github-copilot-manage-plan",upgradePlanUrl:"https://aka.ms/github-copilot-upgrade-plan",providerId:"github",providerName:"GitHub",enterpriseProviderId:"github-enterprise",enterpriseProviderName:"GHE.com",providerSetting:"github.copilot.advanced.authProvider",providerUriSetting:"github-enterprise.uri",providerScopes:[["user:email"],["read:user"],["read:user","user:email","repo","workflow"]],entitlementUrl:"https://api.github.com/copilot_internal/user",entitlementSignupLimitedUrl:"https://api.github.com/copilot_internal/subscribe_limited_user"},chatParticipantRegistry:"https://main.vscode-cdn.net/extensions/chat.json",builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.97.1",sha256:"977dd854805547702e312e176f68a1b142fa123f228258f47f0964560ad32496",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],version:"1.98.2",commit:"ddc367ed5c8936efe395cffeec279b04ffd7db78",date:"2025-03-12T13:32:45.399Z"},Object.keys(Fr).length===0&&Object.assign(Fr,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var j6=Fr,B6;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(B6||(B6={}));var fT=8,pT=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Ge=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return nd(e,t)}compute(e,t,r){return r}},sd=class{constructor(e,t){this.newValue=e,this.didChange=t}};function nd(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new sd(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Bi(e,t);return new sd(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=nd(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new sd(e,r)}var Jn=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return nd(e,t)}validate(e){return this.defaultValue}},fa=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return nd(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function Q(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var Ee=class extends fa{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return Q(e,this.defaultValue)}};function gT(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var je=class sI extends fa{static clampedInt(t,r,i,s){return gT(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return sI.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Wi=class nI extends fa{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(nI.float(t,this.defaultValue))}},wr=class oI extends fa{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return oI.string(t,this.defaultValue)}};function Ke(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var et=class extends fa{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return Ke(e,this.defaultValue,this.c)}},ul=class extends Ge{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function mT(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var vT=class extends Ge{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(315,null),d(316,null),d(317,null)],default:"auto",tags:["accessibility"],description:d(318,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},wT=class extends Ge{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(319,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(320,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Q(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Q(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},_6;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(_6||(_6={}));function bT(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var wi;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(wi||(wi={}));function H6(e){switch(e){case"line":return wi.Line;case"block":return wi.Block;case"underline":return wi.Underline;case"line-thin":return wi.LineThin;case"block-outline":return wi.BlockOutline;case"underline-thin":return wi.UnderlineThin}}var yT=class extends Jn{constructor(){super(148)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(116)&&i.push("showUnused"),t.get(145)&&i.push("showDeprecated"),i.join(" ")}},ET=class extends Ee{constructor(){super(38,"emptySelectionClipboard",!0,{description:d(321,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},xT=class extends Ge{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(322,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(323,null),d(324,null),d(325,null)],description:d(326,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(327,null),d(328,null),d(329,null)],description:d(330,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(331,null),included:Tt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(332,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(333,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(334,null),d(335,null)],description:d(336,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(337,null),d(338,null)],description:d(339,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Q(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ke(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ke(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Q(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Q(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Q(t.loop,this.defaultValue.loop),history:Ke(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Ke(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},kT=class Fc extends Ge{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",Fc.OFF,{anyOf:[{type:"boolean",description:d(340,null)},{type:"string",description:d(341,null)}],description:d(342,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Fc.OFF:t==="true"?Fc.ON:t:t?Fc.ON:Fc.OFF}},ST=class Oc extends Ge{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",Oc.OFF,{anyOf:[{type:"boolean",description:d(343,null)},{type:"string",description:d(344,null)}],description:d(345,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Oc.OFF:t==="true"?Oc.TRANSLATE:t:t?Oc.TRANSLATE:Oc.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},$T=class extends Jn{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},CT=class extends Jn{constructor(){super(147)}compute(e,t,r){return e.inputMode==="overtype"?t.get(84):t.get(28)}},IT=class extends Jn{constructor(){super(156)}compute(e,t){return typeof globalThis.EditContext=="function"&&e.accessibilitySupport!==2&&t.get(37)}},PT=class extends fa{constructor(){super(54,"fontSize",bs.fontSize,{type:"number",minimum:6,maximum:100,default:bs.fontSize,description:d(346,null)})}validate(e){const t=Wi.float(e,this.defaultValue);return t===0?bs.fontSize:Wi.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},DT=class Mc extends Ge{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",bs.fontWeight,{anyOf:[{type:"number",minimum:Mc.d,maximum:Mc.e,errorMessage:d(347,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Mc.c}],default:bs.fontWeight,description:d(348,null)})}validate(t){return t==="normal"||t==="bold"?t:String(je.clampedInt(t,bs.fontWeight,Mc.d,Mc.e))}},AT=class extends Ge{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(349,null),d(350,null),d(351,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(352,null)},"editor.gotoLocation.multipleDefinitions":{description:d(353,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(354,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(355,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(356,null),...t},"editor.gotoLocation.multipleReferences":{description:d(357,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:d(358,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:d(359,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:d(360,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:d(361,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:d(362,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Ke(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Ke(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Ke(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Ke(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Ke(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Ke(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Ke(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:wr.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:wr.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:wr.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:wr.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:wr.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:wr.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},TT=class extends Ge{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(363,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(364,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(365,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(366,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(367,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),delay:je.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Q(t.sticky,this.defaultValue.sticky),hidingDelay:je.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Q(t.above,this.defaultValue.above)}}},W6;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(W6||(W6={}));var RT=class Xg extends Jn{constructor(){super(151)}compute(t,r,i){return Xg.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const p=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,b=t.verticalScrollbarWidth,x=t.viewLineCount,k=t.remainingWidth,I=t.isViewportWrapping,A=h?2:3;let R=Math.floor(n*s);const _=R/n;let q=!1,z=!1,U=A*f,oe=f/n,le=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:ce,extraLinesBeforeFirstLine:be,extraLinesBeyondLastLine:de,desiredRatio:tt,minimapLineCount:Ye}=Xg.computeContainedMinimapLineCount({viewLineCount:x,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(x/Ye>1)q=!0,z=!0,f=1,U=1,oe=f/n;else{let Nt=!1,Zt=f+1;if(g==="fit"){const at=Math.ceil((be+x+de)*U);I&&a&&k<=r.stableFitRemainingWidth?(Nt=!0,Zt=r.stableFitMaxMinimapScale):Nt=at>R}if(g==="fill"||Nt){q=!0;const at=f;U=Math.min(c*n,Math.max(1,Math.floor(1/tt))),I&&a&&k<=r.stableFitRemainingWidth&&(Zt=r.stableFitMaxMinimapScale),f=Math.min(Zt,Math.max(1,Math.floor(U/A))),f>at&&(le=Math.min(2,f/at)),oe=f/n/le,R=Math.ceil(Math.max(ce,be+x+de)*U),I?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=k,r.stableFitMaxMinimapScale=f):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const me=Math.floor(p*oe),qe=Math.min(me,Math.max(0,Math.floor((k-b-2)*oe/(l+oe)))+fT);let G=Math.floor(n*qe);const B=G/n;G=Math.floor(G*le);const Z=h?1:2,H=v==="left"?0:i-qe-b;return{renderMinimap:Z,minimapLeft:H,minimapWidth:qe,minimapHeightIsEditorHeight:q,minimapIsSampling:z,minimapScale:f,minimapLineHeight:U,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:R,minimapCanvasOuterWidth:B,minimapCanvasOuterHeight:_}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(142),f=h==="inherit"?t.get(141):h,p=f==="inherit"?t.get(137):f,g=t.get(140),v=r.isDominatedByLongLines,b=t.get(59),x=t.get(69).renderType!==0,k=t.get(70),I=t.get(110),A=t.get(88),R=t.get(74),_=t.get(108),q=_.verticalScrollbarSize,z=_.verticalHasArrows,U=_.arrowSize,oe=_.horizontalScrollbarSize,le=t.get(45),me=t.get(115)!=="never";let qe=t.get(67);le&&me&&(qe+=16);let G=0;if(x){const Qs=Math.max(o,k);G=Math.round(Qs*c)}let B=0;b&&(B=n*r.glyphMarginDecorationLaneCount);let Z=0,H=Z+B,ce=H+G,be=ce+qe;const de=i-B-G-qe;let tt=!1,Ye=!1,Mt=-1;f==="inherit"&&v?(tt=!0,Ye=!0):p==="on"||p==="bounded"?Ye=!0:p==="wordWrapColumn"&&(Mt=g);const Nt=Xg.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:I,paddingTop:A.top,paddingBottom:A.bottom,minimap:R,verticalScrollbarWidth:q,viewLineCount:u,remainingWidth:de,isViewportWrapping:Ye},r.memory||new pT);Nt.renderMinimap!==0&&Nt.minimapLeft===0&&(Z+=Nt.minimapWidth,H+=Nt.minimapWidth,ce+=Nt.minimapWidth,be+=Nt.minimapWidth);const Zt=de-Nt.minimapWidth,at=Math.max(1,Math.floor((Zt-q-2)/a)),lr=z?U:0;return Ye&&(Mt=Math.max(1,at),p==="bounded"&&(Mt=Math.min(Mt,g))),{width:i,height:s,glyphMarginLeft:Z,glyphMarginWidth:B,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:H,lineNumbersWidth:G,decorationsLeft:ce,decorationsWidth:qe,contentLeft:be,contentWidth:Zt,minimap:Nt,viewportColumn:at,isWordWrapMinified:tt,isViewportWrapping:Ye,wrappingColumn:Mt,verticalScrollbarWidth:q,horizontalScrollbarHeight:oe,overviewRuler:{top:lr,width:q,height:s-2*lr,right:0}}}},LT=class extends Ge{constructor(){super(144,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(368,null),d(369,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(370,null)}})}validate(e){return Ke(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},ws;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(ws||(ws={}));var NT=class extends Ge{constructor(){const e={enabled:ws.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[ws.Off,ws.OnCode,ws.On],default:e.enabled,enumDescriptions:[d(371,null),d(372,null),d(373,null)],description:d(374,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Ke(e.enabled,this.defaultValue.enabled,[ws.Off,ws.OnCode,ws.On])}}},FT=class extends Ge{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(120,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(375,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(376,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(377,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(378,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),maxLineCount:je.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Ke(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Q(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},OT=class extends Ge{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(146,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(379,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(380,null),d(381,null,Tt?"Ctrl+Option":"Ctrl+Alt"),d(382,null,Tt?"Ctrl+Option":"Ctrl+Alt"),d(383,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(384,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(385,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(386,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(387,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Ke(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:je.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:wr.string(t.fontFamily,this.defaultValue.fontFamily),padding:Q(t.padding,this.defaultValue.padding),maximumLength:je.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},MT=class extends Ge{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):je.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?je.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},UT=class extends Wi{constructor(){super(68,"lineHeight",bs.lineHeight,e=>Wi.clamp(e,0,150),{markdownDescription:d(388,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},jT=class extends Ge{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(389,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(390,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(391,null),d(392,null),d(393,null)],default:e.size,description:d(394,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(395,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(396,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(397,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(398,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(399,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(400,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(401,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(402,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(403,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(404,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let r=this.defaultValue.markSectionHeaderRegex;const i=e.markSectionHeaderRegex;if(typeof i=="string")try{new RegExp(i,"d"),r=i}catch{}return{enabled:Q(t.enabled,this.defaultValue.enabled),autohide:Q(t.autohide,this.defaultValue.autohide),size:Ke(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ke(t.side,this.defaultValue.side,["right","left"]),showSlider:Ke(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Q(t.renderCharacters,this.defaultValue.renderCharacters),scale:je.clampedInt(t.scale,1,1,3),maxColumn:je.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Q(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Q(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:r,sectionHeaderFontSize:Wi.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Wi.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function BT(e){return e==="ctrlCmd"?Tt?"metaKey":"ctrlKey":"altKey"}var _T=class extends Ge{constructor(){super(88,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(405,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(406,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:je.clampedInt(t.top,0,0,1e3),bottom:je.clampedInt(t.bottom,0,0,1e3)}}},HT=class extends Ge{constructor(){const e={enabled:!0,cycle:!0};super(90,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(407,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(408,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),cycle:Q(t.cycle,this.defaultValue.cycle)}}},WT=class extends Jn{constructor(){super(149)}compute(e,t,r){return e.pixelRatio}},zT=class extends Ge{constructor(){super(92,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},VT=class extends Ge{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(409,null),d(410,null),d(411,null)]}];super(94,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(412,null)},comments:{anyOf:t,default:e.comments,description:d(413,null)},other:{anyOf:t,default:e.other,description:d(414,null)}},default:e,markdownDescription:d(415,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=Ke(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=Ke(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=Ke(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},z6;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(z6||(z6={}));var qT=class extends Ge{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(416,null),d(417,null),d(418,null),d(419,null)],default:"on",description:d(420,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},GT=class extends Ge{constructor(){const e=[],t={type:"number",description:d(421,null)};super(107,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(422,null),format:"color-hex"}}}]},default:e,description:d(423,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:je.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:je.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},JT=class extends Ge{constructor(){super(97,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function V6(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var QT=class extends Ge{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(108,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(424,null),d(425,null),d(426,null)],default:"auto",description:d(427,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(428,null),d(429,null),d(430,null)],default:"auto",description:d(431,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(432,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(433,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(434,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(435,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=je.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=je.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:je.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:V6(t.vertical,this.defaultValue.vertical),horizontal:V6(t.horizontal,this.defaultValue.horizontal),useShadows:Q(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Q(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Q(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Q(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Q(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:je.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:je.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Q(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Q(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},bi="inUntrustedWorkspace",Qn={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},YT=class extends Ge{constructor(){const e={nonBasicASCII:bi,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:bi,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(130,"unicodeHighlight",e,{[Qn.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bi],default:e.nonBasicASCII,description:d(436,null)},[Qn.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(437,null)},[Qn.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(438,null)},[Qn.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bi],default:e.includeComments,description:d(439,null)},[Qn.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bi],default:e.includeStrings,description:d(440,null)},[Qn.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(441,null),additionalProperties:{type:"boolean"}},[Qn.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(442,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(vi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(vi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new sd(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:pa(t.nonBasicASCII,bi,[!0,!1,bi]),invisibleCharacters:Q(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Q(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:pa(t.includeComments,bi,[!0,!1,bi]),includeStrings:pa(t.includeStrings,bi,[!0,!1,bi]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},XT=class extends Ge{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1,edits:{enabled:!0,showCollapsed:!1,useMixedLinesDiff:"forStableInsertions",useInterleavedLinesDiff:"never",renderSideBySide:"auto",useGutterIndicator:!0,codeShifting:!0,useMultiLineGhostText:!0}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(443,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(444,null),d(445,null),d(446,null)],description:d(447,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(448,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(449,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(450,null)},"editor.inlineSuggest.edits.codeShifting":{type:"boolean",default:e.edits.codeShifting,description:d(451,null),tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(452,null),enum:["auto","never"],enumDescriptions:[d(453,null),d(454,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(455,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),mode:Ke(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Ke(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Q(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Q(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:wr.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Q(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:Q(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:Q(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),useMixedLinesDiff:Ke(t.edits?.useMixedLinesDiff,this.defaultValue.edits.useMixedLinesDiff,["never","whenPossible","forStableInsertions","afterJumpWhenPossible"]),codeShifting:Q(t.edits?.codeShifting,this.defaultValue.edits.codeShifting),renderSideBySide:Ke(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useInterleavedLinesDiff:Ke(t.edits?.useInterleavedLinesDiff,this.defaultValue.edits.useInterleavedLinesDiff,["never","always","afterJump"]),useGutterIndicator:Q(t.edits?.useGutterIndicator,this.defaultValue.edits.useGutterIndicator),useMultiLineGhostText:Q(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)}}}},ZT=class extends Ge{constructor(){const e={enabled:N6.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:N6.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(456,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(457,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Q(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},KT=class extends Ge{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(458,null),d(459,null),d(460,null)],default:e.bracketPairs,description:d(461,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(462,null),d(463,null),d(464,null)],default:e.bracketPairsHorizontal,description:d(465,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(466,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(467,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(468,null),d(469,null),d(470,null)],default:e.highlightActiveIndentation,description:d(471,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:pa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:pa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Q(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Q(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:pa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function pa(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var eR=class extends Ge{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(123,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(472,null),d(473,null)],default:e.insertMode,description:d(474,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(475,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(476,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(477,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(478,null),d(479,null),d(480,null),d(481,null)],default:e.selectionMode,markdownDescription:d(482,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(483,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(484,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(485,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(486,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(487,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(488,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(489,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(514,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(515,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(516,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(517,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(518,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(519,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ke(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Q(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Q(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Q(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Q(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Ke(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Q(t.showIcons,this.defaultValue.showIcons),showStatusBar:Q(t.showStatusBar,this.defaultValue.showStatusBar),preview:Q(t.preview,this.defaultValue.preview),previewMode:Ke(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Q(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Q(t.showMethods,this.defaultValue.showMethods),showFunctions:Q(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Q(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Q(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Q(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Q(t.showFields,this.defaultValue.showFields),showVariables:Q(t.showVariables,this.defaultValue.showVariables),showClasses:Q(t.showClasses,this.defaultValue.showClasses),showStructs:Q(t.showStructs,this.defaultValue.showStructs),showInterfaces:Q(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Q(t.showModules,this.defaultValue.showModules),showProperties:Q(t.showProperties,this.defaultValue.showProperties),showEvents:Q(t.showEvents,this.defaultValue.showEvents),showOperators:Q(t.showOperators,this.defaultValue.showOperators),showUnits:Q(t.showUnits,this.defaultValue.showUnits),showValues:Q(t.showValues,this.defaultValue.showValues),showConstants:Q(t.showConstants,this.defaultValue.showConstants),showEnums:Q(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Q(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Q(t.showKeywords,this.defaultValue.showKeywords),showWords:Q(t.showWords,this.defaultValue.showWords),showColors:Q(t.showColors,this.defaultValue.showColors),showFiles:Q(t.showFiles,this.defaultValue.showFiles),showReferences:Q(t.showReferences,this.defaultValue.showReferences),showFolders:Q(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Q(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Q(t.showSnippets,this.defaultValue.showSnippets),showUsers:Q(t.showUsers,this.defaultValue.showUsers),showIssues:Q(t.showIssues,this.defaultValue.showIssues)}}},tR=class extends Ge{constructor(){super(118,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(520,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(521,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Q(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Q(e.selectSubwords,this.defaultValue.selectSubwords)}}},rR=class extends Ge{constructor(){const e=[];super(135,"wordSegmenterLocales",e,{anyOf:[{description:d(522,null),type:"string"},{description:d(523,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},q6;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(q6||(q6={}));var iR=class extends Ge{constructor(){super(143,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(524,null),d(525,null),d(526,null),d(527,null)],description:d(528,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},sR=class extends Jn{constructor(){super(152)}compute(e,t,r){const i=t.get(151);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},nR=class extends Ge{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(529,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(530,null),enum:["afterDrop","never"],enumDescriptions:[d(531,null),d(532,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showDropSelector:Ke(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},oR=class extends Ge{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(89,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(533,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(534,null),enum:["afterPaste","never"],enumDescriptions:[d(535,null),d(536,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showPasteSelector:Ke(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},aR="Consolas, 'Courier New', monospace",cR="Menlo, Monaco, 'Courier New', monospace",lR="'Droid Sans Mono', 'monospace', monospace",bs={fontFamily:Tt?cR:yt?lR:aR,fontWeight:"normal",fontSize:Tt?12:14,lineHeight:0,letterSpacing:0},uR=[];function T(e){return uR[e.id]=e,e}var G6;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=84]="overtypeCursorStyle",e[e.overtypeOnPaste=85]="overtypeOnPaste",e[e.overviewRulerBorder=86]="overviewRulerBorder",e[e.overviewRulerLanes=87]="overviewRulerLanes",e[e.padding=88]="padding",e[e.pasteAs=89]="pasteAs",e[e.parameterHints=90]="parameterHints",e[e.peekWidgetDefaultFocus=91]="peekWidgetDefaultFocus",e[e.placeholder=92]="placeholder",e[e.definitionLinkOpensInPeek=93]="definitionLinkOpensInPeek",e[e.quickSuggestions=94]="quickSuggestions",e[e.quickSuggestionsDelay=95]="quickSuggestionsDelay",e[e.readOnly=96]="readOnly",e[e.readOnlyMessage=97]="readOnlyMessage",e[e.renameOnType=98]="renameOnType",e[e.renderControlCharacters=99]="renderControlCharacters",e[e.renderFinalNewline=100]="renderFinalNewline",e[e.renderLineHighlight=101]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=102]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=103]="renderValidationDecorations",e[e.renderWhitespace=104]="renderWhitespace",e[e.revealHorizontalRightPadding=105]="revealHorizontalRightPadding",e[e.roundedSelection=106]="roundedSelection",e[e.rulers=107]="rulers",e[e.scrollbar=108]="scrollbar",e[e.scrollBeyondLastColumn=109]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=110]="scrollBeyondLastLine",e[e.scrollPredominantAxis=111]="scrollPredominantAxis",e[e.selectionClipboard=112]="selectionClipboard",e[e.selectionHighlight=113]="selectionHighlight",e[e.selectOnLineNumbers=114]="selectOnLineNumbers",e[e.showFoldingControls=115]="showFoldingControls",e[e.showUnused=116]="showUnused",e[e.snippetSuggestions=117]="snippetSuggestions",e[e.smartSelect=118]="smartSelect",e[e.smoothScrolling=119]="smoothScrolling",e[e.stickyScroll=120]="stickyScroll",e[e.stickyTabStops=121]="stickyTabStops",e[e.stopRenderingLineAfter=122]="stopRenderingLineAfter",e[e.suggest=123]="suggest",e[e.suggestFontSize=124]="suggestFontSize",e[e.suggestLineHeight=125]="suggestLineHeight",e[e.suggestOnTriggerCharacters=126]="suggestOnTriggerCharacters",e[e.suggestSelection=127]="suggestSelection",e[e.tabCompletion=128]="tabCompletion",e[e.tabIndex=129]="tabIndex",e[e.unicodeHighlighting=130]="unicodeHighlighting",e[e.unusualLineTerminators=131]="unusualLineTerminators",e[e.useShadowDOM=132]="useShadowDOM",e[e.useTabStops=133]="useTabStops",e[e.wordBreak=134]="wordBreak",e[e.wordSegmenterLocales=135]="wordSegmenterLocales",e[e.wordSeparators=136]="wordSeparators",e[e.wordWrap=137]="wordWrap",e[e.wordWrapBreakAfterCharacters=138]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=139]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=140]="wordWrapColumn",e[e.wordWrapOverride1=141]="wordWrapOverride1",e[e.wordWrapOverride2=142]="wordWrapOverride2",e[e.wrappingIndent=143]="wrappingIndent",e[e.wrappingStrategy=144]="wrappingStrategy",e[e.showDeprecated=145]="showDeprecated",e[e.inlayHints=146]="inlayHints",e[e.effectiveCursorStyle=147]="effectiveCursorStyle",e[e.editorClassName=148]="editorClassName",e[e.pixelRatio=149]="pixelRatio",e[e.tabFocusMode=150]="tabFocusMode",e[e.layoutInfo=151]="layoutInfo",e[e.wrappingInfo=152]="wrappingInfo",e[e.defaultColorDecorators=153]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=154]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=155]="inlineCompletionsAccessibilityVerbose",e[e.effectiveExperimentalEditContextEnabled=156]="effectiveExperimentalEditContextEnabled"})(G6||(G6={}));var kq={acceptSuggestionOnCommitCharacter:T(new Ee(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(537,null)})),acceptSuggestionOnEnter:T(new et(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(538,null),""],markdownDescription:d(539,null)})),accessibilitySupport:T(new vT),accessibilityPageSize:T(new je(3,"accessibilityPageSize",500,1,1073741824,{description:d(540,null),tags:["accessibility"]})),ariaLabel:T(new wr(4,"ariaLabel",d(541,null))),ariaRequired:T(new Ee(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:T(new Ee(8,"screenReaderAnnounceInlineSuggestion",!0,{description:d(542,null),tags:["accessibility"]})),autoClosingBrackets:T(new et(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(543,null),d(544,null),""],description:d(545,null)})),autoClosingComments:T(new et(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(546,null),d(547,null),""],description:d(548,null)})),autoClosingDelete:T(new et(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(549,null),""],description:d(550,null)})),autoClosingOvertype:T(new et(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(551,null),""],description:d(552,null)})),autoClosingQuotes:T(new et(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(553,null),d(554,null),""],description:d(555,null)})),autoIndent:T(new ul(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],mT,{enumDescriptions:[d(556,null),d(557,null),d(558,null),d(559,null),d(560,null)],description:d(561,null)})),automaticLayout:T(new Ee(13,"automaticLayout",!1)),autoSurround:T(new et(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(562,null),d(563,null),d(564,null),""],description:d(565,null)})),bracketPairColorization:T(new ZT),bracketPairGuides:T(new KT),stickyTabStops:T(new Ee(121,"stickyTabStops",!1,{description:d(566,null)})),codeLens:T(new Ee(17,"codeLens",!0,{description:d(567,null)})),codeLensFontFamily:T(new wr(18,"codeLensFontFamily","",{description:d(568,null)})),codeLensFontSize:T(new je(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(569,null)})),colorDecorators:T(new Ee(20,"colorDecorators",!0,{description:d(570,null)})),colorDecoratorActivatedOn:T(new et(154,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(571,null),d(572,null),d(573,null)],description:d(574,null)})),colorDecoratorsLimit:T(new je(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(575,null)})),columnSelection:T(new Ee(22,"columnSelection",!1,{description:d(576,null)})),comments:T(new wT),contextmenu:T(new Ee(24,"contextmenu",!0)),copyWithSyntaxHighlighting:T(new Ee(25,"copyWithSyntaxHighlighting",!0,{description:d(577,null)})),cursorBlinking:T(new ul(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],bT,{description:d(578,null)})),cursorSmoothCaretAnimation:T(new et(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(579,null),d(580,null),d(581,null)],description:d(582,null)})),cursorStyle:T(new ul(28,"cursorStyle",wi.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],H6,{description:d(583,null)})),overtypeCursorStyle:T(new ul(84,"overtypeCursorStyle",wi.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],H6,{description:d(584,null)})),cursorSurroundingLines:T(new je(29,"cursorSurroundingLines",0,0,1073741824,{description:d(585,null)})),cursorSurroundingLinesStyle:T(new et(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(586,null),d(587,null)],markdownDescription:d(588,null)})),cursorWidth:T(new je(31,"cursorWidth",0,0,1073741824,{markdownDescription:d(589,null)})),disableLayerHinting:T(new Ee(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:T(new Ee(33,"disableMonospaceOptimizations",!1)),domReadOnly:T(new Ee(34,"domReadOnly",!1)),dragAndDrop:T(new Ee(35,"dragAndDrop",!0,{description:d(590,null)})),emptySelectionClipboard:T(new ET),dropIntoEditor:T(new nR),experimentalEditContextEnabled:T(new Ee(37,"experimentalEditContextEnabled",j6.quality!=="stable",{description:d(591,null),included:$m||i5||Y4})),stickyScroll:T(new FT),experimentalGpuAcceleration:T(new et(39,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(592,null),d(593,null)],description:d(594,null)})),experimentalWhitespaceRendering:T(new et(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(595,null),d(596,null),d(597,null)],description:d(598,null)})),extraEditorClassName:T(new wr(41,"extraEditorClassName","")),fastScrollSensitivity:T(new Wi(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(599,null)})),find:T(new xT),fixedOverflowWidgets:T(new Ee(44,"fixedOverflowWidgets",!1)),folding:T(new Ee(45,"folding",!0,{description:d(600,null)})),foldingStrategy:T(new et(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(601,null),d(602,null)],description:d(603,null)})),foldingHighlight:T(new Ee(47,"foldingHighlight",!0,{description:d(604,null)})),foldingImportsByDefault:T(new Ee(48,"foldingImportsByDefault",!1,{description:d(605,null)})),foldingMaximumRegions:T(new je(49,"foldingMaximumRegions",5e3,10,65e3,{description:d(606,null)})),unfoldOnClickAfterEndOfLine:T(new Ee(50,"unfoldOnClickAfterEndOfLine",!1,{description:d(607,null)})),fontFamily:T(new wr(51,"fontFamily",bs.fontFamily,{description:d(608,null)})),fontInfo:T(new $T),fontLigatures2:T(new kT),fontSize:T(new PT),fontWeight:T(new DT),fontVariations:T(new ST),formatOnPaste:T(new Ee(57,"formatOnPaste",!1,{description:d(609,null)})),formatOnType:T(new Ee(58,"formatOnType",!1,{description:d(610,null)})),glyphMargin:T(new Ee(59,"glyphMargin",!0,{description:d(611,null)})),gotoLocation:T(new AT),hideCursorInOverviewRuler:T(new Ee(61,"hideCursorInOverviewRuler",!1,{description:d(612,null)})),hover:T(new TT),inDiffEditor:T(new Ee(63,"inDiffEditor",!1)),letterSpacing:T(new Wi(65,"letterSpacing",bs.letterSpacing,e=>Wi.clamp(e,-5,20),{description:d(613,null)})),lightbulb:T(new NT),lineDecorationsWidth:T(new MT),lineHeight:T(new UT),lineNumbers:T(new qT),lineNumbersMinChars:T(new je(70,"lineNumbersMinChars",5,1,300)),linkedEditing:T(new Ee(71,"linkedEditing",!1,{description:d(614,null)})),links:T(new Ee(72,"links",!0,{description:d(615,null)})),matchBrackets:T(new et(73,"matchBrackets","always",["always","near","never"],{description:d(616,null)})),minimap:T(new jT),mouseStyle:T(new et(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:T(new Wi(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(617,null)})),mouseWheelZoom:T(new Ee(77,"mouseWheelZoom",!1,{markdownDescription:d(Tt?618:619,null)})),multiCursorMergeOverlapping:T(new Ee(78,"multiCursorMergeOverlapping",!0,{description:d(620,null)})),multiCursorModifier:T(new ul(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],BT,{markdownEnumDescriptions:[d(621,null),d(622,null)],markdownDescription:d(623,null)})),multiCursorPaste:T(new et(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(624,null),d(625,null)],markdownDescription:d(626,null)})),multiCursorLimit:T(new je(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(627,null)})),occurrencesHighlight:T(new et(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(628,null),d(629,null),d(630,null)],markdownDescription:d(631,null)})),occurrencesHighlightDelay:T(new je(83,"occurrencesHighlightDelay",0,0,2e3,{description:d(632,null),tags:["preview"]})),overtypeOnPaste:T(new Ee(85,"overtypeOnPaste",!0,{description:d(633,null)})),overviewRulerBorder:T(new Ee(86,"overviewRulerBorder",!0,{description:d(634,null)})),overviewRulerLanes:T(new je(87,"overviewRulerLanes",3,0,3)),padding:T(new _T),pasteAs:T(new oR),parameterHints:T(new HT),peekWidgetDefaultFocus:T(new et(91,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(635,null),d(636,null)],description:d(637,null)})),placeholder:T(new zT),definitionLinkOpensInPeek:T(new Ee(93,"definitionLinkOpensInPeek",!1,{description:d(638,null)})),quickSuggestions:T(new VT),quickSuggestionsDelay:T(new je(95,"quickSuggestionsDelay",10,0,1073741824,{description:d(639,null)})),readOnly:T(new Ee(96,"readOnly",!1)),readOnlyMessage:T(new JT),renameOnType:T(new Ee(98,"renameOnType",!1,{description:d(640,null),markdownDeprecationMessage:d(641,null)})),renderControlCharacters:T(new Ee(99,"renderControlCharacters",!0,{description:d(642,null),restricted:!0})),renderFinalNewline:T(new et(100,"renderFinalNewline",yt?"dimmed":"on",["off","on","dimmed"],{description:d(643,null)})),renderLineHighlight:T(new et(101,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(644,null)],description:d(645,null)})),renderLineHighlightOnlyWhenFocus:T(new Ee(102,"renderLineHighlightOnlyWhenFocus",!1,{description:d(646,null)})),renderValidationDecorations:T(new et(103,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:T(new et(104,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(647,null),d(648,null),d(649,null),""],description:d(650,null)})),revealHorizontalRightPadding:T(new je(105,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:T(new Ee(106,"roundedSelection",!0,{description:d(651,null)})),rulers:T(new GT),scrollbar:T(new QT),scrollBeyondLastColumn:T(new je(109,"scrollBeyondLastColumn",4,0,1073741824,{description:d(652,null)})),scrollBeyondLastLine:T(new Ee(110,"scrollBeyondLastLine",!0,{description:d(653,null)})),scrollPredominantAxis:T(new Ee(111,"scrollPredominantAxis",!0,{description:d(654,null)})),selectionClipboard:T(new Ee(112,"selectionClipboard",!0,{description:d(655,null),included:yt})),selectionHighlight:T(new Ee(113,"selectionHighlight",!0,{description:d(656,null)})),selectOnLineNumbers:T(new Ee(114,"selectOnLineNumbers",!0)),showFoldingControls:T(new et(115,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(657,null),d(658,null),d(659,null)],description:d(660,null)})),showUnused:T(new Ee(116,"showUnused",!0,{description:d(661,null)})),showDeprecated:T(new Ee(145,"showDeprecated",!0,{description:d(662,null)})),inlayHints:T(new OT),snippetSuggestions:T(new et(117,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(663,null),d(664,null),d(665,null),d(666,null)],description:d(667,null)})),smartSelect:T(new tR),smoothScrolling:T(new Ee(119,"smoothScrolling",!1,{description:d(668,null)})),stopRenderingLineAfter:T(new je(122,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:T(new eR),inlineSuggest:T(new XT),inlineCompletionsAccessibilityVerbose:T(new Ee(155,"inlineCompletionsAccessibilityVerbose",!1,{description:d(669,null)})),suggestFontSize:T(new je(124,"suggestFontSize",0,0,1e3,{markdownDescription:d(670,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:T(new je(125,"suggestLineHeight",0,0,1e3,{markdownDescription:d(671,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:T(new Ee(126,"suggestOnTriggerCharacters",!0,{description:d(672,null)})),suggestSelection:T(new et(127,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(673,null),d(674,null),d(675,null)],description:d(676,null)})),tabCompletion:T(new et(128,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(677,null),d(678,null),d(679,null)],description:d(680,null)})),tabIndex:T(new je(129,"tabIndex",0,-1,1073741824)),unicodeHighlight:T(new YT),unusualLineTerminators:T(new et(131,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(681,null),d(682,null),d(683,null)],description:d(684,null)})),useShadowDOM:T(new Ee(132,"useShadowDOM",!0)),useTabStops:T(new Ee(133,"useTabStops",!0,{description:d(685,null)})),wordBreak:T(new et(134,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(686,null),d(687,null)],description:d(688,null)})),wordSegmenterLocales:T(new rR),wordSeparators:T(new wr(136,"wordSeparators",F6,{description:d(689,null)})),wordWrap:T(new et(137,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(690,null),d(691,null),d(692,null),d(693,null)],description:d(694,null)})),wordWrapBreakAfterCharacters:T(new wr(138,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:T(new wr(139,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:T(new je(140,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(695,null)})),wordWrapOverride1:T(new et(141,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:T(new et(142,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:T(new CT),editorClassName:T(new yT),defaultColorDecorators:T(new et(153,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(696,null),d(697,null),d(698,null)],description:d(699,null)})),pixelRatio:T(new WT),tabFocusMode:T(new Ee(150,"tabFocusMode",!1,{markdownDescription:d(700,null)})),layoutInfo:T(new RT),wrappingInfo:T(new sR),wrappingIndent:T(new iR),wrappingStrategy:T(new LT),effectiveExperimentalEditContextEnabled:T(new IT)},J6=class aI{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++aI.count}},Q6=[];function O(e){const t=new J6(e);return Q6[t.nid]=t,t}function od(e){return Q6[e].sid}var zr=class{constructor(e){this.value=e}},Y6;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Y6||(Y6={}));var X6;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(X6||(X6={}));var Z6;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Z6||(Z6={}));var K6;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(K6||(K6={}));var eE;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(eE||(eE={}));var tE;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(tE||(tE={}));var rE;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(rE||(rE={}));var Km;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Km||(Km={}));var Sq=class cI{static{this.a=0}static mixin(t){return t._id=cI.a++,t}},iE;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(iE||(iE={}));var sE;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(sE||(sE={}));var nE;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(nE||(nE={}));var Y={MainThreadAuthentication:O("MainThreadAuthentication"),MainThreadBulkEdits:O("MainThreadBulkEdits"),MainThreadLanguageModels:O("MainThreadLanguageModels"),MainThreadEmbeddings:O("MainThreadEmbeddings"),MainThreadChatAgents2:O("MainThreadChatAgents2"),MainThreadCodeMapper:O("MainThreadCodeMapper"),MainThreadLanguageModelTools:O("MainThreadChatSkills"),MainThreadClipboard:O("MainThreadClipboard"),MainThreadCommands:O("MainThreadCommands"),MainThreadComments:O("MainThreadComments"),MainThreadConfiguration:O("MainThreadConfiguration"),MainThreadConsole:O("MainThreadConsole"),MainThreadDebugService:O("MainThreadDebugService"),MainThreadDecorations:O("MainThreadDecorations"),MainThreadDiagnostics:O("MainThreadDiagnostics"),MainThreadDialogs:O("MainThreadDiaglogs"),MainThreadDocuments:O("MainThreadDocuments"),MainThreadDocumentContentProviders:O("MainThreadDocumentContentProviders"),MainThreadTextEditors:O("MainThreadTextEditors"),MainThreadEditorInsets:O("MainThreadEditorInsets"),MainThreadEditorTabs:O("MainThreadEditorTabs"),MainThreadErrors:O("MainThreadErrors"),MainThreadTreeViews:O("MainThreadTreeViews"),MainThreadDownloadService:O("MainThreadDownloadService"),MainThreadLanguageFeatures:O("MainThreadLanguageFeatures"),MainThreadLanguages:O("MainThreadLanguages"),MainThreadLogger:O("MainThreadLogger"),MainThreadMessageService:O("MainThreadMessageService"),MainThreadOutputService:O("MainThreadOutputService"),MainThreadProgress:O("MainThreadProgress"),MainThreadQuickDiff:O("MainThreadQuickDiff"),MainThreadQuickOpen:O("MainThreadQuickOpen"),MainThreadStatusBar:O("MainThreadStatusBar"),MainThreadSecretState:O("MainThreadSecretState"),MainThreadStorage:O("MainThreadStorage"),MainThreadSpeech:O("MainThreadSpeechProvider"),MainThreadTelemetry:O("MainThreadTelemetry"),MainThreadTerminalService:O("MainThreadTerminalService"),MainThreadTerminalShellIntegration:O("MainThreadTerminalShellIntegration"),MainThreadWebviews:O("MainThreadWebviews"),MainThreadWebviewPanels:O("MainThreadWebviewPanels"),MainThreadWebviewViews:O("MainThreadWebviewViews"),MainThreadCustomEditors:O("MainThreadCustomEditors"),MainThreadUrls:O("MainThreadUrls"),MainThreadUriOpeners:O("MainThreadUriOpeners"),MainThreadProfileContentHandlers:O("MainThreadProfileContentHandlers"),MainThreadWorkspace:O("MainThreadWorkspace"),MainThreadFileSystem:O("MainThreadFileSystem"),MainThreadFileSystemEventService:O("MainThreadFileSystemEventService"),MainThreadExtensionService:O("MainThreadExtensionService"),MainThreadSCM:O("MainThreadSCM"),MainThreadSearch:O("MainThreadSearch"),MainThreadShare:O("MainThreadShare"),MainThreadTask:O("MainThreadTask"),MainThreadWindow:O("MainThreadWindow"),MainThreadLabelService:O("MainThreadLabelService"),MainThreadNotebook:O("MainThreadNotebook"),MainThreadNotebookDocuments:O("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:O("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:O("MainThreadNotebookKernels"),MainThreadNotebookRenderers:O("MainThreadNotebookRenderers"),MainThreadInteractive:O("MainThreadInteractive"),MainThreadTheming:O("MainThreadTheming"),MainThreadTunnelService:O("MainThreadTunnelService"),MainThreadManagedSockets:O("MainThreadManagedSockets"),MainThreadTimeline:O("MainThreadTimeline"),MainThreadTesting:O("MainThreadTesting"),MainThreadLocalization:O("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:O("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:O("MainThreadAiEmbeddingVector")},re={ExtHostCodeMapper:O("ExtHostCodeMapper"),ExtHostCommands:O("ExtHostCommands"),ExtHostConfiguration:O("ExtHostConfiguration"),ExtHostDiagnostics:O("ExtHostDiagnostics"),ExtHostDebugService:O("ExtHostDebugService"),ExtHostDecorations:O("ExtHostDecorations"),ExtHostDocumentsAndEditors:O("ExtHostDocumentsAndEditors"),ExtHostDocuments:O("ExtHostDocuments"),ExtHostDocumentContentProviders:O("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:O("ExtHostDocumentSaveParticipant"),ExtHostEditors:O("ExtHostEditors"),ExtHostTreeViews:O("ExtHostTreeViews"),ExtHostFileSystem:O("ExtHostFileSystem"),ExtHostFileSystemInfo:O("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:O("ExtHostFileSystemEventService"),ExtHostLanguages:O("ExtHostLanguages"),ExtHostLanguageFeatures:O("ExtHostLanguageFeatures"),ExtHostQuickOpen:O("ExtHostQuickOpen"),ExtHostQuickDiff:O("ExtHostQuickDiff"),ExtHostStatusBar:O("ExtHostStatusBar"),ExtHostShare:O("ExtHostShare"),ExtHostExtensionService:O("ExtHostExtensionService"),ExtHostLogLevelServiceShape:O("ExtHostLogLevelServiceShape"),ExtHostTerminalService:O("ExtHostTerminalService"),ExtHostTerminalShellIntegration:O("ExtHostTerminalShellIntegration"),ExtHostSCM:O("ExtHostSCM"),ExtHostSearch:O("ExtHostSearch"),ExtHostTask:O("ExtHostTask"),ExtHostWorkspace:O("ExtHostWorkspace"),ExtHostWindow:O("ExtHostWindow"),ExtHostWebviews:O("ExtHostWebviews"),ExtHostWebviewPanels:O("ExtHostWebviewPanels"),ExtHostCustomEditors:O("ExtHostCustomEditors"),ExtHostWebviewViews:O("ExtHostWebviewViews"),ExtHostEditorInsets:O("ExtHostEditorInsets"),ExtHostEditorTabs:O("ExtHostEditorTabs"),ExtHostProgress:O("ExtHostProgress"),ExtHostComments:O("ExtHostComments"),ExtHostSecretState:O("ExtHostSecretState"),ExtHostStorage:O("ExtHostStorage"),ExtHostUrls:O("ExtHostUrls"),ExtHostUriOpeners:O("ExtHostUriOpeners"),ExtHostProfileContentHandlers:O("ExtHostProfileContentHandlers"),ExtHostOutputService:O("ExtHostOutputService"),ExtHostLabelService:O("ExtHostLabelService"),ExtHostNotebook:O("ExtHostNotebook"),ExtHostNotebookDocuments:O("ExtHostNotebookDocuments"),ExtHostNotebookEditors:O("ExtHostNotebookEditors"),ExtHostNotebookKernels:O("ExtHostNotebookKernels"),ExtHostNotebookRenderers:O("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:O("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:O("ExtHostInteractive"),ExtHostChatAgents2:O("ExtHostChatAgents"),ExtHostLanguageModelTools:O("ExtHostChatSkills"),ExtHostChatProvider:O("ExtHostChatProvider"),ExtHostSpeech:O("ExtHostSpeech"),ExtHostEmbeddings:O("ExtHostEmbeddings"),ExtHostAiRelatedInformation:O("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:O("ExtHostAiEmbeddingVector"),ExtHostTheming:O("ExtHostTheming"),ExtHostTunnelService:O("ExtHostTunnelService"),ExtHostManagedSockets:O("ExtHostManagedSockets"),ExtHostAuthentication:O("ExtHostAuthentication"),ExtHostTimeline:O("ExtHostTimeline"),ExtHostTesting:O("ExtHostTesting"),ExtHostTelemetry:O("ExtHostTelemetry"),ExtHostLocalization:O("ExtHostLocalization")};function oE(e){return e.toJSON()}var hR=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:oE(E.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:oE(E.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:E.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},$q=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function aE(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?E.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof J)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=aE(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function hl(e,t){const r=aE(e,t,!1,0);return r===null?e:r}var cE=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):mt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},dR=class extends cE{constructor(){super(),this.h=!0,this.i=new er}},lE;function e1(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var t1="$$ref$$",fR={[t1]:-1};function uE(e,t=null,r=!1){const i=[];return{jsonString:(r?e1:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return fR;if(typeof o=="object"){if(o instanceof J){const a=i.push(o)-1;return{[t1]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function hE(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[t1];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function dE(e,t){return JSON.stringify(e,t)}function pR(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var fE;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(fE||(fE={}));var pE;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(pE||(pE={}));var gR=()=>{},mR=Symbol.for("rpcProtocol"),vR=Symbol.for("rpcProxy"),wR=class qy extends ee{static{lE=mR}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[lE]=!0,this.b=this.B(new D),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=pR(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=J6.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new ms(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(zc())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+qy.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+qy.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?hl(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===vR?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=Rt.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=ti.deserializeRequestJSONArgs(i);this.g&&(c=hl(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=ti.deserializeRequestMixedArgs(i);this.g&&(c=hl(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=ti.deserializeReplyOKJSON(i);this.g&&(o=hl(o,this.g)),this.O(r,n,o);break}case 10:{const o=ti.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=ti.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=ti.deserializeReplyErrError(i);this.g&&(o=hl(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${od(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new it;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=gR;this.u[a]=l;const u=ti.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const f=ti.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(f.byteLength,r,1,"reply:",h),this.c.send(f)},h=>{delete this.u[a];const f=ti.serializeReplyErr(r,h);this.f?.logOutgoing(f.byteLength,r,1,"replyErr:",h),this.c.send(f)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+od(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+od(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new dR;let s=null;if(i.length>0&&Xe.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(zc());const n=ti.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new cE,l=new se;s&&l.add(s.onCancellationRequested(()=>{const h=ti.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new bR(c,l),this.F(o);const u=ti.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${od(t)}.${r}(`,i),this.c.send(u),c}},bR=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Rt=class Gy{static alloc(t,r,i){const s=new Gy(J.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new Gy(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new zr(hE(o,a,null));break}case 4:r[i]=void 0;break}return r}},gE;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(gE||(gE={}));var ti=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof J||e[t]instanceof zr||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof J)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof zr){const{jsonString:o,referencedBuffers:a}=uE(n.value,t);r[i]={type:3,value:J.fromString(o),buffers:a}}else r[i]={type:1,value:J.fromString(dE(n,t))}}return{type:1,args:r}}return{type:0,args:dE(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=J.fromString(r),o=J.fromString(i);let a=0;a+=Rt.sizeUInt8(),a+=Rt.sizeShortString(n),a+=Rt.sizeLongString(o);const c=Rt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=J.fromString(r);let o=0;o+=Rt.sizeUInt8(),o+=Rt.sizeShortString(n),o+=Rt.sizeMixedArray(i);const a=Rt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return Rt.alloc(5,e,0).buffer}static serializeCancel(e){return Rt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof J)return this.e(e,t);if(t instanceof zr){const{jsonString:i,referencedBuffers:s}=uE(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,e1(t,r))}static d(e){return Rt.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=Rt.sizeVSBuffer(t);const i=Rt.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=J.fromString(t);let i=0;i+=Rt.sizeLongString(r);const s=Rt.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=J.fromString(t);let s=0;s+=Rt.sizeUInt32,s+=Rt.sizeLongString(i);for(const o of r)s+=Rt.sizeVSBuffer(o);const n=Rt.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new zr(hE(i,s,t))}static serializeReplyErr(e,t){const r=t?e1(ea(t),null):void 0;if(typeof r!="string")return this.h(e);const i=J.fromString(r);let s=0;s+=Rt.sizeLongString(i);const n=Rt.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Rt.alloc(12,e,0).buffer}},mE;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(mE||(mE={}));var vE;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(vE||(vE={}));var yi;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(yi||(yi={}));var ad=V("instantiationService");function yR(e,t,r){t[yi.DI_TARGET]===t?t[yi.DI_DEPENDENCIES].push({id:e,index:r}):(t[yi.DI_DEPENDENCIES]=[{id:e,index:r}],t[yi.DI_TARGET]=t)}function V(e){if(yi.serviceIds.has(e))return yi.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");yR(t,r,s)};return t.toString=()=>e,yi.serviceIds.set(e,t),t}function Cq(e){return e}function r1(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var ER=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],wE;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(wE||(wE={}));var bE;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(bE||(bE={}));var Je=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return fi(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},Yn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Je.toKey(e))}delete(e){return this.c.delete(Je.toKey(e))}has(e){return this.c.has(Je.toKey(e))}},ys=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Je.toKey(e))}get(e){return this.c.get(Je.toKey(e))}has(e){return this.c.has(Je.toKey(e))}set(e,t){this.c.set(Je.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},yE=class extends Error{constructor(e,t,r){super(`Error in extension ${Je.toKey(e)}: ${r??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},Iq=V("IBuiltinExtensionsScannerService");function i1(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,xE(e),EE(e.stack)||EE(e.stacktrace)):xE(e)}function EE(e){return Array.isArray(e)?e.join(`
`):e}function xE(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function zi(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const r=Pt(e),i=zi(r[0],t);return r.length>1?d(114,null,i,r.length):i}if(Pe(e))return e;if(e.detail){const r=e.detail;if(r.error)return i1(r.error,t);if(r.exception)return i1(r.exception,t)}return e.stack?i1(e,t):e.message?e.message:d(115,null)}function Es(e){return s1(e,0)}function s1(e,t){switch(typeof e){case"object":return e===null?xs(349,t):Array.isArray(e)?kR(e,t):SR(e,t);case"string":return kE(e,t);case"boolean":return xR(e,t);case"number":return xs(e,t);case"undefined":return xs(937,t);default:return xs(617,t)}}function xs(e,t){return(t<<5)-t+e|0}function xR(e,t){return xs(e?433:863,t)}function kE(e,t){t=xs(149417,t);for(let r=0,i=e.length;r<i;r++)t=xs(e.charCodeAt(r),t);return t}function kR(e,t){return t=xs(104579,t),e.reduce((r,i)=>s1(i,r),t)}function SR(e,t){return t=xs(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=kE(i,r),s1(e[i],r)),t)}var SE;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(SE||(SE={}));function n1(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function dl(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var Pq=class lI{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(_h(o))if(a+1<r){const l=t.charCodeAt(a+1);Hh(l)?(a++,c=Am(o,l)):c=65533}else{n=o;break}else Hh(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),dl(this.h)+dl(this.l)+dl(this.m)+dl(this.n)+dl(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=lI.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,n1(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=n1(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=n1(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},$E;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})($E||($E={}));function o1(...e){switch(e.length){case 1:return d(1784,null,e[0]);case 2:return d(1785,null,e[0],e[1]);case 3:return d(1786,null,e[0],e[1],e[2]);default:return}}var $R=d(1787,null),CR=d(1788,null),fl=class Jy{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw mm(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(o1("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(o1("&&"));break;case 124:this.h(124)?this.k(16):this.l(o1("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=Jy.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l($R);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(CR);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&Jy.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Yt=new Map;Yt.set("false",!1),Yt.set("true",!0),Yt.set("isMac",Tt),Yt.set("isLinux",yt),Yt.set("isWindows",Ue),Yt.set("isWeb",tl),Yt.set("isMacNative",Tt&&!tl),Yt.set("isEdge",i5),Yt.set("isFirefox",jD),Yt.set("isChrome",$m),Yt.set("isSafari",BD);var IR=Object.prototype.hasOwnProperty,CE;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(CE||(CE={}));var PR={regexParsingWithErrorRecovery:!0},DR=d(1764,null),AR=d(1765,null),TR=d(1766,null),IE=d(1767,null),RR=d(1768,null),LR=d(1769,null),NR=d(1770,null),FR=d(1771,null),PE=class yh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=PR){this.k=t,this.d=new fl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:DR,offset:0,lexeme:"",additionalInfo:AR});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?LR:void 0;throw this.h.push({message:RR,offset:i.offset,lexeme:fl.getLexeme(i),additionalInfo:s}),yh.c}return r}catch(r){if(r!==yh.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:Et.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:Et.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),br.INSTANCE;case 12:return this.z(),Or.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,IE),r?.negate()}case 17:return this.z(),ml.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Et.true();case 12:return this.z(),Et.false();case 0:{this.z();const r=this.l();return this.A(1,IE),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return f1.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(fl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return Et.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!jh(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return f1.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,TR);const s=this.u();return Et.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return Et.equals(r,s);switch(s){case"true":return Et.has(r);case"false":return Et.not(r);default:return Et.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return Et.notEquals(r,s);switch(s){case"true":return Et.not(r);case"false":return Et.has(r);default:return Et.notEquals(r,s)}}case 5:return this.z(),h1.create(r,this.u());case 6:return this.z(),d1.create(r,this.u());case 7:return this.z(),l1.create(r,this.u());case 8:return this.z(),u1.create(r,this.u());case 13:return this.z(),Et.in(r,this.u());default:return Et.has(r)}}case 20:throw this.h.push({message:NR,offset:t.offset,lexeme:"",additionalInfo:FR}),yh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=d(1772,null,t,fl.getLexeme(r)),n=r.offset,o=fl.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),yh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Et=class{static false(){return br.INSTANCE}static true(){return Or.INSTANCE}static has(e){return gl.create(e)}static equals(e,t){return a1.create(e,t)}static notEquals(e,t){return c1.create(e,t)}static regex(e,t){return f1.create(e,t)}static in(e,t){return DE.create(e,t)}static notIn(e,t){return AE.create(e,t)}static not(e){return ml.create(e)}static and(...e){return RE.create(e,null,!0)}static or(...e){return p1.create(e,null,!0)}static greater(e,t){return l1.create(e,t)}static greaterEquals(e,t){return u1.create(e,t)}static smaller(e,t){return h1.create(e,t)}static smallerEquals(e,t){return d1.create(e,t)}static{this.c=new PE({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function OR(e){const t=new PE({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?d(1773,null,i.additionalInfo):d(1774,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function pl(e,t){return e.cmp(t)}var br=class uI{static{this.INSTANCE=new uI}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Or.INSTANCE}},Or=class hI{static{this.INSTANCE=new hI}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return br.INSTANCE}},gl=class dI{static create(t,r=null){const i=Yt.get(t);return typeof i=="boolean"?i?Or.INSTANCE:br.INSTANCE:new dI(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:LE(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Yt.get(this.key);return typeof t=="boolean"?t?Or.INSTANCE:br.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=ml.create(this.key,this)),this.c}},a1=class fI{static create(t,r,i=null){if(typeof r=="boolean")return r?gl.create(t,i):ml.create(t,i);const s=Yt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?Or.INSTANCE:br.INSTANCE:new fI(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Yt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?Or.INSTANCE:br.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=c1.create(this.c,this.d,this)),this.f}},DE=class pI{static create(t,r){return new pI(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?IR.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=AE.create(this.d,this.f)),this.c}},AE=class gI{static create(t,r){return new gI(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=DE.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},c1=class mI{static create(t,r,i=null){if(typeof r=="boolean")return r?ml.create(t,i):gl.create(t,i);const s=Yt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?br.INSTANCE:Or.INSTANCE:new mI(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Yt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?br.INSTANCE:Or.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=a1.create(this.c,this.d,this)),this.f}},ml=class vI{static create(t,r=null){const i=Yt.get(t);return typeof i=="boolean"?i?br.INSTANCE:Or.INSTANCE:new vI(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:LE(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Yt.get(this.c);return typeof t=="boolean"?t?br.INSTANCE:Or.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=gl.create(this.c,this)),this.d}};function cd(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):br.INSTANCE}var l1=class wI{static create(t,r,i=null){return cd(r,s=>new wI(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=d1.create(this.c,this.d,this)),this.f}},u1=class bI{static create(t,r,i=null){return cd(r,s=>new bI(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=h1.create(this.c,this.d,this)),this.f}},h1=class yI{static create(t,r,i=null){return cd(r,s=>new yI(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=u1.create(this.c,this.d,this)),this.f}},d1=class EI{static create(t,r,i=null){return cd(r,s=>new EI(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:Xn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=l1.create(this.c,this.d,this)),this.f}},f1=class xI{static create(t,r){return new xI(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=MR.create(this)),this.c}},MR=class Qy{static create(t){return new Qy(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new Qy(this.c.map(t))}negate(){return this.c}};function TE(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var RE=class Uc{static create(t,r,i){return Uc.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=pl(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=TE(this.expr);return t===this.expr?this:Uc.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return br.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Or.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(pl);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=p1.create(o.expr.map(u=>Uc.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(pl))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return br.INSTANCE;if(s.length===1)return s[0]}return new Uc(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new Uc(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=p1.create(t,this,!0)}return this.c}},p1=class zo{static create(t,r,i){return zo.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=pl(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=TE(this.expr);return t===this.expr?this:zo.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Or.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return br.INSTANCE;s.sort(pl)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Or.INSTANCE;if(s.length===1)return s[0]}return new zo(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new zo(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of NE(r))for(const o of NE(i))s.push(RE.create([n,o],null,!1));t.unshift(zo.create(s,null,!1))}this.c=zo.create(t,this,!0)}return this.c}},P=class Zg extends gl{static{this.d=[]}static all(){return Zg.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Zg.d.push({...i,key:t}):i!==!0&&Zg.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return a1.create(this.key,t)}notEqualsTo(t){return c1.create(this.key,t)}},g1=V("contextKeyService");function LE(e,t){return e<t?-1:e>t?1:0}function Xn(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function NE(e){return e.type===9?e.expr:[e]}var Ce=V("logService"),ga=V("loggerService"),fe;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(fe||(fe={}));var UR=fe.Info;function jR(e,t,r){switch(t){case fe.Trace:e.trace(r);break;case fe.Debug:e.debug(r);break;case fe.Info:e.info(r);break;case fe.Warning:e.warn(r);break;case fe.Error:e.error(r);break;case fe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function ma(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=zi(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var FE=class extends ee{constructor(){super(...arguments),this.b=UR,this.c=this.B(new D),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==fe.Off&&this.b<=e}g(e){return this.q.isDisposed?!1:this.f(e)}},m1=class extends FE{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(fe.Trace)&&this.m(fe.Trace,ma([e,...t],!0))}debug(e,...t){this.g(fe.Debug)&&this.m(fe.Debug,ma([e,...t]))}info(e,...t){this.g(fe.Info)&&this.m(fe.Info,ma([e,...t]))}warn(e,...t){this.g(fe.Warning)&&this.m(fe.Warning,ma([e,...t]))}error(e,...t){if(this.g(fe.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.m(fe.Error,ma(r))}else this.m(fe.Error,ma([e,...t]))}flush(){}},BR=class extends FE{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.h)r.trace(e,...t)}debug(e,...t){for(const r of this.h)r.debug(e,...t)}info(e,...t){for(const r of this.h)r.info(e,...t)}warn(e,...t){for(const r of this.h)r.warn(e,...t)}error(e,...t){for(const r of this.h)r.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},_R=class extends ee{constructor(e,t,r){if(super(),this.j=e,this.m=t,this.b=new Vt,this.f=this.B(new D),this.onDidChangeLoggers=this.f.event,this.g=this.B(new D),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new D),this.onDidChangeVisibility=this.h.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}n(e){return Pe(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const r=this.s(e),i=Pe(e)?e:t?.id??Es(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?fe.Trace:t?.logLevel;s||(s=this.t(r,n??this.getLogLevel(r)??this.j,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}s(e){return Pe(e)?St(this.m,`${e}.log`):e}setLogLevel(e,t){if(E.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.j?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.g.fire([r,i]))}else{this.j=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const r=this.n(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.h.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.f.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function HR(e){switch(e){case fe.Trace:return"trace";case fe.Debug:return"debug";case fe.Info:return"info";case fe.Warning:return"warn";case fe.Error:return"error";case fe.Off:return"off"}}function WR(e){switch(e){case"trace":return fe.Trace;case"debug":return fe.Debug;case"info":return fe.Info;case"warn":return fe.Warning;case"error":return fe.Error;case"critical":return fe.Error;case"off":return fe.Off}}var Dq=new P("logLevel",HR(fe.Info)),Vi=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},OE=[],ME;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(ME||(ME={}));function Ne(e,t,r){t instanceof Vi||(t=new Vi(t,[],!!r)),OE.push([e,t])}function zR(){return OE}var v1=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Ut=V("IExtHostInitDataService"),VR=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},UE=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new VR(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},qR=!1,jE=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},GR=class Yy{constructor(t=new v1,r=!1,i,s=qR){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(ad,this),this._globalGraph=s?i?._globalGraph??new UE(n=>n):void 0}dispose(){if(!this.f){this.f=!0,hi(this.h),this.h.clear();for(const t of this.g)pD(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends Yy{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=w1.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw mm("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof Vi?(i=w1.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=w1.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=yi.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof Vi)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof Vi?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new UE(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new jE(s);for(const l of yi.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Vi){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new jE(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Vi){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof Vi)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new Yy(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new eA(()=>{const u=a.o(r,i,n);for(const[h,f]of c){const p=u[h];if(typeof p=="function")for(const g of f)g.disposable=p.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new Qc,c.set(h,g)),(b,x,k)=>{if(l.isInitialized)return l.value[h](b,x,k);{const I={listener:[b,x,k],disposable:void 0},A=g.push(I);return te(()=>{A(),I.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let p=f[h];return typeof p!="function"||(p=p.bind(f),u[h]=p),p},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},BE;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(BE||(BE={}));var w1=class is{static{this.all=new Set}static{this.c=new class extends is{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new is(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):is.c}static traceCreation(t,r){return t?new is(1,r.name):is.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new is(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;is.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const f=i(n+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${is.f.toFixed(2)}ms)`];(t>2||r)&&is.all.add(s.join(`
`))}},Ae=V("IExtHostRpcService"),JR=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},vl=V("IURITransformerService"),QR=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},YR=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},XR=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Dm(e,this.b,0,e.length,this.c,this.d):rl(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},_E=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Dm(e,this.b,0,e.length,this.d,this.e):rl(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},HE;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(HE||(HE={}));var WE=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new _E(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return h5(e,this.c.scheme);if(this.d[this.e]===2)return h5(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return Hn(e,this.c.query);if(this.d[this.e]===5)return Hn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},Zn=class Xy{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?Xy.Val:t}static unwrap(t){return t===Xy.Val?void 0:t}},ld=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},zE;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(zE||(zE={}));var cn=class Eh{static forUris(t=()=>!1,r=()=>!1){return new Eh(new WE(t,r))}static forPaths(t=!1){return new Eh(new _E(void 0,!t))}static forStrings(){return new Eh(new YR)}static forConfigKeys(){return new Eh(new XR)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);C4(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);C4(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new ld,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new ld,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new ld,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new ld,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=Zn.unwrap(s.value);s.value=Zn.wrap(r),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return Zn.unwrap(this.d(t)?.value)}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=Zn.unwrap(i.value)||s,i=i.mid;else break}return i&&Zn.unwrap(i.value)||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?Zn.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value!==void 0&&r.push([t.key,Zn.unwrap(t.value)]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}};function ZR(e,t,r){return Math.min(Math.max(e,t),r)}var KR=class{constructor(){this.a=0}getNext(){return this.a++}},eL=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},wl;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(wl||(wl={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?fi(t,c)?e.Error:fi(r,c)||fi(i,c)?e.Warning:fi(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(wl||(wl={}));var Lt=wl,tL=Lt,Aq=V("notificationService"),VE;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(VE||(VE={}));var qE;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(qE||(qE={}));var GE;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(GE||(GE={}));var bl=V("contextService");function rL(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.uri)}function iL(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.configPath)}var JE;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(JE||(JE={}));var sL=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=cn.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=cn.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},b1=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return St(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function y1(e){return new b1({uri:e,index:0,name:Mm(e)},{uri:e.toString()})}var QE="code-workspace",nL=`.${QE}`,Tq=[{name:d(2603,null),extensions:[QE]}];function oL(e){return(typeof e=="string"?Uh(e):M5(e))===nL}var aL=class{constructor(){this.a=new Set(Object.keys(W)),this.b=new Map,this.extUri=new il(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},va=V("IExtHostFileSystemInfo"),E1=Object.freeze({create:e=>ra(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>E1.split(e).filter(t=>!t.startsWith("#"))}),Rq=new Uint32Array(10),YE;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(YE||(YE={}));var XE;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(XE||(XE={}));var ZE;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(ZE||(ZE={}));var Lq=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),Nq=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),Fq=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Oq=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function KE(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var Mq=e7.bind(void 0,!1),x1=e7.bind(void 0,!0);function e7(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=Bh(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function cL(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function lL(e,t){return k1(e.toLowerCase(),t.toLowerCase(),0,0)}function k1(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=k1(e,t,r+1,i+1))?r7({start:i,end:i+1},s):null}return k1(e,t,r,i+1)}function S1(e){return 97<=e&&e<=122}function yl(e){return 65<=e&&e<=90}function $1(e){return 48<=e&&e<=57}function uL(e){return e===32||e===9||e===10||e===13}var hL=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>hL.add(e.charCodeAt(0)));function t7(e){return S1(e)||yl(e)||$1(e)}function r7(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function i7(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(yl(i)||$1(i)||r>0&&!t7(e.charCodeAt(r-1)))return r}return e.length}function C1(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=C1(e,t,r+1,i+1);!s&&(n=i7(t,n))<t.length;)s=C1(e,t,r+1,n),n++;return s===null?null:r7({start:i,end:i+1},s)}}function dL(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),yl(n)&&t++,S1(n)&&r++,t7(n)&&i++,$1(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function fL(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function pL(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function gL(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),yl(i)&&t++,S1(i)&&r++,uL(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function s7(e,t){if(!t||(t=t.trim(),t.length===0)||!gL(e))return null;t.length>60&&(t=t.substring(0,60));const r=dL(t);if(!pL(r)){if(!fL(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=C1(e,t,0,s))===null;)s=i7(t,s+1);return i}var Uq=KE(x1,s7,cL),jq=KE(x1,s7,lL),Bq=new qc(1e4),ud=128;function I1(){const e=[],t=[];for(let r=0;r<=ud;r++)t[r]=0;for(let r=0;r<=ud;r++)e.push(t.slice(0));return e}function n7(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var _q=n7(2*ud),Hq=n7(2*ud),Wq=I1(),zq=I1(),Vq=I1(),o7;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(o7||(o7={}));var a7;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(a7||(a7={}));var qq=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},P1=Object.create(null);function m(e,t){if(Pe(t)){const r=P1[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return P1[e]=t,{id:e}}function mL(){return P1}var vL={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468),goToEditingSession:m("go-to-editing-session",60469),editSession:m("edit-session",60470),codeReview:m("code-review",60471),copilotWarning:m("copilot-warning",60472),python:m("python",60473),copilotLarge:m("copilot-large",60474),copilotWarningLarge:m("copilot-warning-large",60475),keyboardTab:m("keyboard-tab",60476),copilotBlocked:m("copilot-blocked",60477),copilotNotConnected:m("copilot-not-connected",60478),flag:m("flag",60479),lightbulbEmpty:m("lightbulb-empty",60480),symbolMethodArrow:m("symbol-method-arrow",60481)},wL={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},he={...vL,...wL},wa;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(wa||(wa={}));var rr;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(f){const p=t.exec(f.id);if(!p)return r(he.error);const[,g,v]=p,b=["codicon","codicon-"+g];return v&&b.push("codicon-modifier-"+v.substring(1)),b}e.asClassNameArray=r;function i(f){return r(f).join(" ")}e.asClassName=i;function s(f){return"."+r(f).join(".")}e.asCSSSelector=s;function n(f){return f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||wa.isThemeColor(f.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const p=o.exec(f);if(!p)return;const[,g]=p;return{id:g}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,p){let g=f.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),p&&(g=`${g}~${p}`),{id:g}}e.modify=l;function u(f){const p=f.id.lastIndexOf("~");if(p!==-1)return f.id.substring(p+1)}e.getModifier=u;function h(f,p){return f.id===p.id&&f.color?.id===p.color?.id}e.isEqual=h})(rr||(rr={}));var D1=new RegExp(`\\$\\(${rr.iconNameExpression}(?:${rr.iconModifierExpression})?\\)`,"g"),bL=new RegExp(`(\\\\)?${D1.source}`,"g");function yL(e){return e.replace(bL,(t,r)=>r?t:`\\${t}`)}var Gq=new RegExp(`\\\\${D1.source}`,"g"),Jq=new RegExp(`(\\s)?(\\\\)?${D1.source}(\\s)?`,"g"),Qq=new RegExp(`\\$\\(${rr.iconNameCharacter}+\\)`,"g"),c7;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(c7||(c7={}));var hd=class Zy{static lift(t){if(t instanceof Zy)return t;const r=new Zy(t.value,t);return r.uris=t.uris,r.baseUri=t.baseUri?E.revive(t.baseUri):void 0,r}constructor(t="",r=!1){if(this.value=t,typeof this.value!="string")throw $e("value");typeof r=="boolean"?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=r.isTrusted??void 0,this.supportThemeIcons=r.supportThemeIcons??!1,this.supportHtml=r.supportHtml??!1)}appendText(t,r=0){return this.value+=EL(this.supportThemeIcons?yL(t):t).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,r===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,r){return this.value+=`
${xL(r,t)}
`,this}appendLink(t,r,i){return this.value+="[",this.value+=this.c(r,"]"),this.value+="](",this.value+=this.c(String(t),")"),i&&(this.value+=` "${this.c(this.c(i,'"'),")")}"`),this.value+=")",this}c(t,r){const i=new RegExp(Ks(r),"g");return t.replace(i,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function Kn(e){return e instanceof hd?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function EL(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function xL(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function kL(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function A1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var eo=A1();function l7(e){eo=e}var u7=/[&<>"']/,SL=new RegExp(u7.source,"g"),h7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,$L=new RegExp(h7.source,"g"),CL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d7=e=>CL[e];function Vr(e,t){if(t){if(u7.test(e))return e.replace(SL,d7)}else if(h7.test(e))return e.replace($L,d7);return e}var IL=/(^|[^\[])\^/g;function ut(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(IL,"$1"),r=r.replace(s,o),i},getRegex:()=>new RegExp(r,t)};return i}function f7(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var El={exec:()=>null};function p7(e,t){const r=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),i=r.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function xl(e,t,r){const i=e.length;if(i===0)return"";let s=0;for(;s<i;){const n=e.charAt(i-s-1);if(n===t&&!r)s++;else if(n!==t&&r)s++;else break}return e.slice(0,i-s)}function PL(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function g7(e,t,r,i){const s=t.href,n=t.title?Vr(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:r,href:s,title:n,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:r,href:s,title:n,text:Vr(o)}}function DL(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var dd=class{options;rules;lexer;constructor(e){this.options=e||eo}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:xl(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=DL(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=xl(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:xl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=xl(t[0],`
`).split(`
`),i="",s="";const n=[];for(;r.length>0;){let o=!1;const a=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))a.push(r[c]),o=!0;else if(!o)a.push(r[c]);else break;r=r.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,r.length===0)break;const f=n[n.length-1];if(f?.type==="code")break;if(f?.type==="blockquote"){const p=f,g=p.raw+`
`+r.join(`
`),v=this.blockquote(g);n[n.length-1]=v,i=i.substring(0,i.length-p.raw.length)+v.raw,s=s.substring(0,s.length-p.text.length)+v.text;break}else if(f?.type==="list"){const p=f,g=p.raw+`
`+r.join(`
`),v=this.list(g);n[n.length-1]=v,i=i.substring(0,i.length-f.raw.length)+v.raw,s=s.substring(0,s.length-p.raw.length)+v.raw,r=g.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const n=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),h=e.split(`
`,1)[0],f=!u.trim(),p=0;if(this.options.pedantic?(p=2,l=u.trimStart()):f?p=t[1].length+1:(p=t[2].search(/[^ ]/),p=p>4?1:p,l=u.slice(p),p+=t[1].length),f&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const b=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const A=e.split(`
`,1)[0];if(h=A,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(h)||I.test(h)||b.test(h)||x.test(e))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(f||u.search(/[^ ]/)>=4||k.test(u)||I.test(u)||x.test(u))break;l+=`
`+h}!f&&!h.trim()&&(f=!0),c+=A+`
`,e=e.substring(A.length+1),u=h.slice(p)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=p7(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<r.length;o++)n.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(p7(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Vr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const n=xl(r.slice(0,-1),"\\");if((r.length-n.length)%2===0)return}else{const n=PL(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);n&&(i=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),g7(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const n=r[0].charAt(0);return{type:"text",raw:n,text:n}}return g7(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const n=[...i[0]].length-1;let o,a,c=n,l=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...i[0]][0].length,f=e.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Vr(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Vr(t[1]),i="mailto:"+r):(r=Vr(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Vr(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=Vr(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Vr(t[0]),{type:"text",raw:t[0],text:r}}}},AL=/^(?: *(?:\n|$))+/,TL=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,RL=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,kl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,LL=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,m7=/(?:[*+-]|\d{1,9}[.)])/,v7=ut(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,m7).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),T1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,NL=/^[^\n]+/,R1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,FL=ut(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",R1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),OL=ut(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,m7).getRegex(),fd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",L1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ML=ut("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",L1).replace("tag",fd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),w7=ut(T1).replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fd).getRegex(),UL=ut(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",w7).getRegex(),N1={blockquote:UL,code:TL,def:FL,fences:RL,heading:LL,hr:kl,html:ML,lheading:v7,list:OL,newline:AL,paragraph:w7,table:El,text:NL},b7=ut("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fd).getRegex(),jL={...N1,table:b7,paragraph:ut(T1).replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",b7).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fd).getRegex()},BL={...N1,html:ut(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",L1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:El,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ut(T1).replace("hr",kl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",v7).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},y7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_L=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,E7=/^( {2,}|\\)\n(?!\s*$)/,HL=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Sl="\\p{P}\\p{S}",WL=ut(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Sl).getRegex(),zL=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,VL=ut(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Sl).getRegex(),qL=ut("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Sl).getRegex(),GL=ut("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Sl).getRegex(),JL=ut(/\\([punct])/,"gu").replace(/punct/g,Sl).getRegex(),QL=ut(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),YL=ut(L1).replace("(?:-->|$)","-->").getRegex(),XL=ut("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",YL).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),pd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ZL=ut(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",pd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),x7=ut(/^!?\[(label)\]\[(ref)\]/).replace("label",pd).replace("ref",R1).getRegex(),k7=ut(/^!?\[(ref)\](?:\[\])?/).replace("ref",R1).getRegex(),KL=ut("reflink|nolink(?!\\()","g").replace("reflink",x7).replace("nolink",k7).getRegex(),F1={_backpedal:El,anyPunctuation:JL,autolink:QL,blockSkip:zL,br:E7,code:_L,del:El,emStrongLDelim:VL,emStrongRDelimAst:qL,emStrongRDelimUnd:GL,escape:y7,link:ZL,nolink:k7,punctuation:WL,reflink:x7,reflinkSearch:KL,tag:XL,text:HL,url:El},eN={...F1,link:ut(/^!?\[(label)\]\((.*?)\)/).replace("label",pd).getRegex(),reflink:ut(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",pd).getRegex()},O1={...F1,escape:ut(y7).replace("])","~|])").getRegex(),url:ut(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},tN={...O1,br:ut(E7).replace("{2,}","*").getRegex(),text:ut(O1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},gd={normal:N1,gfm:jL,pedantic:BL},$l={normal:F1,gfm:O1,breaks:tN,pedantic:eN},to=class Ky{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||eo,this.options.tokenizer=this.options.tokenizer||new dd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:gd.normal,inline:$l.normal};this.options.pedantic?(r.block=gd.pedantic,r.inline=$l.pedantic):this.options.gfm&&(r.block=gd.gfm,this.options.breaks?r.inline=$l.breaks:r.inline=$l.gfm),this.tokenizer.rules=r}static get rules(){return{block:gd,inline:$l}}static lex(t,r){return new Ky(r).lex(t)}static lexInline(t,r){return new Ky(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=r[r.length-1],i&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s),i=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,o,l)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(n)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),c=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},md=class{options;parser;constructor(e){this.options=e||eo}space(e){return""}code({text:e,lang:t,escaped:r}){const i=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Vr(i)+'">'+(r?s:Vr(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Vr(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let o=0;o<e.items.length;o++){const a=e.items[o];i+=this.listitem(a)}const s=t?"ol":"ul",n=t&&r!==1?' start="'+r+'"':"";return"<"+s+n+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];r="";for(let o=0;o<n.length;o++)r+=this.tablecell(n[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=f7(e);if(s===null)return i;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image({href:e,title:t,text:r}){const i=f7(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},M1=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ro=class e4{options;renderer;textRenderer;constructor(t){this.options=t||eo,this.options.renderer=this.options.renderer||new md,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new M1}static parse(t,r){return new e4(r).parse(t)}static parseInline(t,r){return new e4(r).parseInline(t)}parse(t,r=!0){let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=c||"";continue}}const o=n;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):i+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=a||"";continue}}const o=n;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},vd=class{options;constructor(e){this.options=e||eo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},rN=class{defaults=A1();options=this.setOptions;parse=this.parseMarkdown(to.lex,ro.parse);parseInline=this.parseMarkdown(to.lexInline,ro.parseInline);Parser=ro;Renderer=md;TextRenderer=M1;Lexer=to;Tokenizer=dd;Hooks=vd;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const s=i;for(const n of s.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)r=r.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);r=r.concat(this.walkTokens(o,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new md(this.defaults);for(const n in r.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=r.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new dd(this.defaults);for(const n in r.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=r.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new vd;for(const n in r.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=r.hooks[o],c=s[o];vd.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,n=r.walkTokens;i.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return to.lex(e,t??this.defaults)}parser(e,t){return ro.parse(e,t??this.defaults)}parseMarkdown(e,t){return(i,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Vr(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},io=new rN;function nt(e,t){return io.parse(e,t)}nt.options=nt.setOptions=function(e){return io.setOptions(e),nt.defaults=io.defaults,l7(nt.defaults),nt},nt.getDefaults=A1,nt.defaults=eo,nt.use=function(...e){return io.use(...e),nt.defaults=io.defaults,l7(nt.defaults),nt},nt.walkTokens=function(e,t){return io.walkTokens(e,t)},nt.parseInline=io.parseInline,nt.Parser=ro,nt.parser=ro.parse,nt.Renderer=md,nt.TextRenderer=M1,nt.Lexer=to,nt.lexer=to.lex,nt.Tokenizer=dd,nt.Hooks=vd,nt.parse=nt;var Yq=nt.options,Xq=nt.setOptions,Zq=nt.use,Kq=nt.walkTokens,eG=nt.parseInline,tG=ro.parse,rG=to.lex,ks=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),iN=/^(.+)\/(.+?)(;.+)?$/;function S7(e,t){const r=iN.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var pr=Symbol("unset"),sN=class{constructor(){this.root=new U1,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||Ar.empty()}get entries(){return this.root.children?.entries()||Ar.empty()}insert(e,t,r){this.c(e,i=>i._value=t,r)}mutate(e,t){this.c(e,r=>r._value=t(r._value===pr?void 0:r._value))}mutatePath(e,t){this.c(e,()=>{},r=>t(r))}delete(e){const t=this.b(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==pr){for(this.a--,t[r].node._value=pr;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==pr)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==pr)break}for(const i of $7(r))i._value!==pr&&(this.a--,yield i._value);r===this.root&&(this.root._value=pr,this.root.children=void 0)}find(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===pr?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==pr)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==pr}b(e){const t=[{part:"",node:this.root}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}c(e,t,r){let i=this.root;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new U1;i.children.set(o,a),i=a}else{const a=new U1;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===pr?0:1;t(i);const n=i._value===pr?0:1;this.a+=n-s}*values(){for(const{_value:e}of $7(this.root))e!==pr&&(yield e)}};function*$7(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var U1=class{constructor(){this._value=pr}get value(){return this._value===pr?void 0:this._value}set value(e){this._value=e===void 0?pr:e}},qr=class Vo{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Vo(t,r)}delta(t=0,r=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+r))}equals(t){return Vo.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Vo.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Vo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Vo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Vo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Qe=class Wt{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Wt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Wt.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return Wt.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return Wt.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return Wt.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Wt(i,s,n,o)}intersectRanges(t){return Wt.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new Wt(i,s,n,o)}equalsRange(t){return Wt.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return Wt.getEndPosition(this)}static getEndPosition(t){return new qr(t.endLineNumber,t.endColumn)}getStartPosition(){return Wt.getStartPosition(this)}static getStartPosition(t){return new qr(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new Wt(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new Wt(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return Wt.collapseToStart(this)}static collapseToStart(t){return new Wt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Wt.collapseToEnd(this)}static collapseToEnd(t){return new Wt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Wt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,r=t){return new Wt(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new Wt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static areOnlyIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber-1||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn-1||r.endLineNumber<t.startLineNumber-1||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=r.endColumn|0;return h-f}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},C7=class{constructor(){this.a=new Map,this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),te(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new nN(this,e,t);return this.b.set(e,r),te(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},nN=class extends ee{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},I7;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(I7||(I7={}));var P7;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(P7||(P7={}));var D7;(function(e){const t=new Map;t.set(0,he.symbolMethod),t.set(1,he.symbolFunction),t.set(2,he.symbolConstructor),t.set(3,he.symbolField),t.set(4,he.symbolVariable),t.set(5,he.symbolClass),t.set(6,he.symbolStruct),t.set(7,he.symbolInterface),t.set(8,he.symbolModule),t.set(9,he.symbolProperty),t.set(10,he.symbolEvent),t.set(11,he.symbolOperator),t.set(12,he.symbolUnit),t.set(13,he.symbolValue),t.set(15,he.symbolEnum),t.set(14,he.symbolConstant),t.set(15,he.symbolEnum),t.set(16,he.symbolEnumMember),t.set(17,he.symbolKeyword),t.set(27,he.symbolSnippet),t.set(18,he.symbolText),t.set(19,he.symbolColor),t.set(20,he.symbolFile),t.set(21,he.symbolReference),t.set(22,he.symbolCustomColor),t.set(23,he.symbolFolder),t.set(24,he.symbolTypeParameter),t.set(25,he.account),t.set(26,he.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=he.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(D7||(D7={}));var A7;(function(e){e[e.Deprecated=1]="Deprecated"})(A7||(A7={}));var T7;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(T7||(T7={}));var R7;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(R7||(R7={}));var L7;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(L7||(L7={}));var wd;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(wd||(wd={}));var N7;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(N7||(N7={}));var F7;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(F7||(F7={}));var O7;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(O7||(O7={}));var M7;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(M7||(M7={}));function oN(e){return e&&E.isUri(e.uri)&&Qe.isIRange(e.range)&&(Qe.isIRange(e.originSelectionRange)||Qe.isIRange(e.targetSelectionRange))}var U7;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(U7||(U7={}));var iG={17:d(818,null),16:d(819,null),4:d(820,null),13:d(821,null),8:d(822,null),9:d(823,null),21:d(824,null),23:d(825,null),7:d(826,null),0:d(827,null),11:d(828,null),10:d(829,null),19:d(830,null),5:d(831,null),1:d(832,null),2:d(833,null),20:d(834,null),15:d(835,null),18:d(836,null),24:d(837,null),3:d(838,null),6:d(839,null),14:d(840,null),22:d(841,null),25:d(842,null),12:d(843,null)},j7;(function(e){e[e.Deprecated=1]="Deprecated"})(j7||(j7={}));var B7;(function(e){const t=new Map;t.set(0,he.symbolFile),t.set(1,he.symbolModule),t.set(2,he.symbolNamespace),t.set(3,he.symbolPackage),t.set(4,he.symbolClass),t.set(5,he.symbolMethod),t.set(6,he.symbolProperty),t.set(7,he.symbolField),t.set(8,he.symbolConstructor),t.set(9,he.symbolEnum),t.set(10,he.symbolInterface),t.set(11,he.symbolFunction),t.set(12,he.symbolVariable),t.set(13,he.symbolConstant),t.set(14,he.symbolString),t.set(15,he.symbolNumber),t.set(16,he.symbolBoolean),t.set(17,he.symbolArray),t.set(18,he.symbolObject),t.set(19,he.symbolKey),t.set(20,he.symbolNull),t.set(21,he.symbolEnumMember),t.set(22,he.symbolStruct),t.set(23,he.symbolEvent),t.set(24,he.symbolOperator),t.set(25,he.symbolTypeParameter);function r(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=he.symbolProperty),o}e.toIcon=r;const i=new Map;i.set(0,20),i.set(1,8),i.set(2,8),i.set(3,8),i.set(4,5),i.set(5,0),i.set(6,9),i.set(7,3),i.set(8,2),i.set(9,15),i.set(10,7),i.set(11,1),i.set(12,4),i.set(13,14),i.set(14,18),i.set(15,13),i.set(16,13),i.set(17,13),i.set(18,13),i.set(19,17),i.set(20,13),i.set(21,16),i.set(22,6),i.set(23,10),i.set(24,11),i.set(25,24);function s(n){let o=i.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(B7||(B7={}));var ba=class An{static{this.Comment=new An("comment")}static{this.Imports=new An("imports")}static{this.Region=new An("region")}static fromValue(t){switch(t){case"comment":return An.Comment;case"imports":return An.Imports;case"region":return An.Region}return new An(t)}constructor(t){this.value=t}},_7;(function(e){e[e.AIGenerated=1]="AIGenerated"})(_7||(_7={}));var bd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(bd||(bd={}));var j1;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(j1||(j1={}));var ya;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(ya||(ya={}));var Cl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Cl||(Cl={}));var Il;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Il||(Il={}));var H7;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(H7||(H7={}));var W7;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(W7||(W7={}));var z7;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(z7||(z7={}));var sG=new C7,nG=new C7,V7;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(V7||(V7={}));var yd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(yd||(yd={}));var q7;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(q7||(q7={}));var yr;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(yr||(yr={})),function(e){function t(c,l){return l-c}e.compare=t;const r=Object.create(null);r[e.Error]=d(2055,null),r[e.Warning]=d(2056,null),r[e.Info]=d(2057,null);function i(c){return r[c]||""}e.toString=i;const s=Object.create(null);s[e.Error]=d(2058,null),s[e.Warning]=d(2059,null),s[e.Info]=d(2060,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case Lt.Error:return e.Error;case Lt.Warning:return e.Warning;case Lt.Info:return e.Info;case Lt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return Lt.Error;case e.Warning:return Lt.Warning;case e.Info:return Lt.Info;case e.Hint:return Lt.Ignore}}e.toSeverity=a}(yr||(yr={}));var G7;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(yr.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(G7||(G7={}));var oG=V("markerService"),aN=class{constructor(){this.a=new Map}add(e,t){dr(Pe(e)),dr(bt(t)),dr(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},ir=new aN,J7=V("fileService");function Ea(e){return e.create===!0}var Mr;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Mr||(Mr={}));var ln;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(ln||(ln={}));var Q7;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(Q7||(Q7={}));var Y7;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(Y7||(Y7={}));var ae;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(ae||(ae={}));var Ed=class kI extends Error{static create(t,r){const i=new kI(t.toString(),r);return X7(i,r),i}constructor(t,r){super(t),this.code=r}};function Ss(e,t){return Ed.create(e,t)}function cN(e){return e||Ss(d(1967,null),ae.Unknown)}function X7(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function xd(e){if(!e)return ae.Unknown;if(e instanceof Ed)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return ae.Unknown;switch(t[1]){case ae.FileExists:return ae.FileExists;case ae.FileIsADirectory:return ae.FileIsADirectory;case ae.FileNotADirectory:return ae.FileNotADirectory;case ae.FileNotFound:return ae.FileNotFound;case ae.FileTooLarge:return ae.FileTooLarge;case ae.FileWriteLocked:return ae.FileWriteLocked;case ae.NoPermissions:return ae.NoPermissions;case ae.Unavailable:return ae.Unavailable}return ae.Unknown}function lN(e){if(e instanceof B1)return e.fileOperationResult;switch(xd(e)){case ae.FileNotFound:return 1;case ae.FileIsADirectory:return 0;case ae.FileNotADirectory:return 9;case ae.FileWriteLocked:return 5;case ae.NoPermissions:return 6;case ae.FileExists:return 4;case ae.FileTooLarge:return 7;default:return 10}}var Z7;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(Z7||(Z7={}));var K7;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(K7||(K7={}));var aG=class Kg{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new mr(()=>{const i=cn.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new mr(()=>{const i=cn.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new mr(()=>{const i=cn.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==Kg.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=Kg.a):this.b!==void 0&&(this.b=Kg.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function uN(e,t,r){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==wt&&(t+=wt),r?Bh(e,t):e.indexOf(t)===0)}var B1=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},ex;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(ex||(ex={}));var tx;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(tx||(tx={}));var hN="";function rx(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var ix=class Dr{static{this.KB=1024}static{this.MB=Dr.KB*Dr.KB}static{this.GB=Dr.MB*Dr.KB}static{this.TB=Dr.GB*Dr.KB}static formatSize(t){return Kr(t)||(t=0),t<Dr.KB?d(1968,null,t.toFixed(0)):t<Dr.MB?d(1969,null,(t/Dr.KB).toFixed(2)):t<Dr.GB?d(1970,null,(t/Dr.MB).toFixed(2)):t<Dr.TB?d(1971,null,(t/Dr.GB).toFixed(2)):d(1972,null,(t/Dr.TB).toFixed(2))}},dN=class extends ee{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new D),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},cG=class t4{constructor(){this.id=t4.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new t4,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},lG=class SI extends dN{static{this.ID="vs.actions.empty"}constructor(){super(SI.ID,d(44,null),void 0,!1)}},fN={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},pN={id:"default",displayName:d(4203,null),providerDisplayName:d(4204,null)},sx;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(sx||(sx={}));var nx;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(nx||(nx={}));function kd(e){if(un(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function ox(e){if(un(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function _1(e){if(un(e)||kd(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function Sd(e){if(un(e))return!1;const t=e;return E.isUri(t?.base?.resource)&&E.isUri(t?.input1?.resource)&&E.isUri(t?.input2?.resource)&&E.isUri(t?.result?.resource)}var ax;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(ax||(ax={}));var cx;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(cx||(cx={}));var gN=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},uG=new gN,lx;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(lx||(lx={}));var mN=class extends ee{};function un(e){return e instanceof mN}function vN(e){const t=e;return E.isUri(t?.preferredResource)}function wN(e){const t=e;return un(t?.primary)&&un(t?.secondary)}function bN(e){const t=e;return un(t?.modified)&&un(t?.original)}var ux;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(ux||(ux={}));var hx;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(hx||(hx={}));var hn;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(hn||(hn={}));var yN=class{getOriginalUri(e,t){if(!e)return;if(Sd(e))return fx.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===hn.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===hn.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===hn.PRIMARY?i:s}}if(kd(e)||ox(e)||_1(e)||Sd(e))return;const r=vN(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return wN(e)||_1(e)?{primary:e.primary,secondary:e.secondary}:bN(e)||kd(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Sd(e))return fx.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===hn.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===hn.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===hn.PRIMARY?i:s}}if(kd(e)||ox(e)||_1(e)||Sd(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},dx;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(dx||(dx={}));var fx=new yN,px;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(px||(px={}));var EN=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(ad);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return ia(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),te(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};ir.add(fN.EditorFactory,new EN);var gx;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(gx||(gx={}));var Pl=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return xN(e,this)}},mx=new Map,H1=new WeakMap;function xN(e,t){const r=H1.get(e);if(r)return r;const i=kN(e,t);if(i){let s=mx.get(i)??0;s++,mx.set(i,s);const n=s===1?i:`${i}#${s}`;return H1.set(e,n),n}}function kN(e,t){const r=H1.get(e);if(r)return r;const i=t.owner?$N(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=W1(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=SN(t.owner,e);if(a!==void 0)return i+a}}function SN(e,t){for(const r in e)if(e[r]===t)return r}var vx=new Map,wx=new WeakMap;function $N(e){const t=wx.get(e);if(t)return t;const r=bx(e)??"Object";let i=vx.get(r)??0;i++,vx.set(r,i);const s=i===1?r:`${r}#${i}`;return wx.set(e,s),s}function bx(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function W1(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var z1=(e,t)=>e===t;function V1(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!V1(e[r],t[r]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=e,i=t,s=Object.keys(r),n=Object.keys(i),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!V1(r[a],i[a]))return!1;return!0}return!1}var so;function yx(e){so?so instanceof Ex?so.loggers.push(e):so=new Ex([so,e]):so=e}function Xt(){return so}var q1=void 0;function CN(e){q1=e}function IN(e){q1&&q1(e)}var Ex=class{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const r of this.loggers)r.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const r of this.loggers)r.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,r){for(const i of this.loggers)i.handleAutorunDependencyChanged(e,t,r)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,r){for(const i of this.loggers)i.handleDerivedDependencyChanged(e,t,r)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}},xx;function PN(e){xx=e}var kx;function DN(e){kx=e}var G1;function AN(e){G1=e}var TN=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return G1({owner:r,debugName:()=>{const s=W1(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}flatten(){return G1({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(xx(this,t)),this}keepObserved(e){return e.add(kx(this)),this}get a(){return this.get()}},J1=class extends TN{constructor(){super(),this._observers=new Set,Xt()?.handleObservableCreated(this)}addObserver(e){const t=this._observers.size;this._observers.add(e),t===0&&this.b(),t!==this._observers.size&&Xt()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(e){const t=this._observers.delete(e);t&&this._observers.size===0&&this.c(),t&&Xt()?.handleOnListenerCountChanged(this,this._observers.size)}b(){}c(){}log(){const e=!!Xt();return IN(this),e||Xt()?.handleObservableCreated(this),this}};function RN(e,t){const r=new Sx(e,t);try{e(r)}finally{r.finish()}}function LN(e,t,r){e?t(e):RN(t,r)}var Sx=class{constructor(e,t){this._fn=e,this.a=t,this._updatingObservers=[],Xt()?.handleBeginTransaction(this)}getDebugName(){return this.a?this.a():W1(this._fn)}updateObserver(e,t){this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this._updatingObservers;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this._updatingObservers=null,Xt()?.handleEndTransaction(this)}};function NN(e,t){let r;return typeof e=="string"?r=new Pl(void 0,e,void 0):r=new Pl(e,void 0,void 0),new FN(r,t,z1)}var FN=class extends J1{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.f=r,this.d=t,Xt()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.d}set(e,t,r){if(r===void 0&&this.f(this.d,e))return;let i;t||(t=i=new Sx(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.g(e),Xt()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this._observers)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}g(e){this.d=e}};function Q1(e){return new Cx(new Pl(void 0,void 0,e),e,void 0,void 0)}var $x;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})($x||($x={}));var Cx=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.g=r,this.h=i,this._state=2,this.a=0,this.b=!1,this._dependencies=new Set,this.c=new Set,this._isRunning=!1,this.f=this.g?.(),Xt()?.handleAutorunCreated(this),this.i(),na(this)}dispose(){this.b=!0;for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),Xt()?.handleAutorunDisposed(this),oa(this)}i(){const e=this.c;this.c=this._dependencies,this._dependencies=e,this._state=3;try{if(!this.b){Xt()?.handleAutorunStarted(this);const t=this.f;try{this.f=this.g?.(),this._isRunning=!0,this._runFn(this,t)}catch(r){Ch(r)}finally{this._isRunning=!1}}}finally{this.b||Xt()?.handleAutorunFinished(this);for(const t of this.c)t.removeObserver(this);this.c.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===3&&(this._state=1),this.a++}endUpdate(e){try{if(this.a===1)do{if(this._state===1){this._state=3;for(const t of this._dependencies)if(t.reportChanges(),this._state===2)break}this._state!==3&&this.i()}while(this._state!==3)}finally{this.a--}L4(()=>this.a>=0)}handlePossibleChange(e){this._state===3&&this.j(e)&&(this._state=1)}handleChange(e,t){if(this.j(e)){Xt()?.handleAutorunDependencyChanged(this,e,t);try{(this.h?this.h({changedObservable:e,change:t,didChange:i=>i===e},this.f):!0)&&(this._state=2)}catch(r){Ch(r)}}}j(e){return this._dependencies.has(e)&&!this.c.has(e)}readObservable(e){if(!this._isRunning)throw new ta("The reader object cannot be used outside its compute function!");if(this.b)return e.get();e.addObserver(this);const t=e.get();return this._dependencies.add(e),this.c.delete(e),t}};(function(e){e.Observer=Cx})(Q1||(Q1={}));function ON(e,t){return new Y1(new Pl(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??z1)}AN(ON);var Ix;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(Ix||(Ix={}));var Y1=class extends J1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.k=r,this.l=i,this.m=s,this.n=n,this._state=0,this.f=void 0,this._updateCount=0,this._dependencies=new Set,this.g=new Set,this.h=void 0,this.j=!1,this._isComputing=!1,this.s=null,this.t=!1,this.h=this.k?.()}c(){this._state=0,this.f=void 0,Xt()?.handleDerivedCleared(this);for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this.m?.()}get(){if(this._isComputing,this._observers.size===0){let t;try{this.t=!0,t=this._computeFn(this,this.k?.())}finally{this.t=!1}return this.c(),t}else{do{if(this._state===1){for(const t of this._dependencies)if(t.reportChanges(),this._state===2)break}this._state===1&&(this._state=3),this._state!==3&&this.q()}while(this._state!==3);return this.f}}q(){const e=this.g;this.g=this._dependencies,this._dependencies=e;const t=this._state!==0,r=this.f;this._state=3;let i=!1;this._isComputing=!0;try{const s=this.h;this.h=this.k?.();try{this.t=!0,this.f=this._computeFn(this,s)}finally{this.t=!1;for(const n of this.g)n.removeObserver(this);this.g.clear()}i=t&&!this.n(r,this.f),Xt()?.handleObservableUpdated(this,{oldValue:r,newValue:this.f,change:void 0,didChange:i,hadValue:t})}catch(s){Ch(s)}if(this._isComputing=!1,i)for(const s of this._observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.j)throw new ta("Cyclic deriveds are not supported yet!");this._updateCount++,this.j=!0;try{const t=this._updateCount===1;if(this._state===3&&(this._state=1,!t))for(const r of this._observers)r.handlePossibleChange(this);if(t)for(const r of this._observers)r.beginUpdate(this)}finally{this.j=!1}}endUpdate(e){if(this._updateCount--,this._updateCount===0){const t=[...this._observers];for(const r of t)r.endUpdate(this);if(this.s){const r=[...this.s];this.s=null;for(const i of r)i.endUpdate(this)}}L4(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===3&&this._dependencies.has(e)&&!this.g.has(e)){this._state=1;for(const t of this._observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this._dependencies.has(e)&&!this.g.has(e)){Xt()?.handleDerivedDependencyChanged(this,e,t);let r=!1;try{r=this.l?this.l({changedObservable:e,change:t,didChange:s=>s===e},this.h):!0}catch(s){Ch(s)}const i=this._state===3;if(r&&(this._state===1||i)&&(this._state=2,i))for(const s of this._observers)s.handlePossibleChange(this)}}readObservable(e){if(!this.t)throw new ta("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this._dependencies.add(e),this.g.delete(e),t}addObserver(e){const t=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),t&&(this.s&&this.s.has(e)?this.s.delete(e):e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this.s||(this.s=new Set),this.s.add(e)),super.removeObserver(e)}};function Px(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new xa(new Pl(t,void 0,i),r,i,()=>xa.globalTransaction,z1)}var xa=class extends J1{constructor(e,t,r,i,s){super(),this.j=e,this.k=t,this._getValue=r,this.l=i,this.n=s,this.g=!1,this.r=n=>{const o=this._getValue(n),a=this.f,c=!this.g||!this.n(a,o);let l=!1;c&&(this.f=o,this.g&&(l=!0,LN(this.l(),u=>{Xt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.g});for(const h of this._observers)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.p();return"Event fired"+(u?`: ${u}`:"")})),this.g=!0),l||Xt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.g})}}p(){return this.j.getDebugName(this)}get debugName(){const e=this.p();return"From Event"+(e?`: ${e}`:"")}b(){this.h=this.k(this.r)}c(){this.h.dispose(),this.h=void 0,this.g=!1,this.f=void 0}get(){return this.h?(this.g||this.r(void 0),this.f):this._getValue(void 0)}};(function(e){e.Observer=xa;function t(r,i){let s=!1;xa.globalTransaction===void 0&&(xa.globalTransaction=r,s=!0);try{i()}finally{s&&(xa.globalTransaction=void 0)}}e.batchEventsGlobally=t})(Px||(Px={}));function MN(e){const t=new Dx(!1,void 0);return e.addObserver(t),te(()=>{e.removeObserver(t)})}DN(MN);function UN(e,t){const r=new Dx(!0,t);e.addObserver(r);try{r.beginUpdate(e)}finally{r.endUpdate(e)}return te(()=>{e.removeObserver(r)})}PN(UN);var Dx=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}},$d;function jN(e){$d||($d=new Ax,yx($d)),$d.addFilteredObj(e)}var Ax=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return BN([ka(WN("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[ka(" "),ri(Dl(e.oldValue,70),{color:"red",strikeThrough:!0}),ka(" "),ri(Dl(e.newValue,60),{color:"green"})]:[ka(" (unchanged)")]:[ka(" "),ri(Dl(e.newValue,60),{color:"green"}),ka(" (initial)")]}handleObservableCreated(e){if(e instanceof Y1){const t=e;if(this.f.set(t,new Set),!1){const i=[];t.__debugUpdating=i;const s=t.beginUpdate;t.beginUpdate=o=>(i.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=i.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),i.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof Y1){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([Sa("observable value changed"),ri(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return ri(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,r){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const r=this.f.get(e);r&&(console.log(...this.d([Sa("derived recomputed"),ri(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([Sa("derived cleared"),ri(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([Sa("observable from event triggered"),ri(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,r){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([Sa("autorun"),ri(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([Sa("transaction"),ri(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function BN(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function ka(e){return ri(e,{color:"black"})}function Sa(e){return ri(zN(`${e}: `,10),{color:"black",bold:!0})}function ri(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function Dl(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?_N(e,t):HN(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function _N(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${Dl(s,t-r.length)}`}return r+=" ]",r}function HN(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const r=bx(e);let i=r?r+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(i+=", "),i.length-5>t){i+="...";break}s=!1,i+=`${n}: ${Dl(o,t-i.length)}`}return i+=r?")":" }",i}function WN(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function zN(e,t){for(;e.length<t;)e+=" ";return e}CN(jN);var VN=!1;VN&&yx(new Ax);var Cd=V("productService"),qN="vscode://schemas/vscode-product",$s=V("configurationService"),Tx;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(Tx||(Tx={}));function X1(e,t){const r=Object.create(null);for(const i in e)Rx(r,i,e[i],t);return r}function Rx(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function GN(e,t){const r=t.split(".");Lx(e,r)}function Lx(e,t){if(!e)return;const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(Lx(i,t),Object.keys(i).length===0&&delete e[r])}}function Id(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function JN(e){return e.replace(/[\[\]]/g,"")}function QN(e){let t=!1;const r=new Map,i=new Map;if(YN(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=r.get(h);if(!f){const p={schemas:[u]};return r.set(h,p),i.set(u,p),!0}return f.schemas.push(u),i.set(u,f),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const p=i.get(f);if(p&&p.schemas.length>1)return p.id||(p.id=`_${o.length}`,o.push(p.schemas[0])),{$ref:`#/${n}/${p.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function $a(e){return typeof e=="object"&&e!==null}function YN(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)$a(l)&&o.push(l)},i=(...c)=>{for(const l of c)if($a(l))for(const u in l){const h=l[u];$a(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)$a(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)$a(l)&&o.push(l);else $a(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Pd={JSONContribution:"base.contributions.json"};function XN(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var ZN=class{constructor(){this.b=new D,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[XN(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?QN(t):void 0}hasSchemaContent(e){return!!this.a[e]}},KN=new ZN;ir.add(Pd.JSONContribution,KN);var Nx;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(Nx||(Nx={}));var Ca={Configuration:"base.contributions.configuration"},Fx;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(Fx||(Fx={}));var Dd={properties:{},patternProperties:{}},Ad={properties:{},patternProperties:{}},Td={properties:{},patternProperties:{}},Rd={properties:{},patternProperties:{}},Ld={properties:{},patternProperties:{}},Nd={properties:{},patternProperties:{}},Al={properties:{},patternProperties:{}},no="vscode://schemas/settings/resourceLanguage",Fd=ir.as(Pd.JSONContribution),eF=class{constructor(){this.a=[],this.i=new Set,this.j=new D,this.onDidSchemaChange=this.j.event,this.k=new D,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1753,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Fd.registerSchema(no,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),Fd.registerSchema(no,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Fd.registerSchema(no,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),Fd.registerSchema(no,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),qi.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...Tl(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),qi.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!O4(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:d(1754,null,JN(e)),$ref:no,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(bt(a)&&(Gc(s[o])||bt(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if(bt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Gc(n)||bt(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...bt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=4,n){s=Dt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&rF(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),qi.test(c)?l.scope=void 0:(l.scope=Dt(l.scope)?s:l.scope,l.restricted=Dt(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(Dd.properties[e]=t,t.scope){case 1:Ad.properties[e]=t;break;case 2:Rd.properties[e]=t;break;case 3:Td.properties[e]=t;break;case 7:Ld.properties[e]=t;break;case 4:Nd.properties[e]=t;break;case 5:Al.properties[e]=t;break;case 6:Al.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Dd.properties[e],t.scope){case 1:delete Ad.properties[e];break;case 2:delete Rd.properties[e];break;case 3:delete Td.properties[e];break;case 7:delete Ld.properties[e];break;case 4:delete Nd.properties[e];break;case 5:case 6:delete Al.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:d(1755,null),errorMessage:d(1756,null),$ref:no};this.A(t,r),Dd.properties[t]=r,Ad.properties[t]=r,Td.properties[t]=r,Rd.properties[t]=r,Ld.properties[t]=r,Nd.properties[t]=r,Al.properties[t]=r}}z(){const e={type:"object",description:d(1757,null),errorMessage:d(1758,null),$ref:no};Dd.patternProperties[dn]=e,Ad.patternProperties[dn]=e,Td.patternProperties[dn]=e,Rd.patternProperties[dn]=e,Ld.patternProperties[dn]=e,Nd.patternProperties[dn]=e,Al.patternProperties[dn]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),Gc(i)&&(i=t.defaultDefaultValue,s=void 0),Gc(i)&&(i=tF(t.type)),t.default=i,t.defaultValueSource=s}},Ox="\\[([^\\]]+)\\]",Mx=new RegExp(Ox,"g"),dn=`^(${Ox})+$`,qi=new RegExp(dn);function Tl(e){const t=[];if(qi.test(e)){let r=Mx.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=Mx.exec(e)}}return ra(t)}function tF(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Od=new eF;ir.add(Ca.Configuration,Od);function rF(e,t){return e.trim()?qi.test(e)?d(1760,null,e):Od.getConfigurationProperties()[e]!==void 0?d(1761,null,e):t.policy?.name&&Od.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1762,null,e,t.policy?.name,Od.getPolicyConfigurations().get(t.policy?.name)):null:d(1759,null)}var iF=V("requestService"),sF=class{constructor(e){this.b=e}toJSON(){if(!this.a){const e=Object.create(null);for(const t in this.b)t.toLowerCase()==="authorization"||t.toLowerCase()==="proxy-authorization"?e[t]="*****":e[t]=this.b[t];this.a=e}return this.a}},nF=class extends ee{constructor(e){super(),this.b=e,this.a=0}async c(e,t){const r=`#${++this.a}: ${e.url}`;this.b.trace(`${r} - begin`,e.type,new sF(e.headers??{}));try{const i=await t();return this.b.trace(`${r} - end`,e.type,i.res.statusCode,i.res.headers),i}catch(i){throw this.b.error(`${r} - error`,e.type,k4(i)),i}}};function oF(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function aF(e){return e.res.statusCode===204}async function cF(e){if(!oF(e))throw new Error("Server returned "+e.res.statusCode);if(aF(e))return null;const r=(await fA(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var Z1=[],Ux=void 0,jx=void 0;function lF(e=!0,t=!0){if(Ux===e&&jx===t)return;Ux=e,jx=t;const r=ir.as(Ca.Configuration),i=Z1;Z1=[{id:"http",order:15,title:d(2150,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:d(2151,null),restricted:!0}}},{id:"http",order:15,title:d(2152,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(2153,null),restricted:!0}}},{id:"http",order:15,title:d(2154,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2155,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(2156,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2157,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2158,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2159,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2160,null),d(2161,null),d(2162,null),d(2163,null)],default:"override",markdownDescription:d(2164,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(2165,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(2166,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(2167,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],r.updateConfigurations({add:Z1,remove:i})}lF();var Rl;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Rl||(Rl={}));var Ei;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Ei||(Ei={}));var hG=class $I extends ee{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new Xc),this.onDidChangeStorage=this.b.event,this.c=Ei.None,this.f=new Map,this.g=this.B(new qh($I.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===Ei.Closed)return;let i=!1;Dt(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Ei.None&&(this.c=Ei.Initialized,this.s.hint!==Rl.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return Dt(i)?r:i}getBoolean(t,r){const i=this.get(t);return Dt(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return Dt(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return Dt(i)?r:f6(i)}async set(t,r,i=!1){if(this.c===Ei.Closed)return;if(Dt(r))return this.delete(t,i);const s=bt(r)||Array.isArray(r)?BA(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===Ei.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==Ei.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Ei.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Ei.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Rl.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Rl.STORAGE_IN_MEMORY}},K1=V("environmentService"),uF=K1,Bx=V("IUriIdentityService"),_x;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(_x||(_x={}));function hF(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&E.isUri(t.location)&&E.isUri(t.globalStorageHome)&&E.isUri(t.settingsResource)&&E.isUri(t.keybindingsResource)&&E.isUri(t.tasksResource)&&E.isUri(t.snippetsHome)&&E.isUri(t.promptsHome)&&E.isUri(t.extensionsResource))}var dF=V("IUserDataProfilesService");function Md(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:St(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:St(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:St(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:St(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:St(r,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:St(r,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:St(r,"extensions.json"),cacheHome:St(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var Hx=class extends ee{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,r,i,s){super(),this.s=t,this.t=r,this.u=i,this.y=s,this.g=this.B(new D),this.onDidChangeProfiles=this.g.event,this.h=this.B(new D),this.onWillCreateProfile=this.h.event,this.j=this.B(new D),this.onWillRemoveProfile=this.j.event,this.m=this.B(new D),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=St(this.s.userRoamingDataHome,"profiles"),this.f=St(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),r=[t];try{for(const s of this.N()){if(!s.name||!Pe(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(Md(mi(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const i=new Map;if(r.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=E.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:r,emptyWindows:i}}return this.z}D(){const t=Md("__default__profile__",d(2556,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${Ks(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(Es(Ct()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(Es(Ct()).toString(16),t,r,i)}async createProfile(t,r,i,s){return await this.F(t,r,i,s)}async F(t,r,i,s){if(!Pe(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.G(s):void 0;E.isUri(a)&&(i={...i,workspaces:[a]});const c=Md(t,r,St(this.profilesHome,t),this.f,i,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await nn.settled(l),a&&!E.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(r)}})(),this.n.set(r,n)),n}async updateProfile(t,r){const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=Md(n.id,r.name??n.name,n.location,this.f,{icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.j.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.y.error(s)}this.I([],[r],[]);try{await this.t.del(r.cacheHome,{recursive:!0})}catch(s){lN(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,r){const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.G(t);if(E.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.L(s,i,!1),this.M(this.profiles)}unsetWorkspace(t,r=!1){const i=this.G(t);if(E.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,i))})}else this.L(i,void 0,r),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.u.extUri.isEqual(i.location,r.resource))).map(r=>this.t.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(r=>!this.H(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.G(t);return E.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.u.extUri.isEqual(s,r))):this.C.emptyWindows.get(r)??this.r.emptyWindows.get(r)}G(t){return rL(t)?t.uri:iL(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location))||[...this.r.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location)))}I(t,r,i){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,r,i)}J(t,r,i){this.g.fire({added:t,removed:r,updated:i,all:this.profiles})}L(t,r,i){i=r?.isTransient?!0:i,i?r?this.r.emptyWindows.set(t,r):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),r?this.C.emptyWindows.set(t,r):this.C.emptyWindows.delete(t))}M(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:i,emptyWindows:s}),this.O(r),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};Hx=__decorate([__param(0,K1),__param(1,J7),__param(2,Bx),__param(3,Ce)],Hx);var fF="__$__isNewStorageMarker",Ud="__$__targetStorageMarker",ev=V("storageService"),Ia;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(Ia||(Ia={}));var Wx;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(Wx||(Wx={}));var zx;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(zx||(zx={}));function pF(e){const t=e.get(Ud);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var fG=class CI extends ee{static{this.a=60*1e3}constructor(t={flushInterval:CI.a}){super(),this.n=t,this.b=this.B(new Xc),this.f=this.B(new Xc),this.onDidChangeTarget=this.f.event,this.g=this.B(new D),this.onWillSaveState=this.g.event,this.j=this.B(new ms(()=>this.r(),this.n.flushInterval)),this.m=this.B(new ls),this.D=void 0,this.G=void 0,this.I=void 0}onDidChangeValue(t,r,i){return Be.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}r(){this.m.value=J5(()=>{this.t()&&this.flush(),this.j.schedule()})}t(){return!0}u(){hi([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{$t("code/willInitStorage");try{await this.P()}finally{$t("code/didInitStorage")}this.j.schedule()})()),this.h}w(t,r){const{key:i,external:s}=r;if(i===Ud){switch(t){case-1:this.I=void 0;break;case 0:this.G=void 0;break;case 1:this.D=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.L(t)[i],external:s})}y(t){this.g.fire({reason:t})}get(t,r,i){return this.Q(r)?.get(t,i)}getBoolean(t,r,i){return this.Q(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.Q(r)?.getNumber(t,i)}getObject(t,r,i){return this.Q(r)?.getObject(t,i)}storeAll(t,r){this.z(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(Dt(r)){this.remove(t,i,n);return}this.z(()=>{this.C(t,i,s),this.Q(i)?.set(t,r,n)})}remove(t,r,i=!1){this.z(()=>{this.C(t,r,void 0),this.Q(r)?.delete(t,i)})}z(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,r){const i=[],s=this.L(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}C(t,r,i,s=!1){const n=this.L(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.Q(r)?.set(Ud,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.Q(r)?.set(Ud,JSON.stringify(n),s))}get F(){return this.D||(this.D=this.M(1)),this.D}get H(){return this.G||(this.G=this.M(0)),this.G}get J(){return this.I||(this.I=this.M(-1)),this.I}L(t){switch(t){case-1:return this.J;case 0:return this.H;default:return this.F}}M(t){const r=this.Q(t);return r?pF(r):Object.create(null)}isNew(t){return this.getBoolean(fF,t)===!0}async flush(t=Ia.NONE){this.g.fire({reason:t});const r=this.Q(-1),i=this.Q(0),s=this.Q(1);switch(t){case Ia.NONE:await nn.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case Ia.SHUTDOWN:await nn.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.Q(-1)?.items??new Map,r=this.Q(0)?.items??new Map,i=this.Q(1)?.items??new Map;return gF(t,r,i,this.R(-1)??"",this.R(0)??"",this.R(1)??"")}async optimize(t){return await this.flush(),this.Q(t)?.optimize()}async switch(t,r){return this.y(Ia.NONE),hF(t)?this.S(t,r):this.U(t,r)}N(t,r){return!(t.id===r.id||Vx(r)&&Vx(t))}O(t,r,i){this.z(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.w(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.w(i,{key:n,external:!0})})}};function Vx(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function gF(e,t,r,i,s,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,b)=>{a.set(b,v),c.set(b,o(v))});const l=new Map,u=new Map;t.forEach((v,b)=>{l.set(b,v),u.set(b,o(v))});const h=new Map,f=new Map;r.forEach((v,b)=>{h.set(b,v),f.set(b,o(v))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const p=[];if(a.forEach((v,b)=>{p.push({key:b,value:v})}),console.table(p),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const v=[];l.forEach((b,x)=>{v.push({key:x,value:b})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,b)=>{g.push({key:b,value:v})}),console.table(g),console.groupEnd(),console.log(f)}var pG=new P("isMac",Tt,d(1775,null)),gG=new P("isLinux",yt,d(1776,null)),mG=new P("isWindows",Ue,d(1777,null)),mF=new P("isWeb",tl,d(1778,null)),vG=new P("isMacNative",Tt&&!tl,d(1779,null)),wG=new P("isIOS",FD,d(1780,null)),bG=new P("isMobile",OD,d(1781,null)),yG=new P("isDevelopment",!1,!0),EG=new P("productQualityType","",d(1782,null)),vF="inputFocus",xG=new P(vF,!1,d(1783,null)),wF=V("languageService"),bF=V("modelService"),xi,kG=new P("workbenchState",void 0,{type:"string",description:d(4133,null)}),SG=new P("workspaceFolderCount",0,d(4134,null)),$G=new P("openFolderWorkspaceSupport",!0,!0),CG=new P("enterMultiRootWorkspaceSupport",!0,!0),IG=new P("emptyWorkspaceSupport",!0,!0),PG=new P("dirtyWorkingCopies",!1,d(4135,null)),yF=new P("remoteName","",d(4136,null)),DG=new P("virtualWorkspace","",d(4137,null)),AG=new P("temporaryWorkspace",!1,d(4138,null)),TG=new P("isFullscreen",!1,d(4139,null)),RG=new P("isAuxiliaryWindowFocusedContext",!1,d(4140,null)),LG=new P("hasWebFileSystemAccess",!1,!0),NG=new P("embedderIdentifier",void 0,d(4141,null)),FG=new P("activeEditorIsDirty",!1,d(4142,null)),OG=new P("activeEditorIsNotPreview",!1,d(4143,null)),MG=new P("activeEditorIsFirstInGroup",!1,d(4144,null)),UG=new P("activeEditorIsLastInGroup",!1,d(4145,null)),jG=new P("activeEditorIsPinned",!1,d(4146,null)),BG=new P("activeEditorIsReadonly",!1,d(4147,null)),_G=new P("activeCompareEditorCanSwap",!1,d(4148,null)),HG=new P("activeEditorCanToggleReadonly",!0,d(4149,null)),WG=new P("activeEditorCanRevert",!1,d(4150,null)),zG=new P("activeEditorCanSplitInGroup",!0),VG=new P("activeEditor",null,{type:"string",description:d(4151,null)}),qG=new P("activeEditorAvailableEditorIds","",d(4152,null)),GG=new P("textCompareEditorVisible",!1,d(4153,null)),JG=new P("textCompareEditorActive",!1,d(4154,null)),QG=new P("sideBySideEditorActive",!1,d(4155,null)),YG=new P("groupEditorsCount",0,d(4156,null)),XG=new P("activeEditorGroupEmpty",!1,d(4157,null)),ZG=new P("activeEditorGroupIndex",0,d(4158,null)),KG=new P("activeEditorGroupLast",!1,d(4159,null)),eJ=new P("activeEditorGroupLocked",!1,d(4160,null)),EF=new P("multipleEditorGroups",!1,d(4161,null)),tJ=EF.toNegated(),rJ=new P("multipleEditorsSelectedInGroup",!1,d(4162,null)),iJ=new P("twoEditorsSelectedInGroup",!1,d(4163,null)),sJ=new P("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d(4164,null)),xF=new P("editorPartMultipleEditorGroups",!1,d(4165,null)),nJ=xF.toNegated(),oJ=new P("editorPartMaximizedEditorGroup",!1,d(4166,null)),aJ=new P("isAuxiliaryEditorPart",!1,d(4167,null)),cJ=new P("editorIsOpen",!1,d(4168,null)),lJ=new P("inZenMode",!1,d(4169,null)),uJ=new P("isCenteredLayout",!1,d(4170,null)),hJ=new P("splitEditorsVertically",!1,d(4171,null)),dJ=new P("mainEditorAreaVisible",!0,d(4172,null)),fJ=new P("editorTabsVisible",!0,d(4173,null)),pJ=new P("sideBarVisible",!1,d(4174,null)),gJ=new P("sideBarFocus",!1,d(4175,null)),mJ=new P("activeViewlet","",d(4176,null)),vJ=new P("statusBarFocused",!1,d(4177,null)),wJ=new P("titleBarStyle","custom",d(4178,null)),bJ=new P("titleBarVisible",!1,d(4179,null)),yJ=new P("bannerFocused",!1,d(4180,null)),EJ=new P("notificationFocus",!0,d(4181,null)),xJ=new P("notificationCenterVisible",!1,d(4182,null)),kJ=new P("notificationToastsVisible",!1,d(4183,null)),SJ=new P("activeAuxiliary","",d(4184,null)),$J=new P("auxiliaryBarFocus",!1,d(4185,null)),CJ=new P("auxiliaryBarVisible",!1,d(4186,null)),IJ=new P("activePanel","",d(4187,null)),PJ=new P("panelFocus",!1,d(4188,null)),DJ=new P("panelPosition","bottom",d(4189,null)),AJ=new P("panelAlignment","center",d(4190,null)),TJ=new P("panelVisible",!1,d(4191,null)),RJ=new P("panelMaximized",!1,d(4192,null)),LJ=new P("focusedView","",d(4193,null)),qx=class{static{xi=this}static{this.Scheme=new P("resourceScheme",void 0,{type:"string",description:d(4194,null)})}static{this.Filename=new P("resourceFilename",void 0,{type:"string",description:d(4195,null)})}static{this.Dirname=new P("resourceDirname",void 0,{type:"string",description:d(4196,null)})}static{this.Path=new P("resourcePath",void 0,{type:"string",description:d(4197,null)})}static{this.LangId=new P("resourceLangId",void 0,{type:"string",description:d(4198,null)})}static{this.Resource=new P("resource",void 0,{type:"URI",description:d(4199,null)})}static{this.Extension=new P("resourceExtname",void 0,{type:"string",description:d(4200,null)})}static{this.HasResource=new P("resourceSet",void 0,{type:"boolean",description:d(4201,null)})}static{this.IsFileSystemResource=new P("isFileSystemResource",void 0,{type:"boolean",description:d(4202,null)})}constructor(t,r,i,s){this.m=t,this.n=r,this.o=i,this.p=s,this.a=new se,this.d=xi.Scheme.bindTo(this.m),this.f=xi.Filename.bindTo(this.m),this.g=xi.Dirname.bindTo(this.m),this.h=xi.Path.bindTo(this.m),this.i=xi.LangId.bindTo(this.m),this.c=xi.Resource.bindTo(this.m),this.j=xi.Extension.bindTo(this.m),this.k=xi.HasResource.bindTo(this.m),this.l=xi.IsFileSystemResource.bindTo(this.m),this.a.add(r.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&r.hasProvider(n)))})),this.a.add(s.onModelAdded(n=>{sl(n.uri,this.get())&&this.q()})),this.a.add(s.onModelLanguageChanged(n=>{sl(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const r=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(r)}set(t){t=t??void 0,!sl(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?mi(t):null),this.g.set(t?this.r(nl(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?M5(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===W.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};qx=xi=__decorate([__param(0,g1),__param(1,J7),__param(2,wF),__param(3,bF)],qx);var oo;(function(e){e.responseVote=new P("chatSessionResponseVote","",{type:"string",description:d(5302,null)}),e.responseDetectedAgentCommand=new P("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(5303,null)}),e.responseSupportsIssueReporting=new P("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(5304,null)}),e.responseIsFiltered=new P("chatSessionResponseFiltered",!1,{type:"boolean",description:d(5305,null)}),e.responseHasError=new P("chatSessionResponseError",!1,{type:"boolean",description:d(5306,null)}),e.requestInProgress=new P("chatSessionRequestInProgress",!1,{type:"boolean",description:d(5307,null)}),e.isRequestPaused=new P("chatRequestIsPaused",!1,{type:"boolean",description:d(5308,null)}),e.canRequestBePaused=new P("chatCanRequestBePaused",!1,{type:"boolean",description:d(5309,null)}),e.isResponse=new P("chatResponse",!1,{type:"boolean",description:d(5310,null)}),e.isRequest=new P("chatRequest",!1,{type:"boolean",description:d(5311,null)}),e.itemId=new P("chatItemId","",{type:"string",description:d(5312,null)}),e.lastItemId=new P("chatLastItemId",[],{type:"string",description:d(5313,null)}),e.editApplied=new P("chatEditApplied",!1,{type:"boolean",description:d(5314,null)}),e.inputHasText=new P("chatInputHasText",!1,{type:"boolean",description:d(5315,null)}),e.inputHasFocus=new P("chatInputHasFocus",!1,{type:"boolean",description:d(5316,null)}),e.inChatInput=new P("inChatInput",!1,{type:"boolean",description:d(5317,null)}),e.inChatSession=new P("inChat",!1,{type:"boolean",description:d(5318,null)}),e.instructionsAttached=new P("chatInstructionsAttached",!1,{type:"boolean",description:d(5319,null)}),e.supported=Et.or(mF.toNegated(),yF.notEqualsTo("")),e.enabled=new P("chatIsEnabled",!1,{type:"boolean",description:d(5320,null)}),e.panelParticipantRegistered=new P("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(5321,null)}),e.editingParticipantRegistered=new P("chatEditingParticipantRegistered",!1,{type:"boolean",description:d(5322,null)}),e.chatEditingCanUndo=new P("chatEditingCanUndo",!1,{type:"boolean",description:d(5323,null)}),e.chatEditingCanRedo=new P("chatEditingCanRedo",!1,{type:"boolean",description:d(5324,null)}),e.extensionInvalid=new P("chatExtensionInvalid",!1,{type:"boolean",description:d(5325,null)}),e.inputCursorAtTop=new P("chatCursorAtTop",!1),e.inputHasAgent=new P("chatInputHasAgent",!1),e.location=new P("chatLocation",void 0),e.inQuickChat=new P("quickChatHasFocus",!1,{type:"boolean",description:d(5326,null)}),e.hasFileAttachments=new P("chatHasFileAttachments",!1,{type:"boolean",description:d(5327,null)}),e.languageModelsAreUserSelectable=new P("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(5328,null)}),e.Setup={signedOut:new P("chatSetupSignedOut",!1,!0),hidden:new P("chatSetupHidden",!1,!0),installed:new P("chatSetupInstalled",!1,!0),canSignUp:new P("chatPlanCanSignUp",!1,!0),limited:new P("chatPlanLimited",!1,!0),pro:new P("chatPlanPro",!1,!0)},e.SetupViewKeys=new Set([e.Setup.hidden.key,e.Setup.installed.key,e.Setup.signedOut.key,e.Setup.canSignUp.key]),e.SetupViewCondition=Et.or(Et.and(e.Setup.hidden.negate(),e.Setup.installed.negate()),Et.and(e.Setup.canSignUp,e.Setup.installed),Et.and(e.Setup.signedOut,e.Setup.installed)),e.chatQuotaExceeded=new P("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new P("completionsQuotaExceeded",!1,!0),e.Editing={hasToolsAgent:new P("chatHasToolsAgent",!1,{type:"boolean",description:d(5329,null)}),agentMode:new P("chatAgentMode",!1,{type:"boolean",description:d(5330,null)}),agentModeDisallowed:new P("chatAgentModeDisallowed",void 0,{type:"boolean",description:d(5331,null)}),hasToolConfirmation:new P("chatHasToolConfirmation",!1,{type:"boolean",description:d(5332,null)})}})(oo||(oo={}));var Ll,jt;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor",e.EditingSession="editing-session"})(jt||(jt={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor;case"editing-session":return e.EditingSession}return e.Panel}e.fromRaw=t}(jt||(jt={}));var FJ=V("chatAgentService"),Gx="chat.toolsAgentMode",Jx=class extends ee{static{this.AGENT_LEADER="@"}constructor(t,r){super(),this.u=t,this.w=r,this.b=new Map,this.f=new D,this.onDidChangeAgents=this.f.event,this.g=new D,this.onDidChangeToolsAgentModeEnabled=this.g.event,this.h=new Set,this.t=new Map,this.C=new Map,this.j=oo.enabled.bindTo(this.u),this.m=oo.panelParticipantRegistered.bindTo(this.u),this.n=oo.editingParticipantRegistered.bindTo(this.u),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.h)&&this.z()})),this.r=oo.Editing.agentMode.bindTo(t),this.s=oo.Editing.hasToolsAgent.bindTo(t),this.r.set(this.w.getBoolean(Gx,1,!1)),this.B(this.w.onWillSaveState(()=>this.w.store(Gx,this.r.get(),1,0)))}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.u.contextMatchesRules(Et.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.y(),this.z(),this.f.fire(void 0),te(()=>{this.b.delete(t),this.y(),this.z(),this.f.fire(void 0)})}y(){this.h.clear();for(const t of this.b.values())if(t.data.when){const r=Et.deserialize(t.data.when);for(const i of r?.keys()||[])this.h.add(i)}}z(){let t=!1,r=!1,i=!1;for(const s of this.getAgents())s.isDefault&&s.locations.includes(jt.EditingSession)?(t=!0,s.isToolsAgent&&(i=!0)):s.isDefault&&(r=!0);this.n.set(t),this.m.set(r),i!==this.s.get()&&(this.s.set(i),this.f.fire(this.getDefaultAgent(jt.EditingSession)))}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.j.set(!0),i.impl=r,this.f.fire(new jd(i.data,r)),te(()=>{i.impl=void 0,this.f.fire(void 0),i.data.isDefault&&this.j.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.f.fire(new jd(t,r)),te(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.C.set(t,r),{dispose:()=>{this.C.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.C.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.f.fire(new jd(i.data,i.impl))}getDefaultAgent(t){return BP(this.getActivatedAgents(),r=>t===jt.EditingSession&&this.toolsAgentModeEnabled!==!!r.isToolsAgent?!1:!!r.isDefault&&r.locations.includes(t))}get toolsAgentModeEnabled(){return!!this.s.get()&&!!this.r.get()}toggleToolsAgentMode(t){this.r.set(t??!this.r.get()),this.g.fire(),this.f.fire(this.getDefaultAgent(jt.EditingSession))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return Ar.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t,r=!1){if(!(!this.D(t)&&!r))return this.b.get(t)?.data}D(t){const r=typeof t=="string"?this.b.get(t):t;return!r?.data.when||this.u.contextMatchesRules(Et.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=Ar.find(this.b.values(),i=>kF(i.data)===t)?.data;if(!(r&&!this.D(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.D(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.D(t.data.id)).map(t=>new jd(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}setRequestPaused(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);s.impl.setRequestPaused?.(r,i)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.t.set(t,r),te(()=>{this.t.delete(t)})}hasChatParticipantDetectionProviders(){return this.t.size>0}async detectAgentOrCommand(t,r,i,s){const n=Ar.first(this.t.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(i.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:f.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};Jx=__decorate([__param(0,g1),__param(1,ev)],Jx);var jd=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isToolsAgent(){return this.b.isToolsAgent}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}setRequestPaused(e,t){this.d.setRequestPaused&&this.d.setRequestPaused(e,t)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},MJ=V("chatAgentNameService"),Qx=class{static{Ll=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.h=r,this.i=i,this.j=s,this.f=NN(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(Ll.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(Ll.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>ar(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Xe.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await cF(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.f.set(i,void 0),this.j.store(Ll.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.m(t.name,t).get(),i=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return r&&i}m(t,r){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>fi(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.g=!0}};Qx=Ll=__decorate([__param(0,Cd),__param(1,iF),__param(2,Ce),__param(3,ev)],Qx);function kF(e){return`${e.extensionId.value}.${e.id}`}function Yx(){return Object.create(null)}var ao="**",tv="/",Bd="[/\\\\]",_d="[^/\\\\]",SF=/\//g;function Xx(e,t){switch(e){case 0:return"";case 1:return`${_d}*?`;default:return`(?:${Bd}|${_d}+${Bd}${t?`|${Bd}${_d}+`:""})*?`}}function Nl(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function Zx(e){if(!e)return"";let t="";const r=Nl(e,tv);if(r.every(i=>i===ao))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===ao){if(i)return;t+=Xx(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===tv?h="":h=Ks(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${Nl(a,",").map(p=>Zx(p)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=_d;continue;case"*":t+=Xx(1);continue;default:t+=Ks(u)}}n<r.length-1&&(r[n+1]!==ao||n+2<r.length)&&(t+=Bd)}i=s===ao})}return t}var $F=/^\*\*\/\*\.[\w\.-]+$/,CF=/^\*\*\/([\w\.-]+)\/?$/,IF=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,PF=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,DF=/^\*\*((\/[\w\.-]+)+)\/?$/,AF=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Kx=new qc(1e4),e9=function(){return!1},Gi=function(){return null};function rv(e,t){if(!e)return Gi;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=Kx.get(i);if(s)return t9(s,e);let n;return $F.test(r)?s=TF(r.substr(4),r):(n=CF.exec(iv(r,t)))?s=RF(n[1],r):(t.trimForExclusions?PF:IF).test(r)?s=LF(r,t):(n=DF.exec(iv(r,t)))?s=r9(n[1].substr(1),r,!0):(n=AF.exec(iv(r,t)))?s=r9(n[1],r,!1):s=NF(r),Kx.set(i,s),t9(s,e)}function t9(e,t){if(typeof t=="string")return e;const r=function(i,s){return Wn(i,t.base,!yt)?e(t2(i.substr(t.base.length),wt),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function iv(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function TF(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function RF(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function LF(e,t){const r=n9(e.slice(1,-1).split(",").map(a=>rv(a,t)).filter(a=>a!==Gi),e),i=r.length;if(!i)return Gi;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function r9(e,t,r){const i=wt===Le.sep,s=i?e:e.replace(SF,wt),n=wt+s,o=Le.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function NF(e){try{const t=new RegExp(`^${Zx(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return Gi}}function Pa(e,t,r){return!e||typeof t!="string"?!1:ki(e)(t,void 0,r)}function ki(e,t={}){if(!e)return e9;if(typeof e=="string"||FF(e)){const r=rv(e,t);if(r===Gi)return e9;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return OF(e,t)}function FF(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function i9(e){return e.allBasenames||[]}function s9(e){return e.allPaths||[]}function OF(e,t){const r=n9(Object.getOwnPropertyNames(e).map(a=>MF(a,e[a],t)).filter(a=>a!==Gi)),i=r.length;if(!i)return Gi;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let f;for(let p=0,g=r.length;p<g;p++){const v=r[p](u,h);if(typeof v=="string")return v;rn(v)&&(f||(f=[]),f.push(v))}return f?(async()=>{for(const p of f){const g=await p;if(typeof g=="string")return g}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let f=0,p=r.length;f<p;f++){const g=r[f];g.requiresSiblings&&l&&(c||(c=vt(a)),u||(u=c.substr(0,c.length-Uh(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;rn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const f of h){const p=await f;if(typeof p=="string")return p}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function MF(e,t,r){if(t===!1)return Gi;const i=rv(e,r);if(i===Gi)return Gi;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return rn(h)?h.then(f=>f?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function n9(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}function o9(e,t){return Bi(e,t,(r,i)=>typeof r=="string"&&typeof i=="string"?r===i:typeof r!="string"&&typeof i!="string"?r.base===i.base&&r.pattern===i.pattern:!1)}var UF=V("notebookDocumentService"),sv=["W","X","Y","Z","a","b","c","d","e","f"],jF=new RegExp(`^[${sv.join("")}]+`),a9=7;function c9(e){if(e.scheme!==W.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(jF,""),a9),i=Xh(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function BF(e,t){const r=t.toString(a9),s=`${r.length<sv.length?sv[r.length-1]:"z"}${r}s${Zh(J.fromString(e.scheme),!0,!0)}`;return e.with({scheme:W.vscodeNotebookCell,fragment:s})}function _F(e){if(e.scheme!==W.vscodeNotebookMetadata)return;const t=Xh(e.fragment).toString();return e.with({scheme:t,fragment:null})}function HF(e){const t=`${Zh(J.fromString(e.scheme),!0,!0)}`;return e.with({scheme:W.vscodeNotebookMetadata,fragment:t})}var WF=class{constructor(){this.a=new Vt}getNotebook(e){if(e.scheme===W.vscodeNotebookCell){const t=c9(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ne(UF,WF,1);var Da;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Da||(Da={}));var jJ=["application/json","application/javascript","text/html","image/svg+xml",ks.latex,ks.markdown,"image/png","image/jpeg",ks.text],BJ=[ks.latex,ks.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",ks.text],l9;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(l9||(l9={}));var Fl;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Fl||(Fl={}));var u9;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(u9||(u9={}));var h9;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(h9||(h9={}));var d9;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(d9||(d9={}));var Si;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Si||(Si={}));var f9;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(f9||(f9={}));var p9;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(p9||(p9={}));var g9;(function(e){e.scheme=W.vscodeNotebookMetadata;function t(i){return HF(i)}e.generate=t;function r(i){return _F(i)}e.parse=r})(g9||(g9={}));var m9;(function(e){e.scheme=W.vscodeNotebookCell;function t(a,c){return BF(a,c)}e.generate=t;function r(a){return c9(a)}e.parse=r;function i(a,c){return a.with({scheme:W.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==W.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==W.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||W.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(m9||(m9={}));var _J=new P("notebookEditorCursorAtBoundary","none"),HJ=new P("notebookEditorCursorAtLineBoundary","none"),v9;(function(e){e.default="default",e.option="option"})(v9||(v9={}));var w9;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(w9||(w9={}));var b9;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(b9||(b9={}));var WJ=class em{static{this.d="notebook/"}static create(t,r){return`${em.d}${t}/${r??t}`}static parse(t){if(t.startsWith(em.d)){const r=t.substring(em.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function y9(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var zF=new TextDecoder;function VF(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=GF(t);const s=J.concat(t.map(o=>J.wrap(o))),n=ZF(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var Hd="\x1B[A",nv=Hd.split("").map(e=>e.charCodeAt(0)),qF=10;function GF(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<Hd.length)return;const s=e[i-1],n=r.subarray(0,Hd.length);if(n[0]===nv[0]&&n[1]===nv[1]&&n[2]===nv[2]){const o=s.lastIndexOf(qF);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(Hd.length)}}),t}function JF(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function QF(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var YF=8,XF=13;function ZF(e){return!e.buffer.includes(YF)&&!e.buffer.includes(XF)?e:J.fromString(QF(JF(zF.decode(e.buffer))))}var E9;(function(e){e.Delimiter="\0"})(E9||(E9={}));var x9;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(x9||(x9={}));var Fe=class ci{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new ci([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new ci(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new ci(t.split("\0"))}static join(t,r){return new ci([...t.path,r])}static split(t){return t.split("\0")}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:ci.isChild(t,r)?2:ci.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new ci(this.path,1)}get parentId(){return this.d>1?new ci(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new ci(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new ci(this.path,t)}compare(t){if(typeof t=="string")return ci.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},k9;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(k9||(k9={}));var S9;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(S9||(S9={}));var $9;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})($9||($9={}));var C9;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(C9||(C9={}));var zJ={2:d(11708,null),4:d(11709,null),8:d(11710,null)},KF=e=>"runId"in e,Aa;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:Qe.lift(r.range),uri:t.asCanonicalUri(E.revive(r.uri))})})(Aa||(Aa={}));var I9;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(I9||(I9={}));var Wd;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(E.revive(r.uri)):void 0,position:r.position?qr.lift(r.position):void 0})})(Wd||(Wd={}));var zd;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Aa.serialize(t.location),stackTrace:t.stackTrace?.map(Wd.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&Aa.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>Wd.deserialize(t,i))})})(zd||(zd={}));var Vd;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Aa.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&Aa.deserialize(t,r.location)})})(Vd||(Vd={}));var qd;(function(e){e.serialize=t=>t.type===0?zd.serialize(t):Vd.serialize(t),e.deserialize=(t,r)=>r.type===0?zd.deserialize(t,r):Vd.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(qd||(qd={}));var Ol;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(qd.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>qd.deserialize(t,i))})})(Ol||(Ol={}));var P9="\0",Gd=(e,t)=>e+P9+t,D9=e=>{const t=e.indexOf(P9);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Jd;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(E.revive(r.uri)):void 0,range:r.range?Qe.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(Jd||(Jd={}));var A9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(A9||(A9={}));var fn;(function(e){e.serialize=t=>({expand:t.expand,item:Jd.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:Fe.root(r.item.extId),expand:r.expand,item:Jd.deserialize(t,r.item)})})(fn||(fn={}));var Ml;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?Qe.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(Ml||(Ml={}));var ov=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},T9;(function(e){e.serializeWithoutMessages=t=>({...fn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Ol.serializeWithoutMessages)}),e.serialize=t=>({...fn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Ol.serialize)}),e.deserialize=(t,r)=>({...fn.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>Ol.deserialize(t,i)),retired:!0})})(T9||(T9={}));var av;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})(av||(av={}));var R9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(E.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:av.empty()})})(R9||(R9={}));function cv(e){return{...e,location:e.location?.toJSON()}}function lv(e){return e.location=e.location?qr.isIPosition(e.location)?qr.lift(e.location):Qe.lift(e.location):void 0,e}var L9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(L9||(L9={}));var N9;(function(e){e.serialize=t=>t.type===0?Yd.serialize(t):Xd.serialize(t),e.deserialize=t=>t.type===0?Yd.deserialize(t):Xd.deserialize(t)})(N9||(N9={}));var Qd;(function(e){e.serialize=cv,e.deserialize=lv})(Qd||(Qd={}));var Yd;(function(e){e.serialize=cv,e.deserialize=lv})(Yd||(Yd={}));var Xd;(function(e){e.serialize=t=>({...cv(t),branches:t.branches?.map(Qd.serialize)}),e.deserialize=t=>({...lv(t),branches:t.branches?.map(Qd.deserialize)})})(Xd||(Xd={}));var F9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(F9||(F9={}));var Zd;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:fn.deserialize(t,r.item)}:r.op===1?{op:r.op,item:Ml.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(E.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:fn.serialize(t.item)}:t.op===1?{op:t.op,item:Ml.serialize(t.item)}:t})(Zd||(Zd={}));var eO=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p(fn.deserialize(this.l,r.item),t);break;case 1:this.q(Ml.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=Fe.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),ov(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=Fe.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},tO=V("editorGroupsService"),O9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(O9||(O9={}));var M9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(M9||(M9={}));var U9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(U9||(U9={}));var j9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(j9||(j9={}));var B9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(B9||(B9={}));var _9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(_9||(_9={}));var H9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(H9||(H9={}));var VJ=V("editorService"),rO=-1,iO=-2,uv="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",qJ=new RegExp(uv),W9;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(W9||(W9={}));var z9;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(z9||(z9={}));var V9;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(V9||(V9={}));var q9;(function(e){e.Install="install",e.Uninstall="uninstall"})(q9||(q9={}));var G9;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(G9||(G9={}));var GJ=V("extensionGalleryService"),J9;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(J9||(J9={}));var Q9;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(Q9||(Q9={}));var Y9;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(Y9||(Y9={}));var JJ=V("extensionManagementService"),QJ=V("IGlobalExtensionEnablementService"),YJ=V("IExtensionTipsService"),XJ=V("IAllowedExtensionsService"),ZJ=Em(1880,"Extensions"),KJ=Em(1881,"Preferences"),eQ=V("telemetryService"),tQ=V("customEndpointTelemetryService"),X9;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(X9||(X9={}));var Z9;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(Z9||(Z9={}));var hv=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},sO=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},rQ=new sO,nO="telemetry",oO={id:nO,name:d(2190,null)},aO=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function cO(e){if(!e)return"none";const t=r1(e);return aO.has(t)?t:"other"}function lO(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function uO(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function K9(e,t){return da(e,r=>{if(r instanceof hv||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=lO(i,t);for(const s of t)i=i.replace(s,"");return i=uO(i),i}})}var iQ=new Je("pprice.better-merge"),hO=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[Je.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${Je.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){mt(o)}}return t}},dO=new hO,fO=Object.freeze({identifier:new Je("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:E.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),pO=V("extensionService"),ek=class{constructor(e){this.dependency=e}},tk;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(tk||(tk={}));function ht(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function N(e,t){if(!ht(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var rk;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(rk||(rk={}));var ik;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(ik||(ik={}));var Ul=(e,t)=>e===t,gO={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Ul,label:Ul,description:Ul,error:Ul,sortText:Ul,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},mO=Object.entries(gO),vO=(e,t)=>{let r;for(const[i,s]of mO)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},wO=class extends ee{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new ms(()=>this.flushDiff(),200)),this.g=this.B(new D),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){ov(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){ov(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Fe.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:iD(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=Fe.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=vO(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Fe.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>Gd(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Gd(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Gd(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(Fe.joinToString(e.fullId,s.id),t);rn(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new ei;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new ei,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return rn(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(Fe.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},bO=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Kd=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},yO=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},EO=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new Kd(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new yO(c.id,l,e.controllerId);if(n.has(c.id))throw new bO(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new Kd(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},sk=new WeakMap,xO=(e,t)=>{const r={controllerId:t};return sk.set(e,r),r},ef=e=>{const t=sk.get(e);if(!t)throw new Kd(e?.id||"<unknown>");return t},kO=V("remoteAuthorityResolverService"),nk;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(nk||(nk={}));var ok=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},SO=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Er;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Er||(Er={}));var dv=class qo extends ui{static isNotAvailable(t){return t instanceof qo&&t._code===Er.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof qo&&t._code===Er.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof qo&&t._code===Er.NoResolverFound}static isInvalidAuthority(t){return t instanceof qo&&t._code===Er.InvalidAuthority}static isHandled(t){return t instanceof qo&&t.isHandled}constructor(t,r=Er.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,this.isHandled=r===Er.NotAvailable&&i===!0,Object.setPrototypeOf(this,qo.prototype)}};function ak(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var fv,co,Cs,pv,lo,pn,uo,gv,mv,tf,jl,vv,Ji,Qi,wv,xr,bv;function ne(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var yv;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(yv||(yv={}));var ck;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(ck||(ck={}));var Re=fv=class{static from(...t){let r=t;return new fv(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Re=fv=__decorate([ne],Re);var Ie=co=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof co)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof co)return t;if(this.isPosition(t))return new co(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw $e("line must be non-negative");if(r<0)throw $e("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw $e();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new co(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw $e();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new co(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ie=co=__decorate([ne],Ie);var ke=Cs=class{static isRange(t){return t instanceof Cs?!0:t?Ie.isPosition(t.start)&&Ie.isPosition(t.end):!1}static of(t){if(t instanceof Cs)return t;if(this.isRange(t))return new Cs(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Ie(t,r),o=new Ie(i,s)):Ie.isPosition(t)&&Ie.isPosition(r)&&(n=Ie.of(t),o=Ie.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Cs.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ie.isPosition(t)?!(Ie.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=Ie.Max(t.start,this.c),i=Ie.Min(t.end,this.e);if(!r.isAfter(i))return new Cs(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=Ie.Min(t.start,this.c),i=Ie.Max(t.end,this.end);return new Cs(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw $e();let i;return t?Ie.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new Cs(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return lk(this)}};ke=Cs=__decorate([ne],ke);var Is=pv=class extends ke{static isSelection(t){return t instanceof pv?!0:t?ke.isRange(t)&&Ie.isPosition(t.anchor)&&Ie.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Ie(t,r),o=new Ie(i,s)):Ie.isPosition(t)&&Ie.isPosition(r)&&(n=Ie.of(t),o=Ie.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return $O(this)}};Is=pv=__decorate([ne],Is);function lk(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function $O(e){let t=lk(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var uk=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw $e("connectionToken")},CO=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw $e("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw $e("port");typeof r<"u"&&uk(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},rf=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&uk(t)}},Ta=class tm extends Error{static NotAvailable(t,r){return new tm(t,Er.NotAvailable,r)}static TemporarilyNotAvailable(t){return new tm(t,Er.TemporarilyNotAvailable)}constructor(t,r=Er.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,tm.prototype)}},$i;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})($i||($i={}));var Ra;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ra||(Ra={}));var gn=lo=class{static isTextEdit(t){return t instanceof lo?!0:t?ke.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new lo(t,r)}static insert(t,r){return lo.replace(new ke(t,t),r)}static delete(t){return lo.replace(t,"")}static setEndOfLine(t){const r=new lo(new ke(new Ie(0,0),new Ie(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!ke.isRange(t))throw $e("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw $e("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw $e("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};gn=lo=__decorate([ne],gn);var sf=pn=class{static isNotebookCellEdit(t){return t instanceof pn?!0:t?Ds.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new pn(t,r)}static insertCells(t,r){return new pn(new Ds(t,t),r)}static deleteCells(t){return new pn(t,[])}static updateCellMetadata(t,r){const i=new pn(new Ds(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new pn(new Ds(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};sf=pn=__decorate([ne],sf);var Ev=class rm{static isSnippetTextEdit(t){return t instanceof rm?!0:t?ke.isRange(t.range)&&fo.isSnippetString(t.snippet):!1}static replace(t,r){return new rm(t,r)}static insert(t,r){return rm.replace(new ke(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},hk;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(hk||(hk={}));var ho=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r}})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new gn(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new ke(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,sf.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):Ev.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}JP(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new Vt;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};ho=__decorate([ne],ho);var fo=uo=class{static isSnippetString(t){return t instanceof uo?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=uo.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new uo;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=uo.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new uo;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};fo=uo=__decorate([ne],fo);var po;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(po||(po={}));var sr;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(sr||(sr={}));var Gr=gv=class{static isLocation(t){return t instanceof gv?!0:t?ke.isRange(t.range)&&E.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(ke.isRange(r))this.range=ke.of(r);else if(Ie.isPosition(r))this.range=new ke(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Gr=gv=__decorate([ne],Gr);var Bl=class{static is(t){return t?typeof t.message=="string"&&t.location&&ke.isRange(t.location.range)&&E.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};Bl=__decorate([ne],Bl);var nf=class{constructor(t,r,i=sr.Error){if(!ke.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:sr[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Bi(t.tags,r.tags)&&Bi(t.relatedInformation,r.relatedInformation,Bl.isEqual)}};nf=__decorate([ne],nf);var of=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};of=__decorate([ne],of);var af=class extends of{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};af=__decorate([ne],af);var xv;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(xv||(xv={}));var _l;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(_l||(_l={}));var cf=class{constructor(t,r=_l.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:_l[this.kind]}}};cf=__decorate([ne],cf);var lf=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};lf=__decorate([ne],lf);var rt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(rt||(rt={}));var Hl;(function(e){e[e.Deprecated=1]="Deprecated"})(Hl||(Hl={}));var Wl=mv=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof Gr?this.location=s:i instanceof ke&&(this.location=new Gr(s,i)),mv.validate(this)}toJSON(){return{name:this.name,kind:rt[this.kind],location:this.location,containerName:this.containerName}}};Wl=mv=__decorate([ne],Wl);var zl=tf=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(tf.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],tf.validate(this)}};zl=tf=__decorate([ne],zl);var Vl;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Vl||(Vl={}));var ql=class{constructor(t,r){this.title=t,this.kind=r}};ql=__decorate([ne],ql);var pt=class{static{jl=this}static{this.c="."}constructor(t){this.value=t}append(t){return new jl(this.value?this.value+jl.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+jl.c)}};pt=jl=__decorate([ne],pt),pt.Empty=new pt(""),pt.QuickFix=pt.Empty.append("quickfix"),pt.Refactor=pt.Empty.append("refactor"),pt.RefactorExtract=pt.Refactor.append("extract"),pt.RefactorInline=pt.Refactor.append("inline"),pt.RefactorMove=pt.Refactor.append("move"),pt.RefactorRewrite=pt.Refactor.append("rewrite"),pt.Source=pt.Empty.append("source"),pt.SourceOrganizeImports=pt.Source.append("organizeImports"),pt.SourceFixAll=pt.Source.append("fixAll"),pt.Notebook=pt.Empty.append("notebook");var Gl=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Gl=__decorate([ne],Gl);var kv=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},dk=class{constructor(e,t){this.fromRanges=t,this.from=e}},fk=class{constructor(e,t){this.fromRanges=t,this.to=e}},La;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(La||(La={}));var uf=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};uf=__decorate([ne],uf);var Ur=vv=class{#e;static isMarkdownString(t){return t instanceof vv?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new hd(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};Ur=vv=__decorate([ne],Ur);var Sv=class{constructor(t,r){this.label=t,this.documentation=r}};Sv=__decorate([ne],Sv);var $v=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};$v=__decorate([ne],$v);var Cv=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Cv=__decorate([ne],Cv);var Iv;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(Iv||(Iv={}));var Pv;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(Pv||(Pv={}));var hf=class{constructor(t){this.value=t}};hf=__decorate([ne],hf);var df=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};df=__decorate([ne],df);var Na;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Na||(Na={}));var pe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(pe||(pe={}));var Jl;(function(e){e[e.Deprecated=1]="Deprecated"})(Jl||(Jl={}));var ff=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&pe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};ff=__decorate([ne],ff);var Fa=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};Fa=__decorate([ne],Fa);var Dv=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};Dv=__decorate([ne],Dv);var Av=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};Av=__decorate([ne],Av);var go;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(go||(go={}));var Ql;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Ql||(Ql={}));var mn;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(mn||(mn={}));function IO(e,t){return`${Je.toKey(e)}.${t}`}var Ci;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Ci||(Ci={}));var Oa;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Oa||(Oa={}));var pf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(pf||(pf={}));var Ma;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ma||(Ma={}));var Ua;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(Ua||(Ua={}));var Yl;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Yl||(Yl={}));var mo;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(mo||(mo={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(Ma||(Ma={}));var ja;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(ja||(ja={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(ja||(ja={}));var gf=class{constructor(t,r){if(r&&!E.isUri(r))throw $e("target");if(!ke.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.target=r}};gf=__decorate([ne],gf);var Ba=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Ba=__decorate([ne],Ba);var mf=class{constructor(t,r){if(r&&!(r instanceof Ba))throw $e("color");if(!ke.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.color=r}};mf=__decorate([ne],mf);var vf=class{constructor(t){if(!t||typeof t!="string")throw $e("label");this.label=t}};vf=__decorate([ne],vf);var pk;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(pk||(pk={}));var Tv;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(Tv||(Tv={}));var Rv;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(Rv||(Rv={}));var wf;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(wf||(wf={}));var kr;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(kr||(kr={}));var PO=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw $e("startIndex");if(typeof t!="number"||t<1)throw $e("length");if(r!==void 0&&typeof r!="string")throw $e("tooltip")}},DO=class{constructor(e){this.uri=e}},AO=class{constructor(e){this.terminalCommand=e}},Lv;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(Lv||(Lv={}));var TO=class{constructor(e){if(this.options=e,typeof e!="object")throw $e("options")}},Nv;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag"})(Nv||(Nv={}));var RO=class{constructor(e,t,r,i,s,n,o,a,c){this.label=e,this.icon=t,this.detail=r,this.documentation=i,this.isFile=s,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},LO=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},Fv;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Fv||(Fv={}));var Ov;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Ov||(Ov={}));var Xl=class{static{Ji=this}static{this.Clean=new Ji("clean","Clean")}static{this.Build=new Ji("build","Build")}static{this.Rebuild=new Ji("rebuild","Rebuild")}static{this.Test=new Ji("test","Test")}static from(t){switch(t){case"clean":return Ji.Clean;case"build":return Ji.Build;case"rebuild":return Ji.Rebuild;case"test":return Ji.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw $e("name");this.c=t}get id(){return this.c}};Xl=Ji=__decorate([ne],Xl);function gk(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var _a=class{constructor(t,r,i){if(typeof t!="string")throw $e("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw $e("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return gk(t)}};_a=__decorate([ne],_a);var vo=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw $e("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t,r&&(this.f=r),this.g=i}else{if(typeof t!="string")throw $e("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw $e("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return gk(t)}};vo=__decorate([ne],vo);var Mv;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Mv||(Mv={}));var vn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(vn||(vn={}));var Uv=class{constructor(e){this.c=e}computeId(){return"customExecution"+Ct()}set callback(e){this.c=e}get callback(){return this.c}},bf=class{static{Qi=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===vn.Global||r===vn.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof _a?this.l={type:Qi.e,id:this.q.computeId()}:this.q instanceof vo?this.l={type:Qi.f,id:this.q.computeId()}:this.q instanceof Uv?this.l={type:Qi.c,id:this.q.computeId()}:this.l={type:Qi.g,id:Ct()}}get definition(){return this.l}set definition(t){if(t==null)throw $e("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw $e("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(Qi.g===r||Qi.e===r||Qi.f===r||Qi.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw $e("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};bf=Qi=__decorate([ne],bf);var wo;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(wo||(wo={}));var jv;(function(e){function t(r){const i=r;return Kr(i.value)?i.tooltip&&!Pe(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(jv||(jv={}));var yf=wv=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=Kr(i.checkboxState)?i.checkboxState:bt(i.checkboxState)&&Kr(i.checkboxState.state)?i.checkboxState.state:void 0,n=!Kr(i.checkboxState)&&bt(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==Yi.Checked&&s!==Yi.Unchecked||n!==void 0&&!Pe(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof wv)return!0;if(i.label!==void 0&&!Pe(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Pe(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Pe(i.iconPath)&&!E.isUri(i.iconPath)&&(!i.iconPath||!Pe(i.iconPath.id))){const s=i.iconPath;if(!s||!Pe(s.light)&&!E.isUri(s.light)&&!Pe(s.dark)&&!E.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Pe(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!E.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Pe(i.tooltip)&&!(i.tooltip instanceof Ur)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<bo.None&&i.collapsibleState>bo.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Pe(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=bo.None){this.collapsibleState=r,E.isUri(t)?this.resourceUri=t:this.label=t}};yf=wv=__decorate([ne],yf);var bo;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(bo||(bo={}));var Yi;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Yi||(Yi={}));var Ef=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Ef=__decorate([ne],Ef);var xf=class extends Ef{},NO=class extends xf{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},FO=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},Ha=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};Ha=__decorate([ne],Ha);var Bv=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};Bv=__decorate([ne],Bv);var _v;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(_v||(_v={}));var wn=class im{static{this.c="."}constructor(t){this.value=t}append(...t){return new im((this.value?[this.value,...t]:t).join(im.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+im.c)}};wn.Empty=new wn(""),wn.Text=new wn("text"),wn.TextUpdateImports=wn.Text.append("updateImports");var OO=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},cr=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};cr=__decorate([ne],cr),cr.File=new cr("file"),cr.Folder=new cr("folder");var Zl=class{constructor(t){this.id=t}};Zl=__decorate([ne],Zl);var Wa;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Wa||(Wa={}));var za=class{get base(){return this.c}set base(t){this.c=t,this.e=E.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!E.isUri(t)&&!E.isUri(t.uri)))throw $e("base");if(typeof r!="string")throw $e("pattern");typeof t=="string"?this.baseUri=E.file(t):E.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};za=__decorate([ne],za);var mk=new WeakMap;function MO(e,t){mk.set(e,t)}var Va=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=mk.get(this)??Ct()),this.c}};Va=__decorate([ne],Va);var yo=class extends Va{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw $e("location");this.location=t}};yo=__decorate([ne],yo);var Eo=class extends Va{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};Eo=__decorate([ne],Eo);var kf=class extends Va{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw $e("dataId");this.label=t,this.dataId=r,this.canPersist=i}};kf=__decorate([ne],kf);var qa=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};qa=__decorate([ne],qa);var Ga=class{constructor(t,r){this.port=t,this.host=r}};Ga=__decorate([ne],Ga);var Kl=class{constructor(t){this.path=t}};Kl=__decorate([ne],Kl);var eu=class{constructor(t){this.implementation=t}};eu=__decorate([ne],eu);var vk=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},wk=class{constructor(e,t){this.session=e,this.threadId=t}},Sf=class{constructor(t,r){this.range=t,this.expression=r}};Sf=__decorate([ne],Sf);var tu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(tu||(tu={}));var $f=class{constructor(t,r){this.range=t,this.text=r}};$f=__decorate([ne],$f);var Cf=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};Cf=__decorate([ne],Cf);var If=class{constructor(t,r){this.range=t,this.expression=r}};If=__decorate([ne],If);var Hv=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};Hv=__decorate([ne],Hv);var Wv;(function(e){e[e.AIGenerated=1]="AIGenerated"})(Wv||(Wv={}));var ru;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ru||(ru={}));var UO=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Ja;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Ja||(Ja={}));var Bt=xr=class extends Error{static FileExists(t){return new xr(t,ae.FileExists,xr.FileExists)}static FileNotFound(t){return new xr(t,ae.FileNotFound,xr.FileNotFound)}static FileNotADirectory(t){return new xr(t,ae.FileNotADirectory,xr.FileNotADirectory)}static FileIsADirectory(t){return new xr(t,ae.FileIsADirectory,xr.FileIsADirectory)}static NoPermissions(t){return new xr(t,ae.NoPermissions,xr.NoPermissions)}static Unavailable(t){return new xr(t,ae.Unavailable,xr.Unavailable)}constructor(t,r=ae.Unknown,i){super(E.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",X7(this,r),Object.setPrototypeOf(this,xr.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};Bt=xr=__decorate([ne],Bt);var zv=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};zv=__decorate([ne],zv);var Ps;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Ps||(Ps={}));var iu;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(iu||(iu={}));var Vv;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Vv||(Vv={}));var qv;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(qv||(qv={}));var su;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(su||(su={}));var nu;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(nu||(nu={}));var ou;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(ou||(ou={}));var Gv=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function jO(e){return typeof e>"u"||nD(e)}var BO=class II{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(ke.isRange(t)&&typeof r=="string"&&jO(i))return this.o(t,r,i);throw $e()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],p=this.g[5*h+1];f===0?(f=l,p+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=p,l=f,u=p}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],p=t[c+4],g=l-n,v=g===0?u-o:u,b=5*a;s[b+0]=g,s[b+1]=v,s[b+2]=h,s[b+3]=f,s[b+4]=p,n=l,o=u}return s}build(t){return this.f?new Qa(new Uint32Array(this.g),t):new Qa(II.r(this.g),t)}},Qa=class{constructor(e,t){this.resultId=t,this.data=e}},bk=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},Pf=class{constructor(e,t){this.resultId=t,this.edits=e}},Df;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Df||(Df={}));var _O=class{constructor(e){this.name=e}},Jv;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(Jv||(Jv={}));var au=class{static{this.Back={iconPath:new cr("arrow-left")}}constructor(){}};au=__decorate([ne],au);var cu;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(cu||(cu={}));var Ya;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ya||(Ya={}));var xo;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(xo||(xo={}));var Qv=class{static validate(e){if(typeof e.badge=="string"){let t=g5(e.badge,0);if(t<e.badge.length&&(t+=g5(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!cr.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},Af=class{constructor(t){this.kind=t}};Af=__decorate([ne],Af);var bn;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(bn||(bn={}));var Ds=class r4{static isNotebookRange(t){return t instanceof r4?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw $e("start must be positive");if(r<0)throw $e("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new r4(r,i)}},Tf=class i4{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>i4.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,i4.validate(this)}},yk=class{constructor(e){this.cells=e}},Ek=class qs{static isNotebookCellOutputItem(t){return t instanceof qs?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return qs.json(r,"application/vnd.code.notebook.error")}static stdout(t){return qs.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return qs.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new qs(t,r)}static#e=new TextEncoder;static text(t,r=ks.text){const i=qs.#e.encode(String(t));return new qs(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return qs.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=S7(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Rf=class s4{static isNotebookCellOutput(t){return t instanceof s4?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=S7(o.mime);if(!i.has(a)||y9(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=s4.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=Ct(),this.metadata=r??i)}},HO=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},ko;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(ko||(ko={}));var Xa;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Xa||(Xa={}));var Lf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Lf||(Lf={}));var Nf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Nf||(Nf={}));var WO=class{constructor(e,t){this.text=e,this.alignment=t}},Yv;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(Yv||(Yv={}));var Ff;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Ff||(Ff={}));var xk=class{constructor(e,t=[]){this.uri=e,this.provides=Zr(t)}},zO=class{constructor(e){this.label=e}},lu;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(lu||(lu={}));var Xv=class{constructor(t,r){this.label=t,this.timestamp=r}};Xv=__decorate([ne],Xv);var Za;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(Za||(Za={}));var Of;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Of||(Of={}));var yn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(yn||(yn={}));var VO=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},qO=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},Zv;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(Zv||(Zv={}));var Ka;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(Ka||(Ka={}));var kk=class{constructor(e,t,r){this.controllerId=e,this.profileId=t,this.kind=r}},Mf=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};Mf=__decorate([ne],Mf);var Uf=bv=class{static diff(t,r,i){const s=new bv(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};Uf=bv=__decorate([ne],Uf);var uu=class{constructor(t){this.id=t}};uu=__decorate([ne],uu);var GO=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},jf=class{constructor(e,t){this.covered=e,this.total=t,Bf(this)}};function Bf(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var _f=class PI{static fromDetails(t,r){const i=new jf(0,0),s=new jf(0,0),n=new jf(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new PI(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.includesTests=n}},Sk=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},$k=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},Ck=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},Kv;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(Kv||(Kv={}));var e0;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(e0||(e0={}));var t0;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(t0||(t0={}));var r0=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},i0=class{constructor(e){this.uri=e}},Hf=class{constructor(e,t){this.original=e,this.modified=t}},Ik=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},s0=class{constructor(e,t){this.uri=e,this.viewType=t}},Pk=class{constructor(e){this.viewType=e}},n0=class{constructor(e,t){this.uri=e,this.notebookType=t}},o0=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},Dk=class{constructor(){}},Ak=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},Tk=class{constructor(){}},Rk=class{constructor(e){this.textDiffs=e}},a0;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(a0||(a0={}));var c0;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(c0||(c0={}));var l0;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(l0||(l0={}));var JO=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},So;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(So||(So={}));var u0;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(u0||(u0={}));var hu;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(hu||(hu={}));var Wf=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ur(e):e}},du=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ur(e):e,this.vulnerabilities=t}},zf=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},Vf=class{constructor(e,t){this.value=e,this.baseUri=t}},fu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},h0=class{constructor(e){this.value=e}},qf=class{constructor(e,t){this.value=e,this.task=t}},pu=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ur(e):e}},Gf=class{constructor(e){this.value=e}},$o=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},Jf=class{constructor(e){this.value=e}},Qf=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},Yf=class{constructor(e,t){this.uri=e,this.range=t}},gu=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},Xf=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},Lk=class{constructor(e,t,r,i,s){this.prompt=e,this.command=t,this.references=r,this.participant=i,this.toolReferences=s}},Nk=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},Jr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor",e[e.EditingSession=5]="EditingSession"})(Jr||(Jr={}));var d0;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(d0||(d0={}));var Fk=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},Ok=class{constructor(e){this.cell=e}},Mk=class{constructor(e,t,r){this.mimeType=e,this.data=t,this.reference=r}},Uk=class{constructor(e){this.diagnostics=e}},ii;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(ii||(ii={}));var f0=class{constructor(e,t,r){this.callId=e,this.content=t,this.isError=r??!1}},QO=class{constructor(e,t,r){this.command=e,this.language=t,this.confirmationMessages=r}},p0;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(p0||(p0={}));var jk=class n4{static User(t,r){return new n4(ii.User,t,r)}static Assistant(t,r){return new n4(ii.Assistant,t,r)}set content(t){typeof t=="string"?this.c=[new Sr(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(r=>typeof r=="string"?new Sr(r):r))}get content2(){return this.content.map(t=>t instanceof Sr?t.value:t)}constructor(t,r,i){this.c=[],this.role=t,this.content=r,this.name=i}},mu=class{constructor(e,t,r){this.callId=e,this.name=t,this.input=r}},Sr=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},ec=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},As=class ss extends Error{static#e="LanguageModelError";static NotFound(t){return new ss(t,ss.NotFound.name)}static NoPermissions(t){return new ss(t,ss.NoPermissions.name)}static Blocked(t){return new ss(t,ss.Blocked.name)}static tryDeserialize(t){if(t.name===ss.#e)return new ss(t.message,t.code,t.cause)}constructor(t,r,i){super(t,{cause:i}),this.name=ss.#e,this.code=r??""}},Zf=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},YO=class extends Zf{},g0;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(g0||(g0={}));var m0;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(m0||(m0={}));var v0;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(v0||(v0={}));var w0;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(w0||(w0={}));var b0;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(b0||(b0={}));var XO=class{constructor(e,t){this.text=e,this.range=t}},vu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(vu||(vu={}));var Ii;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new Ie(s-1,n-1),l=new Ie(o-1,a-1);return new Is(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(Ii||(Ii={}));var M;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new ke(s-1,n-1,o-1,a-1)}e.to=r})(M||(M={}));var Ts;(function(e){function t(i){return{uri:i.uri,range:M.from(i.range)}}e.from=t;function r(i){return new Gr(E.revive(i.uri),M.to(i.range))}e.to=r})(Ts||(Ts={}));var y0;(function(e){function t(r){switch(r){case 1:return yn.Comment;case 0:return yn.Other;case 3:return yn.RegEx;case 2:return yn.String}}e.to=t})(y0||(y0={}));var He;(function(e){function t(i){return new Ie(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(He||(He={}));var tc;(function(e){function t(s,n,o){return Pt(Zr(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:Br.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(tc||(tc={}));var Kf;(function(e){function t(i){switch(i){case po.Unnecessary:return 1;case po.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return po.Unnecessary;case 2:return po.Deprecated;default:return}}e.to=r})(Kf||(Kf={}));var rc;(function(e){function t(i){let s;return i.code&&(Pe(i.code)||Kr(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...M.from(i.range),message:i.message,source:i.source,code:s,severity:wu.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(ep.from),tags:Array.isArray(i.tags)?Pt(i.tags.map(Kf.from)):void 0}}e.from=t;function r(i){const s=new nf(M.to(i),i.message,wu.to(i.severity));return s.source=i.source,s.code=Pe(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(ep.to),s.tags=i.tags&&Pt(i.tags.map(Kf.to)),s}e.to=r})(rc||(rc={}));var ep;(function(e){function t(i){return{...M.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new Bl(new Gr(i.resource,M.to(i)),i.message)}e.to=r})(ep||(ep={}));var wu;(function(e){function t(i){switch(i){case sr.Error:return yr.Error;case sr.Warning:return yr.Warning;case sr.Information:return yr.Info;case sr.Hint:return yr.Hint}return yr.Error}e.from=t;function r(i){switch(i){case yr.Info:return sr.Information;case yr.Warning:return sr.Warning;case yr.Error:return sr.Error;case yr.Hint:return sr.Hint;default:return sr.Error}}e.to=r})(wu||(wu={}));var _t;(function(e){function t(i){return typeof i=="number"&&i>=Ql.One?i-1:i===Ql.Beside?iO:rO}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})(_t||(_t={}));function ZO(e){return typeof e.range<"u"}function Bk(e){return e.length===0?!0:!!ZO(e[0])}var xe;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else Ur.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=E.parse(h,!0);f=f.with({query:s(f.query,l)}),l[h]=f}catch{}return""};return nt.walkTokens(nt.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(kL(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=f6(a)}catch{}if(!l)return a;let u=!1;return l=da(l,h=>{if(E.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new Ur(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?E.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(xe||(xe={}));function KO(e){return Bk(e)?e.map(t=>({range:M.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?xe.fromMany(t.hoverMessage):t.hoverMessage?xe.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:M.from(t)}))}function tp(e){return typeof e>"u"?e:typeof e=="string"?E.file(e):e}var ic;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?tp(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(ic||(ic={}));var rp;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?tp(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?ic.from(r.before):void 0,after:r.after?ic.from(r.after):void 0}}e.from=t})(rp||(rp={}));var E0;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case mo.OpenOpen:return 0;case mo.ClosedClosed:return 1;case mo.OpenClosed:return 2;case mo.ClosedOpen:return 3}}e.from=t})(E0||(E0={}));var x0;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?E0.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?rp.from(r.light):void 0,dark:r.dark?rp.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?tp(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?ic.from(r.before):void 0,after:r.after?ic.from(r.after):void 0}}e.from=t})(x0||(x0={}));var Ht;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&ac.from(i.newEol),range:M.from(i.range)}}e.from=t;function r(i){const s=new gn(M.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:ac.to(i.eol),s}e.to=r})(Ht||(Ht={}));var jr;(function(e){function t(i,s){const n={edits:[]};if(i instanceof ho){const o=new A4;for(const a of i._allEntries())a._type===1&&E.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Zh(J.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Ht.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:M.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(lc.from)}})}return n}e.from=t;function r(i){const s=new ho,n=new Vt;for(const o of i.edits)if(o.textEdit){const a=o,c=E.revive(a.resource),l=M.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=Ev.replace(l,new fo(u)):f=gn.replace(l,u);const p=n.get(c);p?p.push(f):n.set(c,[f])}else s.renameFile(E.revive(o.oldResource),E.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(jr||(jr={}));var si;(function(e){const t=Object.create(null);t[rt.File]=0,t[rt.Module]=1,t[rt.Namespace]=2,t[rt.Package]=3,t[rt.Class]=4,t[rt.Method]=5,t[rt.Property]=6,t[rt.Field]=7,t[rt.Constructor]=8,t[rt.Enum]=9,t[rt.Interface]=10,t[rt.Function]=11,t[rt.Variable]=12,t[rt.Constant]=13,t[rt.String]=14,t[rt.Number]=15,t[rt.Boolean]=16,t[rt.Array]=17,t[rt.Object]=18,t[rt.Key]=19,t[rt.Null]=20,t[rt.EnumMember]=21,t[rt.Struct]=22,t[rt.Event]=23,t[rt.Operator]=24,t[rt.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return rt.Property}e.to=i})(si||(si={}));var Rs;(function(e){function t(i){switch(i){case Hl.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return Hl.Deprecated}}e.to=r})(Rs||(Rs={}));var Co;(function(e){function t(i){return{name:i.name,kind:si.from(i.kind),tags:i.tags&&i.tags.map(Rs.from),containerName:i.containerName,location:$r.from(i.location)}}e.from=t;function r(i){const s=new Wl(i.name,si.to(i.kind),i.containerName,$r.to(i.location));return s.tags=i.tags&&i.tags.map(Rs.to),s}e.to=r})(Co||(Co={}));var k0;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:M.from(i.range),selectionRange:M.from(i.selectionRange),kind:si.from(i.kind),tags:i.tags?.map(Rs.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new zl(i.name,i.detail,si.to(i.kind),M.to(i.range),M.to(i.selectionRange));return Vc(i.tags)&&(s.tags=i.tags.map(Rs.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})(k0||(k0={}));var Io;(function(e){function t(i){const s=new kv(si.to(i.kind),i.name,i.detail||"",E.revive(i.uri),M.to(i.range),M.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:si.from(i.kind),uri:i.uri,range:M.from(i.range),selectionRange:M.from(i.selectionRange),tags:i.tags?.map(Rs.from)}}e.from=r})(Io||(Io={}));var S0;(function(e){function t(r){return new dk(Io.to(r.from),r.fromRanges.map(i=>M.to(i)))}e.to=t})(S0||(S0={}));var $0;(function(e){function t(r){return new fk(Io.to(r.to),r.fromRanges.map(i=>M.to(i)))}e.to=t})($0||($0={}));var $r;(function(e){function t(i){return{range:i.range&&M.from(i.range),uri:i.uri}}e.from=t;function r(i){return new Gr(E.revive(i.uri),M.to(i.range))}e.to=r})($r||($r={}));var bu;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?M.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:M.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?M.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:E.revive(i.uri),targetRange:M.to(i.range),targetSelectionRange:i.targetSelectionRange?M.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?M.to(i.originSelectionRange):void 0}}e.to=r})(bu||(bu={}));var yu;(function(e){function t(i){return{range:M.from(i.range),contents:xe.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(xe.to),n=M.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new af(s,n,o,a)}e.to=r})(yu||(yu={}));var C0;(function(e){function t(i){return{range:M.from(i.range),expression:i.expression}}e.from=t;function r(i){return new Sf(M.to(i.range),i.expression)}e.to=r})(C0||(C0={}));var ip;(function(e){function t(i){if(i instanceof $f)return{type:"text",range:M.from(i.range),text:i.text};if(i instanceof Cf)return{type:"variable",range:M.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof If)return{type:"expression",range:M.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:M.to(i.range),text:i.text};case"variable":return{range:M.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:M.to(i.range),expression:i.expression}}}e.to=r})(ip||(ip={}));var sp;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:M.from(i.stoppedLocation)}}e.from=t;function r(i){return new Hv(i.frameId,M.to(i.stoppedLocation))}e.to=r})(sp||(sp={}));var sc;(function(e){function t(i){return{range:M.from(i.range),kind:i.kind}}e.from=t;function r(i){return new cf(M.to(i.range),i.kind)}e.to=r})(sc||(sc={}));var I0;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(sc.from)}}e.from=t;function r(i){return new lf(E.revive(i.uri),i.highlights.map(sc.to))}e.to=r})(I0||(I0={}));var P0;(function(e){function t(r){switch(r){case 1:return Na.TriggerCharacter;case 2:return Na.TriggerForIncompleteCompletions;case 0:default:return Na.Invoke}}e.to=t})(P0||(P0={}));var D0;(function(e){function t(r){return{triggerKind:P0.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(D0||(D0={}));var np;(function(e){function t(i){switch(i){case Jl.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return Jl.Deprecated}}e.to=r})(np||(np={}));var op;(function(e){const t=new Map([[pe.Method,0],[pe.Function,1],[pe.Constructor,2],[pe.Field,3],[pe.Variable,4],[pe.Class,5],[pe.Interface,7],[pe.Struct,6],[pe.Module,8],[pe.Property,9],[pe.Unit,12],[pe.Value,13],[pe.Constant,14],[pe.Enum,15],[pe.EnumMember,16],[pe.Keyword,17],[pe.Snippet,27],[pe.Text,18],[pe.Color,19],[pe.File,20],[pe.Reference,21],[pe.Folder,23],[pe.Event,10],[pe.Operator,11],[pe.TypeParameter,24],[pe.Issue,26],[pe.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,pe.Method],[1,pe.Function],[2,pe.Constructor],[3,pe.Field],[4,pe.Variable],[5,pe.Class],[7,pe.Interface],[6,pe.Struct],[8,pe.Module],[9,pe.Property],[12,pe.Unit],[13,pe.Value],[14,pe.Constant],[15,pe.Enum],[16,pe.EnumMember],[17,pe.Keyword],[27,pe.Snippet],[18,pe.Text],[19,pe.Color],[20,pe.File],[21,pe.Reference],[23,pe.Folder],[10,pe.Event],[11,pe.Operator],[24,pe.TypeParameter],[25,pe.User],[26,pe.Issue]]);function s(n){return i.get(n)??pe.Property}e.to=s})(op||(op={}));var A0;(function(e){function t(r,i){const s=new ff(r.label);return s.insertText=r.insertText,s.kind=op.to(r.kind),s.tags=r.tags?.map(np.to),s.detail=r.detail,s.documentation=Kn(r.documentation)?xe.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,Qe.isIRange(r.range)?s.range=M.to(r.range):typeof r.range=="object"&&(s.range={inserting:M.to(r.range.insert),replacing:M.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new fo(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof ke?new gn(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Ht.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(A0||(A0={}));var ap;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:xe.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:Kn(i.documentation)?xe.to(i.documentation):i.documentation}}e.to=r})(ap||(ap={}));var cp;(function(e){function t(i){return{label:i.label,documentation:xe.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(ap.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:Kn(i.documentation)?xe.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(ap.to):[],activeParameter:i.activeParameter}}e.to=r})(cp||(cp={}));var Eu;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(cp.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(cp.to):[]}}e.to=r})(Eu||(Eu={}));var T0;(function(e){function t(r,i){const s=new df(He.to(i.position),typeof i.label=="string"?i.label:i.label.map(R0.to.bind(void 0,r)),i.kind&&lp.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(Ht.to),s.tooltip=Kn(i.tooltip)?xe.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(T0||(T0={}));var R0;(function(e){function t(r,i){const s=new hf(i.label);return s.tooltip=Kn(i.tooltip)?xe.to(i.tooltip):i.tooltip,j1.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=$r.to(i.location)),s}e.to=t})(R0||(R0={}));var lp;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(lp||(lp={}));var Po;(function(e){function t(i){return{range:M.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?E.parse(i.url,!0):E.revive(i.url)}catch{}const n=new gf(M.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(Po||(Po={}));var up;(function(e){function t(i){const s=new vf(i.label);return i.textEdit&&(s.textEdit=Ht.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Ht.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?Ht.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>Ht.from(s)):void 0}}e.from=r})(up||(up={}));var nc;(function(e){function t(i){return new Ba(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(nc||(nc={}));var L0;(function(e){function t(i){return{range:M.from(i.range)}}e.from=t;function r(i){return new Gl(M.to(i.range))}e.to=r})(L0||(L0={}));var hp;(function(e){function t(r){switch(r){case 2:return Oa.AfterDelay;case 1:return Oa.Manual;case 3:case 4:return Oa.FocusOut}}e.to=t})(hp||(hp={}));var oc;(function(e){function t(i){switch(i){case Ci.Off:return 0;case Ci.Relative:return 2;case Ci.Interval:return 3;case Ci.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return Ci.Off;case 2:return Ci.Relative;case 3:return Ci.Interval;case 1:default:return Ci.On}}e.to=r})(oc||(oc={}));var ac;(function(e){function t(i){if(i===$i.CRLF)return 1;if(i===$i.LF)return 0}e.from=t;function r(i){if(i===1)return $i.CRLF;if(i===0)return $i.LF}e.to=r})(ac||(ac={}));var N0;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case wo.SourceControl:return 3;case wo.Window:return 10;case wo.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(N0||(N0={}));var dp;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=fp.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=fp.to(i.kind)),s}e.to=r})(dp||(dp={}));var fp;(function(e){function t(i){if(i)switch(i){case Ps.Comment:return ba.Comment;case Ps.Imports:return ba.Imports;case Ps.Region:return ba.Region}}e.from=t;function r(i){if(i)switch(i.value){case ba.Comment.value:return Ps.Comment;case ba.Imports.value:return Ps.Imports;case ba.Region.value:return Ps.Region}}e.to=r})(fp||(fp={}));var xu;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?M.from(r.selection):void 0,override:typeof r.override=="boolean"?pN.id:void 0}}e.from=t})(xu||(xu={}));var Br;(function(e){function t(n){return n instanceof za?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new za(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?E.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new za(E.revive(n.baseUri),n.pattern)}e.to=s})(Br||(Br={}));var F0;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:Br.from(i.pattern)??void 0,exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(F0||(F0={}));var Xi;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new Ds(i.start,i.end)}e.to=r})(Xi||(Xi={}));var cc;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(cc||(cc={}));var O0;(function(e){function t(r){if(r===Fl.Unconfirmed)return Xa.Pending;if(r===Fl.Pending)return;if(r===Fl.Executing)return Xa.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(O0||(O0={}));var ku;(function(e){function t(i){switch(i){case ko.Markup:return Da.Markup;case ko.Code:default:return Da.Code}}e.from=t;function r(i){switch(i){case Da.Markup:return ko.Markup;case Da.Code:default:return ko.Code}}e.to=r})(ku||(ku={}));var En;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)Tf.validate(n),s.cells.push(lc.from(n));return s}e.from=t;function r(i){const s=new yk(i.cells.map(lc.to));return O4(i.metadata)||(s.metadata=i.metadata),s}e.to=r})(En||(En={}));var lc;(function(e){function t(i){return{cellKind:ku.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:cc.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(xn.from):[]}}e.from=t;function r(i){return new Tf(ku.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(xn.to):void 0,i.metadata,i.internalMetadata?cc.to(i.internalMetadata):void 0)}e.to=r})(lc||(lc={}));var uc;(function(e){function t(i){return{mime:i.mime,valueBytes:J.wrap(i.data)}}e.from=t;function r(i){return new Ek(i.valueBytes.buffer,i.mime)}e.to=r})(uc||(uc={}));var xn;(function(e){function t(i){return{outputId:i.id,items:i.items.map(uc.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(uc.to);return new Rf(s,i.outputId,i.metadata)}e.to=r})(xn||(xn={}));var pp;(function(e){function t(s){return i(s)?{include:Br.from(s.include)??void 0,exclude:Br.from(s.exclude)??void 0}:Br.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:Br.to(s.include),exclude:Br.to(s.exclude)}:Br.to(s)}e.to=r;function i(s){const n=s;return n?!Dt(n.include)&&!Dt(n.exclude):!1}})(pp||(pp={}));var M0;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===Lf.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(M0||(M0={}));var U0;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(U0||(U0={}));var j0;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})(j0||(j0={}));var gp;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new xk(E.revive(i.uri),i.provides)}e.to=r})(gp||(gp={}));var hc;(function(e){function t(i){return{message:xe.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:M.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&He.from(s.position),uri:s.uri&&E.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new Uf(typeof i.message=="string"?i.message:xe.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?$r.to(i.location):void 0,s}e.to=r})(hc||(hc={}));var Pi;(function(e){e.namespace=Gd,e.denamespace=D9})(Pi||(Pi={}));var B0;(function(e){function t(r){return{controllerId:r.controllerId,profileId:r.profileId,group:dc.from(r.kind)}}e.from=t})(B0||(B0={}));var dc;(function(e){const t={[Ka.Coverage]:8,[Ka.Debug]:4,[Ka.Run]:2};function r(i){return t.hasOwnProperty(i)?t[i]:2}e.from=r})(dc||(dc={}));var kn;(function(e){function t(i){const s=ef(i).controllerId;return{extId:Fe.fromExtHostTestItem(i,s).toString(),label:i.label,uri:E.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>Pi.namespace(s,n.id)),range:Qe.lift(M.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&xe.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:Fe.fromString(i.extId).localId,label:i.label,uri:E.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=Pi.denamespace(s);return new uu(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:M.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(kn||(kn={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new uu(i.id)}e.to=r}(Pi||(Pi={}));var _0;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...kn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(hc.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new sN;for(const a of i.items)s.insert(Fe.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(Mn)}}e.to=r})(_0||(_0={}));var Su;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?He.from(a):M.from(a)}function i(a){if(a)return"endLineNumber"in a?M.to(a):He.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new Sk(a.count,i(a.location),a.branches?.map(l=>new $k(l.count,i(l.location),l.label)))}else return new Ck(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return Bf(l.statementCoverage),Bf(l.branchCoverage),Bf(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof _f&&l.includesTests.length?l.includesTests.map(u=>Fe.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Su||(Su={}));var H0;(function(e){function t(r){switch(r){case 1:return Vl.Invoke;case 2:return Vl.Automatic}}e.to=t})(H0||(H0={}));var Do;(function(e){function t(i){const s=new r0(si.to(i.kind),i.name,i.detail||"",E.revive(i.uri),M.to(i.range),M.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:si.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:M.from(i.range),selectionRange:M.from(i.selectionRange),tags:i.tags?.map(Rs.from)}}e.from=r})(Do||(Do={}));var mp;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(mp||(mp={}));var Ao;(function(e){function t(n,o,a){const c=o.fileData;return c?new NO(new FO(c.name,E.revive(c.uri),c.id,Ph(()=>a(c.id)))):n===ks.uriList&&o.uriListData?new xf(s(o.uriListData)):new xf(o.asString)}e.to=t;async function r(n,o,a=Ct()){const c=await o.asString();if(n===ks.uriList)return{id:a,asString:c,fileData:void 0,uriListData:i(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=r;function i(n){return E1.split(n).map(o=>{if(o.startsWith("#"))return o;try{return E.parse(o)}catch{}return o})}function s(n){return E1.create(n.map(o=>typeof o=="string"?o:E.revive(o)))}})(Ao||(Ao={}));var fc;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,Ao.to(a,c,n)]);return new Ha(o)}e.toDataTransfer=t;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Ao.from(o,a)]))}}e.from=r;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Ao.from(o,a,a.id)]))}}e.fromList=i})(fc||(fc={}));var $u;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})($u||($u={}));var vp;(function(e){function t(i){switch(i){case 0:return ii.System;case 1:return ii.User;case 2:return ii.Assistant}}e.to=t;function r(i){switch(i){case ii.System:return 0;case ii.User:return 1;case ii.Assistant:return 2}return 1}e.from=r})(vp||(vp={}));var pc;(function(e){function t(i){const s=i.content.map(a=>{if(a.type==="text")return new Sr(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new Sr(l.value):new ec(l.value));return new f0(a.toolCallId,c,a.isError)}else return new mu(a.toolCallId,a.name,a.parameters)}),n=vp.to(i.role);return new jk(n,s,i.name)}e.to=t;function r(i){const s=vp.from(i.role),n=i.name;let o=i.content;typeof o=="string"&&(o=[new Sr(o)]);const a=o.map(c=>{if(c instanceof f0)return{type:"tool_result",toolCallId:c.callId,value:Pt(c.content.map(l=>l instanceof Sr?{type:"text",value:l.value}:l instanceof ec?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof mu)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof Sr)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=r})(pc||(pc={}));var Cu;(function(e){function t(i){return{kind:"markdownContent",content:xe.from(i.value)}}e.from=t;function r(i){return new Wf(xe.to(i.content))}e.to=r})(Cu||(Cu={}));var wp;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new Jf(E.revive(i.uri))}e.to=r})(wp||(wp={}));var bp;(function(e){function t(i){return{kind:"markdownVuln",content:xe.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new du(xe.to(i.content),i.vulnerabilities)}e.to=r})(bp||(bp={}));var yp;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})(yp||(yp={}));var Iu;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=E.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:mi(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=Qt(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Vf(a,o)}e.to=r})(Iu||(Iu={}));var gc;(function(e){function t(i){const s=o=>E.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?Co.from(i.value):Ts.from(i.value)}}e.from=t;function r(i){const s=Qt(i);return new fu(E.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Co.to(s.inlineReference):Ts.to(s.inlineReference),i.name)}e.to=r})(gc||(gc={}));var Pu;(function(e){function t(i){return{kind:"progressMessage",content:xe.from(i.value)}}e.from=t;function r(i){return new h0(i.content.value)}e.to=r})(Pu||(Pu={}));var Du;(function(e){function t(i){return{kind:"warning",content:xe.from(i.value)}}e.from=t;function r(i){return new pu(i.content.value)}e.to=r})(Du||(Du={}));var W0;(function(e){function t(i){return{kind:"move",uri:i.uri,range:M.from(i.range)}}e.from=t;function r(i){return new Yf(E.revive(i.uri),M.to(i.range))}e.to=r})(W0||(W0={}));var Ep;(function(e){function t(r){return{kind:"progressTask",content:xe.from(r.value)}}e.from=t})(Ep||(Ep={}));var z0;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?xe.from(r):void 0}}e.from=t})(z0||(z0={}));var Au;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new Gf(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(Au||(Au={}));var xp;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>Ht.from(s)),done:i.isDone}}e.from=t;function r(i){const s=new gu(E.revive(i.uri),i.edits.map(n=>Ht.to(n)));return s.isDone=i.done,s}e.to=r})(xp||(xp={}));var kp;(function(e){function t(r){return r.newCellMetadata?{editType:3,index:r.range.start,metadata:r.newCellMetadata}:r.newNotebookMetadata?{editType:5,metadata:r.newNotebookMetadata}:{editType:1,index:r.range.start,count:r.range.end-r.range.start,cells:r.newCells.map(lc.from)}}e.from=t})(kp||(kp={}));var Sp;(function(e){function t(r){return{kind:"notebookEdit",uri:r.uri,edits:r.edits.map(kp.from),done:r.isDone}}e.from=t})(Sp||(Sp={}));var To;(function(e){function t(i){const s=rr.isThemeIcon(i.iconPath)?i.iconPath:E.isUri(i.iconPath)?{light:E.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&E.isUri(i.iconPath.light)&&E.isUri(i.iconPath.dark)?{light:E.revive(i.iconPath.light),dark:E.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:E.isUri(i.value.value)||!i.value.value?i.value.value:Ts.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:E.isUri(i.value)||typeof i.value=="string"?i.value:Ts.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=Qt(i),n=o=>E.isUri(o)?o:Ts.to(o);return new $o(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(To||(To={}));var $p;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})($p||($p={}));var Cp;(function(e){function t(s,n,o){return s instanceof Wf?Cu.from(s):s instanceof fu?gc.from(s):s instanceof $o?To.from(s):s instanceof h0?Pu.from(s):s instanceof Vf?Iu.from(s):s instanceof Gf?Au.from(s,n,o):s instanceof gu?xp.from(s):s instanceof Xf?Sp.from(s):s instanceof du?bp.from(s):s instanceof Jf?wp.from(s):s instanceof pu?Du.from(s):s instanceof zf?yp.from(s):s instanceof Qf?$p.from(s):s instanceof Yf?W0.from(s):{kind:"markdownContent",content:xe.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return To.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return Cu.to(s);case"inlineReference":return gc.to(s);case"progressMessage":return;case"treeData":return Iu.to(s);case"command":return Au.to(s,n)}}e.toContent=i})(Cp||(Cp={}));var Ip;(function(e){function t(r,i,s,n,o){const a=r.variables.variables.filter(l=>l.isTool),c=r.variables.variables.filter(l=>!l.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:c.map(l=>Pp.to(l,n,o)),toolReferences:a.map(Dp.to),location:Tu.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId}),model:s}}e.to=t})(Ip||(Ip={}));var V0;(function(e){function t(r){return{prompt:r.prompt,files:r.files.map(i=>E.revive(i))}}e.to=t})(V0||(V0={}));var Tu;(function(e){function t(i){switch(i){case jt.Notebook:return Jr.Notebook;case jt.Terminal:return Jr.Terminal;case jt.Panel:return Jr.Panel;case jt.Editor:return Jr.Editor;case jt.EditingSession:return Jr.EditingSession}}e.to=t;function r(i){switch(i){case Jr.Notebook:return jt.Notebook;case Jr.Terminal:return jt.Terminal;case Jr.Panel:return jt.Panel;case Jr.Editor:return jt.Editor;case Jr.EditingSession:return jt.EditingSession}}e.from=r})(Tu||(Tu={}));var Pp;(function(e){function t(r,i,s){let n=r.value;if(!n)throw new Error("Invalid value reference");if(I5(n))n=E.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&I5(n.uri))n=Ts.to(Qt(n));else if(r.isImage)n=new Mk(r.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(r.value))),r.references&&E.isUri(r.references[0].reference)?r.references[0].reference:void 0);else if(r.kind==="diagnostic"){const o=r.filterSeverity&&wu.to(r.filterSeverity),a=r.filterUri&&E.revive(r.filterUri).toString();n=new Uk(s.map(([c,l])=>r.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||r.filterRange&&!Qe.areIntersectingOrTouching(r.filterRange,M.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:n,modelDescription:r.modelDescription,isReadonly:i?r.isMarkedReadonly:void 0}}e.to=t})(Pp||(Pp={}));var Dp;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{name:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(Dp||(Dp={}));var q0;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(q0||(q0={}));var mc;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:i(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function r(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=r;function i(s){return da(s,n=>{if(n.$mid===20)return new Zf(da(n.content,i));if(n.$mid===21)return new Sr(n.value);if(n.$mid===22)return new ec(n.value)})}})(mc||(mc={}));var G0;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=mc.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:$u.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:i.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",So.Accepted],["rejected",So.Rejected],["saved",So.Saved]]).get(i.action.outcome)??So.Rejected,uri:E.revive(i.action.uri),hasRemainingEdits:i.action.hasRemainingEdits},result:n}:{action:i.action,result:n}}e.to=t})(G0||(G0={}));var Ap;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(Ap||(Ap={}));var Tp;(function(e){function t(r){return{...r,documentation:xe.fromStrict(r.documentation)}}e.from=t})(Tp||(Tp={}));var J0;(function(e){function t(r){return Array.isArray(r)?{items:r.map(i=>Tp.from(i))}:{items:r.items.map(i=>Tp.from(i)),resourceRequestConfig:r.resourceRequestConfig?Q0.from(r.resourceRequestConfig):void 0}}e.from=t})(J0||(J0={}));var Q0;(function(e){function t(r){return{...r,pathSeparator:Ue?"\\":"/",cwd:r.cwd?E.revive(r.cwd):void 0}}e.from=t})(Q0||(Q0={}));var Y0;(function(e){function t(r){return{kind:X0.to(r.kind),acceptedLength:r.acceptedLength}}e.to=t})(Y0||(Y0={}));var X0;(function(e){function t(r){switch(r){case 0:return go.Word;case 1:return go.Line;case 2:return go.Suggest;default:return go.Unknown}}e.to=t})(X0||(X0={}));var Z0;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(Z0||(Z0={}));var K0;(function(e){function t(r){return{name:r.id,description:r.modelDescription,inputSchema:r.inputSchema,tags:r.tags??[]}}e.to=t})(K0||(K0={}));var Rp;(function(e){function t(i){return new Zf(i.content.map(s=>s.kind==="text"?new Sr(s.value):new ec(s.value)))}e.to=t;function r(i,s){return i.toolResultMessage&&N(s,"chatParticipantPrivate"),{content:i.content.map(n=>{if(n instanceof Sr)return{kind:"text",value:n.value};if(n instanceof ec)return{kind:"promptTsx",value:n.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:xe.fromStrict(i.toolResultMessage),toolResultDetails:i.toolResultDetails?.map(n=>E.isUri(n)?n:Ts.from(n))}}e.from=r})(Rp||(Rp={}));var ew;(function(e){function t(r){return r}e.fromThemeIcon=t})(ew||(ew={}));var _k=class o4{constructor(t,r){this.line=t,this.character=r}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,r){return new o4(0,0)}with(t){return new o4(0,0)}},Hk=class a4{constructor(t,r,i,s){this.isEmpty=!1,this.isSingleLine=!1,this.start=new _k(t,r),this.end=new _k(i,s)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new a4(0,0,0,0)}with(t){return new a4(0,0,0,0)}},Ls=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},Lp=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},Ns;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Ns||(Ns={}));var Np;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Np||(Np={}));var Fp=2e4,Wk="\u27EA ",zk=" characters skipped \u27EB",eM=(Wk.length+zk.length+5)*2,vY=V("searchService"),Vk;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(Vk||(Vk={}));var qk;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(qk||(qk={}));function tw(e){return!!e.rangeLocations&&!!e.previewText}var Gk;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(Gk||(Gk={}));var Jk=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&tM(s)){e=v2(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+eM){const f=Wk+(u-a)+zk;n+=f+e.slice(u,h),o+=u-(a+f.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new rM(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=Dh(t,a=>({preview:new rw(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function tM(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var rw=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},rM=class extends rw{constructor(e,t,r){super(e,t,e,r)}},Qk;(function(e){e.List="list",e.Tree="tree"})(Qk||(Qk={}));var Yk;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(Yk||(Yk={}));function iM(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=vs(s,Ve(r)),s=vs(s,Ve(i),!0),s}function Xk(e,t){return e.excludePattern&&Pa(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Pa(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(Wn(t,i)){const s=ca(i,t);return!r.includePattern||!!Pa(r.includePattern,s)}else return!1}):!1:!0}var Sn;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(Sn||(Sn={}));var Ro=class extends Error{constructor(e,t){super(e),this.code=t}};function Zk(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function sM(e){return!!e.path}function iw(e,t,r=!0){const i=e.searchPath?e.searchPath:e.relativePath;return r?g2(i,t):Pa(t,i)}function vc(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var Kk=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>ki(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=ki(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return rn(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>nM(t)||e,!1)}};function nM(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function oM(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?e8(i):{})),t.then(i=>!!i[r]))}function sw(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?e8(i):{}}return!!t[r]}}function e8(e){const t={};for(const r of e)t[r]=!0;return t}function t8(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var nw={matchLines:100,charsPerLine:1e4};function Ru(e,t,r){return new il(i=>ow(i,r)).isEqual(e,t)}function aM(e,t,r){return Ru(e.uri,t.uri,r)?0:Hn(e.uri.toString(),t.uri.toString())}function cM(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:Ru(e.uri,t.uri,r)?Hn(e.name,t.name):Hn(e.uri.toString(),t.uri.toString())}function r8(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return VP(s,n,(o,a)=>r(o,a,i))}function ow(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var aw=class c4 extends sL{static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=r;r?a.forEach((b,x)=>{const k=E.revive(b.uri),I=c4.o(i||r,k,s);I?(I.name=b.name,I.index=b.index,h.push(I)):h.push({uri:k,name:b.name,index:x})}):h.push(...a.map(({uri:b,name:x,index:k})=>({uri:E.revive(b),name:x,index:k}))),h.sort((b,x)=>b.index<x.index?-1:1);const p=new c4(n,o,h,!!l,c?E.revive(c):null,!!u,b=>ow(b,s)),{added:g,removed:v}=r8(f?f.workspaceFolders:[],p.workspaceFolders,aM,s);return{workspace:p,added:g,removed:v}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Ru(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new b1(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=cn.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=nl(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},cw=class{constructor(t,r,i,s,n){this.c=new D,this.onDidChangeWorkspace=this.c.event,this.g=new D,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Yc,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new KR,this.k=new ei,this.o=t.getProxy(Y.MainThreadWorkspace),this.q=t.getProxy(Y.MainThreadMessageService);const o=r.workspace;this.l=o?new aw(o.id,o.name,[],!!o.transient,o.configuration?E.revive(o.configuration):null,!!o.isUntitled,a=>ow(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?E.from({scheme:W.untitled,path:mi(nl(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{E.isUri(u.uri)&&!n.some(h=>Ru(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Mm(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||Mm(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,p)=>p!==u&&Ru(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=r8(o,a,cM,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(tL.Error,d(2836,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=E.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=U5(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=aw.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=aw.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:i,useExcludeSettings:a?Ns.FilesExclude:Ns.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=Xe.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},r,s)}async z(t,r,i){if(i.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=i8(r.exclude),c={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles?.local=="boolean"?!r.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ns.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ns.SearchAndFilesExclude,maxResults:r.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Op(Br.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,i)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>E.revive(o)):[]))??[])).flat()}findTextInFiles2(t,r,i,s=Xe.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${i.value}, entryPoint: findTextInFiles2`);const n=f=>{if(!r)return{folder:void 0,options:{}};const p=f?Op(Br.from(f)):void 0,g=r.exclude?i8(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ns.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ns.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:p?.pattern,excludePattern:g},folder:p?.folder}},a=(r?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new se,l=c.add(new D),u=this.findTextInFilesBase(t,a,(f,p)=>l.fire({result:f,uri:p}),s);return{results:new ol(async f=>{c.add(l.event(p=>{const g=p.result,v=p.uri;tw(g)?f.emitOne(new Ls(v,g.rangeLocations.map(b=>({previewRange:new ke(b.preview.startLineNumber,b.preview.startColumn,b.preview.endLineNumber,b.preview.endColumn),sourceRange:new ke(b.source.startLineNumber,b.source.startColumn,b.source.endLineNumber,b.source.endColumn)})),g.previewText)):f.emitOne(new Lp(v,g.text,g.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=Xe.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=E.revive(a.resource);a.results.forEach(l=>{const u=Qt(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=Op(Br.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,f)=>{tw(h)?i({uri:f,preview:{text:h.previewText,matches:Dh(h.rangeLocations,p=>new ke(p.preview.startLineNumber,p.preview.startColumn,p.preview.endLineNumber,p.preview.endColumn))},ranges:Dh(h.rangeLocations,p=>new ke(p.source.startLineNumber,p.source.startColumn,p.source.endLineNumber,p.source.endColumn))}):i({uri:f,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return E.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return E.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),te(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(E.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(E.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(E.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),te(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(E.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(E.revive(t),{targetScheme:r},i)}decode(t,r,i){return this.o.$decode(J.wrap(t),r,i)}async encode(t,r,i){return(await this.o.$encode(t,r,i)).buffer}};cw=__decorate([__param(0,Ae),__param(1,Ut),__param(2,va),__param(3,Ce),__param(4,vl)],cw);var Di=V("IExtHostWorkspace");function Op(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=E.revive(e.baseUri)),{pattern:t,folder:r}}function i8(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=Op(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var s8;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(s8||(s8={}));var n8;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(n8||(n8={}));var o8;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(o8||(o8={}));var lw;(function(e){e.DEFAULT={allowTrailingComma:!0}})(lw||(lw={}));function lM(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(v){let b=0,x=0;for(;b<v;){const k=e.charCodeAt(r);if(k>=48&&k<=57)x=x*16+k-48;else if(k>=65&&k<=70)x=x*16+k-65+10;else if(k>=97&&k<=102)x=x*16+k-97+10;else break;r++,b++}return b<v&&(x=-1),x}function l(v){r=v,s="",n=0,o=16,a=0}function u(){const v=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&wc(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&wc(e.charCodeAt(r)))for(r++;r<e.length&&wc(e.charCodeAt(r));)r++;else return a=3,e.substring(v,r);let b=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&wc(e.charCodeAt(r))){for(r++;r<e.length&&wc(e.charCodeAt(r));)r++;b=r}else a=3;return e.substring(v,b)}function h(){let v="",b=r;for(;;){if(r>=i){v+=e.substring(b,r),a=2;break}const x=e.charCodeAt(r);if(x===34){v+=e.substring(b,r),r++;break}if(x===92){if(v+=e.substring(b,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const I=c(4);I>=0?v+=String.fromCharCode(I):a=4;break}default:a=5}b=r;continue}if(x>=0&&x<=31)if(Mp(x)){v+=e.substring(b,r),a=2;break}else a=6;r++}return v}function f(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let v=e.charCodeAt(r);if(uw(v)){do r++,s+=String.fromCharCode(v),v=e.charCodeAt(r);while(uw(v));return o=15}if(Mp(v))return r++,s+=String.fromCharCode(v),v===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(v){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const b=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!Mp(e.charCodeAt(r));)r++;return s=e.substring(b,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const x=i-1;let k=!1;for(;r<x;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,k=!0;break}r++}return k||(r++,a=1),s=e.substring(b,r),o=13}return s+=String.fromCharCode(v),r++,o=16}case 45:if(s+=String.fromCharCode(v),r++,r===i||!wc(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&p(v);)r++,v=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(v),r++,o=16}}function p(v){if(uw(v)||Mp(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=f();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>r,scan:t?g:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function uw(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Mp(e){return e===10||e===13||e===8232||e===8233}function wc(e){return e>=48&&e<=57}var a8;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(a8||(a8={}));function uM(e,t,r=lw.DEFAULT){const i=lM(e,!1);function s(U){return U?()=>U(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(U){return U?oe=>U(oe,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),f=n(t.onSeparator),p=s(t.onComment),g=n(t.onError),v=r&&r.disallowComments,b=r&&r.allowTrailingComma;function x(){for(;;){const U=i.scan();switch(i.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:v||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(U){case 12:case 13:v?k(10):p();break;case 16:k(1);break;case 15:case 14:break;default:return U}}}function k(U,oe=[],le=[]){if(g(U),oe.length+le.length>0){let me=i.getToken();for(;me!==17;){if(oe.indexOf(me)!==-1){x();break}else if(le.indexOf(me)!==-1)break;me=x()}}}function I(U){const oe=i.getTokenValue();return U?h(oe):a(oe),x(),!0}function A(){switch(i.getToken()){case 11:{let U=0;try{U=JSON.parse(i.getTokenValue()),typeof U!="number"&&(k(2),U=0)}catch{k(2)}h(U);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return x(),!0}function R(){return i.getToken()!==10?(k(3,[],[2,5]),!1):(I(!1),i.getToken()===6?(f(":"),x(),z()||k(4,[],[2,5])):k(5,[],[2,5]),!0)}function _(){o(),x();let U=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(U||k(4,[],[]),f(","),x(),i.getToken()===2&&b)break}else U&&k(6,[],[]);R()||k(4,[],[2,5]),U=!0}return c(),i.getToken()!==2?k(7,[2],[]):x(),!0}function q(){l(),x();let U=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(U||k(4,[],[]),f(","),x(),i.getToken()===4&&b)break}else U&&k(6,[],[]);z()||k(4,[],[4,5]),U=!0}return u(),i.getToken()!==4?k(8,[4],[]):x(),!0}function z(){switch(i.getToken()){case 3:return q();case 1:return _();case 10:return I(!0);default:return A()}}return x(),i.getToken()===17?r.allowEmptyContent?!0:(k(4,[],[]),!1):z()?(i.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}function Lu(e){return Object.isFrozen(e)?e:T6(e)}var bc=class Go{static createEmptyModel(t){return new Go({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(r=>{if(r instanceof Go)return r;const i=new hM("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Id(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return Lu(i.rawConfiguration.getValue(t))},get override(){return r?Lu(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return Lu(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new Go(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Lu(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?Id(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return ra(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return ra(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=Ve(this.contents),i=Ve(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Bi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=ra(c.keys)):i.push(Ve(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Go(r,s,i,!n.length||n.every(o=>o instanceof Go)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of ra([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=Ve(n),this.i(n,o)):n=o),i[s]=n}return new Go(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&bt(t[i])&&bt(r[i])){this.i(t[i],r[i]);continue}t[i]=Ve(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=Ve(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),GN(this.contents,t),qi.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Bi(i.identifiers,Tl(t))),1))}k(t,r,i){if(Rx(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),qi.test(t)){const s=Tl(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:X1(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Bi(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},hM=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||bc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Dt(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new bc(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{uM(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=ir.as(Ca.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=X1(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(qi.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,i)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;const i=t?typeof t.scope<"u"?t.scope:4:void 0;return i===void 0||r.scopes===void 0?!0:r.scopes.includes(i)}m(e,t){const r=[];for(const i of Object.keys(e))if(qi.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:Tl(i),keys:Object.keys(s),contents:X1(s,t)})}return r}},dM=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return Lu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},hw=class DI{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Vt,this.v=null}getValue(t,r,i){return this.w(r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=bc.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new dM(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=$n(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of Tl(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!vi(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=$n(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=$n(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=$n(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new bc(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r){let i=this.x(t,r);if(t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this.l.isEmpty()){i=i.merge();for(const s of this.l.keys)i.setValue(s,this.l.getValue(s))}return i}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.userLocal,r),a=this.E(t.userRemote,r),c=this.E(t.workspace,r),l=t.folders.reduce((u,h)=>(u.set(E.revive(h[0]),this.E(h[1],r)),u),new Vt);return new DI(i,s,n,o,a,c,l,bc.createEmptyModel(r),new Vt,r)}static E(t,r){return new bc(t.contents,t.keys,t.overrides,t.raw,r)}},fM=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=hw.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!vi(o,a)}return!0}};function $n(e,t){const{added:r,removed:i,updated:s}=c8(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=c8({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function c8(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Id(t.contents,n),a=Id(e.contents,n);vi(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function Nu(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function pM(e){return e instanceof E}function gM(e){return e&&e.uri instanceof E&&e.languageId&&typeof e.languageId=="string"}function mM(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function vM(e){return e&&e.uri instanceof E&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function l8(e){if(pM(e))return{resource:e};if(gM(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(mM(e))return{overrideIdentifier:e.languageId};if(vM(e))return{resource:e.uri};if(e===null)return{resource:null}}var dw=class{constructor(t,r,i){this.a=t.getProxy(Y.MainThreadConfiguration),this.c=r,this.b=i,this.d=new ei,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new wM(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};dw=__decorate([__param(0,Ae),__param(1,Di),__param(2,Ce)],dw);var wM=class{constructor(e,t,r,i){this.a=new D,this.b=e,this.f=i,this.c=t,this.e=hw.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=hw.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=l8(t)||{},s=this.g(e?Nu(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case Wa.Global:return 2;case Wa.Workspace:return 5;case Wa.WorkspaceFolder:return 6}}const o={has(a){return typeof Nu(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=Nu(s,a);if(typeof l>"u")l=c;else{let u;const h=(f,p)=>{if(bt(f)){let g;const v=()=>{u=u||Ve(s),g=g||Nu(u,p)};return new Proxy(f,{get:(b,x)=>{if(typeof x=="string"&&x.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||Nu(u,p),g[x];const k=b[x];return typeof x=="string"?h(k,`${p}.${x}`):k},set:(b,x,k)=>(v(),g&&(g[x]=k),!0),deleteProperty:(b,x)=>(v(),g&&delete g[x],!0),defineProperty:(b,x,k)=>(v(),g&&Object.defineProperty(g,x,k),!0)})}return Array.isArray(f)?Ve(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:Ve(c.policy?.value??c.default?.value),globalLocalValue:Ve(c.userLocal?.value),globalRemoteValue:Ve(c.userRemote?.value),globalValue:Ve(c.user?.value??c.application?.value),workspaceValue:Ve(c.workspace?.value),workspaceFolderValue:Ve(c.workspaceFolder?.value),defaultLanguageValue:Ve(c.default?.override),globalLocalLanguageValue:Ve(c.userLocal?.override),globalRemoteLanguageValue:Ve(c.userRemote?.override),globalLanguageValue:Ve(c.user?.override??c.application?.override),workspaceLanguageValue:Ve(c.workspace?.override),workspaceFolderLanguageValue:Ve(c.workspaceFolder?.override),languageIds:Ve(c.overrideIdentifiers)}}};return typeof s=="object"&&vs(o,s,!1),Object.freeze(o)}g(e){const t=r=>bt(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=qi.test(e)?5:this.d.get(e),s=r?`[${r.value}] `:"";if(i===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new fM(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,l8(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},ni=V("IExtHostConfiguration"),bM=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Fu=class AI{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new D,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(EM),this.f=new ys,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=h8(this.e,r),this.e=this.e.concat(t);const i=AI.l(this.e);return this.e=h8(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new bM(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new ys;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(Je.toKey(a.identifier),Je.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new yM(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},yM=class{constructor(e,t){this.versionId=e,this.extensions=t}},u8;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(u8||(u8={}));function EM(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=Le.basename(e.extensionLocation.path),n=Le.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function h8(e,t){const r=new Yn(t);return e.filter(i=>!r.has(i.identifier))}var Up=class TI{static{this.NONE=new TI(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},d8=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Up(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},jp=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},xM=class extends jp{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,ee.None)}},kM=class extends jp{constructor(){super(!1,null,Up.NONE,{activate:void 0,deactivate:void 0},void 0,ee.None)}},Bp=class extends jp{constructor(e){super(!0,e,Up.NONE,{activate:void 0,deactivate:void 0},void 0,ee.None)}},fw=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new ys,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Bp(n));return this.c.onExtensionActivationError(t.id,n,new ek(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new Bp(l));return this.c.onExtensionActivationError(r.identifier,l,new ek(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new pw(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Fu.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};fw=__decorate([__param(3,Ce)],fw);var pw=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new ei,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new Bp(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new Bp(r),this.b&&ji(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};pw=__decorate([__param(6,Ce)],pw);var f8=class{constructor(e,t){this.c=t,this.b=new D,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(Y.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},gw=V("IExtHostStorage"),p8=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new ms(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new sn;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},SM=class extends p8{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},Zi,mw=Zi=class{constructor(t,r){this.b=new Map,this.c=new V5,this.a=t.getProxy(Y.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===ln.Readonly?1:void 0}}catch(n){Zi.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return Zi.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return Zi.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return Zi.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,J.wrap(n))}catch(o){return Zi.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return Zi.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return Zi.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return Zi.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(((await t.stat(i)).type&Mr.Directory)===0)throw Bt.FileExists(`Unable to create folder '${i.scheme===W.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(xd(n)!==ae.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(xd(o)!==ae.FileExists)throw o}}}static e(t){if(t instanceof Bt)throw t;if(t instanceof Ed)switch(t.code){case ae.FileExists:throw Bt.FileExists(t.message);case ae.FileNotFound:throw Bt.FileNotFound(t.message);case ae.FileNotADirectory:throw Bt.FileNotADirectory(t.message);case ae.FileIsADirectory:throw Bt.FileIsADirectory(t.message);case ae.NoPermissions:throw Bt.NoPermissions(t.message);case ae.Unavailable:throw Bt.Unavailable(t.message);default:throw new Bt(t.message,t.name)}if(!(t instanceof Error))throw new Bt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Bt.Unavailable(t.message);switch(t.name){case ae.FileExists:throw Bt.FileExists(t.message);case ae.FileNotFound:throw Bt.FileNotFound(t.message);case ae.FileNotADirectory:throw Bt.FileNotADirectory(t.message);case ae.FileIsADirectory:throw Bt.FileIsADirectory(t.message);case ae.NoPermissions:throw Bt.NoPermissions(t.message);case ae.Unavailable:throw Bt.Unavailable(t.message);default:throw new Bt(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?_e:_2,isReadonly:!!i?.isReadonly}),te(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??_e}};mw=Zi=__decorate([__param(0,Ae),__param(1,va)],mw);var Ou=V("IExtHostConsumerFileSystem"),vw=V("IExtensionStoragePaths"),ww=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return E.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(E.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:E.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return E.joinPath(this.c,t.identifier.value)}globalValue(t){return E.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};ww=__decorate([__param(0,Ut),__param(1,Ce),__param(2,Ou)],ww);var $M=V("tunnelService"),SY=V("sharedTunnelsService"),oi;(function(e){e.Http="http",e.Https="https"})(oi||(oi={}));var Ki;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Ki||(Ki={}));function CM(e){return!!e.forwardPort}var Cn;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Cn||(Cn={}));function IM(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Mu=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Lo(e){return Mu.indexOf(e)>=0}var _p=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Fs(e){return _p.indexOf(e)>=0}function PM(e,t,r,i){if(r===1)return!1;if(r===2&&Fs(t)){const s=/(\d+)\.(\d+)\.(\d+)/g.exec(i);if(s?.length===4&&parseInt(s[1])>=18)return!1}return e<1024}var DM=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new D,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},bw=class extends ee{constructor(t,r){super(),this.r=t,this.s=r,this.a=new D,this.onTunnelOpened=this.a.event,this.b=new D,this.onTunnelClosed=this.b.event,this.c=new D,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(Fs(t)||Lo(t))&&(t=Mu[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];Lo(t)?(i.push(...Mu),i.push(..._p)):Fs(t)&&i.push(..._p);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!IM(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==Ki.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.z(r,i,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};bw=__decorate([__param(0,Ce),__param(1,$s)],bw);var AM=class extends DM{},yw;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?Ki.Public:Ki.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==Ki.ConstantPrivate&&i.privacy!==Ki.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(yw||(yw={}));var Hp=V("IExtHostTunnelService"),Wp=class extends ee{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new D,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(Y.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new AM(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new Re(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Xe.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve(te(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2834,null),themeIcon:"lock"},{id:"public",label:d(2835,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return te(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),yw.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};Wp=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Ce)],Wp);function TM(e){return[...e.entries()]}function RM(e){return e?[...e.entries()]:[]}var LM=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},No=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},yc=(e,t)=>e===t,In={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:yc,description:yc,sortText:yc,busy:yc,error:yc,canResolveChildren:yc,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},Ec=e=>t=>({op:4,update:e(t)}),NM=(e,t)=>({range:(()=>{let r;const i=Ec(s=>({range:Qe.lift(M.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),In.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:No(e,t,In.label,Ec(r=>({label:r}))),description:No(e,void 0,In.description,Ec(r=>({description:r}))),sortText:No(e,void 0,In.sortText,Ec(r=>({sortText:r}))),canResolveChildren:No(e,!1,In.canResolveChildren,r=>({op:2,state:r})),busy:No(e,!1,In.busy,Ec(r=>({busy:r}))),error:No(e,void 0,In.error,Ec(r=>({error:xe.fromStrict(r)||null}))),tags:No(e,[],In.tags,(r,i)=>({op:1,new:r.map(Pi.from),old:i.map(Pi.from)}))}),FM=e=>{const t=Fe.fromString(e.extId),r=new Uu(t.controllerId,t.localId,e.label,E.revive(e.uri)||void 0);return r.range=M.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>Pi.to({id:D9(i).tagId})),r},g8=e=>{let t;for(const r of e.tests){const i=FM(r.item);ef(i).parent=t,t=i}return t},Uu=class RI{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=xO(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof Ew?void 0:n.parent}},children:{value:EO(n,ef,RI),enumerable:!0,writable:!1},...NM(n,i)})}},Ew=class extends Uu{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},OM=class extends wO{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:ef,getChildren:i=>i.children,root:new Ew(e,t),toITestItem:kn.from})}},ju;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(ju||(ju={}));var m8;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(m8||(m8={}));var v8;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(v8||(v8={}));function w8(e){const t=J.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function MM(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var b8;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(b8||(b8={}));var xw=class extends ee{constructor(t,r,i){super(),this.n=r,this.a=this.B(new D),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new D),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=r.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(i.createLogger(s,{name:d(2831,null,this.h?" (Not Sent)":""),hidden:!0,group:oO}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new y8(r,i,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.c=i??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.n.telemetryInfo.machineId,r["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,r["common.vscodecommithash"]=this.n.commit,r["common.sqmid"]=this.n.telemetryInfo.sqmId,r["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.n.version,r["common.isnewappinstall"]=E8(this.n.telemetryInfo.firstSessionDate),r["common.product"]=this.n.environment.appHost,this.n.uiKind){case ju.Web:r["common.uikind"]="web";break;case ju.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=r1(cO(this.n.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.m.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,r){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};xw=__decorate([__param(1,Ut),__param(2,ga)],xw);var y8=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new D,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=K9(t,[]),this.c&&(t=vs(t,this.c)),this.b||(t=vs(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=K9(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function E8(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var zp=V("IExtHostTelemetry"),kw=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(Y.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(Y.MainThreadTelemetry),this.converter=new UM(this,s=>{const n=this.c.get(s);return n?.result===ge.Void?n:void 0},r),this.f=[{processArgument(s){return Qt(s)}},{processArgument(s){return da(s,function(n){if(Qe.isIRange(n))return M.to(n);if(qr.isIPosition(n))return He.to(n);if(Qe.isIRange(n.range)&&E.isUri(n.uri))return $r.to(n);if(n instanceof J)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Re(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new Re(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=da(r,function(o){if(o instanceof Ie)return He.from(o);if(o instanceof ke)return M.from(o);if(o instanceof Gr)return $r.from(o);if(Ds.isNotebookRange(o))return Xi.from(o);if(o instanceof ArrayBuffer)return s=!0,J.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,J.wrap(o);if(o instanceof J)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new zr(n):n,i);return Qt(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{uD(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Tr.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(zi(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new hv(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};kw=__decorate([__param(0,Ae),__param(1,Ce),__param(2,zp)],kw);var Ai=V("IExtHostCommands"),UM=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${Ct()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Vc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(te(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},j=class gr{static{this.Uri=new gr("uri","Uri of a text document",t=>E.isUri(t),t=>t)}static{this.Position=new gr("position","A position in a text document",t=>Ie.isPosition(t),He.from)}static{this.Range=new gr("range","A range in a text document",t=>ke.isRange(t),M.from)}static{this.Selection=new gr("selection","A selection in a text document",t=>Is.isSelection(t),Ii.from)}static{this.Number=new gr("number","",t=>typeof t=="number",t=>t)}static{this.String=new gr("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=gr.Arr(gr.String)}static Arr(t){return new gr(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new gr("item","A call hierarchy item",t=>t instanceof kv,Io.from)}static{this.TypeHierarchyItem=new gr("item","A type hierarchy item",t=>t instanceof r0,Do.from)}static{this.TestItem=new gr("testItem","A VS Code TestItem",t=>t instanceof Uu,kn.from)}static{this.TestProfile=new gr("testProfile","A VS Code test profile",t=>t instanceof kk,B0.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new gr(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new gr(t??this.name,r??this.description,this.validate,this.convert)}},ge=class LI{static{this.Void=new LI("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},ve=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},Os=V("IExtHostTerminalService"),Sw=class extends ee{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1,shellType:void 0},this.isOpen=!1,this.s=this.B(new D),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:k8(e.iconPath)??void 0,color:wa.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:wa.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:_t.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){let t;switch(e){case"sh":t=kr.Sh;break;case"bash":t=kr.Bash;break;case"fish":t=kr.Fish;break;case"csh":t=kr.Csh;break;case"ksh":t=kr.Ksh;break;case"zsh":t=kr.Zsh;break;case"cmd":t=kr.CommandPrompt;break;case"gitbash":t=kr.GitBash;break;case"pwsh":t=kr.PowerShell;break;case"python":t=kr.Python;break;case"julia":t=kr.Julia;break;case"nu":t=kr.NuShell;break;default:t=void 0;break}return this.m.shellType!==e?(this.m={...this.m,shellType:t},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},$w=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new D,this.onProcessData=this.a.event,this.b=new D,this.d=new D,this.onDidChangeProperty=this.d.event,this.f=new D,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},jM=1,Vp=class extends ee{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.R=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new ls),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new D,this.onDidCloseTerminal=this.I.event,this.J=new D,this.onDidOpenTerminal=this.J.event,this.L=new D,this.onDidChangeActiveTerminal=this.L.event,this.M=new D,this.onDidChangeTerminalDimensions=this.M.event,this.N=new D,this.onDidChangeTerminalState=this.N.event,this.O=new D,this.onDidChangeShell=this.O.event,this.P=new D({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new D({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=i.getProxy(Y.MainThreadTerminalService),this.y=new LM(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new Sw(this.a,Ct(),t,t.name),s=new $w(t.pty);return i.createExtensionTerminal(t.location,r,this.S(t,r).resolvedExtHostIdentifier,k8(t.iconPath),_M(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(i),i.value}S(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new $w(r),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.L.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.Q.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.I.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.Y(this.f,r);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:E.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new Sw(this.a,t,n,i);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:d(2832,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}U(t,r){const i=new se;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.W(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof $w&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.N.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,r,i){if(this.D.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.D.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new Re(()=>{this.D.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalCompletionProvider(t,r,...i){if(this.C.has(r.id))throw new Error(`Terminal completion provider "${r.id}" already registered`);return this.C.set(r.id,r),this.a.$registerCompletionProvider(r.id,t.identifier.value,...i),new Re(()=>{this.C.delete(r.id),this.a.$unregisterCompletionProvider(r.id)})}async $provideTerminalCompletions(t,r){const i=new it().token;if(i.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,r,i);if(n!=null)return J0.from(n)}$acceptTerminalShellType(t,r){const i=this.getTerminalById(t);i?.setShellType(r)&&this.N.fire(i.value)}registerTerminalQuickFixProvider(t,r,i){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,i),this.a.$registerQuickFixProvider(t,r),new Re(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new it().token;if(i.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new se;if(this.w.value=o,!Array.isArray(n))return n?Ap.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=Ap.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new it().token;let s=await this.D.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Re(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new it;this.H.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(nn.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:h,links:[]}));const p=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:h,links:p})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const p={id:jM++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(p.id,{provider:h.provider,link:f}),p}));return this.G.set(t,u),o}$activateLink(t,r){const i=this.G.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}W(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}X(t,r){const i=this.Y(t,r);return i!==null?t[i]:null}Y(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new x8),this.$(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Z(t,r){const i=TM(r.map),s=RM(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new x8(r[1]));this.$(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.O.fire(t.path)}$(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Z(t,r)}))}};Vp=__decorate([__param(1,Ai),__param(2,Ae)],Vp);var x8=class extends ee{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new D,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new BM(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:Ra.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:Ra.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:Ra.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?S8(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,S8(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},BM=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new D}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},Cw=class extends Vp{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new vm}createTerminalFromOptions(t,r){throw new vm}};Cw=__decorate([__param(0,Ai),__param(1,Ae)],Cw);function k8(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function _M(e){return wa.isThemeColor(e)?e:void 0}function S8(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var HM=V("progressService"),$8;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})($8||($8={}));var RY=Object.freeze({total(){},worked(){},done(){}}),Iw=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},C8=class extends ee{constructor(t,r){super(),this.a=new sn,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B(te(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};C8=__decorate([__param(1,HM)],C8);var NY=V("editorProgressService"),I8="__",FY=V("IAuthenticationService"),OY=V("IAuthenticationExtensionsService"),Pw=V("IExtHostAuthentication"),Dw=class{constructor(t){this.b=new Map,this.c=new D,this.d=new WM,this.a=t.getProxy(Y.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return Be.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=Je.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new Re(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(I8)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};Dw=__decorate([__param(0,Ae)],Dw);var WM=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},qp,Aw=V("IExtHostLanguageModels"),P8=class{constructor(e,t){this.option=e,this.stream=new jm,this.stream=t??new jm}},zM=class{constructor(){this.a=new Map,this.b=new jm,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return ol.map(e.b.asyncIterable,t=>{if(t instanceof Sr)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new P8(e.index,this.b):t=new P8(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new Sr(e.part.value):r=new mu(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},Tw=class{static{qp=this}static{this.a=1}constructor(t,r,i){this.k=r,this.l=i,this.c=new D,this.d=new D,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new ys,this.i=new Map,this.j=new Map,this.s=new Set,this.b=t.getProxy(Y.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=qp.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Je.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??Je.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable,capabilities:s.capabilities});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new Je(c),l,u)});return te(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new Iw(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof mu?h={type:"tool_use",name:u.part.name,parameters:u.part.input,toolCallId:u.part.callId}:u.part instanceof Sr&&(h={type:"text",value:u.part.value}),!h){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;try{a.provider.provideLanguageModelResponse2?l=a.provider.provideLanguageModelResponse2(s.map(pc.to),n,Je.toKey(i),c,o):l=a.provider.provideLanguageModelResponse(s.map(pc.to),n,Je.toKey(i),c,o)}catch(u){throw u}Promise.resolve(l).then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,ea(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new ys});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new er),this.i.delete(i))}t.added?.forEach(r=>this.q(r.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const r=Ar.find(this.g.entries(),([,i])=>!!i.metadata.isDefault)?.[0];if(r)return this.getLanguageModelByIdentifier(t,r)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.p(t.identifier,i.metadata)&&await this.q(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,capabilities:{supportsImageToText:i.metadata.capabilities?.vision??!1,supportsToolCalling:i.metadata.capabilities?.toolCalling??!1},maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw As.NotFound(r);return n.r(r,o,a??Xe.None)},sendRequest(o,a,c){if(!n.g.has(r))throw As.NotFound(r);return n.m(t,r,o,a??{},c??Xe.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,r,i,s,n){const o=this.n(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw As.NotFound(`Language model '${r}' is unknown.`);if(this.p(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw As.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new zM;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),As.tryDeserialize(h)??h}return u.apiObject}n(t,r){const i=[];for(const s of r)s.role===ii.System&&N(t,"languageModelSystem"),i.push(pc.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject(As.tryDeserialize(r)??x4(r)):i.res.resolve())}async o(t,r,i,s){const n=I8+r.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?d(2823,null,r.displayName,i):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}p(t,r){return!!r.auth&&!Je.equals(r.extension,t)}async q(t){if(t.auth)for(const r of this.s)try{await this.o(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.k.error("Fake Auth request failed"),this.k.error(i)}}async r(t,r,i){if(!this.g.get(t))throw As.NotFound(`Language model '${t}' is unknown.`);const n=Ar.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:pc.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new Yn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const r=this,i=Be.signal(Be.filter(this.c.event,n=>Je.equals(n.from,t.identifier))),s=Be.signal(this.d.event);return{get onDidChange(){return Be.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.p(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,r,i){return N(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(r,i)}async $isFileIgnored(t,r,i){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(E.revive(r),i)??!1}registerIgnoredFileProvider(t,r){N(t,"chatParticipantPrivate");const i=qp.a++;return this.b.$registerFileIgnoreProvider(i),this.j.set(i,r),te(()=>{this.b.$unregisterFileIgnoreProvider(i),this.j.delete(i)})}};Tw=qp=__decorate([__param(0,Ae),__param(1,Ce),__param(2,Pw)],Tw);function Bu(e,t=Ue){return Lm(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function VM(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var D8;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(D8||(D8={}));var qM=60,GM=qM*60,Rw=GM*24,jY=Rw*7,BY=Rw*30,_Y=Rw*365;function JM(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var QM={DateTimeFormat(e,t){try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}},Collator(e,t){try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}},Segmenter(e,t){try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}},Locale(e,t){try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(Xs,t)}}},A8;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(A8||(A8={}));function T8(e){return e<0?0:e>255?255:e|0}function xc(e){return e<0?0:e>4294967295?4294967295:e|0}var R8=class NI{constructor(t){const r=T8(t);this.c=r,this.a=NI.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=T8(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},L8;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(L8||(L8={}));var N8;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(N8||(N8={}));var YM=class extends R8{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=QM.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},F8=new qc(10);function XM(e,t){const r=`${e}/${t.join(",")}`;let i=F8.get(r);return i||(i=new YM(e,t),F8.set(r,i)),i}var Lw;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(Lw||(Lw={}));var O8;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(O8||(O8={}));var M8;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(M8||(M8={}));var U8;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(U8||(U8={}));var j8;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(j8||(j8={}));var B8;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(B8||(B8={}));var _8;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(_8||(_8={}));var H8;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(H8||(H8={}));var Nw=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},W8;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(W8||(W8={}));var z8;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(z8||(z8={}));var V8;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(V8||(V8={}));var ZM=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},KM=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},q8=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=G8(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=c5(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new ZM(t,this.wordSeparators?XM(this.wordSeparators,[]):null,r?this.searchString:null)}};function G8(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function J8(e,t,r){if(!r)return new Nw(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new Nw(e,i)}function eU(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function tU(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function Q8(e,t,r,i,s){return eU(e,t,r,i,s)&&tU(e,t,r,i,s)}var rU=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){p5(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||Q8(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function Y8(e){return e.scheme!==W.file&&e.scheme!==W.vscodeRemote}function iU(e){if(e.folders.length)return e.folders.every(t=>Y8(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&Y8(e.configuration))return e.configuration}function sU(e){return iU(e)?.scheme}var X8=K1,Z8=V("remoteAgentService"),HY=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await ar(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},Fw,nU=V("pathService"),K8=Fw=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||Sm)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===W.file||t.scheme===W.vscodeRemote?k2(i??mi(t),r===1):!0}get defaultUriScheme(){return Fw.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return W.vscodeRemote;const i=sU(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:W.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Ot:Le)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return E.from({scheme:W.file,authority:r,path:t,query:"",fragment:""})}};K8=Fw=__decorate([__param(1,Z8),__param(2,X8),__param(3,bl)],K8);function oU(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var eS=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(y1),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(y1),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(Gp),!t.length)return{}}else t=Gp(t);return r?this.parseSearchPaths(t):{pattern:Ow(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=Pt(this.c.groups.flatMap(p=>p.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(p=>Xk(c,p.fsPath)),f=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>Xk(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new Vt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===W.walkThrough)return;if(H2(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=ca(c.fsPath,o.fsPath);ia(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(w5(t.pattern,!0))return!0}else if(w5(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&G8(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>di(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:cU(t)).map(h=>{const f=this.f.resolvedUserHome;return f?VM(h,f.scheme===W.file?f.fsPath:f.path):h}),n=pm(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>en(h,"/")).map(h=>en(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),lU(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=Ow(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:iM(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=aU(s);return o&&(o=Mw(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?Ow(s.pattern):void 0})}),Array.from(i.values())}q(t){if(di(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==W.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:E.file(ps(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=Gp(t),t.startsWith("../")||t===".."){const s=Le.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=Mw(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${Ks(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Mn);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&Mw(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(13464,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(y1(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=E.isUri(t)?t:t.uri;let a=r.excludePattern?.map(p=>{const g=r.excludePattern&&oU(p)?p.uri:void 0;return!g||!(E.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const p=i.searchPaths.filter(g=>sl(g.searchPath,o))[0];if(p&&!p.pattern)return null;p&&(n=p.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=E.isUri(t)?mi(t):t.name,f=a.map(p=>Object.keys(u).length>0?{folder:p,pattern:u}:void 0).filter(p=>p);return{folder:o,folderName:s?h:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};eS=__decorate([__param(0,$s),__param(1,bl),__param(2,tO),__param(3,Ce),__param(4,nU),__param(5,Bx)],eS);function aU(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function Ow(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function cU(e){return Nl(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function lU(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function Gp(e){return e.replace(/\\/g,"/")}function Mw(e){return Gp(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var uU=7e3;function hU(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=W5(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>dU(e,u,a))).then(()=>{}),l=fU(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function dU(e,t,r){for(const i of e.folders)if(await e.exists(St(E.revive(i),t))){r(`workspaceContains:${t}`);return}}async function fU(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new it,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},uU);let a=!1;try{a=await n}catch(c){ji(c)||mt(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var tS=class{constructor(e){this.b=new D,this.onDidChangePassword=this.b.event,this.a=e.getProxy(Y.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},Uw=V("IExtHostSecretState"),pU=class{#e;constructor(e,t){this.disposables=new se,this.a=Je.toKey(e.identifier),this.#e=t,this.onDidChange=Be.map(Be.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},jw=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(Y.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Xs}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return a5(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),a5(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return E.revive(r)}return t.l10n?E.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};jw=__decorate([__param(0,Ut),__param(1,Ae),__param(2,Ce)],jw);var Bw=V("IExtHostLocalizationService"),_w=V("IExtHostManagedSockets"),Hw=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(Y.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new gU(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new se;return this.d.set(r,new mU(r,i,s)),s.add(te(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,J.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};Hw=__decorate([__param(0,Ae)],Hw);var gU=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},mU=class extends ee{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},Ww,rS=V("IHostUtils"),zw=Ww=class extends ee{constructor(t,r,i,s,n,o,a,c,l,u,h,f,p){super(),this.Y=f,this.Z=p,this.a=this.B(new D),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(Y.MainThreadWorkspace),this.z=this.g.getProxy(Y.MainThreadTelemetry),this.C=this.g.getProxy(Y.MainThreadExtensionService),this.D=new ei,this.F=new ei,this.G=new ei,this.H=new ei,this.I=new wU(this.f.extensions.activationEvents),this.L=new Fu(this.I,this.f.extensions.allExtensions);const g=new Yn(this.f.extensions.myExtensions);this.J=new Fu(this.I,nS(this.L,g)),Un&&(this.s.info(`Creating extension host with the following global extensions: ${kc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${kc(this.J)}`)),this.M=new f8(this.g,this.s),this.N=new tS(this.g),this.O=c,this.h=this.q.add(t.createChild(new v1([gw,this.M],[Uw,this.N]))),this.P=this.B(new fw(this.J,this.L,{onExtensionActivationError:(v,b,x)=>{this.C.$onExtensionActivationError(v,ea(b),x)},actualActivateExtension:async(v,b)=>{if(Fu.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,b),new kM;const x=this.J.getExtensionDescription(v);return this.fb(x,b)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),$t("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){mt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),gm(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([ar(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new Je(r.identifier.value),extensionLocation:E.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===W.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return E.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new vU(t))),this.Q}async db(t){const r=cn.forUris(i=>Om.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=sS(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=sS(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new xM(Up.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new se,o=new d8(r.startup);return Promise.all([this.xb(t,St(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>($t(`code/extHost/willActivateExtension/${t.identifier.value}`),Ww.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>($t(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new SM(t,this.M)),n=r.add(new p8(t.identifier.value,!1,this.M)),o=r.add(new pU(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?Za.Test:Za.Development:Za.Production,c=this.f.remote.isRemote?xo.Workspace:xo.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=ht(t,"ipc")?this.f.messagePorts?.get(Je.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(p){return Ze(t.extensionLocation.fsPath,p)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Ze(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return E.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new _u(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return N(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const p=Be.buffer(Be.fromDOMEventEmitter(f,"message",g=>g.data));f.start(),h={onDidReceiveMessage:p,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new jp(!1,null,o.build(),i,a,te(()=>{n.dispose(),hi(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();Z4(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(bA()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,ar(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await hU(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(d(2819,null));const i=await this.xb(null,r,new d8(!1));if(!i||typeof i.run!="function")throw new Error(d(2820,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(Un&&this.s.error("Test runner called back with error",l),n(l)):(Un&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=gi(r),c=i.run(a,o);c&&c.then&&c.then(()=>{Un&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{Un&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),ar(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,te(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new Ta("Not an authority that can be resolved!",Er.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=Tr.create(!1),s=()=>`[resolveAuthority(${ak(t)},${r})][${i.elapsed()}ms] `,n=k=>this.s.info(`${s()}${k}`),o=k=>this.s.warn(`${s()}${k}`),a=(k,I=void 0)=>this.s.error(`${s()}${k}`,I),c=k=>{if(k instanceof Ta)return{type:"error",error:{code:k._code,message:k._message,detail:k._detail}};throw k},l=async k=>{n(`activating resolver for ${k}...`);const{resolver:I,authorityPrefix:A}=await this.ub(k);if(!I)throw a(`no resolver for ${A}`),new Ta(`No remote extension installed to resolve ${A}.`,Er.NoResolverFound);return{resolver:I,authorityPrefix:A,remoteAuthority:k}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async k=>{if(!(k instanceof Ta)||k._code!==Er.InvalidAuthority)throw k;return o(`resolving nested authorities failed: ${k.message}`),[await l(t)]})}catch(k){return c(k)}const f=new q5;f.cancelAndSet(()=>n("waiting..."),1e3);let p,g;for(const[k,{authorityPrefix:I,resolver:A,remoteAuthority:R}]of h.entries())try{if(k===h.length-1)n("invoking final resolve()..."),$t(`code/extHost/willResolveAuthority/${I}`),p=await A.resolve(R,{resolveAttempt:r,execServer:g}),$t(`code/extHost/didResolveAuthorityOK/${I}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(A,rf.isManagedResolvedAuthority(p)?p:void 0));else{if(n(`invoking resolveExecServer() for ${R}`),$t(`code/extHost/willResolveExecServer/${I}`),g=await A.resolveExecServer?.(R,{resolveAttempt:r,execServer:g}),!g)throw new Ta(`Exec server was not available for ${R}`,Er.NoResolverFound);$t(`code/extHost/didResolveExecServerOK/${I}`)}}catch(_){return $t(`code/extHost/didResolveAuthorityError/${I}`),a("returned an error",_),f.dispose(),c(_)}f.dispose();const v={environmentTunnels:p.environmentTunnels,features:p.tunnelFeatures?{elevation:p.tunnelFeatures.elevation,privacyOptions:p.tunnelFeatures.privacyOptions,protocol:p.tunnelFeatures.protocol===void 0?!0:p.tunnelFeatures.protocol}:void 0},b={extensionHostEnv:p.extensionHostEnv,isTrusted:p.isTrusted,authenticationSession:p.authenticationSessionForInitializingExtensions?{id:p.authenticationSessionForInitializingExtensions.id,providerId:p.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${rf.isManagedResolvedAuthority(p)?"managed authority":`${p.host}:${p.port}`}`);let x;if(rf.isManagedResolvedAuthority(p)){const k=r;this.Y.setFactory(k,p.makeConnection),x={authority:t,connectTo:new ok(k),connectionToken:p.connectionToken}}else x={authority:t,connectTo:new SO(p.host,p.port),connectionToken:p.connectionToken};return{type:"ok",value:{authority:x,options:b,tunnelInformation:v}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${ak(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=E.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await or(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=iS(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Un&&(this.s.info(`$startExtensionHost: global extensions: ${kc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${kc(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=iS(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Un&&(this.s.info(`$deltaExtensions: global extensions: ${kc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${kc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=J.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};zw=Ww=__decorate([__param(0,ad),__param(1,rS),__param(2,Ae),__param(3,Di),__param(4,ni),__param(5,Ce),__param(6,Ut),__param(7,vw),__param(8,Hp),__param(9,Os),__param(10,Bw),__param(11,_w),__param(12,Aw)],zw);function iS(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new Fu(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new Yn(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=nS(s,n);return{globalRegistry:s,myExtensions:o}}function sS(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function kc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Ms=V("IExtHostExtensionService"),_u=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=ps(gi(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function nS(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var vU=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},wU=class{constructor(e){this.a=new ys,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},oS=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ce),i=e.get(Ae).getProxy(Y.MainThreadErrors);gm(s=>{t.error(s);const n=ea(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ce),r=e.get(Ae),i=e.get(Ms),s=e.get(zp),n=r.getProxy(Y.MainThreadExtensionService),o=r.getProxy(Y.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(f,p){if(c.has(f))return c.get(f).stack;let g="",v,b;for(const k of p)g+=`
	at ${k.toString()}`,b=k.getFileName(),!v&&b&&(v=a.findSubstr(E.file(b)));const x=`${f.name||"Error"}: ${f.message||""}${g}`;return c.set(f,{extensionIdentifier:v?.identifier,stack:x}),x}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(f){if(f===l||!f||f[u]){h=f||l;return}h=function(p,g){return l(p,g),f.call(Error,p,g)},Object.assign(h,{[u]:!0})}}),gm(f=>{t.error(f);const p=ea(f);let g;if(f instanceof yE?g=f.extension:g=c.get(f)?.extensionIdentifier,g){n.$onExtensionRuntimeError(g,p);const v=s.onExtensionError(g,f);t.trace("forwarded error to extension?",v,g)}}),Wc.addListener(f=>{o.$onUnexpectedError(f)})}},bU=class FI{constructor(t,r,i,s,n){this.a=i,this.b=new wR(t,null,s),r=FI.e(r,this.b);const o=new v1(...zR());o.set(Ut,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Ae,new JR(this.b)),o.set(vl,new QR(s)),o.set(rS,i);const a=new GR(o,!0);a.invokeFunction(oS.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ce)),$t("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Ms)),this.c.initialize(),a.invokeFunction(oS.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(Y.MainThreadExtensionService);return E.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=E.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=E.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>E.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=E.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=E.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=E.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=E.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=E.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}};function yU(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function EU(e){return new hR(yU(e))}var aS;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(aS||(aS={}));var Jp=class OI{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[OI.ENV_KEY]=this.pipeName}},Vw=class MI{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[MI.ENV_KEY]="1"}},qw=class UI{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[UI.ENV_KEY]="1"}};function xU(e){delete e[Jp.ENV_KEY],delete e[Vw.ENV_KEY],delete e[qw.ENV_KEY]}function kU(e){if(e[Jp.ENV_KEY])return Gw(e,new Jp(e[Jp.ENV_KEY]));if(e[Vw.ENV_KEY])return Gw(e,new Vw);if(e[qw.ENV_KEY])return Gw(e,new qw);throw new Error("No connection information defined in environment!")}function Gw(e,t){return xU(e),t}var JY=new P("inOutput",!1),QY=new P("activeLogOutput",!1),YY=new P("activeLogOutput.isLog",!1),XY=new P("activeLogOutput.levelSettable",!1),ZY=new P("activeLogOutput.level",""),KY=new P("activeLogOutput.levelIsDefault",!1),eX=new P("outputView.scrollLock",!1),tX=new P("activeOutputChannel",""),rX=new P("output.filter.trace",!0),iX=new P("output.filter.debug",!0),sX=new P("output.filter.info",!0),nX=new P("output.filter.warning",!0),oX=new P("output.filter.error",!0),aX=new P("outputFilterFocus",!1),cX=new P("output.filter.categories",""),lX=V("outputService"),Hu;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Hu||(Hu={}));var SU={OutputChannels:"workbench.contributions.outputChannels"};function $U(e){return Array.isArray(e.source)}var CU=class{constructor(){this.a=new Map,this.b=new D,this.onDidRegisterChannel=this.b.event,this.c=new D,this.onDidRemoveChannel=this.c.event,this.d=new D,this.onDidUpdateChannelSources=this.d.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const r=this.a.get(e);r&&$U(r)&&(r.source=t,this.d.fire(r))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};ir.add(SU.OutputChannels,new CU);var cS=class extends m1{constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.r=r,this.s=i,this.extension=s,this.n=0,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(te(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,Hu.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,Hu.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=J.fromString(t).byteLength,jR(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,Hu.Append))}},IU=class extends cS{appendLine(e){this.append(e)}},Jw=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(Y.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${JM(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Pe(r)?r:void 0;if(Pe(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Je.equals(i.identifier,u))?.[1];a&&(o=WR(a));const c=new se,l=s?this.o(t,o,i,c):this.n(t,n,i,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(te(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,r,i,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,r,i.identifier.value);return s.add(te(()=>this.l.deregisterLogger(o))),new cS(c,t,a,this.a,i)}async o(t,r,i,s){const n=await this.p(i),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${i.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:r,extensionId:i.identifier.value}));return s.add(te(()=>this.l.deregisterLogger(a))),new IU(c,t,l,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(xd(s)!==ae.FileExists)throw s}return i})())}return r}q(t,r,i){const s=()=>{if(i.isDisposed)throw new Error("Channel has been closed")};return r.then(n=>i.add(n)),{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i.dispose()}}}r(t,r,i,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new D);function a(c){r=c,o.fire(c)}return i.then(c=>{c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i,s),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))}}}};Jw=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Ou),__param(3,va),__param(4,ga),__param(5,Ce)],Jw);var lS=V("IExtHostOutputService"),Wu,Qw=class{static{Wu=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(Y.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=Wu.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=Zr(n);if(o.length<=Wu.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:e2(u.path,"/")})),c=zP(a,(u,h)=>u.rank-h.rank||Hn(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const p=Nr(f.uri.path);if(h!==p&&(h=p,l.push(f.uri)>=Wu.d))break e}}this.g.$onDidChange(i,l)});return new Re(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(E.revive(c),i));if(!u)return;try{Qv.validate(u),u.badge&&typeof u.badge!="string"&&N(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};Qw=Wu=__decorate([__param(0,Ae),__param(1,Ce)],Qw);var uS=V("IExtHostDecorations"),PU=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=xc(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=xc(e),t=xc(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=xc(e),t=xc(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=xc(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new DU(i,e-n)}},DU=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},AU=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new qr(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new PU(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=u5(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},Yw=new Map;function TU(e,t){t?Yw.set(e,t):Yw.delete(e)}function RU(e){return Yw.get(e)}var LU=class extends AU{constructor(e,t,r,i,s,n,o,a){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.r=a,this.n=!1}dispose(){dr(!this.n),this.n=!0,this.q=!1}equalLines(e){return Bi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===W.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.s()},getText(t){return t?e.t(t):e.getText()},get eol(){return e.c===`
`?$i.LF:$i.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.u(t)},offsetAt(t){return e.v(t)},positionAt(t){return e.w(t)},validateRange(t){return e.x(t)},validatePosition(t){return e.y(t)},getWordRangeAtPosition(t,r){return e.z(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){dr(!this.n),this.p=e}_acceptIsDirty(e){dr(!this.n),this.q=e}_acceptEncoding(e){dr(!this.n),this.r=e}s(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}t(e){const t=this.x(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}u(e){let t;if(e instanceof Ie?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new NU(t,this.b[t],t===this.b.length-1)}v(e){return e=this.y(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}w(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new Ie(t.index,Math.min(t.remainder,r))}x(e){if(!(e instanceof ke))throw new Error("Invalid argument");const t=this.y(e.start),r=this.y(e.end);return t===e.start&&r===e.end?e:new ke(t.line,t.character,r.line,r.character)}y(e){if(!(e instanceof Ie))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new Ie(t,r):e}z(e,t){const r=this.y(e);if(!t)t=RU(this.p);else if(l5(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=U6(r.character+1,O6(t),this.b[r.line],0);if(i)return new ke(r.line,i.startColumn-1,r.line,i.endColumn-1)}},NU=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new ke(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new ke(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Qp=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},dX=new Qp("id#"),FU=class jI{static{this.c=new Qp("TextEditorDecorationType")}constructor(t,r,i){const s=jI.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,x0.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},OU=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof Ie)r=new ke(e,e);else if(e instanceof ke)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new ke(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof ke)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==$i.LF&&e!==$i.CRLF)throw $e("endOfLine");this.h=e}},MU=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=oc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:oc.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=oc.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},UU=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.k=t,this.l=r,this.g=!1,this.h=new Set,this.c=s,this.d=new MU(this.k,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new On("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Is))throw $e("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Is)))throw $e("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new On("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new On("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new OU(i.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(p=>M.from(p));else if(u instanceof Ie){const{lineNumber:p,column:g}=He.from(u);f=[{startLineNumber:p,startColumn:g,endLineNumber:p,endColumn:g}]}else if(u instanceof ke)f=[M.from(u)];else{f=[];for(const p of u)if(p instanceof ke)f.push(M.from(p));else{const{lineNumber:g,column:v}=He.from(p);f.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,i.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(Bk(u))return t.$trySetDecorations(e,l.key,KO(u));{const f=new Array(4*u.length);for(let p=0,g=u.length;p<g;p++){const v=u[p];f[4*p]=v.start.line+1,f[4*p+1]=v.start.character+1,f[4*p+2]=v.end.line+1,f[4*p+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,M.from(l),u||pf.Default))},show(l){t.$tryShowEditor(e,_t.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){dr(!this.g),this.g=!0}_acceptOptions(e){dr(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){dr(!this.g),this.e=e}_acceptViewColumn(e){dr(!this.g),this.f=e}_acceptSelections(e){dr(!this.g),this.c=e}_acceptDiffInformation(e){dr(!this.g),this.j=e}async m(){const e=this.c.map(Ii.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:M.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?ac.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},jU=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},Xw=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new Vt,this.d=new D,this.e=new D,this.f=new D,this.g=new D,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=E.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=E.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==W.vscodeNotebookCell&&o.scheme!==W.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new jU(new LU(this.h.getProxy(Y.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=E.revive(n.documentUri);dr(this.c.has(o),`document '${o}' does not exist`),dr(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new UU(n.id,this.h.getProxy(Y.MainThreadTextEditors),this.i,new mr(()=>a.document),n.selections.map(Ii.to),n.options,n.visibleRanges.map(l=>M.to(l)),typeof n.editorPosition=="number"?_t.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(dr(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),hi(r),hi(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Ar.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};Xw=__decorate([__param(0,Ae),__param(1,Ce)],Xw);var Fo=V("IExtHostDocumentsAndEditors"),zu=V("IExtHostApiDeprecationService"),Zw=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(Y.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};Zw=__decorate([__param(0,Ae),__param(1,Ce)],Zw);var gX=Object.freeze(new class{report(e,t,r){}}),BU={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:5},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReadonlyPromptReference:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReadonlyPromptReference.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},terminalShellType:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellType.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textDocumentEncoding:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentEncoding.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Yp=Object.freeze(BU),Kw=ir.as(Pd.JSONContribution),_U=class sm{static a(t){const r=new Yn;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new sm(r,[]);if(!r||!r.length)return new sm([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new sm(n,o)}constructor(t,r){this.added=t,this.removed=r}},HU=class{constructor(e,t,r){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=r,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=_U.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){mt(e)}}},WU={type:"string",enum:["ui","workspace"],enumDescriptions:[d(13166,null),d(13167,null)]},hS="vscode://schemas/vscode-extensions",eb={properties:{engines:{type:"object",description:d(13168,null),properties:{vscode:{type:"string",description:d(13169,null),default:"^1.22.0"}}},publisher:{description:d(13170,null),type:"string"},displayName:{description:d(13171,null),type:"string"},categories:{description:d(13172,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:ER},{type:"string",const:"Languages",deprecationMessage:d(13173,null)}]}},galleryBanner:{type:"object",description:d(13174,null),properties:{color:{description:d(13175,null),type:"string"},theme:{description:d(13176,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(13177,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(13178,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(13179,null)},enabledApiProposals:{markdownDescription:d(13180,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Yp).map(e=>e),markdownEnumDescriptions:Object.values(Yp).map(e=>e.proposal)}},api:{markdownDescription:d(13181,null),type:"string",enum:["none"],enumDescriptions:[d(13182,null)]},activationEvents:{description:d(13183,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(13184,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(13185,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(13186,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(13187,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(13188,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(13189,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(13190,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(13191,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(13192,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(13193,null),body:"onStartupFinished"},{label:"onTaskType",description:d(13194,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(13195,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(13196,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(13197,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(13198,null)},{label:"onUri",body:"onUri",description:d(13199,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(13200,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(13201,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(13202,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(13203,null)},{label:"onRenderer",description:d(13204,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(13205,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(13206,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(13207,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(13208,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(13209,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(13210,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(13211,null)},{label:"*",description:d(13212,null),body:"*"}]}},badges:{type:"array",description:d(13213,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(13214,null)},href:{type:"string",description:d(13215,null)},description:{type:"string",description:d(13216,null)}}}},markdown:{type:"string",description:d(13217,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(13218,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(13219,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:uv}},extensionPack:{description:d(13220,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:uv}},extensionKind:{description:d(13221,null),type:"array",items:WU,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(13222,null)},{body:["workspace"],description:d(13223,null)},{body:["ui","workspace"],description:d(13224,null)},{body:["workspace","ui"],description:d(13225,null)},{body:[],description:d(13226,null)}]},capabilities:{description:d(13227,null),type:"object",properties:{virtualWorkspaces:{description:d(13228,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(13229,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(13230,null),d(13231,null),d(13232,null)]},description:{type:"string",markdownDescription:d(13233,null)}}},untrustedWorkspaces:{description:d(13234,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(13235,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(13236,null),d(13237,null),d(13238,null)]},restrictedConfigurations:{description:d(13239,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(13240,null)}}}}},sponsor:{description:d(13241,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(13242,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(13243,null),type:"string"},"vscode:uninstall":{description:d(13244,null),type:"string"}}},icon:{type:"string",description:d(13245,null)},l10n:{type:"string",description:d(13246,null)},pricing:{type:"string",markdownDescription:d(13247,null),enum:["Free","Trial"],default:"Free"}}},zU=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new HU(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&dO.register(e.extensionPoint,e.activationEventsGenerator),eb.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Kw.registerSchema(hS,eb),t}getExtensionPoints(){return Array.from(this.a.values())}},dS={ExtensionsRegistry:"ExtensionsRegistry"};ir.add(dS.ExtensionsRegistry,new zU);var VU=ir.as(dS.ExtensionsRegistry);Kw.registerSchema(hS,eb),Kw.registerSchema(qN,{properties:{extensionEnabledApiProposals:{description:d(13248,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Yp),markdownEnumDescriptions:Object.values(Yp).map(e=>e.proposal)}}]}}}});var qU={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(10673,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(10674,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(10675,null),default:""}}},tb;(function(e){function t(r,i,s){if(!r)return;const n=Pe(r.type)?r.type:void 0;if(!n||n.length===0){s.error(d(10676,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Pe(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?Ve(r.properties):{},when:r.when?Et.deserialize(r.when):void 0}}e.from=t})(tb||(tb={}));var GU=VU.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:d(10677,null),type:"array",items:qU}}),JU=class{constructor(){this.d=new D,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{GU.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=tb.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=Ve(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},QU=new JU,YU="settings",mX=new P("taskRunning",!1,d(10678,null)),vX=new P("taskTerminalActive",!1,d(10679,null)),wX=Em(10681,"Tasks"),Xp;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Xp||(Xp={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Xp||(Xp={}));var fS;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(fS||(fS={}));var Vu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Vu||(Vu={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Vu||(Vu={}));var qu;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(qu||(qu={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(qu||(qu={}));var Gu;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Gu||(Gu={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Gu||(Gu={}));var pS;(function(e){e.defaults={echo:!0,reveal:Vu.Always,revealProblems:qu.Never,focus:!1,panel:Gu.Shared,showReuseMessage:!0,clear:!1}})(pS||(pS={}));var Zp;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Zp||(Zp={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(Zp||(Zp={}));var gS;(function(e){function t(r){return Pe(r)?r:r.value}e.value=t})(gS||(gS={}));var mS;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Pe(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(mS||(mS={}));var vS;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(vS||(vS={}));var wS;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(wS||(wS={}));var bS;(function(e){e.parallel="parallel",e.sequence="sequence"})(bS||(bS={}));var rb;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(rb||(rb={}));var yS;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:rb.default,instanceLimit:1}})(yS||(yS={}));var Kp;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Kp||(Kp={})),function(e){e._default=e.Terminal}(Kp||(Kp={}));var ES;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(ES||(ES={}));var xS;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(xS||(xS={}));var kS;(function(e){e.SingleRun="singleRun",e.Background="background"})(kS||(kS={}));var SS;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(SS||(SS={}));var $S;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})($S||($S={}));var eg;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(eg||(eg={}));var CS;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(CS||(CS={}));var IS;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(IS||(IS={}));var PS;(function(e){function t(r,i){const s=QU.get(r.type);if(s===void 0){const c=Ve(r);return delete c._key,eg.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=Ve(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(d(10680,null,JSON.stringify(r,void 0,0),c));return}}}return eg.create(n)}e.createTaskIdentifier=t})(PS||(PS={}));var tg;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(tg||(tg={}));var rg;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(rg||(rg={}));var ib;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(ib||(ib={}));var Ju;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=ib.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new _a(s.process,s.args,s.options)}e.to=i})(Ju||(Ju={}));var sb;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(sb||(sb={}));var Qu;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=sb.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new vo(s.commandLine,s.options):new vo(s.command,s.args?s.args:[],s.options)}e.to=i})(Qu||(Qu={}));var Ti;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(Ti||(Ti={}));var nb;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===vn.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=YU),{id:r._id,workspaceFolder:s}}e.from=t})(nb||(nb={}));var ob;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(ob||(ob={}));var es;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof _a?o=Ju.from(s.execution):s.execution instanceof vo?o=Qu.from(s.execution):s.execution&&s.execution instanceof Uv&&(o=Ti.from(s.execution));const a=tg.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=vn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:ob.from(s.group),presentationOptions:rg.from(s.presentationOptions),problemMatchers:Zr(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;Ju.is(s.execution)?a=Ju.to(s.execution):Qu.is(s.execution)?a=Qu.to(s.execution):Ti.is(s.execution)&&(a=Ti.to(s._id,o));const c=tg.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(E.revive(s.source.scope)):l=vn.Workspace),!c||!l)return;const u=new bf(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Xl.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Xl(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=rg.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(es||(es={}));var ab;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(ab||(ab={}));var cb=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},ig=class{constructor(t,r,i,s,n,o,a,c){this.q=new D,this.r=new D,this.s=new D,this.u=new D,this.a=t.getProxy(Y.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new Re(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new Re(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(ab.from(t)).then(async r=>{const i=[];for(const s of r){const n=await es.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof cb))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=or(()=>i.provider.provideTasks(Xe.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await es.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,Xe.None);if(!n)return;this.A(n,i);const o=es.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Ti.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new ui("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new cb(this,t.id,r)):s=es.to(t.task,this.b,this.m).then(n=>{if(!n)throw new ui("Unexpected: Task does not exist.");return new cb(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};ig=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Di),__param(3,Fo),__param(4,ni),__param(5,Os),__param(6,Ce),__param(7,zu)],ig);var lb=class extends ig{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(W.vscodeRemote,{scheme:W.vscodeRemote,authority:"",platform:RD(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=es.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(Ti.is(i.execution))await this.y(i,r,!1);else throw new vm;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=es.from(o,i.extension);a&&Ti.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(Ti.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};lb=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Di),__param(3,Fo),__param(4,ni),__param(5,Os),__param(6,Ce),__param(7,zu)],lb);var ub=V("IExtHostTask"),DS=class{constructor(){this.f=new Map,this.m=[],this.n=new D,this.o=new D,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(6363,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await ar(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await ar(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function XU(e){return e.type&&(e.label||e.program||e.runtime)}var ZU=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function KU(e){return!!(e&&e.match(ZU))}function AS(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(KU(e.path))return E.parse(e.path);if(di(e.path))return E.file(e.path)}return e.path}function TS(e){if(typeof e.path=="object"){const t=E.revive(e.path);if(t)return t.scheme===W.file?t.fsPath:t.toString()}return e.path}function ej(e,t){const r=t?AS:TS,i=Ve(e);return RS(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function tj(e,t){const r=t?AS:TS,i=Ve(e);return RS(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function RS(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var Sc=V("IExtHostEditorTabs"),LS=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new i0(E.revive(this.b.input.uri));case 2:return new Hf(E.revive(this.b.input.original),E.revive(this.b.input.modified));case 3:return new Ik(E.revive(this.b.input.base),E.revive(this.b.input.input1),E.revive(this.b.input.input2),E.revive(this.b.input.result));case 6:return new s0(E.revive(this.b.input.uri),this.b.input.viewType);case 7:return new Pk(this.b.input.viewType);case 4:return new n0(E.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new o0(E.revive(this.b.input.original),E.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new Dk;case 9:return new Ak(E.revive(this.b.input.uri),E.revive(this.b.input.inputBoxUri));case 10:return new Tk;case 11:return new Rk(this.b.input.diffEditors.map(e=>new Hf(E.revive(e.original),E.revive(e.modified))));default:return}}},rj=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new LS(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return _t.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new LS(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},hb=class{constructor(t){this.b=new D,this.c=new D,this.e=[],this.a=t.getProxy(Y.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return ia(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?ij(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=OP(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new rj(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=ia(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};hb=__decorate([__param(0,Ae)],hb);function ij(e){return e.tabs!==void 0}var sj=0,NS=new WeakMap,Yu=V("IExtHostTesting"),db=class extends ee{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new D),this.g=new Map,this.w=this.B(new D),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(Y.MainThreadTesting),this.m=new uj(this.h),this.j=new aj(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Fe.root(a))?.collection.tree.get(a)?.actual??g8(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Fe.root(c))?.collection.tree.get(c)?.actual??g8({$mid:16,tests:[o]}),message:hc.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Fe.root(a));if(c)return Fe.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Mn)||[],exclude:n?.exclude.map(o).filter(Mn)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new se,o=n.add(new OM(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let p=0;s&&(p|=2);const g=f.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(p|=8),g?.provideRelatedCode&&(p|=4)),p},h={items:o.root.children,get label(){return i},set label(p){i=p,o.root.label=p,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(p){s=p,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(p){N(t,"testRelatedCode"),f.relatedCodeProvider=p,l.$updateController(r,{capabilities:u()})},createRunProfile:(p,g,v,b,x,k)=>{let I=Es(p);for(;a.has(I);)I++;return new US(this.h,a,c,this.w.event,r,I,p,g,v,b,x,k)},createTestItem(p,g,v){return new Uu(r,p,g,v)},createTestRun:(p,g,v=!0)=>this.j.createTestRun(t,r,o,p,g,v),invalidateTestResults:p=>{if(p===void 0)this.h.$markTestRetired(void 0);else{const g=p instanceof Array?p:[p];this.h.$markTestRetired(g.map(v=>Fe.fromExtHostTestItem(v,r).toString()))}},set resolveHandler(p){o.resolveHandler=p},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add(te(()=>l.$unregisterTestController(r))),this.g.set(r,f),n.add(te(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(p=>l.$publishDiff(r,p.map(Zd.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=Xe.None){const i=OS(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:dc.from(i.kind),targets:[{testIds:t.include?.map(n=>Fe.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(E.revive(t));if(!s)return[];const n=He.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Fe.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(Fe.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map($r.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(Su.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=_0.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=Xe.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(Su.to))),NS.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(Fe.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>Zd.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new it(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>NS.get(o)===t.resultId),s=i&&hj(Fe.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=sj++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(p=>n.tree.get(p)).filter(Mn),u=t.excludeExtIds.map(p=>s.collection.tree.get(p)).filter(Mn).filter(p=>l.some(g=>g.fullId.compare(p.fullId)===2));if(!l.length)return{};const h=new Mf(l.some(p=>p.actual instanceof Ew)?void 0:l.map(p=>p.actual),u.map(p=>p.actual),c,r),f=KF(t)&&this.j.prepareForMainThreadTestRun(a,h,MS.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(p){return{error:String(p)}}finally{f&&f.hasRunningTasks&&!i.isCancellationRequested&&await Be.toPromise(f.onEnd)}}};db=__decorate([__param(0,Ae),__param(1,Ce),__param(2,Ai),__param(3,Fo)],db);var nj=1e4,FS;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(FS||(FS={}));var oj=class extends ee{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new D),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new it(n));const o=this.B(new ms(()=>this.I(),nj));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new D;this.y=a.event,this.B(te(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=Fe.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof _f){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=Ct(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(hc.from):[hc.from(u)];if(l.uri&&l.range){const f={range:M.from(l.range),uri:l.uri};for(const p of h)p.location=p.location||f}this.D.$appendTestMessagesInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new it(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof _f?l.includesTests:[];if(u.length)for(const p of u)this.L(p);const h=l.uri.toString(),f=new Fe([t,i,h]).toString();this.z.set(f,{report:l,extIds:u.map(p=>Fe.fromExtHostTestItem(p,r).toString())}),this.D.$appendCoverage(t,i,Su.fromFile(r,f,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,Fe.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,J.fromString(l),u&&$r.from(u),h&&Fe.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof Uu))throw new Kd(e.id);if(this.j.has(Fe.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=kn.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},aj=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=Fe.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=MS.fromPublic(t,r,i,n),c=OS(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:dc.from(c.kind),id:c.profileId},exclude:i.exclude?.map(u=>Fe.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>Fe.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return Be.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new oj(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},OS=e=>{if(e.profile){if(!(e.profile instanceof US))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},MS=class l4{static fromPublic(t,r,i,s){return new l4(t,Ct(),s,r)}static fromInternal(t,r){return new l4(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},cj=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,kn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Fe.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},lj=class extends eO{constructor(){super(...arguments),this.z=new D,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:kn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new cj(this.z)}},uj=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:Ph(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new lj({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Xu=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},US=class extends kk{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Xu(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,Xu(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Xu(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Xu(this,this.#e,this.#i,{tag:e?Pi.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Xu(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Be.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Mn))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const f=dc.from(a);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?Pi.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}};function hj(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var kX=V("configurationResolverService"),ot;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(ot||(ot={}));var Cr=class extends ui{constructor(e,t){super(t),this.variable=e}},dj=class nm{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(Ue){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=Ve(r);Ue&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):Tt&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):yt&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Pe(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if(bt(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return s2(i,nm.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(nm.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Pe(c)&&c.match(nm.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const f=this.a.getFilePath();if(f)return Bu(f);throw new Cr(h,d(12966,null,r))},l=h=>{const f=c(h);if(this.a.getWorkspaceFolderPathForFile){const p=this.a.getWorkspaceFolderPathForFile();if(p)return Bu(p)}throw new Cr(h,d(12967,null,r,vt(f)))},u=h=>{if(o){const f=this.a.getFolderUri(o);if(f)return f;throw new Cr(h,d(12968,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new Cr(h,d(12969,null,r)):new Cr(h,d(12970,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[Ue?o.toLowerCase():o];if(Pe(h))return h}return""}throw new Cr(ot.Env,d(12971,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(Dt(h))throw new Cr(ot.Config,d(12972,null,r,o));if(bt(h))throw new Cr(ot.Config,d(12973,null,r,o));return h}throw new Cr(ot.Config,d(12974,null,r));case"command":return this.p(ot.Command,r,o,n,"command");case"input":return this.p(ot.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new Cr(ot.ExtensionInstallFolder,d(12975,null,r,o));return this.n(h.extensionLocation)}throw new Cr(ot.ExtensionInstallFolder,d(12976,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return Bu(this.n(u(ot.WorkspaceFolder)));case"cwd":return s||o?Bu(this.n(u(ot.Cwd))):Bn();case"workspaceRootFolderName":case"workspaceFolderBasename":return Bu(vt(this.n(u(ot.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new Cr(ot.UserHome,d(12977,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new Cr(ot.LineNumber,d(12978,null,r))}case"columnNumber":{const h=this.a.getColumnNumber();if(h)return h;throw new Error(d(12979,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new Cr(ot.SelectedText,d(12980,null,r))}case"file":return c(ot.File);case"fileWorkspaceFolder":return l(ot.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return vt(l(ot.FileWorkspaceFolderBasename));case"relativeFile":return s||o?ca(this.n(u(ot.RelativeFile)),c(ot.RelativeFile)):c(ot.RelativeFile);case"relativeFileDirname":{const h=Nr(c(ot.RelativeFileDirname));if(s||o){const f=ca(this.n(u(ot.RelativeFileDirname)),h);return f.length===0?".":f}return h}case"fileDirname":return Nr(c(ot.FileDirname));case"fileExtname":return Uh(c(ot.FileExtname));case"fileBasename":return vt(c(ot.FileBasename));case"fileBasenameNoExtension":{const h=vt(c(ot.FileBasenameNoExtension));return h.slice(0,h.length-Uh(h).length)}case"fileDirnameBasename":return vt(Nr(c(ot.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return wt;default:try{const h=o?`${i}:${o}`:i;return this.p(ot.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new Cr(t,d(12981,null,r))}return r}},$c=V("IExtHostVariableResolverProvider"),fj=class extends dj{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Hf||l.input instanceof o0)return l.input.modified;if(l.input instanceof i0||l.input instanceof n0||l.input instanceof s0)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>Bn(),getExecPath:()=>aa.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ps(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ps(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(aa))}},sg=class extends ee{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new mr(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new fj(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};sg=__decorate([__param(0,Ms),__param(1,Di),__param(2,Fo),__param(3,ni),__param(4,Sc)],sg);var fb=V("IExtHostDebugService"),ng=class extends ee{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Z=r,this.$=i,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new D),this.z=this.B(new D),this.C=this.B(new D),this.F=this.B(new D),this.u=t.getProxy(Y.MainThreadDebugService),this.I=this.B(new D),this.L=this.B(new D),this.G=new gj(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(Y.MainThreadTelemetry)}async $getVisualizerTreeItem(t,r){const i=this.hb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=Je.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),te(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.fb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),Z0.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,E.parse(s)}else{if(i.path)return E.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)XU(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.db.executeCommand(i.command,...i.arguments||[])}hb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.hb(i),o=this.zb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=Je.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),te(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof yo){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Eo&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.wb([],r,[]);const i=r.filter(o=>o instanceof yo).map(o=>o.id),s=r.filter(o=>o instanceof Eo).map(o=>o.id),n=r.filter(o=>o instanceof kf).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.eb.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Df.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new Re(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new Re(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new Re(()=>{});if(!this.sb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.pb(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new Re(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new Re(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new Re(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.yb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAnyAsync(i,r)}ib(t,r){if(t instanceof eu)return new vj(t.implementation)}jb(){}async $startDASession(t,r){const i=this,s=await this.xb(r);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const f=await this.U.sign(u.arguments.value);h.body={signature:f},a.sendResponse(h)}else throw new Error("no signer")}catch(f){h.success=!1,h.message=f.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=tj(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}i.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=ej(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Eo(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new kf(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=E.revive(n.uri);a=new yo(new Gr(c,new Ie(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}MO(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Eo&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof yo&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Gr(E.revive(n.uri),new Ie(n.line,n.character))}s.push(o)}}}this.wb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.xb(t.sessionId);t.kind==="thread"?r=new wk(i.api,t.threadId):r=new vk(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return or(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return or(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return or(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.qb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(r);return this.ub(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const r=await this.xb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.xb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.xb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.xb(t)).api,event:r.event,body:r.body};this.F.fire(s)}kb(t){if(t instanceof qa)return this.lb(t);if(t instanceof Ga)return this.mb(t);if(t instanceof Kl)return this.nb(t);if(t instanceof eu)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}qb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}rb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}sb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}tb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>or(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=Pt(n);if(o.length>0)return new mj(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new Ga(i));if(t){const n=await this.$.getExtensionRegistry();return or(()=>t.createDebugAdapterDescriptor(r.api,this.vb(r,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(r,s))}vb(t,r){}wb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async xb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new pj(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}yb(t){if(t){const r=E.revive(t);return this.Z.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}zb(t,r){return`${t}\0${r}`}Ab(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const r=this.Cb(t);let i,s;return"id"in r?s=rr.asClassName(r):i=r,{iconPath:i,iconClass:s}}Cb(t){if(t instanceof cr)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?E.file(r):r,light:typeof i=="string"?E.file(i):i}}};ng=__decorate([__param(0,Ae),__param(1,Di),__param(2,Ms),__param(3,ni),__param(4,Sc),__param(5,$c),__param(6,Ai),__param(7,Yu)],ng);var pj=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},gj=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},mj=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},vj=class extends DS{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},pb=class extends ng{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};pb=__decorate([__param(0,Ae),__param(1,Di),__param(2,Ms),__param(3,ni),__param(4,Sc),__param(5,$c),__param(6,Ai),__param(7,Yu)],pb);function wj(e){return"uri"in e&&"ranges"in e&&"preview"in e}function bj(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var jS=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=bj(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>Pt(s).flat())}};function yj(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:BS(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function BS(e){return{matchLines:e?.matchLines??nw.matchLines,charsPerLine:e?.charsPerLine??nw.charsPerLine}}function Ej(e){if(wj(e)){const t=Zr(e.ranges).map((r,i)=>{const n=Zr(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new Ls(e.uri,t,e.preview.text)}else return new Lp(e.uri,e.text,e.lineNumber)}var xj=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{kj(a)&&r.report(Ej(a))};return(async()=>Pt(await Promise.all(yj(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Pt(Zr(a.message))}))}};function kj(e){if(Sj(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function Sj(e){return!!e.preview}var _S=class extends cn{constructor(e,t,r=()=>!1){const i=new WE(r,()=>!1);super(i);const s=new Vt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.l(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const r=this.l(e);return t.get(r)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(r=>e(r)))}l(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},$j=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&ki(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&ki(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=vt(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(zi(n)))})})}async q(e,t){const r=new it,i=e.map(l=>this.r(l)),s=this.o instanceof jS?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??Fp,session:s},o=l=>{const u=new Kk(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new _S(e,o);let c;try{this.j.add(r),c=Tr.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),u=c.elapsed(),h=Tr.create();return this.h&&!this.f||(l&&l.forEach(f=>{const p=a.findQueryFragmentAwareSubstr(f),g=Le.relative(p.folder.path,f.path);if(p.noSiblingsClauses){const v=vt(f.path);this.w(t,{base:p.folder,relativePath:g,basename:v});return}this.u(p.tree,p.folder,g,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(f=>{this.v(f.tree,f.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=vc(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:vc(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:vc(this.l.excludePattern,void 0)}]);const i=t8(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=vt(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=vt(n),a=Nr(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=sw(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:p}=h;if(r.matchesExcludesSync(f,p,n!==p?c:void 0))continue;const g=t[f];if(g)o(g);else{if(f===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},Cj=class{constructor(){this.a=new Object,this.tokenSource=new it}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},Ij=class BI{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new $j(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,BI.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new Cj),this.b.get(t)}d(t){return t.relativePath?{resource:St(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},gb=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new it(t);return new Promise((s,n)=>{this.b=new Dj(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof Ls&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const f=c instanceof Ls;(h>0||!f)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=zi(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Ls?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Ls(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=new _S(e,(l,u)=>({queryTester:new Kk(this.j,l),folder:l.folder,folderIdx:u}),()=>!0),s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findQueryFragmentAwareSubstr(l.uri),h=u.folder.scheme===W.file?oM(()=>this.g.readdir(nl(l.uri))):void 0,f=U5(u.folder,l.uri);if(f){const p=u.queryTester.includedInQuery(f,vt(f),h);rn(p)?s.push(p.then(g=>{g&&t(l,u.folderIdx)})):p&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??Fp,previewOptions:this.j.previewOptions??nw,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(Pj(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=vc(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:vc(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:vc(this.j.excludePattern,void 0)}]);const i=t8(r);return{folder:E.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function Pj(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var Dj=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new Tj(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!sl(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(Aj(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function Aj(e){return e instanceof Ls?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var Tj=class u4{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<u4.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},u4.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},mb=V("IExtHostSearch"),og=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(Y.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new Ij}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new xj(r)),this.c.$registerTextSearchProvider(i,this.t(t)),te(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),te(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),te(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new jS(r)),this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=ag(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=ag(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=ag(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new gb({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new gb({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};og=__decorate([__param(0,Ae),__param(1,vl),__param(2,Ce)],og);function ag(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(Rj),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>E.revive(t))}}function Rj(e){return Qt(e)}var vb,wb=class{static{vb=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,r){this.c=new D,this.onDidChangeWindowState=this.c.event,this.f=vb.a,t.handle&&(this.d=Xh(t.handle).buffer),this.b=r.getProxy(Y.MainThreadWindow),this.b.$getInitialState().then(({isFocused:i,isActive:s})=>{this.onDidChangeWindowProperty("focused",i),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Xh(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.f[t]&&(this.f={...this.f,[t]:r},this.c.fire(this.f))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=E.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return jh(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===W.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if(jh(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return E.from(i)}};wb=vb=__decorate([__param(0,Ut),__param(1,Ae)],wb);var HS=V("IExtHostWindow"),cg=class extends _R{constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>Qt(i))),this.c=t.getProxy(Y.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(E.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.c.$setVisibility(t,r)}t(t,r,i){return new Lj(this.c,t,r,i)}};cg=__decorate([__param(0,Ae),__param(1,Ut)],cg);var Lj=class extends m1{constructor(e,t,r,i){super(i?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(r),this.s.$createLogger(t,i).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const r=[[e,t]];this.n?this.w(r):this.r.push(...r)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},bb=V("IExtHostTerminalShellIntegration"),yb=class extends ee{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new D,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new D,this.onDidStartTerminalShellExecution=this.f.event,this.g=new D,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(Y.MainThreadTerminalShellIntegration),this.B(te(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new Nj(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,E.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$shellEnvChange(t,r,i,s){this.b.get(t)?.setEnv(r,i,s)}$cwdChange(t,r){this.b.get(t)?.setCwd(E.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};yb=__decorate([__param(0,Ae),__param(1,Os)],yb);var Nj=class extends ee{get currentExecution(){return this.a}constructor(e,t){super(),this.m=e,this.n=t,this.b=!1,this.store=this.B(new se),this.g=this.B(new D),this.onDidRequestChangeShellIntegration=this.g.event,this.h=this.B(new D),this.onDidRequestShellExecution=this.h.event,this.j=this.B(new D),this.onDidRequestEndExecution=this.j.event;const r=this;this.value={get cwd(){return r.f},get env(){return r.c},executeCommand(i,s){let n=i;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;r.h.fire(n);const o={value:n,confidence:wf.High,isTrusted:!0},a=r.startShellExecution(o,r.f,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.j.fire({terminal:this.m,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new Fj(e,t??this.f);r?queueMicrotask(()=>this.n.fire({terminal:this.m,shellIntegration:this.value,execution:i.value})):this.n.fire({terminal:this.m,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(this.a){this.a.endExecution(e);const r=this.a;r.flush().then(()=>{this.a===r&&(this.j.fire({terminal:this.m,shellIntegration:this.value,execution:r.value,exitCode:t}),this.a=void 0)})}}setEnv(e,t,r){const i={};for(let s=0;s<e.length;s++)i[e[s]]=t[s];this.c={value:i,isTrusted:r},this.r()}setCwd(e){let t=!1;E.isUri(this.f)?t=!E.isUri(e)||this.f.toString()!==e.toString():this.f!==e&&(t=!0),t&&(this.f=e,this.r())}r(){this.g.fire({terminal:this.m,shellIntegration:this.value})}},Fj=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return ol.EMPTY;this.a=new Oj}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}async flush(){await this.a?.flush()}},Oj=class extends ee{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new ei);const e=this.a,t=new ol(async r=>{this.c.push(r),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};Ne(Bw,jw,1),Ne(ga,cg,1),Ne(zu,Zw,1),Ne(Ai,kw,0),Ne(Pw,Dw,0),Ne(Aw,Tw,0),Ne(ni,dw,0),Ne(Ou,mw,0),Ne(Yu,db,0),Ne(fb,pb,0),Ne(uS,Qw,0),Ne(Fo,Xw,0),Ne(_w,Hw,0),Ne(va,aL,0),Ne(lS,Jw,1),Ne(mb,og,0),Ne(gw,f8,0),Ne(ub,lb,0),Ne(Os,Cw,0),Ne(bb,yb,0),Ne(Hp,Wp,0),Ne(HS,wb,0),Ne(Di,cw,0),Ne(Uw,tS,0),Ne(Sc,hb,0),Ne($c,sg,0);var Eb=class extends Vp{constructor(t,r){super(!0,t,r)}createTerminal(t,r,i){return this.createTerminalFromOptions({name:t,shellPath:r,shellArgs:i})}createTerminalFromOptions(t,r){const i=new Sw(this.a,Ct(),t,t.name);return this.f.push(i),i.create(t,this.S(t,r)),i.value}};Eb=__decorate([__param(0,Ai),__param(1,Ae)],Eb);import{promises as WS}from"fs";var zS;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(zS||(zS={}));var VS;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(VS||(VS={}));function Mj(e,...t){const r=t.reduce((n,o)=>(n[o]=!0,n),{}),i=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!r[n]).forEach(n=>{for(let o=0;o<i.length;o++)if(n.search(i[o])!==-1){delete e[n];break}})}function Uj(e){e&&(delete e.DEBUG,yt&&delete e.LD_PRELOAD)}function qS(e=aa){return e.comspec||"cmd.exe"}function jj(e){let t=[],r=!1;const i=function(s){if(r){t.push(s);return}(!e.send(s,o=>{if(o&&console.error(o),r=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>i(c))}})||Ue)&&(r=!0)};return{send:i}}async function Bj(e){if(await st.exists(e)){let t;try{t=await WS.stat(e)}catch(r){r.message.startsWith("EACCES")&&(t=await WS.lstat(e))}return t?!t.isDirectory():!1}return!1}async function xb(e,t,r,i=aa,s=Bj){if(di(e))return await s(e)?e:void 0;if(t===void 0&&(t=Bn()),Nr(e)!=="."){const c=Ze(t,e);return await s(c)?c:void 0}const o=lT(i,"PATH");if(r===void 0&&Pe(o)&&(r=o.split(o5)),r===void 0||r.length===0){const c=Ze(t,e);return await s(c)?c:void 0}for(const c of r){let l;if(di(c)?l=Ze(c,e):l=Ze(t,c,e),await s(l))return l;if(Ue){let u=l+".com";if(await s(u)||(u=l+".exe",await s(u)))return u}}const a=Ze(t,e);return await s(a)?a:void 0}import{homedir as _j}from"os";var kb=class extends ig{constructor(t,r,i,s,n,o,a,c,l){super(t,r,i,s,n,o,a,c),this.C=i,this.D=l,r.remote.isRemote&&r.remote.authority?this.registerTaskSystem(W.vscodeRemote,{scheme:W.vscodeRemote,authority:r.remote.authority,platform:process.platform}):this.registerTaskSystem(W.file,{scheme:W.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,r){const i=r;if(!r.execution&&i._id===void 0)throw new Error("Tasks to execute must include an execution");if(i._id!==void 0){const s=nb.from(i,this.C),n=await this.a.$getTaskExecution(s);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.z(n,r);return this.a.$executeTask(s).catch(()=>{}),o}else{const s=es.from(r,t);if(s===void 0)return Promise.reject(new Error("Task is not valid"));Ti.is(s.execution)&&await this.y(s,r,!1);const n=await this.z(await this.a.$getTaskExecution(s),r);return this.a.$executeTask(s).catch(()=>{}),n}}v(t,r,i,s){const n=[];if(s)for(const o of s){this.A(o,i),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=es.from(o,i.extension);a&&(n.push(a),Ti.is(a.execution)&&r.push(this.y(a,o,!0)))}return{tasks:n,extension:i.extension}}async w(t){return t}async G(t){let r=t&&t.length>0?t[0]:void 0;if(!r){const i=E.file(_j());r=new b1({uri:i,name:mi(i),index:0})}return{uri:r.uri,name:r.name,index:r.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,r){const i=E.revive(t),s={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(i),o=await this.b.getWorkspaceFolders2()??[],a=await this.D.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.G(o);for(const l of r.variables)s.variables[l]=await a.resolveAsync(c,l);if(r.process!==void 0){let l;if(r.process.path!==void 0){l=r.process.path.split(o5);for(let p=0;p<l.length;p++)l[p]=await a.resolveAsync(c,l[p])}const u=await a.resolveAsync(c,r.process.name),h=r.process.cwd!==void 0?await a.resolveAsync(c,r.process.cwd):void 0,f=await xb(u,h,l);f?s.process=f:di(u)?s.process=u:s.process=Ze(h??"",u)}return s}async $jsonTasksSupported(){return!0}async $findExecutable(t,r,i){return xb(t,r,i)}};kb=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Di),__param(3,Fo),__param(4,ni),__param(5,Os),__param(6,Ce),__param(7,zu),__param(8,$c)],kb);import*as Cc from"child_process";var FX=V("externalTerminal"),lg="Terminal.app",GS=d(1953,null),Sb=class{async getDefaultTerminalForPlatforms(){return{windows:$b.getDefaultTerminalWindows(),linux:await JS.getDefaultTerminalLinuxReady(),osx:"xterm"}}},$b=class Gs extends Sb{static{this.b="cmd.exe"}openTerminal(t,r){return this.spawnTerminal(Cc,t,qS(),r)}spawnTerminal(t,r,i,s){const n=r.windowsExec||Gs.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const o=vt(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=Ic(process),h=t.spawn(i,a,{cwd:s,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,r,i,s,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:Gs.getDefaultTerminalWindows(),a=await Gs.f();return new Promise((c,l)=>{const u=`"${r} - ${GS}"`,h=`"${i.join('" "')}" & pause`,f=Object.assign({},Ic(process),s);Object.keys(f).filter(x=>f[x]===null).forEach(x=>delete f[x]);const p={cwd:r,env:f,windowsVerbatimArguments:!0};let g,v;vt(o,".exe")==="wt"?(g=o,v=["-d",".",Gs.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=Gs.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),Cc.spawn(g,v,p).on("error",x=>{l(Cb(x))}),c(void 0)})}static getDefaultTerminalWindows(){if(!Gs.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");Gs.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return Gs.d}static async f(){try{return await xb("wt")}catch{return}}};__decorate([d6],$b,"f",null);var Hj=class _I extends Sb{static{this.b="/usr/bin/osascript"}openTerminal(t,r){return this.spawnTerminal(Cc,t,r)}runInTerminal(t,r,i,s,n){const o=n.osxExec||lg;return new Promise((a,c)=>{if(o===lg||o==="iTerm.app"){const l=o===lg?"TerminalHelper":"iTermHelper",h=[F5.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||GS,"-w",r];for(const g of i)h.push("-a"),h.push(g);if(s){const g=Object.assign({},Ic(process),s);for(const v in g){const b=g[v];b===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${b}`))}}let f="";const p=Cc.spawn(_I.b,h);p.on("error",g=>{c(Cb(g))}),p.stderr.on("data",g=>{f+=g.toString()}),p.on("exit",g=>{if(g===0)a(void 0);else if(f){const v=f.split(`
`,1);c(new Error(v[0]))}else c(new Error(d(1954,null,l,g)))})}else c(new Error(d(1955,null,o)))})}spawnTerminal(t,r,i){const s=r.osxExec||lg;return new Promise((n,o)=>{const a=["-a",s];i&&a.push(i);const c=Ic(process),l=t.spawn("/usr/bin/open",a,{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})}},JS=class Tn extends Sb{static{this.b=d(1956,null)}openTerminal(t,r){return this.spawnTerminal(Cc,t,r)}runInTerminal(t,r,i,s,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):Tn.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${Wj(i)}; echo; read -p "${Tn.b}" -n1;`;l.push(`''${h}''`);const f=Object.assign({},Ic(process),s);Object.keys(f).filter(b=>f[b]===null).forEach(b=>delete f[b]);const p={cwd:r,env:f};let g="";const v=Cc.spawn(u,l,p);v.on("error",b=>{c(Cb(b))}),v.stderr.on("data",b=>{g+=b.toString()}),v.on("exit",b=>{if(b===0)a(void 0);else if(g){const x=g.split(`
`,1);c(new Error(x[0]))}else c(new Error(d(1957,null,u,b)))})})})}static async getDefaultTerminalLinuxReady(){if(!Tn.d)if(!yt)Tn.d=Promise.resolve("xterm");else{const t=await st.exists("/etc/debian_version");Tn.d=new Promise(r=>{t?r("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?r("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?r("konsole"):process.env.COLORTERM?r(process.env.COLORTERM):process.env.TERM?r(process.env.TERM):r("xterm")})}return Tn.d}spawnTerminal(t,r,i){const s=r.linuxExec?Promise.resolve(r.linuxExec):Tn.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{s.then(a=>{const c=Ic(process),l=t.spawn(a,[],{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function Ic(e){const t={...e.env};return Mj(t),t}function Cb(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(d(1958,null,e.path)):e}function Wj(e){let t="";for(const r of e)r.indexOf(" ")>=0?t+='"'+r+'"':t+=r,t+=" ";return t}var zj=class HI{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const r=await this.c();if(r){const i=String(HI.a++);return this.b.set(i,r),{id:i,data:r.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,r){if(!t.id)return!0;const i=this.b.get(t.id);if(!i)return!1;this.b.delete(t.id);try{return i.validate(r)==="ok"}catch{return!1}finally{i.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},QS=class extends zj{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as Ib from"child_process";import*as YS from"net";var XS=class jc extends DS{static{this.b=`\r
\r
`}static{this.i=/\r?\n/}static{this.l=/: */}constructor(){super(),this.r=Buffer.allocUnsafe(0),this.t=-1}v(t,r){this.p=r,this.r=Buffer.allocUnsafe(0),this.t=-1,t.on("data",i=>this.x(i))}sendMessage(t){if(this.p){const r=JSON.stringify(t);this.p.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}${jc.b}${r}`,"utf8")}}x(t){for(this.r=Buffer.concat([this.r,t]);;){if(this.t>=0){if(this.r.length>=this.t){const r=this.r.toString("utf8",0,this.t);if(this.r=this.r.slice(this.t),this.t=-1,r.length>0)try{this.acceptMessage(JSON.parse(r))}catch(i){this.n.fire(new Error((i.message||i)+`
`+r))}continue}}else{const r=this.r.indexOf(jc.b);if(r!==-1){const s=this.r.toString("utf8",0,r).split(jc.i);for(const n of s){const o=n.split(jc.l);o[0]==="Content-Length"&&(this.t=Number(o[1]))}this.r=this.r.slice(r+jc.b.length);continue}}break}}},ZS=class extends XS{startSession(){return new Promise((e,t)=>{let r=!1;this.y=this.z(()=>{this.v(this.y,this.y),e(),r=!0}),this.y.on("close",()=>{r?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.y.on("error",i=>{i instanceof AggregateError&&(i=i.errors[0]),r?this.n.fire(i):t(i)})})}async stopSession(){await this.w(),this.y&&(this.y.end(),this.y=void 0)}},Vj=class extends ZS{constructor(e){super(),this.A=e}z(e){return YS.createConnection(this.A.port,this.A.host||"127.0.0.1",e)}},qj=class extends ZS{constructor(e){super(),this.A=e}z(e){return YS.createConnection(this.A.path,e)}},KS=class Jo extends XS{constructor(t,r){super(),this.z=t,this.A=r}async startSession(){const t=this.z.command,r=this.z.args,i=this.z.options||{};try{if(t)if(di(t)){if(!await st.exists(t))throw new Error(d(6501,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(d(6502,null,this.A));let s=process.env;if(i.env&&Object.keys(i.env).length>0&&(s=vs(Ve(process.env),i.env)),t==="node")if(Array.isArray(r)&&r.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:s,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};i.cwd&&(o.cwd=i.cwd);const a=Ib.fork(r[0],r.slice(1),o);if(!a.pid)throw new Error(d(6503,null,r[0]));this.y=a}else throw new Error(d(6504,null));else{let n=t,o=r;const a={env:s};i.cwd&&(a.cwd=i.cwd),Ue&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=r.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.y=Ib.spawn(n,o,a)}this.y.on("error",n=>{this.n.fire(n)}),this.y.on("exit",(n,o)=>{this.o.fire(n)}),this.y.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.y.stdout.on("error",n=>{this.n.fire(n)}),this.y.stdin.on("error",n=>{this.n.fire(n)}),this.y.stderr.resume(),this.v(this.y.stdout,this.y.stdin)}catch(s){this.n.fire(s)}}async stopSession(){return this.y?(await this.w(),Ue?new Promise((t,r)=>{const i=Ib.exec(`taskkill /F /T /PID ${this.y.pid}`,function(s,n,o){if(s)return r(s)});i.on("exit",t),i.on("error",r)}):(this.y.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static B(t,r){if(!t)return;const i=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?i.runtime=Ze(r,t.runtime):i.runtime=t.runtime),t.runtimeArgs&&(i.runtimeArgs=t.runtimeArgs),t.program&&(di(t.program)?i.program=t.program:i.program=Ze(r,t.program)),t.args&&(i.args=t.args);const s=t;return s.win&&(i.win=Jo.B(s.win,r)),s.winx86&&(i.winx86=Jo.B(s.winx86,r)),s.windows&&(i.windows=Jo.B(s.windows,r)),s.osx&&(i.osx=Jo.B(s.osx,r)),s.linux&&(i.linux=Jo.B(s.linux,r)),i}static platformAdapterExecutable(t,r){let i=Object.create(null);r=r.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&fi(h.type,r)).forEach(h=>{const f=Jo.B(h,l.extensionLocation.fsPath);i=vs(i,f,l.isBuiltin)})}let s;Ue&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?s=i.winx86||i.win||i.windows:Ue?s=i.win||i.windows:Tt?s=i.osx:yt&&(s=i.linux),s=s||i;const n=s.program||i.program,o=s.args||i.args,a=s.runtime||i.runtime,c=s.runtimeArgs||i.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as Gj from"child_process";function Jj(e,t){return new Promise((r,i)=>{let s="";const n=Gj.spawn(e,t);n.pid&&n.stdout.on("data",o=>{s+=o.toString()}),n.on("error",o=>{i(o)}),n.on("close",o=>{r(s)})})}async function Qj(e){if(e)if(Ue){const t=await import("@vscode/windows-process-tree");return new Promise(r=>{t.getProcessTree(e,i=>{r(!!i&&i.children.length>0)})})}else return Jj("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const r=t.trim();return!(r.length===0||r.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var e$;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(e$||(e$={}));function Yj(e,t,r,i,s){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:Ue?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),i){const c=C5(i);c&&(a+=`${c}:; `),a+=`cd ${o(i)}; `}if(s)for(const c in s){const l=s[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=r?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||r?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),i){const c=C5(i);c&&(a+=`${c}: && `),a+=`cd ${o(i)} && `}if(s){a+='cmd /C "';for(const c in s){let l=s[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||r?c:o(c),a+=" ";s&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(i&&(a+=`cd ${o(i)} ; `),s){a+="/usr/bin/env";for(const l in s){const u=s[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||r?l:o(l),a+=" ";break}}return a}var Pb=class extends ng{constructor(t,r,i,s,n,o,a,c,l,u){super(t,r,i,s,a,c,l,u),this.Fb=n,this.Gb=o,this.Db=new Zj}ib(t,r){return t instanceof qa?new KS(this.lb(t),r.type):t instanceof Ga?new Vj(this.mb(t)):t instanceof Kl?new qj(this.nb(t)):super.ib(t,r)}vb(t,r){const i=KS.platformAdapterExecutable(r.getAllExtensionDescriptions(),t.type);if(i)return new qa(i.command,i.args,i.options)}jb(){return new QS}async $runInTerminal(t,r){if(t.kind==="integrated"){this.Eb||(this.Eb=this.B(this.Fb.onDidCloseTerminal(g=>{this.Db.onTerminalClosed(g)})));const i=await this.ab.getConfigProvider(),s=this.Fb.getDefaultShell(!0),n=this.Fb.getDefaultShellArgs(!0),o=t.title||d(2849,null),a=JSON.stringify({shell:s,shellArgs:n});let c=await this.Db.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:s,shellArgs:n,cwd:t.cwd,name:o,iconPath:new cr("debug")};u=!0,c=this.Fb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Db.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(b){b[b.DataDebounce=500]="DataDebounce",b[b.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new se;await new Promise(b=>{const x=v.add(new ms(b,500));v.add(this.Fb.onDidWriteTerminalData(k=>{k.terminal===c&&x.schedule()})),v.add(this.Gb.onDidChangeTerminalShellIntegration(k=>{k.terminal===c&&b()})),v.add(Um(b,5e3))}),v.dispose()}else if(c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await ar(200)),i.getConfiguration("debug.terminal").get("clearBeforeReusing")){let g;if(s.indexOf("powershell")>=0||s.indexOf("pwsh")>=0||s.indexOf("cmd.exe")>=0?g="cls":s.indexOf("bash")>=0?g="clear":Ue?g="cls":g="clear",c.shellIntegration){const v=new se,b=c.shellIntegration.executeCommand(g);await new Promise(x=>{v.add(this.Gb.onDidEndTerminalShellExecution(k=>{k.execution===b&&x()})),v.add(Um(x,500))}),v.dispose()}else c.sendText(g),await ar(200)}const f=Yj(s,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(f):c.sendText(f);const p=this.onDidTerminateDebugSession(g=>{g.id===r&&(this.Db.free(c),p.dispose())});return h}else if(t.kind==="external")return Xj(t,await this.ab.getConfigProvider());return super.$runInTerminal(t,r)}};Pb=__decorate([__param(0,Ae),__param(1,Di),__param(2,Ms),__param(3,ni),__param(4,Os),__param(5,bb),__param(6,Sc),__param(7,$c),__param(8,Ai),__param(9,Yu)],Pb);var Zu=void 0;function Xj(e,t){if(!Zu)if(Ue)Zu=new $b;else if(Tt)Zu=new Hj;else if(yt)Zu=new JS;else throw new Error("external terminals not supported on this platform");const r=t.getConfiguration("terminal");return Zu.runInTerminal(e.title,e.cwd,e.args,e.env||{},r.external||{})}var Zj=class WI{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,r,i=!1){const n=[...this.b.entries()].map(([o,a])=>gs(async c=>{if(o.name!==r||a.lastUsedAt!==-1&&await Qj(await o.processId))return null;const l=Date.now();return a.lastUsedAt+WI.a>l||c.isCancellationRequested?null:a.config!==t?(i&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await J2(n,o=>!!o)}insert(t,r){this.b.set(t,{lastUsedAt:Date.now(),config:r})}free(t){const r=this.b.get(t);r&&(r.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},t$=new mr(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),MX=new mr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),UX=new mr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function r$(e,t,r=!1){const i=e||"",s=t||"",n=t$.value.collator.compare(i,s);return t$.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function Kj(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function ug(e,t,r=!1){const i=e.split(wt),s=t.split(wt),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return r$(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=Kj(i[l],s[l],r);if(u!==0)return u}}function Db(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=eB(e,t,r);if(n)return n;const o=i.endsWith(r),a=s.endsWith(r);if(o!==a)return o?-1:1;const c=r$(i,s);return c!==0?c:i.localeCompare(s)}function eB(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=i.startsWith(r),o=s.startsWith(r);if(n!==o)return n?-1:1;if(n&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var hg=0,i$=[hg,[]];function s$(e,t,r,i){if(!e||!t)return i$;const s=e.length,n=t.length;if(s<n)return i$;const o=e.toLowerCase();return tB(t,r,n,e,o,s,i)}function tB(e,t,r,i,s,n,o){const a=[],c=[];for(let f=0;f<r;f++){const p=f*n,g=p-n,v=f>0,b=e[f],x=t[f];for(let k=0;k<n;k++){const I=k>0,A=p+k,R=A-1,_=g+k-1,q=I?a[R]:0,z=v&&I?a[_]:0,U=v&&I?c[_]:0;let oe;!z&&v?oe=0:oe=rB(b,x,i,s,k,U),oe&&z+oe>=q&&(o||v||s.startsWith(t,k))?(c[A]=U+1,a[A]=z+oe):(c[A]=hg,a[A]=q)}}const l=[];let u=r-1,h=n-1;for(;u>=0&&h>=0;){const f=u*n+h;c[f]===hg||(l.push(h),u--),h--}return[a[r*n-1],l.reverse()]}function rB(e,t,r,i,s,n){let o=0;if(!iB(t,i[s]))return o;if(o+=1,n>0&&(o+=n*5),e===r[s]&&(o+=1),s===0)o+=8;else{const a=sB(r.charCodeAt(s-1));a?o+=a:yl(r.charCodeAt(s))&&n===0&&(o+=2)}return o}function iB(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function sB(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var dg=Object.freeze({score:0}),fg=1<<18,Ab=1<<17,Tb=65536;function nB(e,t,r,i){const s=i.values?i.values:[i];return Es({[i.normalized]:{values:s.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:r}})}function n$(e,t,r,i,s){if(!e||!t.normalized)return dg;const n=i.getItemLabel(e);if(!n)return dg;const o=i.getItemDescription(e),a=nB(n,o,r,t),c=s[a];if(c)return c;const l=oB(n,o,i.getItemPath(e),t,r);return s[a]=l,l}function oB(e,t,r,i,s){const n=!r||!i.containsPathSeparator;return r&&(yt?i.pathNormalized===r:fi(i.pathNormalized,r))?{score:fg,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:i.values&&i.values.length>1?aB(e,t,r,i.values,n,s):o$(e,t,r,i,n,s)}function aB(e,t,r,i,s,n){let o=0;const a=[],c=[];for(const l of i){const{score:u,labelMatch:h,descriptionMatch:f}=o$(e,t,r,l,s,n);if(u===hg)return dg;o+=u,h&&a.push(...h),f&&c.push(...f)}return{score:o,labelMatch:c$(a),descriptionMatch:c$(c)}}function o$(e,t,r,i,s,n){if(s||!t){const[o,a]=s$(e,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(o){const c=x1(i.normalized,e);let l;if(c){l=Ab;const u=Math.round(i.normalized.length/e.length*100);l+=u}else l=Tb;return{score:l+o,labelMatch:c||a$(a)}}}if(t){let o=t;r&&(o=`${t}${wt}`);const a=o.length,c=`${o}${e}`,[l,u]=s$(c,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(l){const h=a$(u),f=[],p=[];return h.forEach(g=>{g.start<a&&g.end>a?(f.push({start:0,end:g.end-a}),p.push({start:g.start,end:a})):g.start>=a?f.push({start:g.start-a,end:g.end-a}):p.push(g)}),{score:l,labelMatch:f,descriptionMatch:p}}}return dg}function a$(e){const t=[];if(!e)return t;let r;for(const i of e)r&&r.end===i?r.end+=1:(r={start:i,end:i+1},t.push(r));return t}function c$(e){const t=e.sort((s,n)=>s.start-n.start),r=[];let i;for(const s of t)!i||!cB(i,s)?(i=s,r.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return r}function cB(e,t){return!(e.end<t.start||t.end<e.start)}function lB(e,t,r,i,s,n){const o=n$(e,r,i,s,n),a=n$(t,r,i,s,n),c=o.score,l=a.score;if((c===fg||l===fg)&&c!==l)return c===fg?-1:1;if(c>Tb||l>Tb){if(c!==l)return c>l?-1:1;if(c<Ab&&l<Ab){const b=uB(o.labelMatch,a.labelMatch);if(b!==0)return b}const g=s.getItemLabel(e)||"",v=s.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const f=l$(e,o,s),p=l$(t,a,s);return f&&p&&f!==p?p>f?-1:1:hB(e,t,r,s)}function l$(e,t,r){let i=-1,s=-1;if(t.descriptionMatch&&t.descriptionMatch.length?i=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(i=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(s=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=r.getItemDescription(e);n&&(s+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(s=t.descriptionMatch[t.descriptionMatch.length-1].end);return s-i}function uB(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const r=e[0].start,s=e[e.length-1].end-r,n=t[0].start,a=t[t.length-1].end-n;return s===a?0:a<s?1:-1}function hB(e,t,r,i){const s=i.getItemLabel(e)||"",n=i.getItemLabel(t)||"",o=i.getItemDescription(e),a=i.getItemDescription(t),c=s.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=i.getItemPath(e),h=i.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:s!==n?Db(s,n,r.normalized):o&&a&&o!==a?Db(o,a,r.normalized):u&&h&&u!==h?Db(u,h,r.normalized):0}function u$(e){return e.startsWith('"')&&e.endsWith('"')}var dB=" ";function Rb(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:r,normalized:i,normalizedLowercase:s}=h$(e),n=r.indexOf(wt)>=0,o=u$(e);let a;const c=e.split(dB);if(c.length>1)for(const l of c){const u=u$(l),{pathNormalized:h,normalized:f,normalizedLowercase:p}=h$(l);f&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:f,normalizedLowercase:p,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:r,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function h$(e){let t;Ue?t=e.replace(/\//g,wt):t=e.replace(/\\/g,wt);const r=r2(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:r,normalizedLowercase:r.toLowerCase()}}import*as fB from"child_process";import*as Lb from"fs";import{StringDecoder as d$}from"string_decoder";import*as pB from"child_process";function pg(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function gB(e){return new rw(e.start.line,e.start.character,e.end.line,e.end.character)}function f$(e){return new Hk(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var gg=class{constructor(t,r){this.a=t,this.b=r}appendLine(t){this.b.debug(`${this.a}#search`,t)}};gg=__decorate([__param(1,Ce)],gg);import{rgPath as mB}from"@vscode/ripgrep";var p$=mB.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function vB(e,t,r,i,s){const n=wB(e,t,r,i,s),o=t.folder.fsPath;return{cmd:pB.spawn(p$,n.args,{cwd:o}),rgDiskPath:p$,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function wB(e,t,r,i,s){const n=["--files","--hidden","--case-sensitive","--no-require-git"];yB([t],r,!1).forEach(a=>{const c=pg(a);if(n.push("-g",c),Tt){const l=e6(c);l!==c&&n.push("-g",l)}});const o=bB([t],i,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${pg(a)}`;if(n.push("-g",c),Tt){const l=e6(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),s&&n.push("--threads",`${s}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function bB(e,t,r,i=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=g$(a,i?o.folder.fsPath:void 0,r);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function yB(e,t,r=!0){const i=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=g$(n,r?s.folder.fsPath:void 0);i.push(...o.globArgs)}),i}function g$(e,t,r){const i=[],s={};return Object.keys(e).forEach(n=>{if(r&&r.has(n)||!n)return;const o=e[n];n=xB(t?EB(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),i.push(kB(n))):o&&o.when&&(s[n]=o)}),{globArgs:i,siblingClauses:s}}function EB(e,t){return di(t)?t:Ze(e,t)}function xB(e){return e=en(e,"\\"),en(e,"/")}function kB(e){return Rm(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var mg=new Set;process.on("exit",()=>{mg.forEach(e=>e())});var SB=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&ki(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:Rb(this.b).normalizedLowercase),this.u=e.excludePattern&&ki(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const r={};t.excludePattern?.forEach(s=>{Object.assign(r,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(r,this.a.excludePattern||{});const i=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==i).forEach(s=>{Wn(s,i)&&(r[ca(i,s)]=!0)}),this.t.set(i,new $B(r,i))})}cancel(){this.l=!0,mg.forEach(e=>e())}walk(e,t,r,i,s,n){if(this.m=Tr.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=vt(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(i,{relativePath:o.fsPath,searchPath:void 0})}),this.r=Tr.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,r,i,s,c=>{if(c){const l=zi(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?Pt(o)[0]:null;n(c,this.j)})}w(e,t,r){const i=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return r(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,i[c]=null,s[c]=l):(i[c]=u,s[c]=null),++o===e.length)return r(n?s:null,i)})})}x(e,t,...r){try{e.apply(t,r)}catch(i){r[r.length-1](i)}}y(e,t,r,i,s){const n=e.folder.fsPath,o=Tt,a=()=>f&&f.kill();mg.add(a);let c=b=>{mg.delete(a),c=()=>{},s(b)},l="";const u=this.D(),h=vB(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),f=h.cmd,p=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(b=>b.match(/^-/)?b:`'${b}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),i({message:v}),this.s=0,this.z(f,"utf8",i,(b,x,k)=>{if(b){c(b);return}if(this.j){c();return}const A=(l+(o?ed(x||""):x)).split(`
`);if(k){const R=A.length;A[R-1]=A[R-1].trim(),A[R-1]||A.pop()}else l=A.pop()||"";if(A.length&&A[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=A.length,p){for(const R of A)if(this.J(r,{base:n,relativePath:R,searchPath:this.N(e,R)}),this.j){a();break}(k||this.j)&&c();return}this.G(e,u,n,A,r),k&&(this.H(u,n,r),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),r=t.getBasenameTerms(),i=t.getPathTerms(),s=["-L","."];if(r.length||i.length){s.push("-not","(","(");for(const n of r)s.push("-name",n),s.push("-o");for(const n of i)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),fB.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,r){let i="";this.z(e,t,()=>{},(s,n,o)=>{if(s){r(s);return}i+=n,o&&r(null,i)})}z(e,t,r,i){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),i(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):r({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):r({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&CB(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,r){const i=new d$(t);return e.on("data",s=>{r(null,i.write(s))}),i}B(e){const t=[];return e.on("data",r=>{t.push(r)}),t}C(e,t){const r=new d$(t);return e.map(i=>r.write(i)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},r,i,s){i.indexOf(this.b)!==-1&&this.J(s,{base:r,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=vt(o),c=Nr(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:r,relativePath:o,basename:a,searchPath:this.N(e,o)})};i.forEach(n)}H({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.t.get(r),o=this.b;function a(c){s.o++;const l=sw(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const f=c[u],{relativePath:p,basename:g}=f;if(n.test(p,g,o!==g?l:void 0))continue;const v=t[p];if(v)a(v);else{if(s.p++,p===o)continue;s.J(i,f)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,r,i,s){const n=e.folder,o=sw(()=>r);this.w(r,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(wt):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(wt);Lb.lstat(u,(h,f)=>{if(h||this.l||this.j)return c(null);this.L(u,f,(p,g)=>p||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,f,(v,b)=>v||this.l||this.j||(b=b||"",this.v[b])?c(null):(this.v[b]=!0,st.readdir(u).then(x=>{if(this.l||this.j)return c(null);this.I(e,l,x,i,k=>c(k||null))},x=>{c(null)})))):(this.p++,l===this.b||this.h&&Kr(g.size)&&g.size>this.h||this.J(i,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&Pt(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,vt(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return iw(e,this.c);if(this.b)return iw(e,this.b,!1)}return!0}L(e,t,r){return t.isSymbolicLink()?Lb.stat(e,r):r(null,t)}M(e,t,r){return t.isSymbolicLink()?Lb.realpath(e,(i,s)=>i?r(i):r(null,s)):r(null,e)}N(e,t){return e.folderName?Ze(e.folderName,t):t}},m$=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new SB(e)}search(e,t,r){this.c.walk(this.a,this.b,this.d,e,t,(i,s)=>{r(i,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},$B=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,r;Object.keys(e).filter(i=>e[i]).forEach(i=>{di(i)?(t=t||Yx(),t[i]=e[i]):(r=r||Yx(),r[i]=e[i])}),this.a=t&&ki(t,{trimForExclusions:!0}),this.b=r&&ki(r,{trimForExclusions:!0})}test(e,t,r){return this.b&&this.b(e,t,r)||this.a&&this.a(Ze(this.c,e),t,r)}getBasenameTerms(){const e=[];return this.a&&e.push(...i9(this.a)),this.b&&e.push(...i9(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...s9(this.a)),this.b&&e.push(...s9(this.b)),e}};function CB(e){const t=e.trim().split(`
`),r=t[0].trim();if(r.startsWith("Error parsing regex"))return r;if(r.startsWith("regex parse error"))return m2(t[t.length-1].trim());if(r.startsWith("error parsing glob")||r.startsWith("unsupported encoding"))return r.charAt(0).toUpperCase()+r.substr(1);if(r==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(r.startsWith("Literal "))return r}import*as IB from"child_process";import{EventEmitter as PB}from"events";import{StringDecoder as DB}from"string_decoder";import{RegExpParser as AB,RegExpVisitor as TB}from"vscode-regexpp";import{rgPath as RB}from"@vscode/ripgrep";var v$=RB.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),w$=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,r,i){return Promise.all(t.folderOptions.map(s=>{const n={folderOptions:s,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,r,i)})).then(s=>({limitHit:s.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,r,i){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((s,n)=>{i.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=OB(e,o),c=t.folderOptions.folder.fsPath,l=a.map(I=>I.match(/^-/)?I:`'${I}'`).join(" ");this.a.appendLine(`${v$} ${l}
 - cwd: ${c}`);let u=IB.spawn(v$,a,{cwd:c});u.on("error",I=>{console.error(I),this.a.appendLine("Error: "+(I&&I.message)),n(Zk(new Ro(I&&I.message,Sn.rgProcessError)))});let h=!1;const f=new FB(t.maxResults??Fp,t.folderOptions.folder,BS(t.previewOptions));f.on("result",I=>{h=!0,b="",r.report(I)});let p=!1;const g=()=>{p=!0,u?.kill(),f?.cancel()};let v=!1;f.on("hitLimit",()=>{v=!0,g()});let b="";u.stdout.on("data",I=>{f.handleData(I),h||(b+=I)});let x=!1;u.stdout.once("data",()=>x=!0);let k="";u.stderr.on("data",I=>{const A=I.toString();this.a.appendLine(A),k.length+A.length<1e6&&(k+=A)}),u.on("close",()=>{if(this.a.appendLine(x?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),b&&this.a.appendLine(`Got data without result: ${b}`),this.a.appendLine(""),p)s({limitHit:v});else{f.flush(),u=null;let I;k&&!x&&(I=LB(k))?n(Zk(new Ro(I.message,I.code))):s({limitHit:v})}})})}};function LB(e){const t=e.split(`
`),r=t[0].trim();if(t.some(s=>s.startsWith("regex parse error")))return new Ro(NB(t),Sn.regexParseError);const i=r.match(/grep config error: unknown encoding: (.*)/);if(i)return new Ro(`Unknown encoding: ${i[1]}`,Sn.unknownEncoding);if(r.startsWith("error parsing glob"))return new Ro(r.charAt(0).toUpperCase()+r.substr(1),Sn.globParseError);if(r.startsWith("the literal"))return new Ro(r.charAt(0).toUpperCase()+r.substr(1),Sn.invalidLiteral);if(r.startsWith("PCRE2: error compiling pattern"))return new Ro(r,Sn.regexParseError)}function NB(e){const t=["Regex parse error"],r=e.filter(i=>i.startsWith("PCRE2:"));if(r.length>=1){const i=r[0].replace("PCRE2:","");if(i.indexOf(":")!==-1&&i.split(":").length>=2){const s=i.split(":")[1];t.push(":"+s)}}return t.join("")}var FB=class extends PB{constructor(e,t,r){super(),this.g=e,this.h=t,this.j=r,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new DB}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const r=this.a+e;if(t>=0)t+=this.a.length;else{this.a=r;return}let i=0;for(;t>=0;)this.m(r.substring(i,t).trim()),i=t+1,t=r.indexOf(`
`,i);this.a=r.substring(i)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const r=Ku(t.data.path),i=E.joinPath(this.h,r),s=this.n(t.data,i);this.p(s),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const r=Ku(t.data.path),i=E.joinPath(this.h,r);this.o(t.data,i).forEach(n=>this.p(n))}}n(e,t){const r=e.line_number-1,i=Ku(e.lines),s=Buffer.from(i);let n=0,o=0,a=r;e.submatches.length===0&&e.submatches.push(i.length?{start:0,end:1,match:{text:i[0]}}:{start:0,end:0,match:{text:""}});const c=Pt(e.submatches.map((h,f)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const p=Ku(h.match),g=s.slice(n,h.start).toString(),v=b$(g),b=v.numLines>0?v.lastLineLength:v.lastLineLength+o,x=b$(p),k=v.numLines+a,I=x.numLines+k,A=x.numLines>0?x.lastLineLength:x.lastLineLength+b;return n=h.end,o=A,a=I,new Hk(k,b,I,A)})),l=Dh(c,gB),u=new Jk(i,l,this.j);return new Ls(t,u.rangeLocations.map(h=>({sourceRange:f$(h.source),previewRange:f$(h.preview)})),u.previewText)}o(e,t){const r=Ku(e.lines),i=e.line_number;return r.replace(/\r?\n$/,"").split(`
`).map((s,n)=>new Lp(t,s,i+n))}p(e){this.emit("result",e)}};function Ku(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function b$(e){const t=/\n/g;let r=0,i=-1,s;for(;s=t.exec(e);)r++,i=s.index;const n=i>=0?e.length-i-1:e.length;return{numLines:r,lastLineLength:n}}function OB(e,t){const r=["--hidden","--no-require-git"];r.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:i,otherIncludes:s}=pm(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(s&&s.length){const o=new Set;s.forEach(a=>{o.add(a)}),r.push("-g","!*"),o.forEach(a=>{MB(a).map(pg).forEach(c=>{r.push("-g",c)})})}i&&i.length&&i.forEach(o=>{r.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(pg).forEach(o=>r.push("-g",`!${o}`)),t.maxFileSize&&r.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||r.push("--no-ignore-parent"):r.push("--no-ignore"),t.folderOptions.followSymlinks&&r.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&r.push("--encoding",t.folderOptions.encoding),t.numThreads&&r.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=Ks(e.pattern),e.isRegExp=!0),t.usePCRE2&&r.push("--pcre2"),r.push("--crlf"),e.isRegExp&&(e.pattern=UB(e.pattern),r.push("--engine","auto"));let n;if(e.isWordMatch){const a=c5(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");r.push("--regexp",a)}else if(e.isRegExp){let o=jB(e.pattern);o=BB(o),r.push("--regexp",o)}else n=e.pattern,r.push("--fixed-strings");return r.push("--no-config"),t.folderOptions.useIgnoreFiles.global||r.push("--no-ignore-global"),r.push("--json"),e.isMultiline&&r.push("--multiline"),t.surroundingContext&&(r.push("--before-context",t.surroundingContext+""),r.push("--after-context",t.surroundingContext+"")),r.push("--"),n&&r.push(n),r.push("."),r}function MB(e){return E$(e).flatMap(r=>{const i=Nl(r,"/");return i.map((s,n)=>i.slice(0,n+1).join("/"))})}function UB(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const r=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(r);)e=e.replace(r,"$1\\x{$2}");return e}var y$=e=>e.type==="Assertion"&&e.kind==="lookbehind";function jB(e){let t;try{t=new AB().parsePattern(e)}catch{return e}let r="",i=0;const s=(a,c,l)=>{r+=e.slice(i,a)+l,i=c},n=[];return new TB({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)s(a.start,a.end,"\\r?\\n");else if(!n.some(y$))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?s(c.start,c.end,l?`[^${l}]`:"."):s(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);s(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&s(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){y$(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),r+=e.slice(i),r}function BB(e){return e.replace(/\n/g,"\\r?\\n")}function _B(e){let t=!1,r=!1,i="",s="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":r?(t?s+="\\"+o:i+="\\"+o,r=!1):r=!0;break;case"{":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{strInBraces:i+"{"+s+"{"+e.substring(n+1)};t=!0}break;case"}":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{fixedStart:i,strInBraces:s,fixedEnd:e.substring(n+1)};i+=o}break;default:t?s+=(r?"\\":"")+o:i+=(r?"\\":"")+o,r=!1;break}}return{strInBraces:i+(t?"{"+s:"")}}function E$(e){const{fixedStart:t,strInBraces:r,fixedEnd:i}=_B(e);if(t===void 0||i===void 0)return[r];let s=Nl(r,",");s.length||(s=[""]);const n=E$(i);return s.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var HB=class{constructor(e,t,r){this.id=e,this.dependencies=t,this.callback=r}},Oo;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(Oo||(Oo={}));var qX=class zI{static{this.INSTANCE=new zI}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=Oo.Uninitialized}g(){if(this.d===Oo.Uninitialized){if(globalThis.define){this.d=Oo.InitializedExternal;return}}else return;this.d=Oo.InitializedInternal,globalThis.define=(t,r,i)=>{typeof t!="string"&&(i=r,r=t,t=null),(typeof r!="object"||!Array.isArray(r))&&(i=r,r=null),this.c.push(new HB(t,r,i))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${W.vscodeFileResource}://${N5}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===Oo.InitializedExternal)return new Promise(o=>{const a=Ct();globalThis.define(a,[t],function(c){o(c)})});const r=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!r){console.warn(`Did not receive a define call from script ${t}`);return}const i={},s=[],n=[];if(Array.isArray(r.dependencies))for(const o of r.dependencies)o==="exports"?s.push(i):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof r.callback=="function"?r.callback(...s)??i:r.callback}h(t){return new Promise((r,i)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),r(this.c.pop())},a=c=>{n(),i(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const r=(await import("fs")).default,i=(await import("vm")).default,s=(await import("module")).default,n=E.parse(t).fsPath,o=r.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new i.Script(a).runInThisContext().apply(),this.c.pop()}catch(r){throw r}}},GX=512*8,JX=512*128,x$;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(x$||(x$={}));function WB(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}var Nb={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},QX=(()=>{const e={};for(const t in Nb)Nb[t].guessableName&&(e[t]=Nb[t]);return e})(),k$=class extends gb{constructor(e,t,r=Kh,i="searchProcess"){super({query:e,provider:t},{readdir:s=>r.Promises.readdir(s.fsPath),toCanonicalName:s=>WB(s)},i)}},zB=class{constructor(e,t){this.a=e,this.b=t}search(e,t,r){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const i={appendLine(n){r({message:n})}},s=new k$(this.a,new w$(i,this.b),Kh);return new Promise((n,o)=>s.search(a=>{t(a.map(VB))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function VB(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,r)=>tw(r)?t+r.rangeLocations.length:t+1,0)}}var qB=class om{static{this.a=512}constructor(t="searchProcess",r){this.d=t,this.f=r,this.b=Object.create(null)}fileSearch(t){let r;const i=S$(t),s=new D({onDidAddFirstListener:()=>{r=gs(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(m$,i,a=>s.fire(a),n,om.a,o)}),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}textSearch(t){let r;const i=S$(t),s=new D({onDidAddFirstListener:()=>{r=gs(n=>this.g(i,o=>s.fire(o),n)),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}async g(t,r,i){t.maxFileSize=this.h().maxFileSize;const s=await this.f?.();return new zB(t,s).search(i,r,r)}h(){return{maxFileSize:16*ix.GB}}doFileSearch(t,r,i,s){return this.doFileSearchWithEngine(m$,t,i,s,om.a,r)}doFileSearchWithEngine(t,r,i,s,n=om.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,i(u.map(h=>this.j(h)))):u.relativePath?(a++,i(this.j(u))):i(u)};if(r.sortByScore){let u=this.n(r,c,s);if(!u){const h=r.maxResults?Object.assign({},r,{maxResults:null}):r,f=new t(h,o);u=this.k(f,r,i,c,s)}return new Promise((h,f)=>{u.then(([p,g])=>{const v=g.map(b=>this.j(b));this.q(v,i,n),h(p)},f)})}const l=new t(r,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?Ze(t.base,t.relativePath):t.relativePath}}k(t,r,i,s,n){const o=new D;let a=gs(l=>{let u=[];const h=f=>{Array.isArray(f)?u=f:(s(f),o.fire(f))};return this.s(t,h,-1,l).then(f=>[f,u])}),c;if(r.cacheKey){c=this.l(r.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[r.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[r.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),f=(typeof r.maxResults!="number"||r.maxResults>0)&&Tr.create(!1);return this.o(r,u,h,n).then(p=>{const g=f?f.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:p.length},messages:l.messages,limitHit:l.limitHit||typeof r.maxResults=="number"&&u.length>r.maxResults},p]})})}l(t){const r=this.b[t];return r||(this.b[t]=new GB)}n(t,r,i){const s=t.cacheKey&&this.b[t.cacheKey];if(!s)return;const n=this.r(s,t.filePattern||"",r,i);if(n)return n.then(([o,a,c])=>{const l=Tr.create(!1);return this.o(t,a,s.scorerCache,i).then(u=>{const h=l.elapsed(),f={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:f,messages:[]},u]})})}o(t,r,i,s){const n=Rb(t.filePattern||""),o=(c,l)=>lB(c,l,n,!0,JB,i),a=typeof t.maxResults=="number"?t.maxResults:Fp;return qP(r,o,a,1e4,s)}q(t,r,i){if(i&&i>0)for(let s=0;s<t.length;s+=i)r(t.slice(s,s+i));else r(t)}r(t,r,i,s){const n=Tr.create(!1),o=r.indexOf(wt)>=0;let a;for(const h in t.resultsToSearchCache)if(r.startsWith(h)){if(o&&h.indexOf(wt)<0&&h!=="")continue;const f=t.resultsToSearchCache[h];a={promise:this.t(f.promise),event:f.event,resolved:f.resolved};break}if(!a)return null;const c=n.elapsed(),l=Tr.create(!1),u=a.event(i);return s&&s.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,f])=>{if(s&&s.isCancellationRequested)throw zc();const p=[],g=Rb(r).normalizedLowercase;for(const v of f)iw(v,g)&&p.push(v);return[h,p,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:f.length}]})}s(t,r,i,s){return new Promise((n,o)=>{let a=[];s?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(i?(a.push(c),i>0&&a.length>=i&&(r(a),a=[])):r(c))},c=>{r(c)},(c,l)=>{a.length&&r(a),c?(r({message:"Search finished. Error: "+c.message}),o(c)):(r({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(r,i){return t.then(r,i)}catch(r){return this.then(void 0,r)}finally(r){return t.finally(r)}}}},GB=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},JB=new class{getItemLabel(e){return vt(e.relativePath)}getItemDescription(e){return Nr(e.relativePath)}getItemPath(e){return e.relativePath}};function S$(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(QB),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>E.revive(t))}}function QB(e){return Qt(e)}var $$=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,r,i){const s=await this.c(),n=new w$(this.b,s);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:s,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===W.vscodeUserData){const c={...a,folder:o.folder.with({scheme:W.file})},l=new Iw(u=>r.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(i,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(i,c=>n.provideTextSearchResultsWithRgOptions(e,a,r,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const r=YB(e);this.a.add(r);const i=await t(r.token);return this.a.delete(r),i}f(){this.a.forEach(e=>e.cancel())}};function YB(e){const t=new it;return e.onCancellationRequested(()=>t.cancel()),t}var Fb=class extends og{constructor(t,r,i,s,n){super(t,i,n),this.E=s,this.x=Kh,this.y=-1,this.z=null,this.A=!1,this.C=new se,this.D=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.F=this.F.bind(this);const o=new gg("RipgrepSearchUD",this.s);this.C.add(this.registerTextSearchProvider(W.vscodeUserData,new $$(o,this.getNumThreadsCached))),r.remote.isRemote&&r.remote.authority&&this.G(),s.getConfigProvider().then(a=>{this.D||this.C.add(a.onDidChangeConfiguration(this.F))})}F(t){t.affectsConfiguration("search")&&(this.B=void 0)}async getNumThreads(){return(await this.E.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.B||(this.B=this.getNumThreads()),this.B}dispose(){this.D=!0,this.C.dispose()}$enableExtensionHostSearch(){this.G()}G(){if(this.A)return;this.A=!0;const t=new gg("RipgrepSearchEH",this.s);this.C.add(this.registerTextSearchProvider(W.file,new $$(t,this.getNumThreadsCached))),this.C.add(this.H(W.file,new qB("fileSearchProvider",this.getNumThreadsCached)))}H(t,r){const i=this.e++;return this.z=r,this.y=i,this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.z=null,this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=ag(i);if(t===this.y){const o=Date.now();return this.I(t,r,n,s).then(a=>{const c=Date.now()-o;return this.s.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,r,i,s)}async doInternalFileSearchWithCustomCallback(t,r,i){const s=o=>{if(sM(o)&&(o=[o]),Array.isArray(o)){i(o.map(a=>E.file(a.path)));return}o.message&&this.s.debug("ExtHostSearch",o.message)};if(!this.z)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.z.doFileSearch(t,n,s,r)}async I(t,r,i,s){return this.doInternalFileSearchWithCustomCallback(i,s,n=>{this.c.$handleFileMatch(t,r,n)})}$clearCache(t){return this.z?.clearCache(t),super.$clearCache(t)}v(t,r){return new k$(t,r,void 0,"textSearchProvider")}};Fb=__decorate([__param(0,Ae),__param(1,Ut),__param(2,vl),__param(3,ni),__param(4,Ce)],Fb);function C$(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=C$(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:ps(a.base)},f===t.fsPath||Pa(f,t.fsPath))h=10;else return 0}return h}else return 0}}function I$(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(I$):!!e.notebookType}var Ob;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Ob||(Ob={}));var XX=V("editSessionIdentityService"),Mb;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Mb||(Mb={}));var XB=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Y.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new Re(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},P$;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(P$||(P$={}));function D$(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function ZB(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return r5()||D$(t),J.wrap(t)}function KB(e){const t=e.buffer;if(r5()||D$(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function Ub(e){const t=new Uint32Array(e_(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return ZB(t)}function e_(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function A$(e){const t=KB(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var t_=[new ve("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[j.Uri,j.Position],new ge("A promise that resolves to an array of DocumentHighlight-instances.",Ri(sc.to))),new ve("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[j.Uri],new ge("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(wm(e))return;class r extends Wl{static to(s){const n=new r(s.name,si.to(s.kind),s.containerName||"",new Gr(t[0],M.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=M.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new ve("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[j.Uri,new j("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ri(Ht.to))),new ve("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[j.Uri,j.Range,new j("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ri(Ht.to))),new ve("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[j.Uri,j.Position,new j("ch","Trigger character",e=>typeof e=="string",e=>e),new j("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ri(Ht.to))),new ve("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new ve("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location-instances.",Ri($r.to))),new ve("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Location-instances.",Ri($r.to))),new ve("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Hover-instances.",Ri(yu.to))),new ve("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[j.Uri,j.Position],new ge("A promise that resolves to an array of Hover-instances.",Ri(yu.to))),new ve("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[j.Uri,new j("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ie.isPosition(t)),e=>e.map(He.from))],new ge("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new Gl(M.to(i),r);return r}))),new ve("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[j.String.with("query","Search string")],new ge("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Co.to))),new ve("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[j.Uri,j.Position],new ge("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Io.to))),new ve("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[j.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(S0.to))),new ve("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[j.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map($0.to))),new ve("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[j.Uri,j.Position],new ge("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:M.to(e.range),placeholder:e.text}})),new ve("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[j.Uri,j.Position,j.String.with("newName","The new symbol name")],new ge("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return jr.to(e)}})),new ve("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[j.Uri,j.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ge("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Po.to))),new ve("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[j.Uri],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Gv(e.tokenTypes,e.tokenModifiers)})),new ve("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[j.Uri],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=A$(e);if(t.type==="full")return new Qa(t.data,void 0)})),new ve("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[j.Uri,j.Range.optional()],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Gv(e.tokenTypes,e.tokenModifiers)})),new ve("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[j.Uri,j.Range],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=A$(e);if(t.type==="full")return new Qa(t.data,void 0)})),new ve("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[j.Uri,j.Position,j.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),j.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ge("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new Fa([]);const i=e.suggestions.map(s=>A0.to(s,r));return new Fa(i,e.incomplete)})),new ve("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[j.Uri,j.Position,j.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ge("A promise that resolves to SignatureHelp.",e=>{if(e)return Eu.to(e)})),new ve("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[j.Uri,j.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ge("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>Ri(i=>new uf(M.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new ve("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[j.Uri,new j("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>ke.isRange(e),e=>Is.isSelection(e)?Ii.from(e):M.from(e)),j.String.with("kind","Code action kind to return code actions for").optional(),j.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ge("A promise that resolves to an array of Command-instances.",(e,t,r)=>Ri(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new ql(i.title,i.kind?new pt(i.kind):void 0);return i.edit&&(s.edit=jr.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new ve("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[j.Uri],new ge("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new mf(M.to(t.range),nc.to(t.color))):[])),new ve("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new j("color","The color to show and insert",e=>e instanceof Ba,nc.from),new j("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:M.from(e.range)}))],new ge("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(up.to):[])),new ve("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[j.Uri,j.Range],new ge("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(T0.to.bind(void 0,r)))),new ve("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[j.Uri],new ge("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(dp.to)})),new ve("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ge("A promise that resolves to an array of NotebookContentProvider static info objects.",Ri(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>pp.to(t))})))),new ve("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[j.Uri,j.Range,new j("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof ke,e=>sp.from(e))],new ge("A promise that resolves to an array of InlineValue objects",e=>e.map(ip.to))),new ve("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new j("uriOrString","Uri-instance or string (only http/https)",e=>E.isUri(e)||typeof e=="string"&&O2(e,W.http,W.https),e=>e),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[_t.from(e),void 0]:[_t.from(e.viewColumn),xu.from(e)])).optional(),j.String.with("label","").optional()],ge.Void),new ve("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[j.Uri.with("resource","Resource to open"),j.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[_t.from(e),void 0]:[_t.from(e.viewColumn),xu.from(e)])).optional()],ge.Void),new ve("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[j.Uri.with("left","Left-hand side resource of the diff editor"),j.Uri.with("right","Right-hand side resource of the diff editor"),j.String.with("title","Human readable title for the diff editor").optional(),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[_t.from(e.viewColumn),xu.from(e)]).optional()],ge.Void),new ve("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[j.String.with("title","Human readable title for the changes editor"),new j("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!E.isUri(r)||!E.isUri(i)&&i!==void 0&&i!==null||!E.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ge.Void),new ve("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[j.Uri,j.Position],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Do.to))),new ve("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[j.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Do.to))),new ve("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[j.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Do.to))),new ve("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[j.TestItem],ge.Void),new ve("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[j.TestProfile,j.Arr(j.TestItem)],ge.Void),new ve("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[j.Arr(j.TestItem)],ge.Void),new ve("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[j.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ge.Void),new ve("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[j.String.with("name","The context key name"),new j("value","The context key value",()=>!0,e=>e)],ge.Void),new ve("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new j("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?M.from(e.initialRange):void 0,initialSelection:Is.isSelection(e.initialSelection)?Ii.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?He.from(e.position):void 0}})],ge.Void)],r_=class{static register(e){t_.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",OR)}};function Ri(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Pn(e){if(!Array.isArray(e))return;const t=[];for(const r of e)oN(r)?t.push(bu.to(r)):t.push($r.to(r));return t}var jb=class{constructor(t,r){this.a=t.getProxy(Y.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new zr(jr.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};jb=__decorate([__param(0,Ae)],jb);var T$;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(T$||(T$={}));var R$;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(R$||(R$={}));var vg;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(vg||(vg={}));var L$;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(L$||(L$={}));var N$;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(N$||(N$={}));var i_=V("IChatService");function s_(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var n_=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=Tr.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Ur.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,Du.from(c),l):this.l.$handleProgressChunk(this.k.requestId,To.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,z0.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new Wf(s),o=Cu.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&N(r.j,"chatParticipantAdditions");const o=new du(s,n),a=bp.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),N(r.j,"chatParticipantAdditions");const n=new Jf(s),o=wp.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new Vf(s,n),a=Iu.from(o);return i(a),this},anchor(s,n){const o=new fu(s,n);return this.push(o)},button(s){t(this.anchor);const n=new Gf(s),o=Au.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new qf(s,n),a=n?Ep.from(o):Pu.from(o);return i(a,n),this},warning(s){t(this.progress),N(r.j,"chatParticipantAdditions");const n=new pu(s),o=Du.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&N(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new $o(s,n,o);c=[To.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new $o(s,n,o),c=To.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),N(r.j,"chatParticipantAdditions");const a=new Qf(s,n,o),c=$p.from(a);i(c)},textEdit(s,n){t(this.textEdit),N(r.j,"chatParticipantAdditions");const o=new gu(s,n);o.isDone=n===!0?!0:void 0;const a=xp.from(o);return i(a),this},notebookEdit(s,n){t(this.notebookEdit),N(r.j,"chatParticipantAdditions");const o=new Xf(s,n),a=Sp.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),N(r.j,"chatParticipantAdditions");const c=new zf(s,n,o,a),l=yp.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof gu||s instanceof Xf||s instanceof du||s instanceof pu||s instanceof zf||s instanceof Qf||s instanceof Yf||s instanceof qf)&&N(r.j,"chatParticipantAdditions"),s instanceof $o)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof qf){const n=s.task?Ep.from(s):Pu.from(s);i(n,s.task)}else if(s instanceof fu){const n=gc.from(s);if(s.resolve){N(r.j,"chatParticipantAdditions"),n.resolveId=Ct();const o=new it;s.resolve(o.token).then(()=>{const a=gc.from(s);r.l.$handleAnchorResolve(r.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),r.n.add(te(()=>o.dispose(!0)))}i(n)}else{const n=Cp.from(s,r.m,r.n);i(n)}return this}})}return this.g}},o_=class xh extends ee{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,r,i,s,n,o){super(),this.y=r,this.z=i,this.C=s,this.D=n,this.F=o,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new Ah),this.u=this.B(new Ah),this.w=new Set,this.g=t.getProxy(Y.MainThreadChatAgents2),i.registerArgumentProcessor({processArgument:a=>s_(a)?null:a})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=xh.b++,n=new F$(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=xh.b++,o=new F$(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=xh.j++;return this.m.set(i,new a_(t,r)),this.g.$registerChatParticipantDetectionProvider(i),te(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}registerRelatedFilesProvider(t,r,i){const s=xh.n++;return this.s.set(s,new c_(t,r)),this.g.$registerRelatedFilesProvider(s,i),te(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,r,i){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=V0.to(r);return await s.provider.provideRelatedFiles(n,i)??void 0}async $detectChatParticipant(t,r,i,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.G(r,i,o.extension),u=await this.H(a,o.extension),h=Ip.to(a,c,u,ht(o.extension,"chatReadonlyPromptReference"),this.I(o.extension));return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:Tu.to(s.location)},n)}async G(t,r,i){const s=Qt(t),n=await this.J(i,s.agentId,r);let o;if(s.locationData?.type===jt.Editor){const a=this.C.getDocument(s.locationData.document);o=new Fk(a,Ii.to(s.locationData.selection),M.to(s.locationData.wholeRange))}else if(s.locationData?.type===jt.Notebook){const a=this.C.getDocument(s.locationData.sessionInputUri);o=new Ok(a)}else s.locationData?.type,jt.Terminal;return{request:s,location:o,history:n}}async H(t,r){let i;if(t.userSelectedModelId&&(i=await this.D.getLanguageModelByIdentifier(r,t.userSelectedModelId)),!i&&(i=await this.D.getDefaultLanguageModel(r),!i))throw new Error("Language model unavailable");return i}async $setRequestPaused(t,r,i){const s=this.c.get(t);if(!s)return;const n=Ar.find(this.w,o=>o.requestId===r);n&&s.setChatRequestPauseState({request:n.extRequest,isPaused:i})}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.G(r,i,n.extension);let h=this.t.get(c.sessionId);h||(h=new se,this.t.set(c.sessionId,h)),o=new n_(n.extension,c,this.g,this.z.converter,h);const f=await this.H(c,n.extension),p=Ip.to(c,l,f,ht(n.extension,"chatReadonlyPromptReference"),this.I(n.extension));a={requestId:r.requestId,extRequest:p},this.w.add(a);const g=n.invoke(p,{history:u},o.apiObject,s);return await H5(Promise.resolve(g).then(v=>{if(v?.metadata)try{JSON.stringify(v.metadata)}catch(x){const k=`result.metadata MUST be JSON.stringify-able. Got error: ${x.message}`;return this.y.error(`[${n.extension.identifier.value}] [@${n.id}] ${k}`,n.extension),{errorDetails:{message:k},timings:o?.timings,nextQuestion:v.nextQuestion}}let b;return v?.errorDetails&&(b={...v.errorDetails,responseIsIncomplete:!0}),(b?.responseIsRedacted||b?.isQuotaExceeded)&&N(n.extension,"chatParticipantPrivate"),{errorDetails:b,timings:o?.timings,metadata:v?.metadata,nextQuestion:v?.nextQuestion}}),s)}catch(c){this.y.error(c,n.extension),c instanceof As&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:zi(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}I(t){return ht(t,"chatReferenceDiagnostic")?this.F.getDiagnostics():[]}async J(t,r,i){const s=[];for(const n of i.history){const o=mc.to(n.result),a=r===n.request.agentId?o:{...o,metadata:void 0},c=ht(t,"chatReadonlyPromptReference"),l=n.request.variables.variables.filter(p=>!p.isTool).map(p=>Pp.to(p,c,this.I(t))),u=n.request.variables.variables.filter(p=>p.isTool).map(Dp.to),h=new Lk(n.request.message,n.request.command,l,n.request.agentId,u);s.push(h);const f=Pt(n.response.map(p=>Cp.toContent(p,this.z.converter)));s.push(new Nk(f,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=Qt(t),c=await this.J(o.extension,o.id,s),l=mc.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Ar.some(this.c.values(),f=>f.id===u.participant&&Je.equals(f.extension.identifier,o.extension.identifier));return h||this.y.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>$u.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=mc.to(r);let o;switch(i.direction){case vg.Down:o=hu.Unhelpful;break;case vg.Up:o=hu.Helpful;break}const a={result:n,kind:o,unhelpfulReason:ht(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=G0.to(r,i,this.z.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new se,this.u.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>q0.from(a,this.z.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.J(s.extension,s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(Tu.to(r),i)).map(n=>$u.from(n,void 0))}},a_=class{constructor(e,t){this.extension=e,this.provider=t}},c_=class{constructor(e,t){this.extension=e,this.provider=t}},F$=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.w=r,this.x=i,this.y=s,this.l=new D,this.m=new D,this.u=new D}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}setChatRequestPauseState(e){this.u.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!rr.isThemeIcon(r)))return{...t,icon:r,message:xe.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof E?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof cr?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:xe.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:xe.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:xe.from(this.j),supportIssueReporting:this.n,requester:this.t}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.y},set requestHandler(s){F4(typeof s=="function","Invalid request handler"),i.y=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return N(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){N(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return N(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){N(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return N(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){N(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return N(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){N(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return N(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){N(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(N(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.w.$registerAgentCompletionsProvider(i.x,i.id,s.triggerCharacters)}else i.w.$unregisterAgentCompletionsProvider(i.x,i.id)},get participantVariableProvider(){return N(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){N(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return N(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){N(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return N(i.extension,"defaultChatParticipant"),i.s},get onDidChangePauseState(){return N(i.extension,"chatParticipantAdditions"),i.u.event},onDidPerformAction:ht(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.w.$unregisterAgent(i.x)}}}invoke(e,t,r,i){return this.y(e,t,r,i)}},l_=class{constructor(e){const t=e.getProxy(Y.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},O$="vscode-cdn.net",u_=`vscode-resource.${O$}`,Bb=`'self' https://*.${O$}`;function eh(e,t){return e.scheme===W.http||e.scheme===W.https?e:(t&&t.authority&&t.isRemote&&e.scheme===W.file&&(e=E.from({scheme:W.vscodeRemote,authority:t.authority,path:e.path})),E.from({scheme:W.https,authority:`${e.scheme}+${h_(e.authority)}.${u_}`,path:e.path,fragment:e.fragment,query:e.query}))}function h_(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var d_=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new se,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new D,l=new D,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return eh(f,o.f)}get cspSource(){return Bb}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function f_(e,t,r){const i=e.getProxy(Y.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new ys,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,b=this.b.get(v.commentControlHandle);if(!b)return v;const x=b.getCommentThread(v.commentThreadHandle);return x?x.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);return b?g.$mid===8?b.value:{thread:b.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const x=g.commentUniqueId,k=b.getCommentByUniqueId(x);return k||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const x=g.text,k=g.commentUniqueId,I=b.getCommentByUniqueId(k);return I?(typeof I.body=="string"?I.body=x:I.body=new Ur(x),I):g}return g}})}createCommentController(g,v,b){const x=s.a++,k=new o(g,x,v,b);this.b.set(k.handle,k);const I=this.c.get(g.identifier)||[];return I.push(k),this.c.set(g.identifier,I),k.value}async $createCommentThreadTemplate(g,v,b,x){const k=this.b.get(g);k&&k.$createCommentThreadTemplate(v,b,x)}async $setActiveComment(g,v){const b=this.b.get(g);b&&b.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,b){const x=this.b.get(g);x&&x.$updateCommentThreadTemplate(v,b)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $updateCommentThread(g,v,b){this.b.get(g)?.$updateCommentThread(v,b)}async $provideCommentingRanges(g,v,b){const x=this.b.get(g);if(!x||!x.commentingRangeProvider)return Promise.resolve(void 0);const k=await r.ensureDocumentData(E.revive(v));return or(async()=>{const I=await x.commentingRangeProvider?.provideCommentingRanges(k.document,b);let A;return Array.isArray(I)?A={ranges:I,fileComments:!1}:I?A={ranges:I.ranges||[],fileComments:I.enableFileComments||!1}:A=I??void 0,A}).then(I=>{let A;return I&&(A={ranges:I.ranges.map(R=>M.from(R)),fileComments:I.fileComments}),A})}$toggleReaction(g,v,b,x,k){const I=this.b.get(g);return!I||!I.reactionHandler?Promise.resolve(void 0):or(()=>{const A=I.getCommentThread(v);if(A){const R=A.getCommentByUniqueId(x.uniqueIdInThread);if(I!==void 0&&R&&I.reactionHandler)return I.reactionHandler(R,l(k))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g!==g&&(this.g=g,this.b.collapsibleState=g,this.c.fire())}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(N(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,b,x,k,I,A,R,_){this.m=v,this.n=b,this.o=x,this.p=k,this.q=I,this.extensionDescription=A,this.r=R,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new D,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new ls,this.l.value=new se,this.n===void 0&&(this.n=`${g}.${this.handle}`),i.$createCommentThread(v,this.handle,this.n,this.o,M.from(this.p),this.q.map(z=>a(this,z,this.k,this.extensionDescription)),A.identifier,this.r,_),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(v,this.handle)}});const q=this;this.value={get uri(){return q.uri},get range(){return q.range},set range(z){q.range=z},get comments(){return q.comments},set comments(z){q.comments=z},get collapsibleState(){return q.collapsibleState},set collapsibleState(z){q.collapsibleState=z},get canReply(){return q.canReply},set canReply(z){q.canReply=z},get contextValue(){return q.contextValue},set contextValue(z){q.contextValue=z},get label(){return q.label},set label(z){q.label=z},get state(){return q.state},set state(z){q.state=z},reveal:(z,U)=>q.reveal(z,U),hide:()=>q.hide(),dispose:()=>{q.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new se);const g=b=>Object.prototype.hasOwnProperty.call(this.b,b),v={};g("range")&&(v.range=M.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(b=>a(this,b,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=f(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const b=v[0],x=v[1];if(g===x)return b}}async reveal(g,v){N(this.extensionDescription,"commentReveal");let b;g&&g.body!==void 0?b=g:v=v??g;let x=b?this.k.get(b):void 0;x??=this.k.get(this.q[0]);let k=!0,I=!1;return v?.focus===ou.Reply?(I=!0,k=!1):v?.focus===ou.Comment&&(k=!1),i.$revealCommentThread(this.m,this.handle,x,{preserveFocus:k,focusReply:I})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([rd(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&N(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return N(this.h,"activeComment"),this.e}get activeCommentThread(){return N(this.h,"activeComment"),this.f?.value}constructor(g,v,b,x){this.h=g,this.i=v,this.j=b,this.k=x,this.a=new Map,i.$registerCommentController(this.handle,b,x,this.h.identifier.value);const k=this;this.value=Object.freeze({id:k.id,label:k.label,get options(){return k.options},set options(I){k.options=I},get commentingRangeProvider(){return k.commentingRangeProvider},set commentingRangeProvider(I){k.commentingRangeProvider=I},get reactionHandler(){return k.reactionHandler},set reactionHandler(I){k.reactionHandler=I},get activeCommentThread(){return k.activeCommentThread},createCommentThread(I,A,R){return k.createCommentThread(I,A,R).value},dispose:()=>{k.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,b){const x=new n(this.id,this.handle,void 0,g,v,b,this.h,!1);return this.a.set(x.handle,x),x}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,b){const x=new n(this.id,this.handle,void 0,E.revive(g),M.to(v),[],this.h,!0,b);return x.collapsibleState=ya.Expanded,this.a.set(x.handle,x),x}$updateCommentThreadTemplate(g,v){const b=this.a.get(g);b&&(b.range=M.to(v))}$updateCommentThread(g,v){const b=this.a.get(g);if(!b)return;(k=>Object.prototype.hasOwnProperty.call(v,k))("collapseState")&&(b.collapsibleState=u(v.collapseState))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(p,g,v,b){let x=v.get(g);return x||(x=++p.commentHandle,v.set(g,x)),g.state!==void 0&&N(b,"commentsDraftState"),g.reactions?.some(k=>k.reactors!==void 0)&&N(b,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:x,body:typeof g.body=="string"?g.body:xe.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(k=>c(k)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(p){return{label:p.label,iconPath:p.iconPath?tp(p.iconPath):void 0,count:p.count,hasReacted:p.authorHasReacted,reactors:p.reactors&&p.reactors.length>0&&typeof p.reactors[0]!="string"?p.reactors.map(g=>g.name):p.reactors}}function l(p){return{label:p.label||"",count:p.count||0,iconPath:p.iconPath?E.revive(p.iconPath):"",authorHasReacted:p.hasReacted||!1,reactors:p.reactors?.map(g=>({name:g}))}}function u(p){if(p!==void 0)switch(p){case iu.Expanded:return ya.Expanded;case iu.Collapsed:return ya.Collapsed}return ya.Collapsed}function h(p){let g;if(typeof p=="object"?g=p.resolved:g=p,g!==void 0)switch(g){case su.Unresolved:return Cl.Unresolved;case su.Resolved:return Cl.Resolved}return Cl.Unresolved}function f(p){let g;if(typeof p=="object"&&(g=p.applicability),g!==void 0)switch(g){case nu.Current:return Il.Current;case nu.Outdated:return Il.Outdated}return Il.Current}return new s}var wg={},Oe={exports:wg};(function(e,t){if(typeof wg=="object"&&typeof Oe=="object")Oe.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof wg=="object"?wg:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=We,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var C=Array.prototype.slice.call(arguments,0);C.unshift("SEMVER"),console.log.apply(console,C)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=l++;c[p]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[f]+")";var b=l++;c[b]="(?:"+c[h]+"|"+c[f]+")";var x=l++;c[x]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var k=l++;c[k]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var I=l++;c[I]="[0-9A-Za-z-]+";var A=l++;c[A]="(?:\\+("+c[I]+"(?:\\."+c[I]+")*))";var R=l++,_="v?"+c[p]+c[x]+"?"+c[A]+"?";c[R]="^"+_+"$";var q="[v=\\s]*"+c[g]+c[k]+"?"+c[A]+"?",z=l++;c[z]="^"+q+"$";var U=l++;c[U]="((?:<|>)?=?)";var oe=l++;c[oe]=c[h]+"|x|X|\\*";var le=l++;c[le]=c[u]+"|x|X|\\*";var me=l++;c[me]="[v=\\s]*("+c[le]+")(?:\\.("+c[le]+")(?:\\.("+c[le]+")(?:"+c[x]+")?"+c[A]+"?)?)?";var qe=l++;c[qe]="[v=\\s]*("+c[oe]+")(?:\\.("+c[oe]+")(?:\\.("+c[oe]+")(?:"+c[k]+")?"+c[A]+"?)?)?";var G=l++;c[G]="^"+c[U]+"\\s*"+c[me]+"$";var B=l++;c[B]="^"+c[U]+"\\s*"+c[qe]+"$";var Z=l++;c[Z]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var H=l++;c[H]="(?:~>?)";var ce=l++;c[ce]="(\\s*)"+c[H]+"\\s+",a[ce]=new RegExp(c[ce],"g");var be=l++;c[be]="^"+c[H]+c[me]+"$";var de=l++;c[de]="^"+c[H]+c[qe]+"$";var tt=l++;c[tt]="(?:\\^)";var Ye=l++;c[Ye]="(\\s*)"+c[tt]+"\\s+",a[Ye]=new RegExp(c[Ye],"g");var Mt=l++;c[Mt]="^"+c[tt]+c[me]+"$";var Nt=l++;c[Nt]="^"+c[tt]+c[qe]+"$";var Zt=l++;c[Zt]="^"+c[U]+"\\s*("+q+")$|^$";var at=l++;c[at]="^"+c[U]+"\\s*("+_+")$|^$";var lr=l++;c[lr]="(\\s*)"+c[U]+"\\s*("+q+"|"+c[me]+")",a[lr]=new RegExp(c[lr],"g");var Qs=l++;c[Qs]="^\\s*("+c[me]+")\\s+-\\s+("+c[me]+")\\s*$";var Mi=l++;c[Mi]="^\\s*("+c[qe]+")\\s+-\\s+("+c[qe]+")\\s*$";var Rn=l++;c[Rn]="(<|>)?=?\\s*\\*";for(var Se=0;Se<35;Se++)s(Se,c[Se]),a[Se]||(a[Se]=new RegExp(c[Se]));function os(C,L){if(C instanceof We)return C;if(typeof C!="string"||C.length>n||!(L?a[z]:a[R]).test(C))return null;try{return new We(C,L)}catch{return null}}function We(C,L){if(C instanceof We){if(C.loose===L)return C;C=C.version}else if(typeof C!="string")throw new TypeError("Invalid Version: "+C);if(C.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof We))return new We(C,L);s("SemVer",C,L),this.loose=L;var F=C.trim().match(L?a[z]:a[R]);if(!F)throw new TypeError("Invalid Version: "+C);if(this.raw=C,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(ue){if(/^[0-9]+$/.test(ue)){var ye=+ue;if(ye>=0&&ye<o)return ye}return ue}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}t.parse=os,t.valid=function(C,L){var F=os(C,L);return F?F.version:null},t.clean=function(C,L){var F=os(C.trim().replace(/^[=v]+/,""),L);return F?F.version:null},t.SemVer=We,We.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},We.prototype.toString=function(){return this.version},We.prototype.compare=function(C){return s("SemVer.compare",this.version,this.loose,C),C instanceof We||(C=new We(C,this.loose)),this.compareMain(C)||this.comparePre(C)},We.prototype.compareMain=function(C){return C instanceof We||(C=new We(C,this.loose)),Yr(this.major,C.major)||Yr(this.minor,C.minor)||Yr(this.patch,C.patch)},We.prototype.comparePre=function(C){if(C instanceof We||(C=new We(C,this.loose)),this.prerelease.length&&!C.prerelease.length)return-1;if(!this.prerelease.length&&C.prerelease.length)return 1;if(!this.prerelease.length&&!C.prerelease.length)return 0;var L=0;do{var F=this.prerelease[L],ue=C.prerelease[L];if(s("prerelease compare",L,F,ue),F===void 0&&ue===void 0)return 0;if(ue===void 0)return 1;if(F===void 0)return-1;if(F!==ue)return Yr(F,ue)}while(++L)},We.prototype.inc=function(C,L){switch(C){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",L);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",L);break;case"prepatch":this.prerelease.length=0,this.inc("patch",L),this.inc("pre",L);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",L),this.inc("pre",L);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}L&&(this.prerelease[0]===L?isNaN(this.prerelease[1])&&(this.prerelease=[L,0]):this.prerelease=[L,0]);break;default:throw new Error("invalid increment argument: "+C)}return this.format(),this.raw=this.version,this},t.inc=function(C,L,F,ue){typeof F=="string"&&(ue=F,F=void 0);try{return new We(C,F).inc(L,ue).version}catch{return null}},t.diff=function(C,L){if(Bc(C,L))return null;var F=os(C),ue=os(L);if(F.prerelease.length||ue.prerelease.length){for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==ue[ye])return"pre"+ye;return"prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==ue[ye])return ye},t.compareIdentifiers=Yr;var Ui=/^[0-9]+$/;function Yr(C,L){var F=Ui.test(C),ue=Ui.test(L);return F&&ue&&(C=+C,L=+L),F&&!ue?-1:ue&&!F?1:C<L?-1:C>L?1:0}function Xr(C,L,F){return new We(C,F).compare(new We(L,F))}function Qo(C,L,F){return Xr(C,L,F)>0}function Yo(C,L,F){return Xr(C,L,F)<0}function Bc(C,L,F){return Xr(C,L,F)===0}function _c(C,L,F){return Xr(C,L,F)!==0}function Hc(C,L,F){return Xr(C,L,F)>=0}function Xo(C,L,F){return Xr(C,L,F)<=0}function Zo(C,L,F,ue){var ye;switch(L){case"===":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),ye=C===F;break;case"!==":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),ye=C!==F;break;case"":case"=":case"==":ye=Bc(C,F,ue);break;case"!=":ye=_c(C,F,ue);break;case">":ye=Qo(C,F,ue);break;case">=":ye=Hc(C,F,ue);break;case"<":ye=Yo(C,F,ue);break;case"<=":ye=Xo(C,F,ue);break;default:throw new TypeError("Invalid operator: "+L)}return ye}function ur(C,L){if(C instanceof ur){if(C.loose===L)return C;C=C.value}if(!(this instanceof ur))return new ur(C,L);s("comparator",C,L),this.loose=L,this.parse(C),this.semver===as?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(C,L){return Yr(L,C)},t.major=function(C,L){return new We(C,L).major},t.minor=function(C,L){return new We(C,L).minor},t.patch=function(C,L){return new We(C,L).patch},t.compare=Xr,t.compareLoose=function(C,L){return Xr(C,L,!0)},t.rcompare=function(C,L,F){return Xr(L,C,F)},t.sort=function(C,L){return C.sort(function(F,ue){return t.compare(F,ue,L)})},t.rsort=function(C,L){return C.sort(function(F,ue){return t.rcompare(F,ue,L)})},t.gt=Qo,t.lt=Yo,t.eq=Bc,t.neq=_c,t.gte=Hc,t.lte=Xo,t.cmp=Zo,t.Comparator=ur;var as={};function xt(C,L){if(C instanceof xt)return C.loose===L?C:new xt(C.raw,L);if(C instanceof ur)return new xt(C.value,L);if(!(this instanceof xt))return new xt(C,L);if(this.loose=L,this.raw=C,this.set=C.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+C);this.format()}function nr(C){return!C||C.toLowerCase()==="x"||C==="*"}function Ys(C,L,F,ue,ye,kt,ze,hr,It,zt,Hr,S,gt){return((L=nr(F)?"":nr(ue)?">="+F+".0.0":nr(ye)?">="+F+"."+ue+".0":">="+L)+" "+(hr=nr(It)?"":nr(zt)?"<"+(+It+1)+".0.0":nr(Hr)?"<"+It+"."+(+zt+1)+".0":S?"<="+It+"."+zt+"."+Hr+"-"+S:"<="+hr)).trim()}function hm(C,L){for(var F=0;F<C.length;F++)if(!C[F].test(L))return!1;if(L.prerelease.length){for(F=0;F<C.length;F++)if(s(C[F].semver),C[F].semver!==as&&C[F].semver.prerelease.length>0){var ue=C[F].semver;if(ue.major===L.major&&ue.minor===L.minor&&ue.patch===L.patch)return!0}return!1}return!0}function Ko(C,L,F){try{L=new xt(L,F)}catch{return!1}return L.test(C)}function cs(C,L,F,ue){var ye,kt,ze,hr,It;switch(C=new We(C,ue),L=new xt(L,ue),F){case">":ye=Qo,kt=Xo,ze=Yo,hr=">",It=">=";break;case"<":ye=Yo,kt=Hc,ze=Qo,hr="<",It="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ko(C,L,ue))return!1;for(var zt=0;zt<L.set.length;++zt){var Hr=L.set[zt],S=null,gt=null;if(Hr.forEach(function(Kt){Kt.semver===as&&(Kt=new ur(">=0.0.0")),S=S||Kt,gt=gt||Kt,ye(Kt.semver,S.semver,ue)?S=Kt:ze(Kt.semver,gt.semver,ue)&&(gt=Kt)}),S.operator===hr||S.operator===It||(!gt.operator||gt.operator===hr)&&kt(C,gt.semver)||gt.operator===It&&ze(C,gt.semver))return!1}return!0}ur.prototype.parse=function(C){var L=this.loose?a[Zt]:a[at],F=C.match(L);if(!F)throw new TypeError("Invalid comparator: "+C);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new We(F[2],this.loose):this.semver=as},ur.prototype.toString=function(){return this.value},ur.prototype.test=function(C){return s("Comparator.test",C,this.loose),this.semver===as||(typeof C=="string"&&(C=new We(C,this.loose)),Zo(C,this.operator,this.semver,this.loose))},ur.prototype.intersects=function(C,L){if(!(C instanceof ur))throw new TypeError("a Comparator is required");var F;if(this.operator==="")return F=new xt(C.value,L),Ko(this.value,F,L);if(C.operator==="")return F=new xt(this.value,L),Ko(C.semver,F,L);var ue=!(this.operator!==">="&&this.operator!==">"||C.operator!==">="&&C.operator!==">"),ye=!(this.operator!=="<="&&this.operator!=="<"||C.operator!=="<="&&C.operator!=="<"),kt=this.semver.version===C.semver.version,ze=!(this.operator!==">="&&this.operator!=="<="||C.operator!==">="&&C.operator!=="<="),hr=Zo(this.semver,"<",C.semver,L)&&(this.operator===">="||this.operator===">")&&(C.operator==="<="||C.operator==="<"),It=Zo(this.semver,">",C.semver,L)&&(this.operator==="<="||this.operator==="<")&&(C.operator===">="||C.operator===">");return ue||ye||kt&&ze||hr||It},t.Range=xt,xt.prototype.format=function(){return this.range=this.set.map(function(C){return C.join(" ").trim()}).join("||").trim(),this.range},xt.prototype.toString=function(){return this.range},xt.prototype.parseRange=function(C){var L=this.loose;C=C.trim(),s("range",C,L);var F=L?a[Mi]:a[Qs];C=C.replace(F,Ys),s("hyphen replace",C),C=C.replace(a[lr],"$1$2$3"),s("comparator trim",C,a[lr]),C=(C=(C=C.replace(a[ce],"$1~")).replace(a[Ye],"$1^")).split(/\s+/).join(" ");var ue=L?a[Zt]:a[at],ye=C.split(" ").map(function(kt){return function(ze,hr){return s("comp",ze),ze=function(It,zt){return It.trim().split(/\s+/).map(function(Hr){return function(S,gt){s("caret",S,gt);var Kt=gt?a[Nt]:a[Mt];return S.replace(Kt,function(K,X,Te,ct,dt){var Gt;return s("caret",S,K,X,Te,ct,dt),nr(X)?Gt="":nr(Te)?Gt=">="+X+".0.0 <"+(+X+1)+".0.0":nr(ct)?Gt=X==="0"?">="+X+"."+Te+".0 <"+X+"."+(+Te+1)+".0":">="+X+"."+Te+".0 <"+(+X+1)+".0.0":dt?(s("replaceCaret pr",dt),dt.charAt(0)!=="-"&&(dt="-"+dt),Gt=X==="0"?Te==="0"?">="+X+"."+Te+"."+ct+dt+" <"+X+"."+Te+"."+(+ct+1):">="+X+"."+Te+"."+ct+dt+" <"+X+"."+(+Te+1)+".0":">="+X+"."+Te+"."+ct+dt+" <"+(+X+1)+".0.0"):(s("no pr"),Gt=X==="0"?Te==="0"?">="+X+"."+Te+"."+ct+" <"+X+"."+Te+"."+(+ct+1):">="+X+"."+Te+"."+ct+" <"+X+"."+(+Te+1)+".0":">="+X+"."+Te+"."+ct+" <"+(+X+1)+".0.0"),s("caret return",Gt),Gt})}(Hr,zt)}).join(" ")}(ze,hr),s("caret",ze),ze=function(It,zt){return It.trim().split(/\s+/).map(function(Hr){return function(S,gt){var Kt=gt?a[de]:a[be];return S.replace(Kt,function(K,X,Te,ct,dt){var Gt;return s("tilde",S,K,X,Te,ct,dt),nr(X)?Gt="":nr(Te)?Gt=">="+X+".0.0 <"+(+X+1)+".0.0":nr(ct)?Gt=">="+X+"."+Te+".0 <"+X+"."+(+Te+1)+".0":dt?(s("replaceTilde pr",dt),dt.charAt(0)!=="-"&&(dt="-"+dt),Gt=">="+X+"."+Te+"."+ct+dt+" <"+X+"."+(+Te+1)+".0"):Gt=">="+X+"."+Te+"."+ct+" <"+X+"."+(+Te+1)+".0",s("tilde return",Gt),Gt})}(Hr,zt)}).join(" ")}(ze,hr),s("tildes",ze),ze=function(It,zt){return s("replaceXRanges",It,zt),It.split(/\s+/).map(function(Hr){return function(S,gt){S=S.trim();var Kt=gt?a[B]:a[G];return S.replace(Kt,function(K,X,Te,ct,dt,Gt){s("xRange",S,K,X,Te,ct,dt,Gt);var Ln=nr(Te),Nn=Ln||nr(ct),Fn=Nn||nr(dt);return X==="="&&Fn&&(X=""),Ln?K=X===">"||X==="<"?"<0.0.0":"*":X&&Fn?(Nn&&(ct=0),Fn&&(dt=0),X===">"?(X=">=",Nn?(Te=+Te+1,ct=0,dt=0):Fn&&(ct=+ct+1,dt=0)):X==="<="&&(X="<",Nn?Te=+Te+1:ct=+ct+1),K=X+Te+"."+ct+"."+dt):Nn?K=">="+Te+".0.0 <"+(+Te+1)+".0.0":Fn&&(K=">="+Te+"."+ct+".0 <"+Te+"."+(+ct+1)+".0"),s("xRange return",K),K})}(Hr,zt)}).join(" ")}(ze,hr),s("xrange",ze),ze=function(It,zt){return s("replaceStars",It,zt),It.trim().replace(a[Rn],"")}(ze,hr),s("stars",ze),ze}(kt,L)}).join(" ").split(/\s+/);return this.loose&&(ye=ye.filter(function(kt){return!!kt.match(ue)})),ye=ye.map(function(kt){return new ur(kt,L)})},xt.prototype.intersects=function(C,L){if(!(C instanceof xt))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(ue){return C.set.some(function(ye){return ye.every(function(kt){return ue.intersects(kt,L)})})})})},t.toComparators=function(C,L){return new xt(C,L).set.map(function(F){return F.map(function(ue){return ue.value}).join(" ").trim().split(" ")})},xt.prototype.test=function(C){if(!C)return!1;typeof C=="string"&&(C=new We(C,this.loose));for(var L=0;L<this.set.length;L++)if(hm(this.set[L],C))return!0;return!1},t.satisfies=Ko,t.maxSatisfying=function(C,L,F){var ue=null,ye=null;try{var kt=new xt(L,F)}catch{return null}return C.forEach(function(ze){kt.test(ze)&&(ue&&ye.compare(ze)!==-1||(ye=new We(ue=ze,F)))}),ue},t.minSatisfying=function(C,L,F){var ue=null,ye=null;try{var kt=new xt(L,F)}catch{return null}return C.forEach(function(ze){kt.test(ze)&&(ue&&ye.compare(ze)!==1||(ye=new We(ue=ze,F)))}),ue},t.validRange=function(C,L){try{return new xt(C,L).range||"*"}catch{return null}},t.ltr=function(C,L,F){return cs(C,L,"<",F)},t.gtr=function(C,L,F){return cs(C,L,">",F)},t.outside=cs,t.prerelease=function(C,L){var F=os(C,L);return F&&F.prerelease.length?F.prerelease:null},t.intersects=function(C,L,F){return C=new xt(C,F),L=new xt(L,F),C.intersects(L)},t.coerce=function(C){if(C instanceof We)return C;if(typeof C!="string")return null;var L=C.match(a[Z]);return L==null?null:os((L[1]||"0")+"."+(L[2]||"0")+"."+(L[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(b){if(r===setTimeout)return setTimeout(b,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(b,0);try{return r(b,0)}catch{try{return r.call(null,b,0)}catch{return r.call(this,b,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var b=a(f);u=!0;for(var x=l.length;x;){for(c=l,l=[];++h<x;)c&&c[h].run();h=-1,x=l.length}c=null,u=!1,function(k){if(i===clearTimeout)return clearTimeout(k);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(k);try{i(k)}catch{try{return i.call(null,k)}catch{return i.call(this,k)}}}(b)}}function g(b,x){this.fun=b,this.array=x}function v(){}s.nextTick=function(b){var x=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)x[k-1]=arguments[k];l.push(new g(b,x)),l.length!==1||u||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var KX=Oe.exports.SEMVER_SPEC_VERSION,eZ=Oe.exports.parse,tZ=Oe.exports.valid,rZ=Oe.exports.coerce,iZ=Oe.exports.clean,sZ=Oe.exports.inc,nZ=Oe.exports.major,oZ=Oe.exports.minor,aZ=Oe.exports.patch,cZ=Oe.exports.prerelease,lZ=Oe.exports.gt,uZ=Oe.exports.gte,hZ=Oe.exports.lt,dZ=Oe.exports.lte,fZ=Oe.exports.eq,pZ=Oe.exports.neq,gZ=Oe.exports.cmp,mZ=Oe.exports.compare,vZ=Oe.exports.rcompare,wZ=Oe.exports.compareIdentifiers,bZ=Oe.exports.rcompareIdentifiers,yZ=Oe.exports.compareBuild,EZ=Oe.exports.sort,xZ=Oe.exports.rsort,kZ=Oe.exports.diff,SZ=Oe.exports.validRange,$Z=Oe.exports.satisfies,CZ=Oe.exports.maxSatisfying,IZ=Oe.exports.minSatisfying,PZ=Oe.exports.minVersion,DZ=Oe.exports.gtr,AZ=Oe.exports.ltr,TZ=Oe.exports.outside,RZ=Oe.exports.intersects,LZ=Oe.exports.SemVer,NZ=Oe.exports.Comparator,FZ=Oe.exports.Range,M$=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,p_=/^-(\d{4})(\d{2})(\d{2})$/;function g_(e){return e=e.trim(),e==="*"||M$.test(e)}function U$(e){if(!g_(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(M$);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function j$(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=p_.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var m_=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function v_(e,t){if(t.serializeBuffersForPostMessage){const r=new m_,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=w_(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return J.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function w_(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function b_(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var y_=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new D,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new D,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=Pc(n),this.#d=E_(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,eh(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===W.https||e.scheme===W.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Bb}return Bb}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),vi(this.#o,e)||this.#t.$setOptions(this.#e,B$(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=v_(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===W.vscodeRemote,r=this.#s.extensionLocation.scheme===W.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=eh(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=eh(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function Pc(e){try{const t=j$(U$(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function E_(e){try{const t=j$(U$(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var x_=class extends ee{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(Y.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=b_(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new y_(e,this.a,k_(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function bg(e){return{id:e.identifier,location:e.extensionLocation}}function B$(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||S_(e,t)}}function k_(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>E.from(t))}}function S_(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var Li=class VI{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){VI.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},$_=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Li("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=T_(this.document.uri)+this.a++;return St(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},C_=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new $_(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},_$;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(_$||(_$={}));var I_=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Re(()=>this.a.delete(e))}},P_=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new I_,this.c=new C_,this.a=e.getProxy(Y.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new se;return D_(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(bg(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},Pc(e))):(s.add(this.b.addCustomProvider(t,e,r)),yg(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(A_(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(bg(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,Pc(e))),Re.from(s,new Re(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=E.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return yg(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:yg(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=E.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=_t.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=E.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=E.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,Xe.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,E.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,E.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!yg(r))throw new Error("Custom document is not editable");return r}};function yg(e){return!!e.onDidChangeCustomDocument}function D_(e){return typeof e.resolveCustomTextEditor=="function"}function A_(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function T_(e){const t=e.scheme===W.file||e.scheme===W.untitled?e.fsPath:e.toString();return Es(t)+""}var Mo,H$=class qI{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new Vt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(E.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(qI.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[sr.Error,sr.Warning,sr.Information,sr.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...rc.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:yr.Info,message:d(2818,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...rc.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},_b=class{static{Mo=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new Vt;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new SD({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=Be.map(this.h.event,Mo._mapper),this.f=t.getProxy(Y.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,p){s.$changeMany(f,p),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,p.length===0?"CLEARING":p)}$clear(f){s.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+Mo.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+Mo.c++;while(i.has(u))}return new class extends H${constructor(){super(r,u,Mo.e,Mo.d,f=>c.getDocument(f)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new H$(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(E.revive(r),i.map(rc.to))}};_b=Mo=__decorate([__param(1,Ce),__param(2,va)],_b);var R_=class{constructor(e){this.a=e.getProxy(Y.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(r=>E.revive(r)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?E.revive(t):void 0)}},L_=class GI{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(Y.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(W).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=GI.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=u5(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(mt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Re(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(E.revive(r),Xe.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},N_=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new Qc,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=E.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:hp.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw mm("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(p=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(p)}).catch(p=>{clearTimeout(f),h(p)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(p=>p instanceof gn))for(const{newText:p,newEol:g,range:v}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&M.from(v),text:p,eol:g&&ac.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new zr(h)):Promise.reject(new Error("concurrent_edits"))})}},F_=class{constructor(e,t){this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new se,this.h=new Map,this.f=e.getProxy(Y.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const r=this.g.getDocument(e);if(r&&(!t?.encoding||r.document.encoding===t.encoding))return Promise.resolve(r);let i=this.h.get(e.toString());return i?t?.encoding&&(i=i.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(i=this.f.$tryOpenDocument(e,t).then(s=>{this.h.delete(e.toString());const n=E.revive(s);return ia(this.g.getDocument(n))},s=>(this.h.delete(e.toString()),Promise.reject(s))),this.h.set(e.toString(),i)),i}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>E.revive(t))}$acceptModelLanguageChanged(e,t){const r=E.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=E.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=E.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptEncodingChanged(e,t){const r=E.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptEncoding(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=E.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=Yl.Undo:t.isRedoing&&(n=Yl.Redo),this.c.fire(T6({document:s.document,contentChanges:t.changes.map(o=>({range:M.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){TU(e,t)}},O_=class{constructor(e){this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(Y.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),te(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=Xe.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},M_=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Y.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new Re(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},W$;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(W$||(W$={}));var U_=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},z$=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new U_(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Hb=null;function j_(){return Hb===null&&(Hb=new z$([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Hb}var V$;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(V$||(V$={}));var th=null;function B_(){if(th===null){th=new R8(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)th.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)th.set(t.charCodeAt(r),2)}return th}var __=class h4{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=j_()){const i=B_(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,f=1,p=!1,g=!1,v=!1,b=!1;for(;l<c;){let x=!1;const k=a.charCodeAt(l);if(f===13){let I;switch(k){case 40:p=!0,I=0;break;case 41:I=p?0:1;break;case 91:v=!0,g=!0,I=0;break;case 93:v=!1,I=g?0:1;break;case 123:b=!0,I=0;break;case 125:I=b?0:1;break;case 39:case 34:case 96:h===k?I=1:h===39||h===34||h===96?I=0:I=1;break;case 42:I=h===42?1:0;break;case 124:I=h===124?1:0;break;case 32:I=v?0:1;break;default:I=i.get(k)}I===1&&(s.push(h4.a(i,a,n,u,l)),x=!0)}else if(f===12){let I;k===91?(g=!0,I=0):I=i.get(k),I===1?x=!0:f=13}else f=r.nextState(f,k),f===0&&(x=!0);x&&(f=1,p=!1,g=!1,b=!1,u=l+1,h=k),l++}f===13&&s.push(h4.a(i,a,n,u,c))}return s}},H_=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?n2(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new z$(t)}}provideDocumentLinks(e){this.c();const t=[],r=__.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=Po.to(i);s.target&&t.push(s)}return t}},W_=class d4{constructor(t,r){this.i=r,this.b=new H_,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(Y.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if(d4.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(N(t,"fsChunks"),o+=4);let a;s.isReadonly&&Kn(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:p}=h;if(f.scheme!==r)continue;let g;switch(p){case Ja.Changed:g=0;break;case Ja.Created:g=1;break;case Ja.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:g})}this.a.$onFileSystemChange(n,u)});return te(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(E.revive(r))).then(i=>d4.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(E.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(E.revive(r))).then(i=>J.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(E.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(E.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(E.revive(r),E.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(E.revive(r),E.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(E.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(E.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(E.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=J.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}};function q$(e){return typeof e.correlationId=="number"}function z_(e){return e.recursive===!0}var G$=class JI extends ee{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new ls),this.f=void 0,this.g=0}s(){const t=new se;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<JI.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},V_=class extends G${constructor(e,t,r){super(e,t,r,{type:"node.js",restartOnError:!1})}},q_=class extends G${constructor(e,t,r){super(e,t,r,{type:"universal",restartOnError:!0})}};function J$(e){return e.map(t=>({type:t.type,resource:E.revive(t.resource),cId:t.cId}))}function G_(e){const t=new J_;for(const r of e)t.processEvent(r);return t.coalesce()}function Q$(e,t){return typeof t=="string"&&!t.startsWith(ao)&&!di(t)?{base:e,pattern:t}:t}function Y$(e,t){const r=[];for(const i of t)r.push(ki(Q$(e,i)));return r}var J_=class{constructor(){this.a=new Set,this.b=new Map}c(e){return yt?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let r=!1;if(t){const i=t.type,s=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?r=!0:i===1&&s===2?(this.b.delete(this.c(e)),this.a.delete(t)):i===2&&s===1?t.type=0:i===1&&s===0||(t.type=s)}else r=!0;r&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(r=>r.type!==2?(e.push(r),!1):!0).sort((r,i)=>r.resource.fsPath.length-i.resource.fsPath.length).filter(r=>t.some(i=>uN(r.resource.fsPath,i,!yt))?!1:(t.push(r.resource.fsPath),!0)).concat(e)}};function Q_(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function Y_(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var X_=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new D,this.c=new D,this.d=new D,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=ki(n),c=typeof n=="string",l=!1,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const f of h.created){const p=E.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.b.fire(p)}if(!o.ignoreChangeEvents)for(const f of h.changed){const p=E.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.c.fire(p)}if(!o.ignoreDeleteEvents)for(const f of h.deleted){const p=E.revive(f);a(p.fsPath)&&(!c||r.getWorkspaceFolder(p))&&this.d.fire(p)}}});this.g=Re.from(this.i(e,r,t,i,n,o,!1),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=Re.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(Y.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(ao)||s.pattern.includes(tv))&&(l=!0);const u=[];let h,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const p=t.getWorkspaceFolder(E.revive(s.baseUri)),g=r.getConfiguration("files",p).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const p=t.getWorkspaceFolder(E.revive(s.baseUri));if(p){const g=r.getConfiguration("files",p).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const b=`${en(v,"/")}/${ao}`;h||(h=[]),h.push(Q$(p.uri.fsPath,b))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:f},!!o),Re.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},Z_=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new mr(()=>this.a.created.map(E.revive)),this.c=new mr(()=>this.a.changed.map(E.revive)),this.d=new mr(()=>this.a.deleted.map(E.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},K_=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.g=new Yc,this.h=new Yc,this.i=new Yc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new X_(this.j,t,e,r,this.a.event,Br.from(i),s)}$onFileEvent(e){this.a.fire(new Z_(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:E.revive(r.source),newUri:E.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>E.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>E.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:E.revive(s.source),newUri:E.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>E.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>E.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof ho&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=jr.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},eH=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new ve("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new j("showOptions","Show Options",o=>!0,o=>o),new j("resource","Interactive resource Uri",o=>!0,o=>o),new j("controllerId","Notebook controller Id",o=>!0,o=>o),new j("title","Interactive editor title",o=>!0,o=>o)],new ge("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},tH=class{constructor(e){this.b=0,this.a=e.getProxy(Y.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),te(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},X$;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(X$||(X$={}));var rH=class li extends Qe{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return li.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new li(this.startLineNumber,this.startColumn,t,r):new li(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new qr(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new qr(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new li(t,r,this.endLineNumber,this.endColumn):new li(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new li(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new li(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new li(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new li(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new li(t,r,i,s):new li(i,s,t,r)}},Z$=class QI{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!wm(s))return s[0]instanceof zl?s.map(k0.from):QI.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:si.from(s.kind),tags:s.tags?.map(Rs.from)||[],detail:"",containerName:s.containerName,range:M.from(s.location.range),selectionRange:M.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(Qe.containsRange(o.range,n.range)&&!Qe.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},Eg=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new Li("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new se;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++){if(!ke.isRange(i[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:M.from(i[a].range),command:this.g.toInternal(i[a].command,n)})}return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function xg(e){return Array.isArray(e)?e.map(bu.from):e?[bu.from(e)]:[]}var K$=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideDefinition(i,s,r);return xg(n)}},e3=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideDeclaration(i,s,r);return xg(n)}},t3=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideImplementation(i,s,r);return xg(n)}},r3=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideTypeDefinition(i,s,r);return xg(n)}},Wb=class YI{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=He.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const p={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,s,p)}else a=await this.h.provideHover(n,o,s);if(!a||wm(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new ke(o,o));const c=yu.from(a),l=this.d;if(this.e.size===YI.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},i3=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return C0.from(n)}},s3=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,M.to(t),sp.to(r),i);if(Array.isArray(n))return n.map(o=>ip.from(o))}},n3=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(sc.from)}},o3=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=He.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(I0.from)}},a3=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=He.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:Pt(n.ranges.map(M.from)),wordPattern:n.wordPattern}}},c3=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=He.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map($r.from)}},kg=class am{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new Li("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=rH.isISelection(r)?Ii.to(r):M.to(r),a=[];for(const p of this.j.getDiagnostics(t))if(o.intersection(p.range)&&a.push(p)>am.d)break;const c={diagnostics:a,only:i.only?new pt(i.only):void 0,triggerKind:H0.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Vc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new se;this.f.set(u,h);const f=[];for(let p=0;p<l.length;p++){const g=l[p];if(g)if(am.o(g)&&!(g instanceof ql))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{const v=g;c.only&&(v.kind?c.only.contains(v.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${v.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const b=v.ranges??[];f.push({cacheId:[u,p],title:v.title,command:v.command&&this.h.toInternal(v.command,h),diagnostics:v.diagnostics&&v.diagnostics.map(rc.from),edit:v.edit&&jr.from(v.edit,void 0),kind:v.kind&&v.kind.value,isPreferred:v.isPreferred,isAI:ht(this.m,"codeActionAI")?v.isAI:!1,ranges:ht(this.m,"codeActionRanges")?Pt(b.map(M.from)):void 0,disabled:v.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||am.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=jr.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},rh=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.e=new Li("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,r,i){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>M.to(u)),o=fc.toDataTransfer(r,()=>{throw new jP});if(await this.h.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof xf)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const f=Ct();return c.set(f,h),[u,await Ao.from(u,h,f)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,r,i,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=r.map(f=>M.to(f)),c=i.items.map(([f,p])=>{const g=this.d?.get(p.id);return g?[f,g]:[f,Ao.to(f,p,async v=>(await this.f.$resolvePasteFileData(this.j,e,v)).buffer)]}),l=new Ha(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new wn(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((f,p)=>({_cacheId:[h,p],title:f.title??d(2821,null,this.k.displayName||this.k.name),kind:f.kind,yieldTo:f.yieldTo?.map(g=>g.value),insertText:typeof f.insertText=="string"?f.insertText:{snippet:f.insertText.value},additionalEdit:f.additionalEdit?jr.from(f.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.e.get(r,i);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?jr.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},l3=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(Ht.from)}},zb=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=M.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ht.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){F4(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(M.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ht.from)}},u3=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=He.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(Ht.from)}},Sg=class{constructor(e,t){this.e=e,this.f=t,this.d=new Li("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!Vc(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Co.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&vs(e,Co.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},$g=class f4{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=He.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?jr.from(a):void 0}catch(a){const c=f4.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=He.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(ke.isRange(o)?(a=o,c=s.getText(o)):bt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:M.from(a),text:c}}catch(o){const a=f4.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Vb=class p4{static{this.d={[bd.Invoke]:ru.Invoke,[bd.Automatic]:ru.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=M.to(r);try{const a=p4.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(p4.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},qb=class{constructor(e,t){this.resultId=e,this.tokens=t}},Gb=class Fi{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=Fi.h(o),this.o(Fi.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return Fi.j(t)?Fi.k(t)?t:new Qa(new Uint32Array(t.data),t.resultId):Fi.l(t)?Fi.m(t)?t:new Pf(t.edits.map(r=>new bk(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!Fi.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new Pf([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new Pf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(Fi.j(t)){const i=this.e++;return this.d.set(i,new qb(t.resultId,t.data)),Ub({id:i,type:"full",data:t.data})}if(Fi.l(t)){const i=this.e++;return Fi.j(r)?this.d.set(i,new qb(r.resultId,r.data)):this.d.set(i,new qb(t.resultId)),Ub({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},h3=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,M.to(t),r);return s?this.f(s):null}f(e){return Ub({id:0,type:"full",data:e.data})}},ih=class XI{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new Li("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=He.to(r),a=n.getWordRangeAtPosition(o)||new ke(o,o),c=a.with({end:o}),l=new Tr,u=await this.h.provideCompletionItems(n,o,s,D0.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Fa(u):u,f=XI.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),p=new se;this.e.set(f,p);const g=[],v={x:f,b:g,a:{replace:M.from(a),insert:M.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let b=0;b<h.items.length;b++){const x=h.items[b],k=this.l(x,[f,b],c,a);g.push(k)}return v}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!vi(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?op.from(t.kind):void 0,m:t.tags&&t.tags.map(np.from),c:t.detail,d:typeof t.documentation>"u"?void 0:xe.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Ht.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof fo&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),ke.isRange(c)?a.j=M.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:M.from(c.inserting),replace:M.from(c.replacing)}),a}},Uo=class{constructor(e,t,r,i){this.f=e,this.g=t,this.h=r,this.j=i,this.d=new d3,this.e=ht(this.f,"inlineCompletionsAdditions"),this.k={[wd.Automatic]:tu.Automatic,[wd.Explicit]:tu.Invoke}}get supportsHandleEvents(){return ht(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=He.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:M.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],requestUuid:r.requestUuid},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let g;f.command&&(u||(u=new se),g=this.j.toInternal(f.command,u));let v;f.action&&(u||(u=new se),v=this.j.toInternal(f.action,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?M.from(f.range):void 0,showRange:this.e&&f.showRange?M.from(f.showRange):void 0,command:g,action:v,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,warning:f.warning&&this.e?{message:xe.from(f.warning.message),icon:f.warning.icon?ew.fromThemeIcon(f.warning.icon):void 0}:void 0}}),commands:c.map(f=>(u||(u=new se),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;N(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=M.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:M.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt,requestUuid:r.requestUuid},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let g;f.command&&(u||(u=new se),g=this.j.toInternal(f.command,u));let v;f.action&&(u||(u=new se),v=this.j.toInternal(f.action,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?M.from(f.range):void 0,command:g,action:v,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new se),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,Y0.to(i)))}handleRejection(e,t){const r=this.d.get(e)?.items[t];r&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(r)}},Jb=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind],requestUuid:t.requestUuid},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new se),a=this.h.toInternal(s.accepted,n));let c;s.rejected&&(n||(n=new se),c=this.h.toInternal(s.rejected,n));let l;s.shown&&(n||(n=new se),l=this.h.toInternal(s.shown,n));let u;return s.action&&(n||(n=new se),u=this.h.toInternal(s.action,n)),n||(n=new se),{pid:o,text:s.text,range:M.from(s.range),showRange:M.from(s.showRange),accepted:a,rejected:c,shown:l,action:u,commands:s.commands?.map(f=>this.h.toInternal(f,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new d3,this.e={[yd.Automatic]:vu.Automatic,[yd.Invoke]:vu.Invoke}}},d3=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Qb=class{constructor(e,t){this.e=e,this.f=t,this.d=new Li("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=He.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...Eu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=Eu.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},Cg=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new Li("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=M.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new se);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:xe.fromStrict(e.tooltip),position:He.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Ht.from),kind:e.kind&&lp.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:xe.fromStrict(n.tooltip)};Gr.isLocation(n.location)&&(o.location=$r.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},Ig=class cm{constructor(t,r){this.e=t,this.f=r,this.d=new Li("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(cm.g).map(Po.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!cm.g(s[a]))continue;const c=Po.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!cm.g(s)))return Po.from(s)}releaseLinks(t){this.d.delete(t)}},Yb=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:nc.from(n.color),range:M.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=M.to(t.range),n=nc.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(up.from)}},f3=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(dp.from)}},p3=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(He.to),n=await this.e.provideSelectionRanges(i,s,r);if(!Vc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(L0.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},sh=class{constructor(e,t){this.f=e,this.g=t,this.d=new Qp(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=He.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>M.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>M.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Io.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},nh=class{constructor(e,t){this.f=e,this.g=t,this.d=new Qp(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=He.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Do.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Pg=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new Li("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=He.to(r),a=fc.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Zr(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2822,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(p=>p.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?jr.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?jr.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},oh=class{constructor(e,t){this.adapter=e,this.extension=t}},iH=class qt{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(Y.MainThreadLanguageFeatures)}o(t,r){return tc.from(t,this.g,r)}p(t){return new Re(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return qt.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{ji(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Xe.isCancellationToken(n)?z2(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new oh(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new Z$(this.h,i),t),o=s&&s.label||qt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,Z$,s=>s.provideDocumentSymbols(E.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new oh(new Eg(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Re.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,Eg,s=>s.provideCodeLenses(E.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,Eg,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,Eg,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new K$(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,K$,n=>n.provideDefinition(E.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new e3(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,e3,n=>n.provideDeclaration(E.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new t3(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,t3,n=>n.provideImplementation(E.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new r3(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,r3,n=>n.provideTypeDefinition(E.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new Wb(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,Wb,o=>o.provideHover(E.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,Wb,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new i3(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,i3,n=>n.provideEvaluatableExpression(E.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new s3(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Re.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,s3,o=>o.provideInlineValues(E.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new n3(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new o3(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,n3,n=>n.provideDocumentHighlights(E.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,o3,o=>o.provideMultiDocumentHighlights(E.revive(r),i,s.map(a=>E.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new a3(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,a3,async n=>{const o=await n.provideLinkedEditingRanges(E.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?qt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new c3(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,c3,o=>o.provideReferences(E.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new se,o=this.t(new kg(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},qt.u(t),qt.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,kg,o=>o.provideCodeActions(E.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,kg,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,kg,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new l3(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,l3,n=>n.provideDocumentFormattingEdits(E.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new zb(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,zb,o=>o.provideDocumentRangeFormattingEdits(E.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,zb,o=>o.provideDocumentRangesFormattingEdits(E.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new u3(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,u3,a=>a.provideOnTypeFormattingEdits(E.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new Sg(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,Sg,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,Sg,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,Sg,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new $g(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),$g.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,$g,o=>o.provideRenameEdits(E.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,$g,n=>n.resolveRenameLocation(E.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new Vb(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Vb,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,Vb,o=>o.provideNewSymbolNames(E.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new Gb(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Re.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,Gb,n=>n.provideDocumentSemanticTokens(E.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,Gb,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new h3(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,h3,n=>n.provideDocumentRangeSemanticTokens(E.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new ih(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,ih.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,ih,o=>o.provideCompletionItems(E.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,ih,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,ih,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new Uo(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,Je.toKey(t.identifier.value),s?.yieldTo?.map(a=>Je.toKey(a))||[],s?.displayName,s?.debounceDelayMs),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,Uo,o=>o.provideInlineCompletions(E.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,Uo,o=>o.provideInlineEditsForRange(E.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,Uo,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,Uo,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$handleInlineCompletionRejection(t,r,i){this.s(t,Uo,async s=>{s.handleRejection(r,i)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,Uo,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new Jb(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier,i.displayName||t.name),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,Jb,n=>n.provideInlineEdits(E.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,Jb,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Qb(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,Qb,o=>o.provideSignatureHelp(E.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,Qb,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new Cg(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,qt.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Re.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,Cg,n=>n.provideInlayHints(E.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,Cg,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,Cg,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new Ig(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,Ig,s=>s.provideLinks(E.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,Ig,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,Ig,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new Yb(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,Yb,s=>s.provideColors(E.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,Yb,n=>n.provideColorPresentations(E.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new oh(new f3(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Re.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,f3,n=>n.provideFoldingRanges(E.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new p3(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,p3,n=>n.provideSelectionRanges(E.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new sh(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,sh,n=>Promise.resolve(n.prepareSession(E.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,sh,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,sh,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,sh,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new nh(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,nh,n=>Promise.resolve(n.prepareSession(E.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,nh,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,nh,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,nh,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new oh(new Pg(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,Pg,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,E.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,Pg,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,Pg,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new oh(new rh(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,rh,o=>o.prepareDocumentPaste(E.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,rh,c=>c.providePasteEdits(r,E.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,rh,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,rh,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:qt.y(t.decreaseIndentPattern),increaseIndentPattern:qt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?qt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?qt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:qt.y(t.beforeText),afterText:t.afterText?qt.y(t.afterText):void 0,previousLineText:t.previousLineText?qt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(qt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>ja.toString(r)):void 0}}static E(t){return t.map(qt.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&l5(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?qt.y(i.wordPattern):void 0,indentationRules:i.indentationRules?qt.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?qt.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?qt.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}};function sH(e){return typeof e=="object"&&typeof e.sessionId=="string"}var MZ=V("ILanguageModelToolsService"),nH=V("textFileService"),g3;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(g3||(g3={}));var m3;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(m3||(m3={}));var v3;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(v3||(v3={}));var w3;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(w3||(w3={}));var oH=V("codeMapperService"),aH=V("chatEditingService"),b3;(function(e){e[e.User=0]="User",e[e.Programmatic=1]="Programmatic"})(b3||(b3={}));var y3;(function(e){e[e.Modified=0]="Modified",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Transient=3]="Transient",e[e.Attached=4]="Attached",e[e.Sent=5]="Sent",e[e.Suggested=6]="Suggested"})(y3||(y3={}));var E3;(function(e){e[e.WorkingSet=0]="WorkingSet",e[e.Other=1]="Other"})(E3||(E3={}));var x3;(function(e){e[e.Initial=0]="Initial",e[e.StreamingEdits=1]="StreamingEdits",e[e.Idle=2]="Idle",e[e.Disposed=3]="Disposed"})(x3||(x3={}));var UZ=new P("chatEditingWidgetFileState",void 0,d(5333,null)),jZ=new P("chatEditingWidgetFileReadonly",void 0,d(5334,null)),BZ=new P("chatEditingAgentSupportsReadonlyReferences",void 0,d(5335,null)),_Z=new P("decidedChatEditingResource",[]),HZ=new P("chatEditingResource",void 0),WZ=new P("inChatEditingSession",void 0),zZ=new P("hasUndecidedChatEditingResource",!1),VZ=new P("hasAppliedChatEdits",!1),qZ=new P("applyingChatEditsFailed",!1),k3;(function(e){e[e.Created=0]="Created",e[e.Modified=1]="Modified"})(k3||(k3={}));var cH=V("languageModelIgnoredFilesService"),S3=`
The user is very smart and can understand how to apply your edits to their files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}
`,$3="vscode_editFile",Xb="vscode_editFile_internal",lH={id:Xb,displayName:d(5357,null),modelDescription:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first. ${S3}`,inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A short explanation of the edit being made. Can be the same as the explanation you showed to the user."},filePath:{type:"string",description:"An absolute path to the file to edit, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1."},code:{type:"string",description:"The code change to apply to the file. "+S3}},required:["explanation","filePath","code"]}},C3=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}async invoke(t,r,i){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const s=t.parameters,n=E.revive(s.file);if(!this.d.isInsideWorkspace(n))throw new Error(`File ${n.fsPath} can't be edited because it's not inside the current workspace`);if(await this.f.fileIsIgnored(n,i))throw new Error(`File ${n.fsPath} can't be edited because it is configured to be ignored by Copilot`);const o=this.a.getSession(t.context?.sessionId),a=o.getRequests().at(-1);a.response?.response.getMarkdown().length&&o.acceptResponseProgress(a,{kind:"undoStop",id:Ct()}),o.acceptResponseProgress(a,{kind:"markdownContent",content:new hd("\n````\n")}),o.acceptResponseProgress(a,{kind:"codeblockUri",uri:n}),o.acceptResponseProgress(a,{kind:"markdownContent",content:new hd(s.code+"\n````\n")}),o.acceptResponseProgress(a,{kind:"textEdit",edits:[],uri:n});const c=this.b.getEditingSession(o.sessionId);if(!c)throw new Error("This tool must be called from within an editing session");const l=await this.c.mapCode({codeBlocks:[{code:s.code,resource:n,markdownBeforeBlock:s.explanation}],location:"tool",chatRequestId:t.chatRequestId},{textEdit:(h,f)=>{o.acceptResponseProgress(a,{kind:"textEdit",uri:h,edits:f})},notebookEdit(h,f){o.acceptResponseProgress(a,{kind:"notebookEdit",uri:h,edits:f})}},i);if(o.acceptResponseProgress(a,{kind:"textEdit",uri:n,edits:[],done:!0}),l?.errorMessage)throw new Error(l.errorMessage);let u;return await new Promise(h=>{let f=!1;u=Q1(p=>{const v=c.entries.read(p)?.find(b=>b.modifiedURI.toString()===n.toString());v&&(v.isCurrentlyBeingModifiedBy.read(p)?f=!0:f&&h(!0))})}).finally(()=>{u.dispose()}),await this.g.save(n,{reason:2,skipSaveParticipants:!0}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,r){return{presentation:"hidden"}}};C3=__decorate([__param(0,i_),__param(1,aH),__param(2,oH),__param(3,bl),__param(4,cH),__param(5,nH)],C3);var uH=class{processInput(e){if(!e.filePath)return e;const t=e.filePath;return{file:t.startsWith("untitled:")?E.parse(t):E.file(t),explanation:e.explanation,code:e.code}}},hH=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.e=new Map,this.b=e.getProxy(Y.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,Qt(r))}),this.e.set(lH.id,new uH)}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r,i){const s=Ct();r.tokenizationOptions&&this.c.set(s,r.tokenizationOptions.countTokens);try{if(r.toolInvocationToken&&!sH(r.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===Xb||t===$3)&&!ht(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=this.e.get(t)?.processInput(r.input)??r.input,o=await this.b.$invokeTool({toolId:t,callId:s,parameters:n,tokenBudget:r.tokenizationOptions?.tokenBudget,context:r.toolInvocationToken,chatRequestId:ht(e,"chatParticipantPrivate")?r.chatRequestId:void 0},i);return Rp.to(Qt(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}getTools(e){return Array.from(this.d.values()).map(t=>K0.to(t)).filter(t=>t.name===Xb||t.name===$3?ht(e,"chatParticipantPrivate"):!0)}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={input:e.parameters,toolInvocationToken:e.context,chatRequestId:e.chatRequestId};ht(r.extension,"chatParticipantPrivate")&&e.toolSpecificData?.kind==="terminal"&&(i.terminalCommand=e.toolSpecificData.command),e.tokenBudget!==void 0&&(i.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=Xe.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await H5(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new er;return Rp.from(s,r.extension)}async $prepareToolInvocation(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);const s={input:t};if(ht(i.extension,"chatParticipantPrivate")&&i.tool.prepareInvocation2){const n=await i.tool.prepareInvocation2(s,r);return n?{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,toolSpecificData:{kind:"terminal",language:n.language,command:n.command}}:void 0}else if(i.tool.prepareInvocation){const n=await i.tool.prepareInvocation(s,r);return n?((n.pastTenseMessage||n.presentation)&&N(i.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,invocationMessage:xe.fromStrict(n.invocationMessage),pastTenseMessage:xe.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),te(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},dH=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(Y.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=He.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:yn.Other,range:e.getWordRangeAtPosition(t)??new ke(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:M.to(s.range),type:y0.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:La.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new se,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=Um(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:tc.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===La.Error?Lt.Error:a.severity===La.Warning?Lt.Warning:Lt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){N(e,"languageStatusText"),a.text=f,u()},get text2(){return N(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function fH(e){return e&&e.title}var Zb=class{constructor(t,r){this.b=r,this.a=t.getProxy(Y.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||fH(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&N(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:p}=h;c.push({title:f,isCloseAffordance:!!p,handle:u}),p&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};Zb=__decorate([__param(1,Ce)],Zb);var Kb=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new Ds(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},ey=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=E.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(xn.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(cc.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:ku.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(xn.to)}setOutputItems(e,t,r){const i=r.map(uc.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>y9(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=VF(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(cc.to(e))}setMime(e){}},pH=class ZI{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=ZI.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===W.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Si.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Si.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Si.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Si.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Si.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Si.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Si.ChangeCellMime?this.w(a.index,a.mime):a.kind===Si.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Si.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const p=new ey(this,this.l,f);return r||n.push(ey.asModelAddData(f)),p}),u=new Kb(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new Kb(t,r,n.map(a=>a.apiCell),[]),new Kb(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},ty=class KI{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every(Ds.isNotebookRange))throw $e("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,Xi.from(r),i??Nf.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},KI.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(Xi.from))}_acceptViewColumn(t){this.f=t}},ry=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ie)return iy(this.right);let e=this;for(;e.parent!==ie&&e.parent.left!==e;)e=e.parent;return e.parent===ie?ie:e.parent}prev(){if(this.left!==ie)return P3(this.left);let e=this;for(;e.parent!==ie&&e.parent.right!==e;)e=e.parent;return e.parent===ie?ie:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},I3;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(I3||(I3={}));var ie=new ry(null,0);ie.parent=ie,ie.left=ie,ie.right=ie,ie.color=0;function iy(e){for(;e.left!==ie;)e=e.left;return e}function P3(e){for(;e.right!==ie;)e=e.right;return e}function sy(e){return e===ie?0:e.size_left+e.piece.length+sy(e.right)}function ny(e){return e===ie?0:e.lf_left+e.piece.lineFeedCnt+ny(e.right)}function oy(){ie.parent=ie}function ah(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==ie&&(r.left.parent=t),r.parent=t.parent,t.parent===ie?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function ch(e,t){const r=t.left;t.left=r.right,r.right!==ie&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===ie?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function Dg(e,t){let r,i;if(t.left===ie?(i=t,r=i.right):t.right===ie?(i=t,r=i.left):(i=iy(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),oy(),e.root.parent=ie;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,lh(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,lh(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==ie&&(i.left.parent=i),i.right!==ie&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,lh(e,i)),t.detach(),r.parent.left===r){const o=sy(r),a=ny(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,Us(e,r.parent,c,l)}}if(lh(e,r.parent),s){oy();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,ah(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,ch(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,ah(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,ch(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,ah(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,ch(e,r.parent),r=e.root));r.color=0,oy()}function D3(e,t){for(lh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,ah(e,t)),t.parent.color=0,t.parent.parent.color=1,ch(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,ch(e,t)),t.parent.color=0,t.parent.parent.color=1,ah(e,t.parent.parent))}e.root.color=0}function Us(e,t,r,i){for(;t!==e.root&&t!==ie;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function lh(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=sy(t.left)-t.size_left,i=ny(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var js=65535;function A3(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var gH=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function Bs(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?A3(r):r}function mH(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new gH(A3(e),i,s,n,o);return e.length=0,a}var Ir=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},jo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},vH=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ie&&e.iterate(e.root,r=>(r!==ie&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},wH=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},bH=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new jo("",[0])],this.g={line:0,column:0},this.root=ie,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Bs(e[s].buffer));const o=new Ir(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new wH(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=js,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new jo(u,Bs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new jo(a,Bs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new vH(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===ie)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==ie;)if(i.left!==ie&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==ie;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new qr(r+1,o+1)}return new qr(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===ie){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new qr(r+1,n+1)}else t=t.right;return new qr(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==ie;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===ie)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let f=l+1;f<u;f++)r=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===ie)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),p=this.u(e.piece.bufferIndex,s),g=this.u(e.piece.bufferIndex,n);let v;const b={line:0,column:0};let x,k;t._wordSeparators?(x=h.buffer.substring(p,g),k=I=>I+p,t.reset(0)):(x=h.buffer,k=I=>I,t.reset(p));do if(v=t.next(x),v){if(k(v.index)>=g)return l;this.s(e,k(v.index)-f,b);const I=this.t(e.piece.bufferIndex,s,b),A=b.line===s.line?b.column-s.column+i:b.column+1,R=A+v[0].length;if(u[l++]=J8(new Qe(r+I,A,r+I,R),v,a),k(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new rU(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const g=this.t(f.piece.bufferIndex,l,f.piece.end);if(g>=1){const b=this.a[f.piece.bufferIndex].lineStarts,x=this.u(f.piece.bufferIndex,f.piece.start),k=b[l.line+g],I=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,h,I,l,this.s(f,k-x),t,r,i,n,s),n>=i)return s;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,b,e.endLineNumber,v,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,s,r,i),s}const p=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,p,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,p=r.length;let g=-f;for(;(g=r.indexOf(h,g+f))!==-1;)if((!l||Q8(l,r,p,g,f))&&(o[n++]=new Nw(new Qe(i,g+1+s,i,g+1+f+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=J8(new Qe(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==ie){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<js){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new Ir(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const g={line:u.start.line+1,column:0};u=new Ir(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const g=this.s(i,s-1);this.C(i,g),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let f=i;for(let p=0;p<h.length;p++)f=this.S(f,h[p]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ie)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),f=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();Dg(this,s),this.N(p),this.y();return}this.D(s,f),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,f),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ie&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Ir(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Us(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(h=n[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-f,null):{line:u,column:a-f}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Dg(this,e[t])}w(e){if(e.length>js){const l=[];for(;e.length>js;){const h=e.charCodeAt(js-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,js-1),e=e.substring(js-1)):(f=e.substring(0,js),e=e.substring(js));const p=Bs(f);l.push(new Ir(this.a.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this.a.push(new jo(f,p))}const u=Bs(e);return l.push(new Ir(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new jo(e,u)),l}let t=this.a[0].buffer.length;const r=Bs(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Ir(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==ie;)if(r.left!==ie&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==ie;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==ie;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new Ir(r.bufferIndex,r.start,n,a,u),Us(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new Ir(r.bufferIndex,n,r.end,o,u),Us(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new Ir(i.bufferIndex,i.start,c,l,u),Us(this,e,u-o,l-a);const h=new Ir(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Bs(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(r){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Ir(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Us(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==ie;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==ie;)if(r.left!==ie&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==ie;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ie||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ie||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Ir(e.piece.bufferIndex,e.piece.start,s,o,n),Us(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Ir(t.piece.bufferIndex,a,t.piece.end,l,c),Us(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)Dg(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)Dg(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new Ir(i.bufferIndex,s,i.end,o,n),Us(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ie)return t(ie);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ie)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new ry(t,1);if(r.left=ie,r.right=ie,r.parent=ie,r.size_left=0,r.lf_left=0,this.root===ie)this.root=r,r.color=0;else if(e.right===ie)e.right=r,r.parent=e;else{const s=iy(e.right);s.left=r,r.parent=s}return D3(this,r),r}T(e,t){const r=new ry(t,1);if(r.left=ie,r.right=ie,r.parent=ie,r.size_left=0,r.lf_left=0,this.root===ie)this.root=r,r.color=0;else if(e.left===ie)e.left=r,r.parent=e;else{const i=P3(e.left);i.right=r,r.parent=i}return D3(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},T3;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(T3||(T3={}));function ay(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var cy;function yH(){return cy||(cy=new TextDecoder("UTF-16LE")),cy}function EH(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?xH(e,t,r):yH().decode(i)}function xH(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=aA(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function Ag(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var kH=class ns{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Ag(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Ag(this.oldText)}")`:`(replace@${this.oldPosition} "${Ag(this.oldText)}" with "${Ag(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;Yh(t,s,i),i+=4;for(let n=0;n<s;n++)cA(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=Qh(t,r);return r+=4,EH(t,r,i)}writeSize(){return 8+ns.a(this.oldText)+ns.a(this.newText)}write(t,r){return Yh(t,this.oldPosition,r),r+=4,Yh(t,this.newPosition,r),r+=4,r=ns.c(t,this.oldText,r),r=ns.c(t,this.newText,r),r}static read(t,r,i){const s=Qh(t,r);r+=4;const n=Qh(t,r);r+=4;const o=ns.d(t,r);r+=ns.a(o);const a=ns.d(t,r);return r+=ns.a(a),i.push(new ns(s,o,n,a)),r}},SH=class kh extends ee{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new D),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new bH(t,i,a)}equals(t){return!(t instanceof kh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new Qe(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)_h(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=Pm(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=i2(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const b=t[v];a&&b._isTracked&&(a=!1);const x=b.range;if(b.text){let _=!0;o||(_=!h2(b.text),o=_),!s&&_&&(s=m5(b.text)),!n&&_&&(n=v5(b.text))}let k="",I=0,A=0,R=0;if(b.text){let _;[I,A,R,_]=ay(b.text);const q=this.getEOL();_===0||_===(q===`\r
`?2:1)?k=b.text:k=b.text.replace(/\r\n|\r|\n/g,q)}c[v]={sortIndex:v,identifier:b.identifier||null,range:x,rangeOffset:this.getOffsetAt(x.startLineNumber,x.startColumn),rangeLength:this.getValueLengthInRange(x),text:k,eolCount:I,firstLineLength:A,lastLineLength:R,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}c.sort(kh.u);let l=!1;for(let v=0,b=c.length-1;v<b;v++){const x=c[v].range.getEndPosition(),k=c[v+1].range.getStartPosition();if(k.isBeforeOrEqual(x)){if(k.isBefore(x))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?kh._getInverseEditRanges(c):[],h=[];if(r)for(let v=0;v<c.length;v++){const b=c[v],x=u[v];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let k=x.startLineNumber;k<=x.endLineNumber;k++){let I="";k===x.startLineNumber&&(I=this.getLineContent(b.range.startLineNumber),Pm(I)!==-1)||h.push({lineNumber:k,oldContent:I})}}let f=null;if(i){let v=0;f=[];for(let b=0;b<c.length;b++){const x=c[b],k=u[b],I=this.getValueInRange(x.range),A=x.rangeOffset+v;v+=x.text.length-I.length,f[b]={sortIndex:x.sortIndex,identifier:x.identifier,range:k,text:I,textChange:new kH(x.rangeOffset,I,A,x.text)}}l||f.sort((b,x)=>b.sortIndex-x.sortIndex)}this.g=s,this.h=n,this.j=o;const p=this.t(c);let g=null;if(r&&h.length>0){h.sort((v,b)=>b.lineNumber-v.lineNumber),g=[];for(let v=0,b=h.length;v<b;v++){const x=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===x)continue;const k=h[v].oldContent,I=this.getLineContent(x);I.length===0||I===k||Pm(I)!==-1||g.push(x)}}return this.m.fire(),new KM(f,p,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new Qe(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let p=0,g=t.length;p<g;p++){const v=t[p],b=v.range;r=r||v.forceMoveMarkers,c.push(this.getValueInRange(new Qe(o,a,b.startLineNumber,b.startColumn))),v.text.length>0&&c.push(v.text),o=b.endLineNumber,a=b.endColumn}const l=c.join(""),[u,h,f]=ay(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(kh.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Qe(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=ay(r);let c;if(r.length>0){const l=n+1;l===1?c=new Qe(i,s,i,s+o):c=new Qe(i,s,i+l-1,a+1)}else c=new Qe(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new Qe(l,u,l,u+c.firstLineLength):h=new Qe(l,u,l+f-1,c.lastLineLength+1)}else h=new Qe(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=Qe.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=Qe.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},$H=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=Bs(o);r[s]=new jo(o,a)}const i=new SH(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},R3=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&p2(e)&&(this.b=f2,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=mH(this.e,e);this.a.push(new jo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=m5(e)),this.k||(this.k=v5(e)))}finish(e=!0){return this.o(),new $H(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Bs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},CH=class extends ee{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new Qe(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new R3;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new R3;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new q8(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new q8(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function L3(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new Jk(a.join(`
`)+`
`,o.map(u=>new Qe(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var QZ=Object.freeze({id:"application",order:100,title:d(4123,null),type:"object"}),IH=Object.freeze({id:"workbench",order:7,title:d(4124,null),type:"object"}),PH=Object.freeze({id:"security",scope:1,title:d(4125,null),type:"object",order:7}),YZ=Object.freeze({id:"problems",title:d(4126,null),type:"object",order:101}),DH=Object.freeze({id:"window",order:8,title:d(4127,null),type:"object"}),AH={ConfigurationMigration:"base.contributions.configuration.migration"},TH=class{constructor(){this.migrations=[],this.a=new D,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Tg=new TH;ir.add(AH.ConfigurationMigration,Tg);var N3=class extends ee{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,Tg.migrations)})),this.c(Tg.migrations),this.B(Tg.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>vi(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};N3=__decorate([__param(0,$s),__param(1,bl)],N3);var F3=class extends ee{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new sn,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!Ue&&(await this.b.getEnvironment())?.os!==1)return;ir.as(Ca.Configuration).registerConfiguration({...PH,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4128,null)},default:[],markdownDescription:d(4129,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4130,null),scope:3}}})}};F3=__decorate([__param(0,Z8)],F3);var uh="window.newWindowProfile",O3=class extends ee{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(uh)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=ir.as(Ca.Configuration),r={...DH,properties:{[uh]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),d(4131,null)],description:d(4132,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(uh);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(uh);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(uh,r?.name)}};O3=__decorate([__param(0,dF),__param(1,$s)],O3);var eK=V("editorResolverService"),RH=ir.as(Ca.Configuration),LH={...IH,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(13036,null),additionalProperties:{type:"string"}}}};RH.registerConfiguration(LH);var ly;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(ly||(ly={}));var M3;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(M3||(M3={}));function NH(e,t){if(new Set([W.extension,W.webviewPanel,W.vscodeWorkspaceTrust,W.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Le.sep)>=0?`${t.scheme}:${t.path}`:mi(t);return Pa(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var FH=class Sh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Vt,this.h=new Map,this.j=new D,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new D,this.onDidOpenNotebookDocument=this.m.event,this.n=new D,this.onDidCloseNotebookDocument=this.n.event,this.o=new D,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Li("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(Y.MainThreadNotebook),this.c=t.getProxy(Y.MainThreadNotebookDocuments),this.d=t.getProxy(Y.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Sh.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>pp.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?ly.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=Sh.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?Sh.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Re(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&En.from(t.content)});return E.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(E.revive(i));return ia(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:_t.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(Xi.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=E.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new se,h=this.p.add([u]),p=(Array.isArray(l)?l:[l]).map(g=>M0.from(g,this.i,u));return{cacheId:h,items:p}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if(jh(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,j0.from(s),Sh.w(t,n)),te(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new zr(En.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(En.to(r.value),i);return J.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=E.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new B1(d(2827,null,this.A(o)),6);const l={metadata:L6(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new Tf(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=L6(g.metadata,b=>!(a.options?.transientCellMetadata??{})[b]),l.cells.push(v)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),p={name:h.basename(o),isFile:(f.type&Mr.File)!==0,isDirectory:(f.type&Mr.Directory)!==0,isSymbolicLink:(f.type&Mr.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&ln.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&ln.Locked),etag:rx({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),p}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new A4;await(async(f,p,g)=>{await Promise.all(f.map(async v=>await Promise.all(v.filenamePatterns.map(b=>{const x={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:b};return this.t.doInternalFileSearchWithCustomCallback(x,p,k=>{k.forEach(I=>{a.has(I)||s.some(R=>v.isFromSettings&&!R.isFromSettings?!1:R.filenamePatterns.some(_=>NH(_,I)))||a.add(I)})}).catch(k=>{if(k.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw k})}))))})(i,n,r);const l=new Vt;let u=!1;const h=Array.from(a).map(async f=>{const p=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce((x,k)=>x+k.cellResults.length,0)>r.maxResults){u=!0;return}const g=[],v=this.g.get(f);if(v)v.apiNotebook.getCells().forEach(k=>g.push({input:k.document.getText(),outputs:k.outputs.flatMap(I=>I.items.map(A=>A.data.toString()))}));else{const x=await this.s.value.readFile(f),k=J.fromString(x.toString()),I=await o.deserializeNotebook(k.buffer,n);if(n.isCancellationRequested)return;En.from(I).cells.forEach(R=>g.push({input:R.source,outputs:R.outputs.flatMap(_=>_.items.map(q=>q.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach((x,k)=>{const I=r.contentPattern.pattern,A=new CH(x.input,void 0,x.outputs),R=A.findInInputs(I),_=A.findInOutputs(I),q=_.flatMap(z=>L3(z.matches,z.textBuffer)).map((z,U)=>(z.webviewIndex=U,z));if(R.length>0||_.length>0){const z={index:k,contentResults:L3(R,A.inputTextBuffer),webviewResults:q};p.push(z)}});const b={resource:f,cellResults:p};l.set(f,b);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==hN&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==rx({mtime:r.mtime,size:i.size}))throw new B1(d(2828,null),3,r)}A(t){return t.scheme===W.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new ty(r,this.d,t,i.visibleRanges.map(Xi.to),i.selections.map(Xi.to),typeof i.viewColumn=="number"?_t.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=E.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=E.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new pH(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>ey.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=E.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=j.String.with("notebookType","A notebook type"),i=new ve("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new j("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>J.wrap(n))],new ge("Notebook Data",n=>En.to(n.value))),s=new ve("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new j("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new zr(En.from(n)))],new ge("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},OH=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Yc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=E.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:hp.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof ho?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=jr.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new zr(o))}},MH=class{constructor(e){this.c=e,this.a=new D,this.onDidSaveNotebookDocument=this.a.event,this.b=new D,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(E.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(E.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(E.revive(e));this.a.fire(t.apiNotebook)}},uy=class{constructor(t,r){this.c=t,this.d=r,this.a=new D,this.b=new D,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(Xi.to)),r.selections&&i._acceptSelections(r.selections.selections.map(Xi.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn(_t.to(t[r]))}};uy=__decorate([__param(0,Ce)],uy);var Dc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Dc||(Dc={}));var rK=V("INotebookExecutionService"),UH=100,U3;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(U3||(U3={}));var iK=V("INotebookKernelService"),sK=V("INotebookKernelHistoryService"),hy=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new Vt,this.c=new Vt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new D,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(Y.MainThreadNotebookKernels);const o=new ve("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new j("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],ge.Void),a=new ve("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[j.Uri],new ge("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const R of this.j.values())if(R.controller.id===r&&Je.equals(t.identifier,R.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${t.identifier}'`);let u=!1;const h=new D,f=new D,p={id:Rg(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(gp.from):[]};let g=n??l,v,b;this.a.$addKernel(a,p).catch(R=>{console.log(R),u=!0});let x=0;const k=()=>{if(u)return;const R=++x;Promise.resolve().then(()=>{R===x&&this.a.$updateKernel(a,p)})},I=new Vt,A={get id(){return r},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return p.label},set label(R){p.label=R??t.displayName??t.name,k()},get detail(){return p.detail??""},set detail(R){p.detail=R,k()},get description(){return p.description??""},set description(R){p.description=R,k()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(R){p.supportedLanguages=R,k()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(R){p.supportsExecutionOrder=R,k()},get rendererScripts(){return p.preloads?p.preloads.map(gp.to):[]},get executeHandler(){return g},set executeHandler(R){g=R??l},get interruptHandler(){return v},set interruptHandler(R){v=R,p.supportsInterrupt=!!R,k()},set variableProvider(R){N(t,"notebookVariableProvider"),b=R,p.hasVariableProvider=!!R,R?.onDidChangeVariables(_=>c.a.$variablesUpdated(_.uri)),k()},get variableProvider(){return b},createNotebookCellExecution(R){if(u)throw new Error("notebook controller is DISPOSED");if(!I.has(R.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(_=>_.toString())),new Error(`notebook controller is NOT associated to notebook: ${R.notebook.uri.toString()}`);return c._createNotebookCellExecution(R,Rg(t.identifier,this.id))},createNotebookExecution(R){if(N(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!I.has(R.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(_=>_.toString())),new Error(`notebook controller is NOT associated to notebook: ${R.uri.toString()}`);return c._createNotebookExecution(R,Rg(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(R,_){_===Ff.Hidden&&N(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,R.uri,_)},onDidReceiveMessage:f.event,postMessage(R,_){return N(t,"notebookMessaging"),c.a.$postMessage(a,_&&c.n.getIdByEditor(_),R)},asWebviewUri(R){return N(t,"notebookMessaging"),eh(R,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:A,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:I}),A}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return Rg(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new se;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>U0.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(E.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(E.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(E.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(E.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const f=n==="named"?lu.Named:lu.Indexed,p=u.provideVariables(l.apiNotebook,h,f,o,a);let g=0;for await(const v of p){if(a.isCancellationRequested)return;const b={id:this.r++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[b.id]=v.variable,this.a.$receiveVariable(r,b),g++>=UH)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(E.revive(t)).getCell(r);if(n){const o=i?O0.to(i):Xa.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new jH(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===Ni.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new _H(r,i,this.a),o=n.onDidChangeState(()=>{n.state===_s.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};hy=__decorate([__param(4,Ce)],hy);var Ni;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Ni||(Ni={}));var jH=class eP extends ee{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=eP.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=Ni.Init,this.g=this.B(new it),this.h=new HH(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new zr(r))}t(){if(this.f===Ni.Init)throw new Error("Must call start before modifying cell output");if(this.f===Ni.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=Rf.ensureUniqueMimeTypes(r.items,!0);return i===r.items?xn.from(r):xn.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(Zr(t));return this.r({editType:Dc.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=Rf.ensureUniqueMimeTypes(Zr(t),!0),this.r({editType:Dc.OutputItems,items:t.map(uc.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:Dc.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===Ni.Resolved||t.f===Ni.Started)throw new Error("Cannot call start again");t.f=Ni.Started,t.c.fire(),t.s({editType:Dc.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===Ni.Resolved)throw new Error("Cannot call resolve twice");t.f=Ni.Resolved,t.c.fire(),t.h.flush();const o=BH(n);t.n.$completeExecution(t.b,new zr({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}};function BH(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,r=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>r(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var _s;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(_s||(_s={}));var _H=class tP extends ee{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=tP.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=_s.Init,this.g=this.B(new it),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===_s.Resolved||this.f===_s.Started)throw new Error("Cannot call start again");this.f=_s.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===_s.Resolved)throw new Error("Cannot call resolve twice");this.f=_s.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},HH=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new sn,this.b=Date.now(),ar(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Rg(e,t){return`${e.value}/${t}`}var WH=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(Y.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{ty.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&ty.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new D({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},zH=class{constructor(e){this.b=new Map,this.a=e.getProxy(Y.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(N(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),te(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Pe(t)?t:E.revive(t),r)}},VH=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:N0.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(E4),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new it,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new j3(this.a,e),r&&i?i.token:Xe.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function qH(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var j3=class extends Iw{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([jA(100,(e,t)=>qH(e,t),()=>Object.create(null))],j3.prototype,"throttledReport",null);var GH=class rP{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Y.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=E.revive(r),n=this.c.get(t);return n?or(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=rP.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,tc.from(t,this.d),i,s,r.visible??!0),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function JH(e,t,r){const i=e.getProxy(Y.MainThreadQuickOpen);class s{constructor(p,g){this.e=new Map,this.f=0,this.a=p,this.b=g}showQuickPick(p,g,v,b=Xe.None){this.c=void 0;const x=Promise.resolve(g),k=++this.f,I=i.$show(k,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},b),A={},R=I.then(()=>A);return Promise.race([R,x]).then(_=>{if(_===A)return;const q=ht(p,"quickPickItemTooltip");return x.then(z=>{const U=[];for(let oe=0;oe<z.length;oe++){const le=z[oe];if(typeof le=="string")U.push({label:le,handle:oe});else if(le.kind===cu.Separator)U.push({type:"separator",label:le.label});else{le.tooltip&&!q&&console.warn(`Extension '${p.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${p.identifier.value}`);const me=le.iconPath?l(le.iconPath):void 0;U.push({label:le.label,iconPath:me?.iconPath,iconClass:me?.iconClass,description:le.description,detail:le.detail,picked:le.picked,alwaysShow:le.alwaysShow,tooltip:q?xe.fromStrict(le.tooltip):void 0,handle:oe})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=oe=>{v.onDidSelectItem(z[oe])}),i.$setItems(k,U),I.then(oe=>{if(typeof oe=="number")return z[oe];if(Array.isArray(oe))return oe.map(le=>z[le])})})}).then(void 0,_=>{if(!ji(_))return i.$setError(k,_),Promise.reject(_)})}$onItemSelected(p){this.c?.(p)}showInput(p,g=Xe.None){return this.d=p?.validateInput,i.$input(p,typeof this.d=="function",g).then(void 0,v=>{if(!ji(v))return Promise.reject(v)})}async $validateInput(p){if(!this.d)return;const g=await this.d(p);if(!g||typeof g=="string")return g;let v;switch(g.severity){case Ya.Info:v=Lt.Info;break;case Ya.Warning:v=Lt.Warning;break;case Ya.Error:v=Lt.Error;break;default:v=g.message?Lt.Error:Lt.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(p,g=Xe.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[p]);if(!v)return;const b=await this.a.getWorkspaceFolders2();if(b)return b.find(x=>x.uri.toString()===v.uri.toString())}createQuickPick(p){const g=new u(p,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(p){const g=new h(p,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(p,g){this.e.get(p)?._fireDidChangeValue(g)}$onDidAccept(p){this.e.get(p)?._fireDidAccept()}$onDidChangeActive(p,g){const v=this.e.get(p);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(p,g){const v=this.e.get(p);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(p,g){this.e.get(p)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(p,g,v){const b=this.e.get(p);b instanceof u&&b._fireDidTriggerItemButton(g,v)}$onDidHide(p){this.e.get(p)?._fireDidHide()}}class n{static{this.a=1}constructor(p,g){this.y=p,this.z=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new D,this.r=new D,this.s=new D,this.t=new D,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(p){this.b=p,this.A({title:p})}get step(){return this.c}set step(p){this.c=p,this.A({step:p})}get totalSteps(){return this.d}set totalSteps(p){this.d=p,this.A({totalSteps:p})}get enabled(){return this.g}set enabled(p){this.g=p,this.A({enabled:p})}get busy(){return this.j}set busy(p){this.j=p,this.A({busy:p})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(p){this.k=p,this.A({ignoreFocusOut:p})}get value(){return this.l}set value(p){this.l=p,this.A({value:p})}get valueSelection(){return this.m}set valueSelection(p){this.m=p,this.A({valueSelection:p})}get placeholder(){return this.n}set placeholder(p){this.n=p,this.A({placeholder:p})}get buttons(){return this.o}set buttons(p){const g=ht(this.y,"quickInputButtonLocation");!g&&p.some(v=>v.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=p.slice(),this.p.clear(),p.forEach((v,b)=>{const x=v===au.Back?-1:b;this.p.set(x,v)}),this.A({buttons:p.map((v,b)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===au.Back?-1:b,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(p){this.l=p,this.r.fire(p)}_fireDidTriggerButton(p){const g=this.p.get(p);g&&this.s.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=hi(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),i.$dispose(this._id))}A(p){if(!this.w){for(const g of Object.keys(p)){const v=p[g];this.v[g]=v===void 0?null:v}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){i.$createOrUpdate(this.v),this.v={id:this._id}}}function o(f){if(f instanceof cr)return{id:f.id};const p=c(f),g=a(f);return{dark:typeof p=="string"?E.file(p):p,light:typeof g=="string"?E.file(g):g}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const p=o(f);let g,v;return"id"in p?v=rr.asClassName(p):g=p,{iconPath:g,iconClass:v}}class u extends n{constructor(p,g){super(p,g),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new D,this.M=[],this.N=new D,this.O=new D,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(p){this.C=p.slice(),this.D.clear(),this.E.clear(),p.forEach((b,x)=>{this.D.set(x,b),this.E.set(b,x)});const g=ht(this.y,"quickPickItemTooltip"),v=[];for(let b=0;b<p.length;b++){const x=p[b];if(x.kind===cu.Separator)v.push({type:"separator",label:x.label});else{x.tooltip&&!g&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const k=x.iconPath?l(x.iconPath):void 0;v.push({handle:b,label:x.label,iconPath:k?.iconPath,iconClass:k?.iconClass,description:x.description,detail:x.detail,picked:x.picked,alwaysShow:x.alwaysShow,tooltip:g?xe.fromStrict(x.tooltip):void 0,buttons:x.buttons?.map((I,A)=>({...l(I.iconPath),tooltip:I.tooltip,handle:A}))})}}this.A({items:v})}get canSelectMany(){return this.F}set canSelectMany(p){this.F=p,this.A({canSelectMany:p})}get matchOnDescription(){return this.G}set matchOnDescription(p){this.G=p,this.A({matchOnDescription:p})}get matchOnDetail(){return this.H}set matchOnDetail(p){this.H=p,this.A({matchOnDetail:p})}get sortByLabel(){return this.I}set sortByLabel(p){this.I=p,this.A({sortByLabel:p})}get keepScrollPosition(){return this.J}set keepScrollPosition(p){this.J=p,this.A({keepScrollPosition:p})}get activeItems(){return this.K}set activeItems(p){this.K=p.filter(g=>this.E.has(g)),this.A({activeItems:this.K.map(g=>this.E.get(g))})}get selectedItems(){return this.M}set selectedItems(p){this.M=p.filter(g=>this.E.has(g)),this.A({selectedItems:this.M.map(g=>this.E.get(g))})}_fireDidChangeActive(p){const g=Pt(p.map(v=>this.D.get(v)));this.K=g,this.L.fire(g)}_fireDidChangeSelection(p){const g=Pt(p.map(v=>this.D.get(v)));this.M=g,this.N.fire(g)}_fireDidTriggerItemButton(p,g){const v=this.D.get(p);if(!v||!v.buttons||!v.buttons.length)return;const b=v.buttons[g];b&&this.O.fire({button:b,item:v})}}class h extends n{constructor(p,g){super(p,g),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(p){this.C=p,this.A({password:p})}get prompt(){return this.D}set prompt(p){this.D=p,this.A({prompt:p})}get validationMessage(){return this.E}set validationMessage(p){this.E=p,p?typeof p=="string"?this.A({validationMessage:p,severity:Lt.Error}):this.A({validationMessage:p.message,severity:p.severity??Lt.Error}):this.A({validationMessage:void 0,severity:Lt.Ignore})}}return new s(t,r)}var dy;function B3(e){return e instanceof E}function QH(e,t){return e.scheme===W.file&&t.scheme===W.file&&yt?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function fy(e){if(e)return typeof e.iconPath=="string"?E.file(e.iconPath):E.isUri(e.iconPath)||rr.isThemeIcon(e.iconPath)?e.iconPath:void 0}function Bo(e){if(e){if(E.isUri(e))return e;if(rr.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function YH(e){const t=Bo(e.authorIcon),r=e.references?.map(i=>({...i,icon:Bo(i.icon)}));return{...e,authorIcon:t,references:r}}function py(e){return e?{...e,icon:Bo(e.icon)}:void 0}function gy(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:E.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:E.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return ug(r,i)}function XH(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=gy(e,t),r!==0)return r;if(e.light&&t.light)r=gy(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=gy(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function ZH(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(B3(i)&&B3(s)&&QH(i,s)))return i<s?-1:1}return 0}function _3(e,t){let r=ug(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=ZH(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=XH(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=ug(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=ug(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function KH(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function eW(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?KH(e.arguments,t.arguments):e.arguments===t.arguments)}function tW(e,t){return Bi(e,t,eW)}var rW=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return N(this.l,"scmValidation"),this.h}set validateInput(e){if(N(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return N(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new D,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){N(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},iW=class iP{static{this.d=0}get disposed(){return this.m}get id(){return this.w}get label(){return this.x}set label(t){this.x=t,this.t.$updateGroupLabel(this.v,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.t.$updateGroup(this.v,this.handle,this.features)}get hideWhenEmpty(){return this.s}set hideWhenEmpty(t){this.s=t,this.t.$updateGroup(this.v,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.t=t,this.u=r,this.v=i,this.w=s,this.x=n,this.multiDiffEditorEnableViewChanges=o,this.y=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new D,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new D,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.s=void 0,this.handle=iP.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?or(()=>this.u.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(_3),i=S4(this.p,t,_3).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const z=new se;h=this.u.converter.toInternal(c.command,z),this.k.set(l,z)}else this.j.set(l,c.command);const f=ht(this.y,"scmMultiDiffEditor"),p=f?c.multiDiffEditorOriginalUri:void 0,g=f?c.multiFileDiffEditorModifiedUri:void 0,v=fy(c.decorations),b=c.decorations&&fy(c.decorations.light)||v,x=c.decorations&&fy(c.decorations.dark)||v,k=[b,x],I=c.decorations&&c.decorations.tooltip||"",A=c.decorations&&!!c.decorations.strikeThrough,R=c.decorations&&!!c.decorations.faded,_=c.contextValue||"";return{rawResource:[l,u,k,I,A,R,_,h,p,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},my=class sP{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;ht(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return N(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){N(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new se,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=py(t?.currentHistoryItemRef),i=py(t?.currentHistoryItemRemoteRef),s=py(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:Bo(o.icon)})),s=r.modified.map(o=>({...o,icon:Bo(o.icon)})),n=r.removed.map(o=>({...o,icon:Bo(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new se,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return N(this.x,"scmActionButton"),this.q}set actionButton(t){if(N(this.x,"scmActionButton"),V1(this.q,t))return;this.q=t,this.p.value=new se;const r=t!==void 0?{command:{...this.y.converter.toInternal(t.command,this.p.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r??null})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&tW(this.t,t))return;this.s.value=new se,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new ls,this.m=void 0,this.n=new ls,this.o=void 0,this.p=new ls,this.s=new ls,this.t=void 0,this.u=!1,this.v=new D,this.onDidChangeSelection=this.v.event,this.w=sP.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=E.from({scheme:W.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new rW(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=ht(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new iW(this.#e,this.y,this.w,t,r,s,this.x),o=Be.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});Be.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([rd(100)],my.prototype,"eventuallyAddResourceGroups",null),__decorate([rd(100)],my.prototype,"eventuallyUpdateResourceStates",null);var vy=class{static{dy=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new ys,this.k=new D,this.f=t.getProxy(Y.MainThreadSCM),this.g=t.getProxy(Y.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=dy.d++,o=new my(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=E.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):or(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):or(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=xe.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:Bo(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>YH(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,r,i,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};vy=dy=__decorate([__param(3,Ce)],vy);var sW=class nP{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Y.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:M.to(r.selection),resourceUri:E.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=nP.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,tc.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},nW=class oP{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(Y.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new se,o=new it;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new se,o=new it;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new se,n=new it;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=oP.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),te(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},oW=class lm{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Zl("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Zl("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=mn.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new se,this.#e=t,this.#t=r,n&&s){this.c=IO(s.identifier,n);const l=i.get(this.c);l&&(o=l.alignLeft?mn.Left:mn.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(lm.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(Kr(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&N(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&N(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!lm.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new se,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.n?r=this.n:r=d(2829,null,this.e.displayName||this.e.name);let i=this.o;this.p&&(i=lm.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=xe.fromStrict(this.l),n=!0):(s=xe.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,n,this.s?.internal,i,this.p,this.g===mn.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},aW=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",mn.Left,Number.MIN_VALUE),this.a.name=d(2830,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Re(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},cW=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(Y.MainThreadStatusBar),this.b=t,this.c=new aW(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const r=this.e.get(e);if(!r)return;const i=typeof r.tooltip2=="function"?await r.tooltip2(t):r.tooltip2;return t.isCancellationRequested?void 0:xe.fromStrict(i)}createStatusBarEntry(e,t,r,i){const s=new oW(this.a,this.b,this.f,e,t,r,i,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new Re(()=>{r.dispose(),clearTimeout(i)})}},lW=class extends ee{constructor(e,t){super(),this.n=t,this.a=new D,this.b=new D,this.c=new D,this.f=new D,this.g=new D,this.h=new D,this.j=new D,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(Y.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(r=>this.j.fire(r))),this.B(this.n.onDidChangeActiveTextEditor(r=>this.h.fire(r)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:_t.from(t),preserveFocus:r}:typeof t=="object"?i={position:_t.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?M.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,i),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new FU(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(Ii.to);r._acceptSelections(i)}if(t.visibleRanges){const i=Pt(t.visibleRanges.map(M.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:oc.to(t.options.lineNumbers)}}),t.selections){const i=Ma.fromValue(t.selections.source),s=t.selections.selections.map(Ii.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=Pt(t.visibleRanges.map(M.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.n.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=_t.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}$acceptEditorDiffInformation(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(!t){r._acceptDiffInformation(void 0),this.g.fire({textEditor:r.value,diffInformation:void 0});return}const i=this,s=t.map(n=>{const o=E.revive(n.original),a=E.revive(n.modified),c=n.changes.map(l=>{const[u,h,f,p]=l;let g;return u===h?g=Ua.Addition:f===p?g=Ua.Deletion:g=Ua.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:f,endLineNumberExclusive:p},kind:g}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return i.n.getDocument(a)?.version!==n.documentVersion}})});r._acceptDiffInformation(s),this.g.fire({textEditor:r.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},wy=class{constructor(t){this.a=new Af(bn.Dark),this.b=new D}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=bn.Light;break;case"hcDark":r=bn.HighContrast;break;case"hcLight":r=bn.HighContrastLight;break;default:r=bn.Dark}this.a=new Af(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};wy=__decorate([__param(0,Ae)],wy);var cK=V("IExtHostTimeline"),uW=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(Y.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&i&&ht(i,"timeline")){const s=r.uri===void 0?void 0:E.revive(r.uri);return this.c.get(r.source)?.get(H3(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(E.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new se,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=n(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=H3(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,f;o.iconPath&&(a instanceof cr?f={id:a.id,color:a.color}:E.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let p;return Ur.isMarkdownString(c.tooltip)?p=xe.from(c.tooltip):Pe(c.tooltip)?p=c.tooltip:Ur.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=xe.from(c.detail)):Pe(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:p,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),te(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function H3(e){return e?.toString()}var hW={IconContribution:"base.contributions.icons"},W3;(function(e){function t(r,i){let s=r.defaults;for(;rr.isThemeIcon(s);){const n=Ac.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(W3||(W3={}));var z3;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Pe(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Pe(n.format)&&Pe(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:E.parse(n.location)}))}}e.fromJSONObject=r})(z3||(z3={}));var dW=/^([\w_-]+)$/,fW=d(2477,null),pW=class{constructor(){this.a=new D,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2478,null),pattern:dW.source,patternErrorMessage:fW},fontCharacter:{type:"string",description:d(2479,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${rr.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;rr.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${rr.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!rr.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},Ac=new pW;ir.add(hW.IconContribution,Ac);function Lg(e,t,r,i){return Ac.registerIcon(e,t,r,i)}function gW(){const e=mL();for(const t in e){const r="\\"+e[t].toString(16);Ac.registerIcon(t,{fontCharacter:r})}}gW();var V3="vscode://schemas/icons",q3=ir.as(Pd.JSONContribution);q3.registerSchema(V3,Ac.getIconSchema());var G3=new ms(()=>q3.notifySchemaChanged(V3),200);Ac.onDidChange(()=>{G3.isScheduled()||G3.schedule()});var lK=Lg("widget-close",he.close,d(2480,null)),uK=Lg("goto-previous-location",he.arrowUp,d(2481,null)),hK=Lg("goto-next-location",he.arrowDown,d(2482,null)),dK=rr.modify(he.sync,"spin"),fK=rr.modify(he.loading,"spin"),pK=d(4370,null),gK=Lg("default-view-icon",he.window,d(4371,null)),Ng;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Ng||(Ng={}));var J3;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(J3||(J3={}));var mW=class extends ee{constructor(){super(...arguments),this.c=this.B(new D),this.onDidRegister=this.c.event,this.f=this.B(new D),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},ZP(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};ir.add(Ng.ViewContainersRegistry,new mW);var Fg;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Fg||(Fg={}));function vW(e,t){const r=e.group??Fg.More,i=t.group??Fg.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var wW=class extends ee{constructor(){super(...arguments),this.c=this.B(new D),this.onViewsRegistered=this.c.event,this.f=this.B(new D),this.onViewsDeregistered=this.f.event,this.g=this.B(new D),this.onDidChangeContainer=this.g.event,this.h=this.B(new D),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new R4}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),te(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,te(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(vW)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(d(4372,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};ir.add(Ng.ViewsRegistry,new wW);var mK=V("viewDescriptorService"),Q3;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(Q3||(Q3={}));var Y3;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Y3||(Y3={}));var Hs=class extends Error{constructor(e){super(d(4373,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},bW=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function X3(e,t){if(Pe(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var yW=class extends ee{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new bW;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return N(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return N(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){Kn(h)&&N(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&jv.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const r=this.a.get(e);if(!r)return Promise.reject(new Hs(e));if(!t){const s=await r.getChildren();return s?[[0,...s]]:void 0}const i=[];for(let s=0;s<t.length;s++){const n=t[s],o=await r.getChildren(n);o&&i.push([s,...o])}return i}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Hs(e));const l=fc.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new Hs(e));const n=await this.j(new Ha,s,t,i,r);if(!(!n||i.isCancellationRequested))return fc.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Hs(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new Hs(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new Hs(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new Hs(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new Hs(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new Hs(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new EW(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},EW=class g4 extends ee{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Dt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new D),this.onDidExpandElement=this.u.event,this.w=this.B(new D),this.onDidCollapseElement=this.w.event,this.y=this.B(new D),this.onDidChangeSelection=this.y.event,this.z=this.B(new D),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new D),this.onDidChangeVisibility=this.C.event,this.D=this.B(new D),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new D),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new it,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=Be.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(h).then(()=>f())})),u&&this.J.$setMessage(this.I,xe.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=Dt(r.select)?!0:r.select,s=Dt(r.focus)?!1:r.focus,n=Dt(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=mp.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Bi(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?Yi.Checked:Yi.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?Yi.Checked:Yi.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return or(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):or(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):or(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new it(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=Pt(s||[]),o=await Promise.all(Pt(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return Pt(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new it,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),or(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(d(2833,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return Ur.isMarkdownString(t)?xe.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===Yi.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!yf.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new se),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:X3(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:Dt(r.collapsibleState)?bo.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof cr?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${g4.b}/${r}`;const a=X3(i,this.N),c=n?n.item.handle:g4.a;let l=a?a.label:s?mi(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let f,p=0;do{if(f=`${c}/${p}:${l}`,o||!this.j.has(f)||u===f)break;p++}while(p<=h.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof cr))return typeof t.iconPath=="string"||E.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof cr)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return E.isUri(t)?t:E.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},xW=class aP{static{this.a=new Set([W.http,W.https])}constructor(t){this.c=new Map,this.b=t.getProxy(Y.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!aP.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),te(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=E.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(E.revive(r.resolvedUri),{sourceUri:E.revive(r.sourceUri)},i)}},kW=class cP{static{this.a=0}constructor(t){this.c=new Yn,this.d=new Map,this.b=t.getProxy(Y.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=cP.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),te(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(E.revive(r))}catch(s){mt(s)}return Promise.resolve(void 0)}async createAppUri(t){return E.revive(await this.b.$createAppUri(t))}},SW=class extends ee{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new D),this.onDidDispose=this.#d.event,this.#h=this.B(new D),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,E.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:_t.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},$W=class lP extends ee{static c(){return Ct()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(Y.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:_t.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Pc(t),l=lP.c();this.f.$createWebviewPanel(bg(t),l,r,{title:i,panelOptions:CW(n),webviewOptions:B$(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:_t.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:Pc(t)}),new Re(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new SW(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function CW(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var IW=class extends ee{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new D),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new D),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=mp.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},PW=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Y.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(bg(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:Pc(e)}),new Re(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new IW(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},vK=new P("debugType",void 0,{type:"string",description:d(6364,null)}),wK=new P("debugConfigurationType",void 0,{type:"string",description:d(6365,null)}),bK=new P("debugState","inactive",{type:"string",description:d(6366,null)}),DW="debugUx",yK=new P(DW,"default",{type:"string",description:d(6367,null)}),EK=new P("hasDebugged",!1,{type:"boolean",description:d(6368,null)}),xK=new P("inDebugMode",!1,{type:"boolean",description:d(6369,null)}),kK=new P("inDebugRepl",!1,{type:"boolean",description:d(6370,null)}),SK=new P("breakpointWidgetVisible",!1,{type:"boolean",description:d(6371,null)}),$K=new P("inBreakpointWidget",!1,{type:"boolean",description:d(6372,null)}),CK=new P("breakpointsFocused",!0,{type:"boolean",description:d(6373,null)}),IK=new P("watchExpressionsFocused",!0,{type:"boolean",description:d(6374,null)}),PK=new P("watchExpressionsExist",!1,{type:"boolean",description:d(6375,null)}),DK=new P("variablesFocused",!0,{type:"boolean",description:d(6376,null)}),AK=new P("expressionSelected",!1,{type:"boolean",description:d(6377,null)}),TK=new P("breakpointInputFocused",!1,{type:"boolean",description:d(6378,null)}),RK=new P("callStackItemType",void 0,{type:"string",description:d(6379,null)}),LK=new P("callStackSessionIsAttach",!1,{type:"boolean",description:d(6380,null)}),NK=new P("callStackItemStopped",!1,{type:"boolean",description:d(6381,null)}),FK=new P("callStackSessionHasOneThread",!1,{type:"boolean",description:d(6382,null)}),OK=new P("callStackFocused",!0,{type:"boolean",description:d(6383,null)}),MK=new P("watchItemType",void 0,{type:"string",description:d(6384,null)}),UK=new P("canViewMemory",void 0,{type:"boolean",description:d(6385,null)}),jK=new P("breakpointItemType",void 0,{type:"string",description:d(6386,null)}),BK=new P("breakpointItemBytes",void 0,{type:"boolean",description:d(6387,null)}),_K=new P("breakpointHasModes",!1,{type:"boolean",description:d(6388,null)}),HK=new P("breakpointSupportsCondition",!1,{type:"boolean",description:d(6389,null)}),WK=new P("loadedScriptsSupported",!1,{type:"boolean",description:d(6390,null)}),zK=new P("loadedScriptsItemType",void 0,{type:"string",description:d(6391,null)}),VK=new P("focusedSessionIsAttach",!1,{type:"boolean",description:d(6392,null)}),qK=new P("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(6393,null)}),GK=new P("stepBackSupported",!1,{type:"boolean",description:d(6394,null)}),JK=new P("restartFrameSupported",!1,{type:"boolean",description:d(6395,null)}),QK=new P("stackFrameSupportsRestart",!1,{type:"boolean",description:d(6396,null)}),YK=new P("jumpToCursorSupported",!1,{type:"boolean",description:d(6397,null)}),XK=new P("stepIntoTargetsSupported",!1,{type:"boolean",description:d(6398,null)}),ZK=new P("breakpointsExist",!1,{type:"boolean",description:d(6399,null)}),KK=new P("debuggersAvailable",!1,{type:"boolean",description:d(6400,null)}),eee=new P("debugExtensionAvailable",!0,{type:"boolean",description:d(6401,null)}),tee=new P("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(6402,null)}),ree=new P("debugSetVariableSupported",!1,{type:"boolean",description:d(6403,null)}),iee=new P("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(6404,null)}),see=new P("debugSetExpressionSupported",!1,{type:"boolean",description:d(6405,null)}),nee=new P("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(6406,null)}),oee=new P("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(6407,null)}),aee=new P("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(6408,null)}),cee=new P("terminateDebuggeeSupported",!1,{type:"boolean",description:d(6409,null)}),lee=new P("suspendDebuggeeSupported",!1,{type:"boolean",description:d(6410,null)}),uee=new P("variableEvaluateNamePresent",!1,{type:"boolean",description:d(6411,null)}),hee=new P("variableIsReadonly",!1,{type:"boolean",description:d(6412,null)}),dee=new P("variableValue",!1,{type:"string",description:d(6413,null)}),fee=new P("variableType",!1,{type:"string",description:d(6414,null)}),pee=new P("variableInterfaces",!1,{type:"array",description:d(6415,null)}),gee=new P("variableName",!1,{type:"string",description:d(6416,null)}),mee=new P("variableLanguage",!1,{type:"string",description:d(6417,null)}),vee=new P("variableExtensionId",!1,{type:"string",description:d(6418,null)}),wee=new P("exceptionWidgetVisible",!1,{type:"boolean",description:d(6419,null)}),bee=new P("multiSessionRepl",!1,{type:"boolean",description:d(6420,null)}),yee=new P("multiSessionDebug",!1,{type:"boolean",description:d(6421,null)}),Eee=new P("disassembleRequestSupported",!1,{type:"boolean",description:d(6422,null)}),xee=new P("disassemblyViewFocus",!1,{type:"boolean",description:d(6423,null)}),kee=new P("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(6424,null)}),See=new P("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(6425,null)}),$ee={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(6427,null)},Z3;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(Z3||(Z3={}));var K3;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(K3||(K3={}));var eC;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(eC||(eC={}));var Og;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Og||(Og={}));var tC;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(tC||(tC={}));var Cee=V("debugService"),rC;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(rC||(rC={}));var iC;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(iC||(iC={}));var sC;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(sC||(sC={}));var nC;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(nC||(nC={}));var oC;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:E.revive(t.iconPath.light),dark:E.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(oC||(oC={}));var AW=class uP{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(Y.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Zr(l),this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(Ht.from)})},notebookEdit:(c,l)=>{l=Zr(l),this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(kp.from)})}},o={location:r.location,chatRequestId:r.chatRequestId,codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:E.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=uP.a++;return this.b.$registerCodeMapperProvider(i,t.displayName??t.name),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function TW(e){const t=e.get(Ut),r=e.get(va),i=e.get(Ou),s=e.get(Ms),n=e.get(Di),o=e.get(zp),a=e.get(ni),c=e.get(vl),l=e.get(Ae),u=e.get(gw),h=e.get(vw),f=e.get(ga),p=e.get(Ce),g=e.get(Hp),v=e.get(zu),b=e.get(HS),x=e.get(Uw),k=e.get(Sc),I=e.get(_w),A=e.get(Pw),R=e.get(Aw);l.set(re.ExtHostFileSystemInfo,r),l.set(re.ExtHostLogLevelServiceShape,f),l.set(re.ExtHostWorkspace,n),l.set(re.ExtHostConfiguration,a),l.set(re.ExtHostExtensionService,s),l.set(re.ExtHostStorage,u),l.set(re.ExtHostTunnelService,g),l.set(re.ExtHostWindow,b),l.set(re.ExtHostSecretState,x),l.set(re.ExtHostTelemetry,o),l.set(re.ExtHostEditorTabs,k),l.set(re.ExtHostManagedSockets,I),l.set(re.ExtHostAuthentication,A),l.set(re.ExtHostChatProvider,R);const _=l.set(re.ExtHostDecorations,e.get(uS)),q=l.set(re.ExtHostDocumentsAndEditors,e.get(Fo)),z=l.set(re.ExtHostCommands,e.get(Ai)),U=l.set(re.ExtHostTerminalService,e.get(Os)),oe=l.set(re.ExtHostTerminalShellIntegration,e.get(bb)),le=l.set(re.ExtHostDebugService,e.get(fb)),me=l.set(re.ExtHostSearch,e.get(mb)),qe=l.set(re.ExtHostTask,e.get(ub)),G=l.set(re.ExtHostOutputService,e.get(lS)),B=l.set(re.ExtHostLocalization,e.get(Bw)),Z=l.set(re.ExtHostUrls,new kW(l)),H=l.set(re.ExtHostDocuments,new F_(l,q)),ce=l.set(re.ExtHostDocumentContentProviders,new L_(l,q,p)),be=l.set(re.ExtHostDocumentSaveParticipant,new N_(p,H,l.getProxy(Y.MainThreadBulkEdits))),de=l.set(re.ExtHostNotebook,new FH(l,z,q,H,i,me,p)),tt=l.set(re.ExtHostNotebookDocuments,new MH(de)),Ye=l.set(re.ExtHostNotebookEditors,new uy(p,de)),Mt=l.set(re.ExtHostNotebookKernels,new hy(l,t,de,z,p)),Nt=l.set(re.ExtHostNotebookRenderers,new WH(l,de)),Zt=l.set(re.ExtHostNotebookDocumentSaveParticipant,new OH(p,de,l.getProxy(Y.MainThreadBulkEdits))),at=l.set(re.ExtHostEditors,new lW(l,q)),lr=l.set(re.ExtHostTreeViews,new yW(l.getProxy(Y.MainThreadTreeViews),z,p)),Qs=l.set(re.ExtHostEditorInsets,new d_(l.getProxy(Y.MainThreadEditorInsets),at,t.remote)),Mi=l.set(re.ExtHostDiagnostics,new _b(l,p,r,q)),Rn=l.set(re.ExtHostLanguages,new dH(l,H,z.converter,c)),Se=l.set(re.ExtHostLanguageFeatures,new iH(l,c,H,z,Mi,p,v,o)),os=l.set(re.ExtHostCodeMapper,new AW(l)),We=l.set(re.ExtHostFileSystem,new W_(l,Se)),Ui=l.set(re.ExtHostFileSystemEventService,new K_(l,p,q)),Yr=l.set(re.ExtHostQuickOpen,JH(l,n,z)),Xr=l.set(re.ExtHostSCM,new vy(l,z,H,p)),Qo=l.set(re.ExtHostQuickDiff,new GH(l,c)),Yo=l.set(re.ExtHostShare,new sW(l,c)),Bc=l.set(re.ExtHostComments,f_(l,z,H)),_c=l.set(re.ExtHostProgress,new VH(l.getProxy(Y.MainThreadProgress))),Hc=l.set(re.ExtHostLabelService,new tH(l)),Xo=l.set(re.ExtHostTheming,new wy(l)),Zo=l.set(re.ExtHostTimeline,new uW(l,z)),ur=l.set(re.ExtHostWebviews,new x_(l,t.remote,n,p,v)),as=l.set(re.ExtHostWebviewPanels,new $W(l,ur,n)),xt=l.set(re.ExtHostCustomEditors,new P_(l,H,h,ur,as)),nr=l.set(re.ExtHostWebviewViews,new PW(l,ur)),Ys=l.set(re.ExtHostTesting,e.get(Yu)),hm=l.set(re.ExtHostUriOpeners,new xW(l)),Ko=l.set(re.ExtHostProfileContentHandlers,new zH(l));l.set(re.ExtHostInteractive,new eH(l,de,q,z,p));const cs=l.set(re.ExtHostChatAgents2,new o_(l,p,z,H,R,Mi)),C=l.set(re.ExtHostLanguageModelTools,new hH(l)),L=l.set(re.ExtHostAiRelatedInformation,new XB(l)),F=l.set(re.ExtHostAiEmbeddingVector,new M_(l)),ue=l.set(re.ExtHostStatusBar,new cW(l,z.converter)),ye=l.set(re.ExtHostSpeech,new nW(l)),kt=l.set(re.ExtHostEmbeddings,new O_(l)),ze=Object.values(re);l.assertRegistered(ze);const hr=new jb(l,q),It=new l_(l),zt=new Zb(l,p),Hr=new R_(l);return r_.register(z),function(S,gt,Kt){function K(w){return(y,$,we)=>{const lt=w(Jt=>{try{y.call($,Jt)}catch(SP){E4(new yE(S.identifier,SP,"FAILED to handle event"))}});return we?.push(lt),lt}}const X=function(){let w=!S.isUnderDevelopment;function y(){w||(p.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function $(we){if(Array.isArray(we))we.forEach($);else if(typeof we=="string")y();else{const lt=we;typeof lt.scheme>"u"&&y(),typeof lt.exclusive=="boolean"&&N(S,"documentFiltersExclusive")}return we}}(),Te={getSession(w,y,$){return(typeof $?.forceNewSession=="object"&&$.forceNewSession.learnMore||typeof $?.createIfNone=="object"&&$.createIfNone.learnMore)&&N(S,"authLearnMore"),A.getSession(S,w,y,$)},getAccounts(w){return A.getAccounts(w)},async hasSession(w,y){return N(S,"authSession"),!!await A.getSession(S,w,y,{silent:!0})},get onDidChangeSessions(){return K(A.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(w,y,$,we){return A.registerAuthenticationProvider(w,y,$,we)}},ct={registerCommand(w,y,$){return z.registerCommand(!0,w,y,$,void 0,S)},registerTextEditorCommand(w,y,$){return z.registerCommand(!0,w,(...we)=>{const lt=at.getActiveTextEditor();if(!lt){p.warn("Cannot execute "+w+" because there is no active text editor.");return}return lt.edit(Jt=>{y.apply($,[lt,Jt,...we])}).then(Jt=>{Jt||p.warn("Edits from command "+w+" were not applied.")},Jt=>{p.warn("An error occurred while running command "+w,Jt)})},void 0,void 0,S)},registerDiffInformationCommand:(w,y,$)=>(N(S,"diffCommand"),z.registerCommand(!0,w,async(...we)=>{const lt=q.activeEditor(!0);if(!lt){p.warn("Cannot execute "+w+" because there is no active text editor.");return}const Jt=await at.getDiffInformation(lt.id);y.apply($,[Jt,...we])},void 0,void 0,S)),executeCommand(w,...y){return z.executeCommand(w,...y)},getCommands(w=!1){return z.getCommands(w)}},dt={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return It.value},get shell(){return U.getDefaultShell(!1)},get onDidChangeShell(){return K(U.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return K(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return N(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return N(S,"telemetry"),K(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return E8(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,y){return y8.validateSender(w),o.instantiateLogger(S,w,y)},openExternal(w,y){return b.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:y?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return Z.createAppUri(w);try{return await b.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(y){if(Fm(w,W.http)||Fm(w,W.https))return w;throw y}},get remoteName(){return r1(t.remote.authority)},get remoteAuthority(){return N(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return p.getLevel()},get onDidChangeLogLevel(){return K(p.onDidChangeLogLevel)},get appQuality(){return N(S,"resolvers"),t.quality},get appCommit(){return N(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(dt);const Gt={createTestController(w,y,$){return Ys.createTestController(S,w,y,$)},createTestObserver(){return N(S,"testObserver"),Ys.createTestObserver()},runTests(w){return N(S,"testObserver"),Ys.runTests(w)},registerTestFollowupProvider(w){return N(S,"testObserver"),Ys.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return N(S,"testObserver"),K(Ys.onResultsChanged)},get testResults(){return N(S,"testObserver"),Ys.results}},Ln=t.remote.isRemote?xo.Workspace:xo.UI,Nn={getExtension(w,y){ht(S,"extensionsAny")||(y=!1);const $=gt.mine.getExtensionDescription(w);if($)return new _u(s,S.identifier,$,Ln,!1);if(y){const we=gt.all.getExtensionDescription(w);if(we)return new _u(s,S.identifier,we,Ln,!0)}},get all(){const w=[];for(const y of gt.mine.getAllExtensionDescriptions())w.push(new _u(s,S.identifier,y,Ln,!1));return w},get allAcrossExtensionHosts(){N(S,"extensionsAny");const w=new Yn(gt.mine.getAllExtensionDescriptions().map($=>$.identifier)),y=[];for(const $ of gt.all.getAllExtensionDescriptions()){const we=!w.has($.identifier);y.push(new _u(s,S.identifier,$,Ln,we))}return y},get onDidChange(){return ht(S,"extensionsAny")?K(Be.any(gt.mine.onDidChange,gt.all.onDidChange)):K(gt.mine.onDidChange)}},Fn={createDiagnosticCollection(w){return Mi.createDiagnosticCollection(S.identifier,w)},get onDidChangeDiagnostics(){return K(Mi.onDidChangeDiagnostics)},getDiagnostics:w=>Mi.getDiagnostics(w),getLanguages(){return Rn.getLanguages()},setTextDocumentLanguage(w,y){return Rn.changeLanguage(w.uri,y)},match(w,y){const $=F0.from(w);let we;return I$($)&&(we=de.notebookDocuments.find(lt=>lt.apiNotebook.getCells().find(Jt=>Jt.document===y))?.apiNotebook),C$($,y.uri,y.languageId,!0,we?.uri,we?.notebookType)},registerCodeActionsProvider(w,y,$){return Se.registerCodeActionProvider(S,X(w),y,$)},registerDocumentPasteEditProvider(w,y,$){return Se.registerDocumentPasteEditProvider(S,X(w),y,$)},registerCodeLensProvider(w,y){return Se.registerCodeLensProvider(S,X(w),y)},registerDefinitionProvider(w,y){return Se.registerDefinitionProvider(S,X(w),y)},registerDeclarationProvider(w,y){return Se.registerDeclarationProvider(S,X(w),y)},registerImplementationProvider(w,y){return Se.registerImplementationProvider(S,X(w),y)},registerTypeDefinitionProvider(w,y){return Se.registerTypeDefinitionProvider(S,X(w),y)},registerHoverProvider(w,y){return Se.registerHoverProvider(S,X(w),y,S.identifier)},registerEvaluatableExpressionProvider(w,y){return Se.registerEvaluatableExpressionProvider(S,X(w),y,S.identifier)},registerInlineValuesProvider(w,y){return Se.registerInlineValuesProvider(S,X(w),y,S.identifier)},registerDocumentHighlightProvider(w,y){return Se.registerDocumentHighlightProvider(S,X(w),y)},registerMultiDocumentHighlightProvider(w,y){return Se.registerMultiDocumentHighlightProvider(S,X(w),y)},registerLinkedEditingRangeProvider(w,y){return Se.registerLinkedEditingRangeProvider(S,X(w),y)},registerReferenceProvider(w,y){return Se.registerReferenceProvider(S,X(w),y)},registerRenameProvider(w,y){return Se.registerRenameProvider(S,X(w),y)},registerNewSymbolNamesProvider(w,y){return N(S,"newSymbolNamesProvider"),Se.registerNewSymbolNamesProvider(S,X(w),y)},registerDocumentSymbolProvider(w,y,$){return Se.registerDocumentSymbolProvider(S,X(w),y,$)},registerWorkspaceSymbolProvider(w){return Se.registerWorkspaceSymbolProvider(S,w)},registerDocumentFormattingEditProvider(w,y){return Se.registerDocumentFormattingEditProvider(S,X(w),y)},registerDocumentRangeFormattingEditProvider(w,y){return Se.registerDocumentRangeFormattingEditProvider(S,X(w),y)},registerOnTypeFormattingEditProvider(w,y,$,...we){return Se.registerOnTypeFormattingEditProvider(S,X(w),y,[$].concat(we))},registerDocumentSemanticTokensProvider(w,y,$){return Se.registerDocumentSemanticTokensProvider(S,X(w),y,$)},registerDocumentRangeSemanticTokensProvider(w,y,$){return Se.registerDocumentRangeSemanticTokensProvider(S,X(w),y,$)},registerSignatureHelpProvider(w,y,$,...we){return typeof $=="object"?Se.registerSignatureHelpProvider(S,X(w),y,$):Se.registerSignatureHelpProvider(S,X(w),y,typeof $>"u"?[]:[$,...we])},registerCompletionItemProvider(w,y,...$){return Se.registerCompletionItemProvider(S,X(w),y,$)},registerInlineCompletionItemProvider(w,y,$){return y.handleDidShowCompletionItem&&N(S,"inlineCompletionsAdditions"),y.handleDidPartiallyAcceptCompletionItem&&N(S,"inlineCompletionsAdditions"),$&&N(S,"inlineCompletionsAdditions"),Se.registerInlineCompletionsProvider(S,X(w),y,$)},registerInlineEditProvider(w,y){return N(S,"inlineEdit"),Se.registerInlineEditProvider(S,X(w),y)},registerDocumentLinkProvider(w,y){return Se.registerDocumentLinkProvider(S,X(w),y)},registerColorProvider(w,y){return Se.registerColorProvider(S,X(w),y)},registerFoldingRangeProvider(w,y){return Se.registerFoldingRangeProvider(S,X(w),y)},registerSelectionRangeProvider(w,y){return Se.registerSelectionRangeProvider(S,w,y)},registerCallHierarchyProvider(w,y){return Se.registerCallHierarchyProvider(S,w,y)},registerTypeHierarchyProvider(w,y){return Se.registerTypeHierarchyProvider(S,w,y)},setLanguageConfiguration:(w,y)=>Se.setLanguageConfiguration(S,w,y),getTokenInformationAtPosition(w,y){return N(S,"tokenInformation"),Rn.tokenAtPosition(w,y)},registerInlayHintsProvider(w,y){return Se.registerInlayHintsProvider(S,w,y)},createLanguageStatusItem(w,y){return Rn.createLanguageStatusItem(S,w,y)},registerDocumentDropEditProvider(w,y,$){return Se.registerDocumentOnDropEditProvider(S,w,y,$)}},dP={get activeTextEditor(){return at.getActiveTextEditor()},get visibleTextEditors(){return at.getVisibleTextEditors()},get activeTerminal(){return U.activeTerminal},get terminals(){return U.terminals},async showTextDocument(w,y,$){E.isUri(w)&&w.scheme===W.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const we=await(E.isUri(w)?Promise.resolve(m4.openTextDocument(w)):Promise.resolve(w));return at.showTextDocument(we,y,$)},createTextEditorDecorationType(w){return at.createTextEditorDecorationType(S,w)},onDidChangeActiveTextEditor(w,y,$){return K(at.onDidChangeActiveTextEditor)(w,y,$)},onDidChangeVisibleTextEditors(w,y,$){return K(at.onDidChangeVisibleTextEditors)(w,y,$)},onDidChangeTextEditorSelection(w,y,$){return K(at.onDidChangeTextEditorSelection)(w,y,$)},onDidChangeTextEditorOptions(w,y,$){return K(at.onDidChangeTextEditorOptions)(w,y,$)},onDidChangeTextEditorVisibleRanges(w,y,$){return K(at.onDidChangeTextEditorVisibleRanges)(w,y,$)},onDidChangeTextEditorViewColumn(w,y,$){return K(at.onDidChangeTextEditorViewColumn)(w,y,$)},onDidChangeTextEditorDiffInformation(w,y,$){return N(S,"textEditorDiffInformation"),K(at.onDidChangeTextEditorDiffInformation)(w,y,$)},onDidCloseTerminal(w,y,$){return K(U.onDidCloseTerminal)(w,y,$)},onDidOpenTerminal(w,y,$){return K(U.onDidOpenTerminal)(w,y,$)},onDidChangeActiveTerminal(w,y,$){return K(U.onDidChangeActiveTerminal)(w,y,$)},onDidChangeTerminalDimensions(w,y,$){return N(S,"terminalDimensions"),K(U.onDidChangeTerminalDimensions)(w,y,$)},onDidChangeTerminalState(w,y,$){return K(U.onDidChangeTerminalState)(w,y,$)},onDidWriteTerminalData(w,y,$){return N(S,"terminalDataWriteEvent"),K(U.onDidWriteTerminalData)(w,y,$)},onDidExecuteTerminalCommand(w,y,$){return N(S,"terminalExecuteCommandEvent"),K(U.onDidExecuteTerminalCommand)(w,y,$)},onDidChangeTerminalShellIntegration(w,y,$){return K(oe.onDidChangeTerminalShellIntegration)(w,y,$)},onDidStartTerminalShellExecution(w,y,$){return K(oe.onDidStartTerminalShellExecution)(w,y,$)},onDidEndTerminalShellExecution(w,y,$){return K(oe.onDidEndTerminalShellExecution)(w,y,$)},get state(){return b.getState()},onDidChangeWindowState(w,y,$){return K(b.onDidChangeWindowState)(w,y,$)},showInformationMessage(w,...y){return zt.showMessage(S,Lt.Info,w,y[0],y.slice(1))},showWarningMessage(w,...y){return zt.showMessage(S,Lt.Warning,w,y[0],y.slice(1))},showErrorMessage(w,...y){return zt.showMessage(S,Lt.Error,w,y[0],y.slice(1))},showQuickPick(w,y,$){return Yr.showQuickPick(S,w,y,$)},showWorkspaceFolderPick(w){return Yr.showWorkspaceFolderPick(w)},showInputBox(w,y){return Yr.showInput(w,y)},showOpenDialog(w){return Hr.showOpenDialog(w)},showSaveDialog(w){return Hr.showSaveDialog(w)},createStatusBarItem(w,y,$){let we,lt,Jt;return typeof w=="string"?(we=w,lt=y,Jt=$):(lt=w,Jt=y),ue.createStatusBarEntry(S,we,lt,Jt)},setStatusBarMessage(w,y){return ue.setStatusBarMessage(w,y)},withScmProgress(w){return v.report("window.withScmProgress",S,"Use 'withProgress' instead."),_c.withProgress(S,{location:wo.SourceControl},(y,$)=>w({report(we){}}))},withProgress(w,y){return _c.withProgress(S,w,y)},createOutputChannel(w,y){return G.createOutputChannel(w,y,S)},createWebviewPanel(w,y,$,we){return as.createWebviewPanel(S,w,y,$,we)},createWebviewTextEditorInset(w,y,$,we){return N(S,"editorInsets"),Qs.createWebviewEditorInset(w,y,$,we,S)},createTerminal(w,y,$){return typeof w=="object"?"pty"in w?U.createExtensionTerminal(w):U.createTerminalFromOptions(w):U.createTerminal(w,y,$)},registerTerminalLinkProvider(w){return U.registerLinkProvider(w)},registerTerminalProfileProvider(w,y){return U.registerProfileProvider(S,w,y)},registerTerminalCompletionProvider(w,...y){return N(S,"terminalCompletionProvider"),U.registerTerminalCompletionProvider(S,w,...y)},registerTerminalQuickFixProvider(w,y){return N(S,"terminalQuickFixProvider"),U.registerTerminalQuickFixProvider(w,S.identifier.value,y)},registerTreeDataProvider(w,y){return lr.registerTreeDataProvider(w,y,S)},createTreeView(w,y){return lr.createTreeView(w,y,S)},registerWebviewPanelSerializer:(w,y)=>as.registerWebviewPanelSerializer(S,w,y),registerCustomEditorProvider:(w,y,$={})=>xt.registerCustomEditorProvider(S,w,y,$),registerFileDecorationProvider(w){return _.registerFileDecorationProvider(w,S)},registerUriHandler(w){return Z.registerUriHandler(S,w)},createQuickPick(){return Yr.createQuickPick(S)},createInputBox(){return Yr.createInputBox(S)},get activeColorTheme(){return Xo.activeColorTheme},onDidChangeActiveColorTheme(w,y,$){return K(Xo.onDidChangeActiveColorTheme)(w,y,$)},registerWebviewViewProvider(w,y,$){return nr.registerWebviewViewProvider(S,w,y,$?.webviewOptions)},get activeNotebookEditor(){return de.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,y,$){return K(de.onDidChangeActiveNotebookEditor)(w,y,$)},get visibleNotebookEditors(){return de.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return K(de.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,y,$){return K(Ye.onDidChangeNotebookEditorSelection)(w,y,$)},onDidChangeNotebookEditorVisibleRanges(w,y,$){return K(Ye.onDidChangeNotebookEditorVisibleRanges)(w,y,$)},showNotebookDocument(w,y){return de.showNotebookDocument(w,y)},registerExternalUriOpener(w,y,$){return N(S,"externalUriOpener"),hm.registerExternalUriOpener(S.identifier,w,y,$)},registerProfileContentHandler(w,y){return N(S,"profileContentHandlers"),Ko.registerProfileContentHandler(S,w,y)},registerQuickDiffProvider(w,y,$,we){return N(S,"quickDiffProvider"),Qo.registerQuickDiffProvider(X(w),y,$,we)},get tabGroups(){return k.tabGroups},registerShareProvider(w,y){return N(S,"shareProvider"),Yo.registerShareProvider(X(w),y)},get nativeHandle(){return N(S,"nativeWindowHandle"),b.nativeHandle}},m4={get rootPath(){return v.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new On("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new On("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new On("workspaceFile")},updateWorkspaceFolders:(w,y,...$)=>n.updateWorkspaceFolders(S,w,y||0,...$),onDidChangeWorkspaceFolders:function(w,y,$){return K(n.onDidChangeWorkspace)(w,y,$)},asRelativePath:(w,y)=>n.getRelativePath(w,y),findFiles:(w,y,$,we)=>n.findFiles(w,y,$,S.identifier,we),findFiles2:(w,y,$)=>(N(S,"findFiles2"),n.findFiles2(w,y,S.identifier,$)),findTextInFiles:(w,y,$,we)=>{N(S,"findTextInFiles");let lt,Jt;return typeof y=="object"?(lt=y,Jt=$):(lt={},Jt=y,we=$),n.findTextInFiles(w,lt||{},Jt,S.identifier,we)},findTextInFiles2:(w,y,$)=>(N(S,"findTextInFiles2"),N(S,"textSearchProvider2"),n.findTextInFiles2(w,y,S.identifier,$)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,y){return hr.applyWorkspaceEdit(w,S,y)},createFileSystemWatcher:(w,y,$,we)=>{const lt={ignoreCreateEvents:!!y,ignoreChangeEvents:!!$,ignoreDeleteEvents:!!we};return Ui.createFileSystemWatcher(n,Kt,S,w,lt)},get textDocuments(){return H.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new On("textDocuments")},openTextDocument(w,y){let $;if(y=y??w,typeof y?.encoding=="string"&&N(S,"textDocumentEncoding"),typeof w=="string")$=Promise.resolve(E.file(w));else if(E.isUri(w))$=Promise.resolve(w);else if(!y||typeof y=="object")$=H.createDocumentData(y);else throw new Error("illegal argument - uriOrFileNameOrOptions");return $.then(we=>(p.trace(`openTextDocument from ${S.identifier}`),we.scheme===W.vscodeRemote&&!we.authority&&v.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),H.ensureDocumentData(we,y).then(lt=>lt.document)))},onDidOpenTextDocument:(w,y,$)=>K(H.onDidAddDocument)(w,y,$),onDidCloseTextDocument:(w,y,$)=>K(H.onDidRemoveDocument)(w,y,$),onDidChangeTextDocument:(w,y,$)=>K(H.onDidChangeDocument)(w,y,$),onDidSaveTextDocument:(w,y,$)=>K(H.onDidSaveDocument)(w,y,$),onWillSaveTextDocument:(w,y,$)=>K(be.getOnWillSaveTextDocumentEvent(S))(w,y,$),get notebookDocuments(){return de.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,y){let $;if(E.isUri(w))$=w,await de.openNotebookDocument(w);else if(typeof w=="string")$=E.revive(await de.createNotebookDocument({viewType:w,content:y}));else throw new Error("Invalid arguments");return de.getNotebookDocument($).apiNotebook},onDidSaveNotebookDocument(w,y,$){return K(tt.onDidSaveNotebookDocument)(w,y,$)},onDidChangeNotebookDocument(w,y,$){return K(tt.onDidChangeNotebookDocument)(w,y,$)},onWillSaveNotebookDocument(w,y,$){return K(Zt.getOnWillSaveNotebookDocumentEvent(S))(w,y,$)},get onDidOpenNotebookDocument(){return K(de.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return K(de.onDidCloseNotebookDocument)},registerNotebookSerializer(w,y,$,we){return de.registerNotebookSerializer(S,w,y,$,ht(S,"notebookLiveShare")?we:void 0)},onDidChangeConfiguration:(w,y,$)=>K(Kt.onDidChangeConfiguration)(w,y,$),getConfiguration(w,y){return y=arguments.length===1?void 0:y,Kt.getConfiguration(w,y,S)},registerTextDocumentContentProvider(w,y){return ce.registerTextDocumentContentProvider(w,y)},registerTaskProvider:(w,y)=>(v.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),qe.registerTaskProvider(S,w,y)),registerFileSystemProvider(w,y,$){return M4(We.registerFileSystemProvider(S,w,y,$),i.addFileSystemProvider(w,y,$))},get fs(){return i.value},registerFileSearchProvider:(w,y)=>(N(S,"fileSearchProvider"),me.registerFileSearchProviderOld(w,y)),registerTextSearchProvider:(w,y)=>(N(S,"textSearchProvider"),me.registerTextSearchProviderOld(w,y)),registerAITextSearchProvider:(w,y)=>(N(S,"aiTextSearchProvider"),N(S,"textSearchProvider2"),me.registerAITextSearchProvider(w,y)),registerFileSearchProvider2:(w,y)=>(N(S,"fileSearchProvider2"),me.registerFileSearchProvider(w,y)),registerTextSearchProvider2:(w,y)=>(N(S,"textSearchProvider2"),me.registerTextSearchProvider(w,y)),registerRemoteAuthorityResolver:(w,y)=>(N(S,"resolvers"),s.registerRemoteAuthorityResolver(w,y)),registerResourceLabelFormatter:w=>(N(S,"resolvers"),Hc.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(N(S,"resolvers"),s.getRemoteExecServer(w)),onDidCreateFiles:(w,y,$)=>K(Ui.onDidCreateFile)(w,y,$),onDidDeleteFiles:(w,y,$)=>K(Ui.onDidDeleteFile)(w,y,$),onDidRenameFiles:(w,y,$)=>K(Ui.onDidRenameFile)(w,y,$),onWillCreateFiles:(w,y,$)=>K(Ui.getOnWillCreateFileEvent(S))(w,y,$),onWillDeleteFiles:(w,y,$)=>K(Ui.getOnWillDeleteFileEvent(S))(w,y,$),onWillRenameFiles:(w,y,$)=>K(Ui.getOnWillRenameFileEvent(S))(w,y,$),openTunnel:w=>(N(S,"tunnels"),g.openTunnel(S,w).then(y=>{if(!y)throw new Error("cannot open tunnel");return y})),get tunnels(){return N(S,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,y,$)=>(N(S,"tunnels"),K(g.onDidChangeTunnels)(w,y,$)),registerPortAttributesProvider:(w,y)=>(N(S,"portsAttributes"),g.registerPortsAttributesProvider(w,y)),registerTunnelProvider:(w,y)=>(N(S,"tunnelFactory"),g.registerTunnelProvider(w,y)),registerTimelineProvider:(w,y)=>(N(S,"timeline"),Zo.registerTimelineProvider(w,y,S.identifier,z.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(N(S,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,y,$)=>K(n.onDidGrantWorkspaceTrust)(w,y,$),registerEditSessionIdentityProvider:(w,y)=>(N(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,y)),onWillCreateEditSessionIdentity:(w,y,$)=>(N(S,"editSessionIdentityProvider"),K(n.getOnWillCreateEditSessionIdentityEvent(S))(w,y,$)),registerCanonicalUriProvider:(w,y)=>(N(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,y)),getCanonicalUri:(w,y,$)=>(N(S,"canonicalUriProvider"),n.provideCanonicalUri(w,y,$)),decode(w,y,$){return N(S,"textDocumentEncoding"),n.decode(w,y,$)},encode(w,y,$){return N(S,"textDocumentEncoding"),n.encode(w,y,$)}},fP={get inputBox(){return v.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),Xr.getLastInputBox(S)},createSourceControl(w,y,$){return Xr.createSourceControl(S,w,y,$)}},pP={createCommentController(w,y){return Bc.createCommentController(S,w,y)}},gP={get activeDebugSession(){return le.activeDebugSession},get activeDebugConsole(){return le.activeDebugConsole},get breakpoints(){return le.breakpoints},get activeStackItem(){return le.activeStackItem},registerDebugVisualizationProvider(w,y){return N(S,"debugVisualization"),le.registerDebugVisualizationProvider(S,w,y)},registerDebugVisualizationTreeProvider(w,y){return N(S,"debugVisualization"),le.registerDebugVisualizationTree(S,w,y)},onDidStartDebugSession(w,y,$){return K(le.onDidStartDebugSession)(w,y,$)},onDidTerminateDebugSession(w,y,$){return K(le.onDidTerminateDebugSession)(w,y,$)},onDidChangeActiveDebugSession(w,y,$){return K(le.onDidChangeActiveDebugSession)(w,y,$)},onDidReceiveDebugSessionCustomEvent(w,y,$){return K(le.onDidReceiveDebugSessionCustomEvent)(w,y,$)},onDidChangeBreakpoints(w,y,$){return K(le.onDidChangeBreakpoints)(w,y,$)},onDidChangeActiveStackItem(w,y,$){return K(le.onDidChangeActiveStackItem)(w,y,$)},registerDebugConfigurationProvider(w,y,$){return le.registerDebugConfigurationProvider(w,y,$||Og.Initial)},registerDebugAdapterDescriptorFactory(w,y){return le.registerDebugAdapterDescriptorFactory(S,w,y)},registerDebugAdapterTrackerFactory(w,y){return le.registerDebugAdapterTrackerFactory(w,y)},startDebugging(w,y,$){return!$||typeof $=="object"&&"configuration"in $?le.startDebugging(w,y,{parentSession:$}):le.startDebugging(w,y,$||{})},stopDebugging(w){return le.stopDebugging(w)},addBreakpoints(w){return le.addBreakpoints(w)},removeBreakpoints(w){return le.removeBreakpoints(w)},asDebugSourceUri(w,y){return le.asDebugSourceUri(w,y)}},mP={registerTaskProvider:(w,y)=>qe.registerTaskProvider(S,w,y),fetchTasks:w=>qe.fetchTasks(w),executeTask:w=>qe.executeTask(S,w),get taskExecutions(){return qe.taskExecutions},onDidStartTask:(w,y,$)=>K(qe.onDidStartTask)(w,y,$),onDidEndTask:(w,y,$)=>K(qe.onDidEndTask)(w,y,$),onDidStartTaskProcess:(w,y,$)=>K(qe.onDidStartTaskProcess)(w,y,$),onDidEndTaskProcess:(w,y,$)=>K(qe.onDidEndTaskProcess)(w,y,$)},vP={createNotebookController(w,y,$,we,lt){return Mt.createNotebookController(S,w,y,$,we,ht(S,"notebookMessaging")?lt:void 0)},registerNotebookCellStatusBarItemProvider:(w,y)=>de.registerNotebookCellStatusBarItemProvider(S,w,y),createRendererMessaging(w){return Nt.createRendererMessaging(S,w)},createNotebookControllerDetectionTask(w){return N(S,"notebookKernelSource"),Mt.createNotebookControllerDetectionTask(S,w)},registerKernelSourceActionProvider(w,y){return N(S,"notebookKernelSource"),Mt.registerKernelSourceActionProvider(S,w,y)},onDidChangeNotebookCellExecutionState(w,y,$){return N(S,"notebookCellExecutionState"),K(Mt.onDidChangeNotebookCellExecutionState)(w,y,$)}},wP={t(...w){if(typeof w[0]=="string"){const y=w.shift(),$=!w||typeof w[0]!="object"?w:w[0];return B.getMessage(S.identifier.value,{message:y,args:$})}return B.getMessage(S.identifier.value,w[0])},get bundle(){return B.getBundle(S.identifier.value)},get uri(){return B.getBundleUri(S.identifier.value)}},bP={transferActiveChat(w){return N(S,"interactive"),cs.transferActiveChat(w)}},yP={getRelatedInformation(w,y){return N(S,"aiRelatedInformation"),L.getRelatedInformation(S,w,y)},registerRelatedInformationProvider(w,y){return N(S,"aiRelatedInformation"),L.registerRelatedInformationProvider(S,w,y)},registerEmbeddingVectorProvider(w,y){return N(S,"aiRelatedInformation"),F.registerEmbeddingVectorProvider(S,w,y)}},EP={registerChatResponseProvider(w,y,$){return N(S,"chatProvider"),R.registerLanguageModel(S,w,y,$)},registerMappedEditsProvider(w,y){return N(S,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(w){return N(S,"mappedEditsProvider"),os.registerMappedEditsProvider(S,w)},createChatParticipant(w,y){return cs.createChatAgent(S,w,y)},createDynamicChatParticipant(w,y,$){return N(S,"chatParticipantPrivate"),cs.createDynamicChatAgent(S,w,y,$)},registerChatParticipantDetectionProvider(w){return N(S,"chatParticipantPrivate"),cs.registerChatParticipantDetectionProvider(S,w)},registerRelatedFilesProvider(w,y){return N(S,"chatEditing"),cs.registerRelatedFilesProvider(S,w,y)}},xP={selectChatModels:w=>R.selectLanguageModels(S,w??{}),onDidChangeChatModels:(w,y,$)=>R.onDidChangeProviders(w,y,$),registerChatModelProvider:(w,y,$)=>(N(S,"chatProvider"),R.registerLanguageModel(S,w,y,$)),get embeddingModels(){return N(S,"embeddings"),kt.embeddingsModels},onDidChangeEmbeddingModels:(w,y,$)=>(N(S,"embeddings"),kt.onDidChange(w,y,$)),registerEmbeddingsProvider(w,y){return N(S,"embeddings"),kt.registerEmbeddingsProvider(S,w,y)},async computeEmbeddings(w,y,$){return N(S,"embeddings"),kt.computeEmbeddings(w,y,$)},registerTool(w,y){return C.registerTool(S,w,y)},invokeTool(w,y,$){return C.invokeTool(S,w,y,$)},get tools(){return C.getTools(S)},fileIsIgnored(w,y){return R.fileIsIgnored(S,w,y)},registerIgnoredFileProvider(w){return R.registerIgnoredFileProvider(S,w)}},kP={registerSpeechProvider(w,y){return N(S,"speech"),ye.registerProvider(S.identifier,w,y)}};return{version:t.version,ai:yP,authentication:Te,commands:ct,comments:pP,chat:EP,debug:gP,env:dt,extensions:Nn,interactive:bP,l10n:wP,languages:Fn,lm:xP,notebooks:vP,scm:fP,speech:kP,tasks:mP,tests:Gt,window:dP,workspace:m4,Breakpoint:Va,TerminalOutputAnchor:yv,ChatResultFeedbackKind:hu,ChatVariableLevel:l0,ChatCompletionItem:JO,ChatReferenceDiagnostic:Uk,CallHierarchyIncomingCall:dk,CallHierarchyItem:kv,CallHierarchyOutgoingCall:fk,CancellationError:er,CancellationTokenSource:it,CandidatePortSource:Km,CodeAction:ql,CodeActionKind:pt,CodeActionTriggerKind:Vl,CodeLens:uf,Color:Ba,ColorInformation:mf,ColorPresentation:vf,ColorThemeKind:bn,CommentMode:Vv,CommentState:qv,CommentThreadCollapsibleState:iu,CommentThreadState:su,CommentThreadApplicability:nu,CommentThreadFocus:ou,CompletionItem:ff,CompletionItemKind:pe,CompletionItemTag:Jl,CompletionList:Fa,CompletionTriggerKind:Na,ConfigurationTarget:Wa,CustomExecution:Uv,DebugAdapterExecutable:qa,DebugAdapterInlineImplementation:eu,DebugAdapterNamedPipeServer:Kl,DebugAdapterServer:Ga,DebugConfigurationProviderTriggerKind:Og,DebugConsoleMode:Df,DebugVisualization:_O,DecorationRangeBehavior:mo,Diagnostic:nf,DiagnosticRelatedInformation:Bl,DiagnosticSeverity:sr,DiagnosticTag:po,Disposable:Re,DocumentHighlight:cf,DocumentHighlightKind:_l,MultiDocumentHighlight:lf,DocumentLink:gf,DocumentSymbol:zl,EndOfLine:$i,EnvironmentVariableMutatorType:Ra,EvaluatableExpression:Sf,InlineValueText:$f,InlineValueVariableLookup:Cf,InlineValueEvaluatableExpression:If,InlineCompletionTriggerKind:tu,EventEmitter:D,ExtensionKind:xo,ExtensionMode:Za,ExternalUriOpenerPriority:Kv,FileChangeType:Ja,FileDecoration:Qv,FileDecoration2:Qv,FileSystemError:Bt,FileType:Mr,FilePermission:ln,FoldingRange:zv,FoldingRangeKind:Ps,FunctionBreakpoint:Eo,InlineCompletionItem:Dv,InlineCompletionList:Av,Hover:of,VerboseHover:af,HoverVerbosityAction:xv,IndentAction:Ob,Location:Gr,MarkdownString:Ur,OverviewRulerLane:Lw,ParameterInformation:Sv,PortAutoForwardAction:t0,Position:Ie,ProcessExecution:_a,ProgressLocation:wo,QuickInputButtonLocation:Jv,QuickInputButtons:au,Range:ke,RelativePattern:za,Selection:Is,SelectionRange:Gl,SemanticTokens:Qa,SemanticTokensBuilder:BO,SemanticTokensEdit:bk,SemanticTokensEdits:Pf,SemanticTokensLegend:Gv,ShellExecution:vo,ShellQuoting:Mv,SignatureHelp:Cv,SignatureHelpTriggerKind:Iv,SignatureInformation:$v,SnippetString:fo,SourceBreakpoint:yo,StandardTokenType:yn,StatusBarAlignment:mn,SymbolInformation:Wl,SymbolKind:rt,SymbolTag:Hl,Task:bf,TaskGroup:Xl,TaskPanelKind:Ov,TaskRevealKind:Fv,TaskScope:vn,TerminalLink:PO,TerminalQuickFixTerminalCommand:AO,TerminalQuickFixOpener:DO,TerminalLocation:Lv,TerminalProfile:TO,TerminalExitReason:Rv,TerminalShellExecutionCommandLineConfidence:wf,TerminalCompletionItem:RO,TerminalCompletionItemKind:Nv,TerminalCompletionList:LO,TerminalShellType:kr,TextDocumentSaveReason:Oa,TextEdit:gn,SnippetTextEdit:Ev,TextEditorCursorStyle:wi,TextEditorChangeKind:Ua,TextEditorLineNumbersStyle:Ci,TextEditorRevealType:pf,TextEditorSelectionChangeKind:Ma,SyntaxTokenType:ja,TextDocumentChangeReason:Yl,ThemeColor:Zl,ThemeIcon:cr,TreeItem:yf,TreeItemCheckboxState:Yi,TreeItemCollapsibleState:bo,TypeHierarchyItem:r0,UIKind:ju,Uri:E,ViewColumn:Ql,WorkspaceEdit:ho,DocumentPasteTriggerKind:_v,DocumentDropEdit:Bv,DocumentDropOrPasteEditKind:wn,DocumentPasteEdit:OO,InlayHint:df,InlayHintLabelPart:hf,InlayHintKind:Pv,RemoteAuthorityResolverError:Ta,ResolvedAuthority:CO,ManagedResolvedAuthority:rf,SourceControlInputBoxValidationType:Tv,ExtensionRuntime:Of,TimelineItem:Xv,NotebookRange:Ds,NotebookCellKind:ko,NotebookCellExecutionState:Xa,NotebookCellData:Tf,NotebookData:yk,NotebookRendererScript:xk,NotebookCellStatusBarAlignment:Lf,NotebookEditorRevealType:Nf,NotebookCellOutput:Rf,NotebookCellOutputItem:Ek,CellErrorStackFrame:HO,NotebookCellStatusBarItem:WO,NotebookControllerAffinity:Yv,NotebookControllerAffinity2:Ff,NotebookEdit:sf,NotebookKernelSourceAction:zO,NotebookVariablesRequestKind:lu,PortAttributes:qO,LinkedEditingRanges:VO,TestResultState:Zv,TestRunRequest:Mf,TestMessage:Uf,TestMessageStackFrame:GO,TestTag:uu,TestRunProfileKind:Ka,TextSearchCompleteMessageType:Np,DataTransfer:Ha,DataTransferItem:Ef,TestCoverageCount:jf,FileCoverage:_f,StatementCoverage:Sk,BranchCoverage:$k,DeclarationCoverage:Ck,WorkspaceTrustState:e0,LanguageStatusSeverity:La,QuickPickItemKind:cu,InputBoxValidationSeverity:Ya,TabInputText:i0,TabInputTextDiff:Hf,TabInputTextMerge:Ik,TabInputCustom:s0,TabInputNotebook:n0,TabInputNotebookDiff:o0,TabInputWebview:Pk,TabInputTerminal:Dk,TabInputInteractiveWindow:Ak,TabInputChat:Tk,TabInputTextMultiDiff:Rk,TelemetryTrustedValue:hv,LogLevel:fe,EditSessionIdentityMatch:Mb,InteractiveSessionVoteDirection:a0,ChatCopyKind:c0,ChatEditingSessionActionOutcome:So,InteractiveEditorResponseFeedbackKind:u0,DebugStackFrame:vk,DebugThread:wk,RelatedInformationType:m0,SpeechToTextStatus:v0,TextToSpeechStatus:w0,PartialAcceptTriggerKind:go,KeywordRecognitionStatus:b0,ChatResponseMarkdownPart:Wf,ChatResponseFileTreePart:Vf,ChatResponseAnchorPart:fu,ChatResponseProgressPart:h0,ChatResponseProgressPart2:qf,ChatResponseReferencePart:$o,ChatResponseReferencePart2:$o,ChatResponseCodeCitationPart:Qf,ChatResponseCodeblockUriPart:Jf,ChatResponseWarningPart:pu,ChatResponseTextEditPart:gu,ChatResponseNotebookEditPart:Xf,ChatResponseMarkdownWithVulnerabilitiesPart:du,ChatResponseCommandButtonPart:Gf,ChatResponseConfirmationPart:zf,ChatResponseMovePart:Yf,ChatResponseReferencePartStatusKind:d0,ChatRequestTurn:Lk,ChatResponseTurn:Nk,ChatLocation:Jr,ChatRequestEditorData:Fk,ChatRequestNotebookData:Ok,ChatReferenceBinaryData:Mk,LanguageModelChatMessageRole:ii,LanguageModelChatMessage:jk,LanguageModelToolResultPart:f0,LanguageModelTextPart:Sr,LanguageModelToolCallPart:mu,LanguageModelError:As,LanguageModelToolResult:Zf,ExtendedLanguageModelToolResult:YO,PreparedTerminalToolInvocation:QO,LanguageModelChatToolMode:g0,LanguageModelPromptTsxPart:ec,NewSymbolName:UO,NewSymbolNameTag:Wv,NewSymbolNameTriggerKind:ru,InlineEdit:XO,InlineEditTriggerKind:vu,ExcludeSettingOptions:Ns,TextSearchContext2:Lp,TextSearchMatch2:Ls,TextSearchCompleteMessageTypeNew:Np,ChatErrorLevel:p0}}}var Mg,by=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.e=i,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),$t("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();$t("code/extHost/didWaitForConfig");const r=await this.g.getExtensionPathIndex();this.register(new RW(this.c,r,this.d,t,this.i)),this.register(this.e.createInstance(yy)),this.h.remote.isRemote&&this.register(this.e.createInstance(Ey,r,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};by=__decorate([__param(2,ad),__param(3,ni),__param(4,Ms),__param(5,Ut),__param(6,Ce)],by);var yy=class{static{Mg=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Mg.a.size){const r=Ks(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=Mg.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};yy=Mg=__decorate([__param(0,Ut)],yy);var RW=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new ys}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(fO,this.e,this.f)}return this.b}},Ey=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(Y.MainThreadTelemetry);const s=i.getProxy(Y.MainThreadWindow);this.c=(n,o)=>{const a=E.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};Ey=__decorate([__param(2,Ae)],Ey);import{LogLevel as _o,createHttpPatch as aC,createProxyResolver as LW,createTlsPatch as NW,createNetPatch as FW,loadSystemCertificates as OW}from"@vscode/proxy-agent";import{createRequire as MW}from"node:module";import{parse as cC}from"url";import{spawn as UW}from"child_process";import{userInfo as jW}from"os";import*as BW from"os";var lC=/^\d+$/,_W=/^Microsoft.PowerShell_.*/,HW=/^Microsoft.PowerShellPreview_.*/,uC;(function(e){e[e.x64=0]="x64",e[e.x86=1]="x86",e[e.ARM=2]="ARM"})(uC||(uC={}));var hh;switch(process.arch){case"ia32":hh=1;break;case"arm":case"arm64":hh=2;break;default:hh=0;break}var Tc;process.env.PROCESSOR_ARCHITEW6432?Tc=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?Tc=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?Tc=1:Tc=0;var Ug=class{constructor(e,t,r){this.exePath=e,this.displayName=t,this.a=r}async exists(){return this.a===void 0&&(this.a=await vr.existsFile(this.exePath)),this.a}};function WW({useAlternateBitness:e=!1}={}){return e?hh===0?process.env["ProgramFiles(x86)"]||null:Tc===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function jg({useAlternateBitness:e=!1,findPreview:t=!1}={}){const r=WW({useAlternateBitness:e});if(!r)return null;const i=Ze(r,"PowerShell");if(!await vr.existsDirectory(i))return null;let s=-1,n=null;for(const c of await st.readdir(i)){let l=-1;if(t){const h=c.indexOf("-");if(h<0)continue;const f=c.substring(0,h);if(!lC.test(f)||c.substring(h+1)!=="preview")continue;l=parseInt(f,10)}else{if(!lC.test(c))continue;l=parseInt(c,10)}if(l<=s)continue;const u=Ze(i,c,"pwsh.exe");await vr.existsFile(u)&&(n=u,s=l)}if(!n)return null;const o=r.includes("x86")?" (x86)":"",a=t?" Preview":"";return new Ug(n,`PowerShell${a}${o}`,!0)}async function hC({findPreview:e}={}){if(!process.env.LOCALAPPDATA)return null;const t=Ze(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await vr.existsDirectory(t))return null;const{pwshMsixDirRegex:r,pwshMsixName:i}=e?{pwshMsixDirRegex:HW,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:_W,pwshMsixName:"PowerShell (Store)"};for(const s of await st.readdir(t))if(r.test(s)){const n=Ze(t,s,"pwsh.exe");return new Ug(n,i)}return null}function zW(){const e=Ze(BW.homedir(),".dotnet","tools","pwsh.exe");return new Ug(e,".NET Core PowerShell Global Tool")}function VW(){const e=Ze(process.env.windir,hh===1&&Tc!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new Ug(e,"Windows PowerShell",!0)}async function*qW(){let e=await jg();e&&(yield e),e=await jg({useAlternateBitness:!0}),e&&(yield e),e=await hC(),e&&(yield e),e=zW(),e&&(yield e),e=await jg({findPreview:!0}),e&&(yield e),e=await hC({findPreview:!0}),e&&(yield e),e=await jg({useAlternateBitness:!0,findPreview:!0}),e&&(yield e),e=VW(),e&&(yield e)}async function*GW(){for await(const e of qW())await e.exists()&&(yield e)}async function JW(){for await(const e of GW())return e;return null}async function QW(e,t){return e===1?Ue?XW():qS(t):YW(e,t)}var xy=null;function YW(e,t){if(yt&&e===2||Tt&&e===3)return"/bin/bash";if(!xy){let r;if(Ue)r="/bin/bash";else{if(r=t.SHELL,!r)try{r=jW().shell}catch{}r||(r="sh"),r==="/bin/false"&&(r="/bin/bash")}xy=r}return xy}var ky=null;async function XW(){return ky||(ky=(await JW()).exePath),ky}import"assert";var Mee=w4(b4(),1),Uee={o:d(1804,null),e:d(1805,null),t:d(1806,null)},jee={tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel",options:{"cli-data-dir":{type:"string",args:"dir",description:d(1807,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},"serve-web":{type:"subcommand",description:"Run a server that displays the editor UI in browsers.",options:{"cli-data-dir":{type:"string",args:"dir",description:d(1808,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:d(1809,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:d(1810,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:d(1811,null)},remove:{type:"boolean",cat:"o",args:"folder",description:d(1812,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:d(1813,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:d(1814,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:d(1815,null)},wait:{type:"boolean",cat:"o",alias:"w",description:d(1816,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:d(1817,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:d(1818,null)},profile:{type:"string",cat:"o",args:"profileName",description:d(1819,null)},help:{type:"boolean",cat:"o",alias:"h",description:d(1820,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:d(1821,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:d(1822,null)},"show-versions":{type:"boolean",cat:"e",description:d(1823,null)},category:{type:"string",allowEmptyValue:!0,cat:"e",description:d(1824,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:d(1825,null)},"pre-release":{type:"boolean",cat:"e",description:d(1826,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:d(1827,null)},"update-extensions":{type:"boolean",cat:"e",description:d(1828,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:d(1829,null)},version:{type:"boolean",cat:"t",alias:"v",description:d(1830,null)},verbose:{type:"boolean",cat:"t",global:!0,description:d(1831,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:d(1832,null)},status:{type:"boolean",alias:"s",cat:"t",description:d(1833,null)},"prof-startup":{type:"boolean",cat:"t",description:d(1834,null)},"prof-append-timers":{type:"string"},"prof-duration-markers":{type:"string[]"},"prof-duration-markers-file":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:d(1835,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:d(1836,null)},sync:{type:"string",cat:"t",description:d(1837,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:d(1838,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:d(1839,null)},"disable-lcd-text":{type:"boolean",cat:"t",description:d(1840,null)},"disable-gpu":{type:"boolean",cat:"t",description:d(1841,null)},"disable-chromium-sandbox":{type:"boolean",cat:"t",description:d(1842,null)},sandbox:{type:"boolean"},telemetry:{type:"boolean",cat:"t",description:d(1843,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"inspect-sharedprocess":{type:"string",allowEmptyValue:!0},"inspect-brk-sharedprocess":{type:"string",allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"use-inmemory-secretstorage":{type:"boolean",deprecates:["disable-keytar"]},"password-store":{type:"string"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},"do-not-include-pack-dependencies":{type:"boolean"},trace:{type:"boolean"},"trace-memory-infra":{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"preserve-env":{type:"boolean"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},"disable-gpu-sandbox":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"locate-shell-integration-path":{type:"string",args:["bash","pwsh","zsh","fish"]},"enable-coi":{type:"boolean"},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},"ozone-platform":{type:"string"},"enable-tracing":{type:"string"},"trace-startup-format":{type:"string"},"trace-startup-file":{type:"string"},"trace-startup-duration":{type:"string"},"xdg-portal-required-version":{type:"string"},_:{type:"string[]"}};function dC(e){return e.VSCODE_CLI==="1"}var Sy=void 0;async function ZW(e,t,r,i){return r["force-disable-user-env"]?(t.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):Ue?(t.trace("resolveShellEnv(): skipped (Windows)"),{}):dC(i)&&!r["force-user-env"]?(t.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):(dC(i)?t.trace("resolveShellEnv(): running (--force-user-env)"):t.trace("resolveShellEnv(): running (macOS/Linux)"),Sy||(Sy=nn.withAsyncBody(async(s,n)=>{const o=new it;let a=1e4;const c=e.getValue("application.shellEnvironmentResolutionTimeout");typeof c=="number"&&(a=ZR(c,1,120)*1e3);const l=setTimeout(()=>{o.dispose(!0),n(new Error(d(2168,null)))},a);try{s(await KW(t,o.token))}catch(u){!ji(u)&&!o.token.isCancellationRequested?n(new Error(d(2169,null,zi(u)))):s({})}finally{clearTimeout(l),o.dispose()}})),Sy)}async function KW(e,t){const r=process.env.ELECTRON_RUN_AS_NODE;e.trace("getUnixShellEnvironment#runAsNode",r);const i=process.env.ELECTRON_NO_ATTACH_CONSOLE;e.trace("getUnixShellEnvironment#noAttach",i);const s=Ct().replace(/-/g,"").substr(0,12),n=new RegExp(s+"({.*})"+s),o={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1",VSCODE_RESOLVING_ENVIRONMENT:"1"};e.trace("getUnixShellEnvironment#env",o);const a=await QW(Sm,o);return e.trace("getUnixShellEnvironment#shell",a),new Promise((c,l)=>{if(t.isCancellationRequested)return l(new er);const u=vt(a);let h,f;const p="";/^(?:pwsh|powershell)(?:-preview)?$/.test(u)?(h=`& '${process.execPath}' ${p} -p '''${s}'' + JSON.stringify(process.env) + ''${s}'''`,f=["-Login","-Command"]):u==="nu"?(h=`^'${process.execPath}' ${p} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,f=["-i","-l","-c"]):u==="xonsh"?(h=`import os, json; print("${s}", json.dumps(dict(os.environ)), "${s}")`,f=["-i","-l","-c"]):(h=`'${process.execPath}' ${p} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,u==="tcsh"||u==="csh"?f=["-ic"]:f=["-i","-l","-c"]),e.trace("getUnixShellEnvironment#spawn",JSON.stringify(f),h);const g=UW(a,[...f,h],{detached:!0,stdio:["ignore","pipe","pipe"],env:o});t.onCancellationRequested(()=>(g.kill(),l(new er))),g.on("error",x=>{e.error("getUnixShellEnvironment#errorChildProcess",zi(x)),l(x)});const v=[];g.stdout.on("data",x=>v.push(x));const b=[];g.stderr.on("data",x=>b.push(x)),g.on("close",(x,k)=>{const I=Buffer.concat(v).toString("utf8");e.trace("getUnixShellEnvironment#raw",I);const A=Buffer.concat(b).toString("utf8");if(A.trim()&&e.trace("getUnixShellEnvironment#stderr",A),x||k)return l(new Error(d(2170,null,x,k)));const R=n.exec(I),_=R?R[1]:"{}";try{const q=JSON.parse(_);r?q.ELECTRON_RUN_AS_NODE=r:delete q.ELECTRON_RUN_AS_NODE,i?q.ELECTRON_NO_ATTACH_CONSOLE=i:delete q.ELECTRON_NO_ATTACH_CONSOLE,delete q.VSCODE_RESOLVING_ENVIRONMENT,delete q.XDG_RUNTIME_DIR,e.trace("getUnixShellEnvironment#result",q),c(q)}catch(q){e.error("getUnixShellEnvironment#errorCaught",zi(q)),l(q)}})})}import{parse as fC}from"url";function ez(e,t){return e.protocol==="http:"?t.HTTP_PROXY||t.http_proxy||null:e.protocol==="https:"&&(t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy)||null}async function tz(e,t,r={}){const i=fC(e),s=r.proxyUrl||ez(i,t);if(!s)return null;const n=fC(s);if(!/^https?:$/.test(n.protocol||""))return null;const o={host:n.hostname||"",port:(n.port?+n.port:0)||(n.protocol==="https"?443:80),auth:n.auth,rejectUnauthorized:N4(r.strictSSL)?r.strictSSL:!0};if(i.protocol==="http:"){const{default:a}=await import("http-proxy-agent");return new a.HttpProxyAgent(s,o)}else{const{default:a}=await import("https-proxy-agent");return new a.HttpsProxyAgent(s,o)}}import{createGunzip as rz}from"zlib";var pC=class extends nF{constructor(t,r,i,s){super(s),this.m=t,this.n=r,this.r=i,this.s(),this.B(r.onDidChangeConfiguration(n=>{n.affectsConfiguration("http")&&this.s()}))}s(){this.f=this.t("http.proxy"),this.g=!!this.t("http.proxyStrictSSL"),this.h=this.t("http.proxyAuthorization")}async request(t,r){const{f:i,g:s}=this;let n;try{n=await ZW(this.n,this.b,this.r.args,process.env)}catch(c){this.j||(this.j=!0,this.b.error("resolving shell environment failed",k4(c)))}const o={...process.env,...n},a=t.agent?t.agent:await tz(t.url||"",o,{proxyUrl:i,strictSSL:s});return t.agent=a,t.strictSSL=s,this.h&&(t.headers={...t.headers||{},"Proxy-Authorization":this.h}),this.c(t,()=>mC(t,r))}async resolveProxy(t){}async lookupAuthorization(t){}async lookupKerberosAuthorization(t){try{const r=this.t("http.proxyKerberosServicePrincipal");return"Negotiate "+await gC(t,r,this.b,"RequestService#lookupKerberosAuthorization")}catch(r){this.b.debug("RequestService#lookupKerberosAuthorization Kerberos authentication failed",r);return}}async loadCertificates(){return(await import("@vscode/proxy-agent")).loadSystemCertificates({log:this.b})}t(t){if(this.m==="remote")return this.n.getValue(t);const r=this.n.inspect(t);return r.userLocalValue||r.defaultValue}};pC=__decorate([__param(1,$s),__param(2,uF),__param(3,Ce)],pC);async function gC(e,t,r,i){const s=await import("kerberos"),n=s.default||s,o=new URL(e),a=t||(process.platform==="win32"?`HTTP/${o.hostname}`:`HTTP@${o.hostname}`);return r.debug(`${i} Kerberos authentication lookup`,`proxyURL:${o}`,`spn:${a}`),(await n.initializeClient(a)).step("")}async function iz(e){return(cC(e.url).protocol==="https:"?await import("https"):await import("http")).request}async function mC(e,t){return nn.withAsyncBody(async(r,i)=>{const s=cC(e.url),n=e.getRawRequest?e.getRawRequest(e):await iz(e),o={hostname:s.hostname,port:s.port?parseInt(s.port):s.protocol==="https:"?443:80,protocol:s.protocol,path:s.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:N4(e.strictSSL)?e.strictSSL:!0};e.user&&e.password&&(o.auth=e.user+":"+e.password),e.disableCache&&(o.cache="no-store");const a=n(o,c=>{const l=Kr(e.followRedirects)?e.followRedirects:3;if(c.statusCode&&c.statusCode>=300&&c.statusCode<400&&l>0&&c.headers.location)mC({...e,url:c.headers.location,followRedirects:l-1},t).then(r,i);else{let u=c;!e.isChromiumNetwork&&c.headers["content-encoding"]==="gzip"&&(u=c.pipe(rz())),r({res:c,stream:pA(u)})}});if(a.on("error",i),e.timeout)if(e.isChromiumNetwork){const c=setTimeout(()=>{a.abort(),i(new Error(`Request timeout after ${e.timeout}ms`))},e.timeout);a.on("response",()=>clearTimeout(c)),a.on("error",()=>clearTimeout(c)),a.on("abort",()=>clearTimeout(c))}else a.setTimeout(e.timeout);e.isChromiumNetwork&&a.removeHeader("Content-Length"),e.data&&typeof e.data=="string"&&a.write(e.data),a.end(),t.onCancellationRequested(()=>{a.abort(),i(new er)})})}import*as Bg from"@vscode/proxy-agent";var Rc=MW(import.meta.url),vC=Rc("http"),_g=Rc("https"),wC=Rc("tls"),bC=Rc("net"),yC=!1,EC=!1;function sz(e,t,r,i,s,n,o){const a=n.remote.isRemote,c=n.environment.useHostProxy??!a,l=c,u=c,h=()=>!a||t.getConfiguration("http").get("useLocalProxyConfiguration",c),f={resolveProxy:x=>e.resolveProxy(x),lookupProxyAuthorization:dz.bind(void 0,e,i,s,t,{},{},n.remote.isRemote,l),getProxyURL:()=>Ws(t,a,"http.proxy"),getProxySupport:()=>Ws(t,a,"http.proxySupport")||"off",getNoProxyConfig:()=>Ws(t,a,"http.noProxy")||[],isAdditionalFetchSupportEnabled:()=>Ws(t,a,"http.fetchAdditionalSupport",!0),addCertificatesV1:()=>lz(t,a),addCertificatesV2:()=>uz(t,a),log:i,getLogLevel:()=>{const x=i.getLevel();switch(x){case fe.Trace:return _o.Trace;case fe.Debug:return _o.Debug;case fe.Info:return _o.Info;case fe.Warning:return _o.Warning;case fe.Error:return _o.Error;case fe.Off:return _o.Off;default:return k(x)}function k(I){return i.error("Unknown log level",I),_o.Debug}},proxyResolveTelemetry:()=>{},isUseHostProxyEnabled:h,loadAdditionalCertificates:async()=>{const x=[];if(n.remote.isRemote&&x.push(OW({log:i})),u){i.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const k=e.loadCertificates();k.then(I=>i.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",I.length)),x.push(k)}return n.environment.extensionTestsLocationURI&&_g.globalAgent.testCertificates?.length&&(i.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),x.push(Promise.resolve(_g.globalAgent.testCertificates))),(await Promise.all(x)).flat()},env:process.env},{resolveProxyWithRequest:p,resolveProxyURL:g}=LW(f),v=Bg.default||Bg;v.resolveProxyURL=g,oz(f,t,s,n,g,o);const b=cz(f,p);return hz(r,b)}var nz=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function oz(e,t,r,i,s,n){if(!globalThis.__vscodeOriginalFetch){const o=globalThis.fetch;globalThis.__vscodeOriginalFetch=o;const a=Bg.createFetchPatch(e,o,s);globalThis.__vscodePatchedFetch=a;let c=!1;i.remote.isRemote||(c=t.getConfiguration("http").get("electronFetch",EC),n.add(t.onDidChangeConfiguration(l=>{l.affectsConfiguration("http.electronFetch")&&(c=t.getConfiguration("http").get("electronFetch",EC))}))),globalThis.fetch=async function(u,h){function f(R){return h&&R in h?h[R]:typeof u=="object"&&"cache"in u?u[R]:void 0}const p=typeof u=="string"?u:"cache"in u?u.url:u.toString(),g=p.startsWith("data:");g&&Lc(r,"data");const v=p.startsWith("blob:");v&&Lc(r,"blob");const b=f("redirect")==="manual";b&&Lc(r,"manualRedirect");const x=f("integrity");if(x&&Lc(r,"integrity"),!c||g||v||b||x){const R=await a(u,h);return xC(r,R,p),R}if(h?.headers){const R=new Headers(h.headers);for(const _ of nz)R.delete(_);h={...h,headers:R}}const k=u instanceof URL?u.toString():u,A=await Rc("electron").net.fetch(k,h);return xC(r,A,p),A}}}function xC(e,t,r){const i=t.url;Object.defineProperty(t,"url",{get(){return Lc(e,"url"),i||r}});const s=t.type;Object.defineProperty(t,"type",{get(){return Lc(e,"typeProperty"),s!=="default"?s:"basic"}})}var kC={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},Hg,az=!1;function Lc(e,t){az&&!kC[t]++&&(Hg&&clearTimeout(Hg),Hg=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",kC)},1e4),Hg.unref())}function cz(e,t){function r(i,s){const n=i.default||i;return n.__vscodeOriginal=Object.assign({},n),Object.assign(n,s)}return{http:r(vC,aC(e,vC,t)),https:r(_g,aC(e,_g,t)),net:r(bC,FW(e,bC)),tls:r(wC,NW(e,wC))}}function lz(e,t){return!Ws(e,t,"http.experimental.systemCertificatesV2",yC)&&!!Ws(e,t,"http.systemCertificates")}function uz(e,t){return!!Ws(e,t,"http.experimental.systemCertificatesV2",yC)&&!!Ws(e,t,"http.systemCertificates")}var SC=new Map;function hz(e,t){return e.getExtensionPathIndex().then(r=>{const i=Rc("module"),s=i._load;i._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https"&&o!=="undici")return s.apply(this,arguments);const l=r.findSubstr(E.file(a.filename));let u=SC.get(l);if(u||SC.set(l,u={}),!u[o])if(o==="undici"){const h=s.apply(this,arguments);Bg.patchUndici(h),u[o]=h}else{const h=t[o];u[o]={...h}}return u[o]}})}async function dz(e,t,r,i,s,n,o,a,c,l,u){const h=s[c];l&&(s[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const f=l||h,p=Array.isArray(f)?f:typeof f=="string"?[f]:[];if(pz(r,p,o),p.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=Ws(i,o,"http.proxyKerberosServicePrincipal");return"Negotiate "+await gC(c,v,t,"ProxyResolver#lookupProxyAuthorization")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=p.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const b=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${b}`);const x=new URL(c),k={scheme:"basic",host:x.hostname,port:Number(x.port),realm:b||"",isProxy:!0,attempt:u.basicAuthAttempt},I=await e.lookupAuthorization(k);if(I){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${b}`);const A="Basic "+Buffer.from(`${I.username}:${I.password}`).toString("base64");return n[c]=A,A}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${b}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var $C=!1,fz=!1;function pz(e,t,r){!fz||$C||!t.length||($C=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(i=>i.split(" ")[0]).join(","),extensionHostType:r?"remote":"local"}))}function Ws(e,t,r,i){if(t)return e.getConfiguration().get(r)??i;const s=e.getConfiguration().inspect(r);return s?.globalLocalValue??s?.defaultValue??i}import{tmpdir as gz}from"os";var $y=class extends ee{constructor(t,r){super();const i=t.getProxy(Y.MainThreadDownloadService);r.registerCommand(!1,"_workbench.downloadResource",async s=>{const n=E.file(Ze(gz(),Ct()));return await i.$download(s,n),n})}};$y=__decorate([__param(0,Ae),__param(1,Ai)],$y);import*as mz from"http";import*as CC from"fs";var vz=class{constructor(e,t,r){this.b=e,this.c=t,this.f=r,this.a=mz.createServer((i,s)=>this.h(i,s)),this.g().catch(i=>(t.error(i),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const r=(s,n)=>{t.writeHead(s,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},i=[];e.setEncoding("utf8"),e.on("data",s=>i.push(s)),e.on("end",async()=>{try{const s=JSON.parse(i.join(""));let n;switch(s.type){case"open":n=await this.i(s);break;case"openExternal":n=await this.j(s);break;case"status":n=await this.l(s);break;case"extensionManagement":n=await this.k(s);break;default:r(404,`Unknown message type: ${s.type}`);break}r(200,n)}catch(s){const n=s instanceof Error?s.message:JSON.stringify(s);r(500,n),this.c.error("Error while processing pipe request",s)}})}async i(e){const{fileURIs:t,folderURIs:r,forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,removeMode:a,forceReuseWindow:c,gotoLineMode:l,waitMarkerFilePath:u,remoteAuthority:h}=e,f=[];if(Array.isArray(r))for(const b of r)try{f.push({folderUri:E.parse(b)})}catch{}if(Array.isArray(t))for(const b of t)try{oL(b)?f.push({workspaceUri:E.parse(b)}):f.push({fileUri:E.parse(b)})}catch{}const p=u?E.file(u):void 0,v={forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,removeMode:a,gotoLineMode:l,forceReuseWindow:c,preferNewWindow:!c&&!p&&!o&&!a,waitMarkerFileURI:p,remoteAuthority:h};this.b.executeCommand("_remoteCLI.windowOpen",f,v)}async j(e){for(const t of e.uris){const r=E.parse(t),i=r.scheme==="file"?r:t;await this.b.executeCommand("_remoteCLI.openExternal",i)}}async k(e){const t=i=>i?.map(s=>/\.vsix$/i.test(s)?E.parse(s):s),r={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",r)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&CC.existsSync(this.f)&&CC.unlinkSync(this.f)}},Cy=class extends vz{constructor(t,r){super(t,r,oT())}};Cy=__decorate([__param(0,Ai),__param(1,Ce)],Cy);var Iy=class{constructor(t,r){this.a=t.getProxy(Y.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:bz(s,this.b)}),this.c&&this.f(t,i,s)}};Iy=__decorate([__param(0,Ae),__param(1,Ut)],Iy);var wz=1e5;function bz(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=cT(r);return i.length>wz?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var yz=1024*1024,Py=class extends Iy{constructor(t,r){super(t,r),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,r,i){const s=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,s.write(`
START_NATIVE_LOG
`),r.apply(console,i),s.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,r){const i=process[t],s=i.write;let n="";Object.defineProperty(i,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>yz?n.length:n.lastIndexOf(`
`);l!==-1&&(console[r](n.slice(0,l)),n=n.slice(l+1))}s.call(i,o,a,c)}})}};Py=__decorate([__param(0,Ae),__param(1,Ut)],Py);import{promises as Ho}from"fs";async function Ez(e,t,r,i,s,n){let o;try{await xz(e,t,r,i,s,n)}catch(a){o=a}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),typeof o<"u"&&r.error(o),r.end()}}async function xz(e,t,r,i,s,n){Dy(n);const o=await e.open(t,{create:!1});try{Dy(n);let a=0,c=0,l=s&&typeof s.length=="number"?s.length:void 0,u=J.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),h=s&&typeof s.position=="number"?s.position:0,f=0;do c=await e.read(o,h,u.buffer,f,u.byteLength-f),h+=c,f+=c,a+=c,typeof l=="number"&&(l-=c),f===u.byteLength&&(await r.write(i(u)),u=J.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),f=0);while(c>0&&(typeof l!="number"||l>0)&&Dy(n)&&kz(a,s));if(f>0){let p=f;typeof l=="number"&&(p=Math.min(f,l)),r.write(i(u.slice(0,p)))}}catch(a){throw cN(a)}finally{await e.close(o)}}function Dy(e){if(e.isCancellationRequested)throw zc();return!0}function kz(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw Ss(d(2e3,null),ae.FileTooLarge);return!0}var Sz=class extends ee{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new D),this.onDidChangeFile=this.c.event,this.g=this.B(new D),this.onDidWatchError=this.g.event,this.j=[],this.m=this.B(new qh(0)),this.y=[],this.z=this.B(new qh(0))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.n(e,t):this.C(e,t)}n(e,t){const r=this.r(e,t),i=$4(this.j,r);return this.s(),te(()=>{i(),this.s()})}r(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(z_(r)){const i=this.b?.watcher?.recursive?.usePolling;i===!0?r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(i)&&i.includes(r.path)&&(r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return r}s(){this.m.trigger(()=>this.t()).catch(e=>mt(e))}t(){return this.h||(this.h=this.B(this.u(e=>this.c.fire(J$(e)),e=>this.H(e),this.a.getLevel()===fe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===fe.Trace)}))),this.h.watch(this.j)}C(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},i=$4(this.y,r);return this.D(),te(()=>{i(),this.D()})}D(){this.z.trigger(()=>this.F()).catch(e=>mt(e))}F(){return this.w||(this.w=this.B(this.G(e=>this.c.fire(J$(e)),e=>this.H(e),this.a.getLevel()===fe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.w?.setVerboseLogging(this.a.getLevel()===fe.Trace)}))),this.w.watch(this.y)}H(e){e.type==="error"&&this.g.fire(e.message),this.I(e)}I(e){this.a[e.type](e.message)}J(e){return ps(e.fsPath)}L(e){const t=this.J(e);return S2(t)}};import{fork as $z}from"child_process";function Cz(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function Iz(e){const t=[];let r;try{const i=JSON.parse(e.arguments),s=i[i.length-1];s&&s.__$stack&&(i.pop(),r=s.__$stack),t.push(...i)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:r}}function Pz(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Dz(e,t){const{args:r,stack:i}=Iz(e),s=typeof r[0]=="string"&&r.length===1;let n=Pz(i);n&&(n=`(${n.trim()})`);let o=[];if(typeof r[0]=="string"?n&&s?o=[`%c[${t}] %c${r[0]} %c${n}`,Nc("blue"),Nc(""),Nc("grey")]:o=[`%c[${t}] %c${r[0]}`,Nc("blue"),Nc(""),...r.slice(1)]:o=[`%c[${t}]%`,Nc("blue"),...r],n&&!s&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");console[e.severity].apply(console,o)}function Nc(e){return`color: ${e}`}var Az=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new D,this.onDidProcessExit=this.h.event;const r=t&&t.timeout?t.timeout:6e4;this.b=new z5(r),this.d=null,this.f=null}getChannel(e){const t=this;return{call(r,i,s){return t.k(e,r,i,s)},listen(r,i){return t.l(e,r,i)}}}k(e,t,r,i=Xe.None){if(!this.b)return Promise.reject(new Error("disposed"));if(i.isCancellationRequested)return Promise.reject(zc());this.b.cancel();const s=this.n(e),n=gs(c=>s.call(t,r,c)),o=i.onCancellationRequested(()=>n.cancel()),a=te(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,r){if(!this.b)return Be.None;this.b.cancel();let i;const s=new D({onWillAddFirstListener:()=>{i=this.n(e).listen(t,r)(s.fire,s),this.c.add(i)},onDidRemoveLastListener:()=>{this.c.delete(i),i.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return s.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...Ve(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),Uj(t.env),this.d=$z(this.i,e,t);const r=new D,s=Be.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if(Cz(u)){Dz(u,`IPC Library: ${this.j.serverName}`);return}r.fire(J.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?jj(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=r.event,c={send:o,onMessage:a};this.f=new b6(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),s.dispose(),this.c.forEach(f=>hi(f)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},Tz=class extends q_{constructor(e,t,r){super(e,t,r),this.s()}r(e){const t=e.add(new Az(F5.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_ESM_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:r,signal:i})=>this.t(`terminated by itself with code ${r}, signal: ${i} (ETERM)`))),Jm.toService(qA(t.getChannel("watcher")))}};import{watchFile as Rz,unwatchFile as Lz}from"fs";var Nz=class extends ee{constructor(){super(),this.a=this.B(new D),this.onDidChangeFile=this.a.event,this.b=this.B(new D),this.onDidLogMessage=this.b.event,this.c=this.B(new D),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new Ah),this.m=new Set,this.n=this.B(new qh(this.y())),this.r=5007,this.s=new sn,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return q$(e)}u(e){return this.t(e)?e.correlationId:Es(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new sn;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[r,i]of[...this.h,...this.g])this.j.has(r)||t.push(i);return this.n.trigger(()=>this.N(t),e?this.y():0).catch(r=>mt(r))}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new se;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const r=this.O?.subscribe(e.path,(i,s)=>{t.isDisposed||(i?this.D(e,t):s?.type===1&&this.H(e))});return r?(t.add(r),!0):!1}G(e,t){let r=!1;const i=(s,n)=>{if(t.isDisposed)return;const o=this.I(s),a=this.I(n),c=r;r=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Rz(e.path,{persistent:!1,interval:this.r},i)}catch(s){this.Q(`fs.watchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(te(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Lz(e.path,i)}catch(s){this.Q(`fs.unwatchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:E.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const r=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(r,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${Y_(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as Fz,promises as Oz}from"fs";var Mz=class um extends ee{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.r}get failed(){return this.s}constructor(t,r,i,s,n,o){super(),this.t=t,this.u=r,this.w=i,this.y=s,this.z=n,this.C=o,this.c=this.B(new Z2({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.w(a))),this.f=this.B(new X2(a=>this.M(a),um.b)),this.g=Y$(this.t.path,this.t.excludes),this.h=this.t.includes?Y$(this.t.path,this.t.includes):void 0,this.j=q$(this.t)?this.t.filter:void 0,this.m=new it,this.n=new mr(async()=>{let a=this.t.path;try{a=await l6(this.t.path),this.t.path!==a&&this.Q(`correcting a path to watch that seems to be a symbolic link (original: ${this.t.path}, real: ${a})`)}catch{}return a}),this.ready=this.D(),this.r=!1,this.s=!1}async D(){try{const t=await Oz.stat(this.t.path);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.t.path} (error: ${t})`),this.F()}}F(){this.s=!0,this.y?.()}async G(t){const r=new se;return this.H(t,r)?(this.Q(`reusing an existing recursive watcher for ${this.t.path}`),this.r=!0):(this.r=!1,await this.I(t,r)),r}H(t,r){if(t)return!1;const i=E.file(this.t.path),s=this.u?.subscribe(this.t.path,async(n,o)=>{if(!r.isDisposed)if(n){const a=await this.G(t);r.isDisposed?a.dispose():r.add(a)}else o&&(typeof o.cId=="number"||typeof this.t.correlationId=="number")&&this.L({resource:i,type:o.type,cId:this.t.correlationId},!0)});return s?(r.add(s),!0):!1}async I(t,r){const i=await this.n.value;if(Tt&&Wn(i,"/Volumes/",!0)){this.O(`Refusing to watch ${i} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const s=new it(this.m.token);r.add(te(()=>s.dispose(!0)));const n=new se;r.add(n);try{const o=E.file(this.t.path),a=vt(i),c=Fz(i);n.add(te(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${i}'`);const l=new Set;if(t)try{for(const h of await st.readdir(i))l.add(h)}catch(h){this.O(h)}if(s.token.isCancellationRequested)return;const u=new Map;n.add(te(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,f)=>{s.token.isCancellationRequested||(this.O(`Failed to watch ${i} for changes using fs.watch() (${h}, ${f})`),this.F())}),c.on("change",(h,f)=>{if(s.token.isCancellationRequested)return;this.C&&this.R(`[raw] ["${h}"] ${f}`);let p="";if(f&&(p=f.toString(),Tt&&(p=ed(p))),!(!p||h!=="change"&&h!=="rename"))if(t)if(h==="rename"){u.get(p)?.dispose();const g=setTimeout(async()=>{if(u.delete(p),Wh(p,a,!yt)&&!await st.exists(i)){this.J(o);return}if(s.token.isCancellationRequested)return;const v=await this.N(Ze(i,p));if(s.token.isCancellationRequested)return;let b;v?l.has(p)?b=0:(b=1,l.add(p)):(l.delete(p),b=2),this.L({resource:St(o,p),type:b,cId:this.t.correlationId})},um.a);u.set(p,te(()=>clearTimeout(g)))}else{let g;l.has(p)?g=0:(g=1,l.add(p)),this.L({resource:St(o,p),type:g,cId:this.t.correlationId})}else if(h==="rename"||!Wh(p,a,!yt)){const g=setTimeout(async()=>{const v=await st.exists(i);s.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.t.correlationId},!0),n.add(await this.G(!1))):this.J(o))},um.a);n.clear(),n.add(te(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.t.correlationId},!0)})}catch(o){s.token.isCancellationRequested||this.O(`Failed to watch ${i} for changes using fs.watch() (${o.toString()})`),this.F()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.t.correlationId},!0),this.f.flush(),this.F()}L(t,r=!1){this.m.token.isCancellationRequested||(this.C&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!r&&this.g.some(i=>i(t.resource.fsPath))?this.C&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!r&&this.h&&this.h.length>0&&!this.h.some(i=>i(t.resource.fsPath))?this.C&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const r=G_(t),i=[];for(const n of r){if(Q_(n,this.j)){this.C&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}i.push(n)}if(i.length===0)return;if(this.C)for(const n of i)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(i)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${i.length}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if(yt)return st.exists(t);try{const r=vt(t);return(await st.readdir(Nr(t))).some(s=>s===r)}catch(r){return this.Q(r),!1}}setVerboseLogging(t){this.C=t}O(t){this.m.token.isCancellationRequested||this.z?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.z?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.C&&this.z?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.C&&this.Q(`${t}${typeof this.t.correlationId=="number"?` <${this.t.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},Uz=class extends Nz{get watchers(){return this.S.values()}constructor(e){super(),this.O=e,this.onDidError=Be.None,this.S=new Map}async N(e){e=this.ab(e);const t=[],r=new Set(Array.from(this.watchers));for(const i of e){const s=this.S.get(this.X(i));s&&o9(s.request.excludes,i.excludes)&&o9(s.request.includes,i.includes)?r.delete(s):t.push(i)}t.length&&this.P(`Request to start watching: ${t.map(i=>this.M(i)).join(",")}`),r.size&&this.P(`Request to stop watching: ${Array.from(r).map(i=>this.M(i.request)).join(",")}`);for(const i of r)this.$(i);for(const i of t)this.Z(i)}X(e){return typeof e.correlationId=="number"?e.correlationId:this.Y(e.path)}Y(e){return yt?e:e.toLowerCase()}Z(e){const t=new Mz(e,this.O,i=>this.a.fire(i),()=>this.c.fire(e),i=>this.b.fire(i),this.R),r={request:e,instance:t};this.S.set(this.X(e),r)}async stop(){await super.stop();for(const e of this.watchers)this.$(e)}$(e){this.P("stopping file watcher",e),this.S.delete(this.X(e.request)),e.instance.dispose()}ab(e){const t=new Map;for(const r of e){let i=t.get(r.correlationId);i||(i=new Map,t.set(r.correlationId,i));const s=this.Y(r.path);i.has(s)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(r)}`),i.set(s,r)}return Array.from(t.values()).map(r=>Array.from(r.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.db(e,t)})}Q(e){this.b.fire({type:"warn",message:this.db(e)})}db(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},jz=class extends V_{constructor(e,t,r){super(e,t,r),this.s()}r(e){return e.add(new Uz(void 0))}},Bz=class $h extends Sz{static{this.M=!1}constructor(t,r){super(t,r),this.onDidChangeCapabilities=Be.None,this.Q=new Vt(i=>Om.getComparisonKey(i)),this.Y=new Map,this.Z=new Map,this.$=new Map}get capabilities(){return this.N||(this.N=253982,yt&&(this.N|=1024)),this.N}async stat(t){try{const{stat:r,symbolicLink:i}=await vr.stat(this.J(t));return{type:this.P(r,i),ctime:r.birthtime.getTime(),mtime:r.mtime.getTime(),size:r.size,permissions:(r.mode&128)===0?ln.Locked:void 0}}catch(r){throw this.ib(r)}}async O(t){try{return await this.stat(t)}catch{return}}async readdir(t){try{const r=await st.readdir(this.J(t),{withFileTypes:!0}),i=[];return await Promise.all(r.map(async s=>{try{let n;s.isSymbolicLink()?n=(await this.stat(St(t,s.name))).type:n=this.P(s),i.push([s.name,n])}catch(n){this.a.trace(n)}})),i}catch(r){throw this.ib(r)}}P(t,r){let i;return r?.dangling?i=Mr.Unknown:t.isFile()?i=Mr.File:t.isDirectory()?i=Mr.Directory:i=Mr.Unknown,r&&(i|=Mr.SymbolicLink),i}async R(t){const r=this.J(t);this.S(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${r})`);let i;for(;i=this.Q.get(t);)this.S(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${r})`),await i.wait();const s=new ei;return this.Q.set(t,s),this.S(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${r})`),te(()=>{this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${r})`),this.Q.get(t)===s&&(this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${r})`),this.Q.delete(t)),this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${r})`),s.open()})}async readFile(t,r){let i;try{r?.atomic&&(this.S(`[Disk FileSystemProvider]: atomic read operation started (${this.J(t)})`),i=await this.R(t));const s=this.J(t);return await Ho.readFile(s)}catch(s){throw this.ib(s)}finally{i?.dispose()}}S(t){$h.M&&this.a.trace(t)}readFileStream(t,r,i){const s=X5(n=>J.concat(n.map(o=>J.wrap(o))).buffer);return Ez(this,t,s,n=>n.buffer,{...r,bufferSize:256*1024},i),s}async writeFile(t,r,i){return i?.atomic!==!1&&i?.atomic?.postfix&&await this.U(t)?this.W(t,St(nl(t),`${mi(t)}${i.atomic.postfix}`),r,i):this.X(t,r,i)}async U(t){try{const r=this.J(t),{symbolicLink:i}=await vr.stat(r);if(i)return!1}catch{}return!0}async W(t,r,i,s){const n=new se;try{n.add(await this.R(t)),n.add(await this.R(r)),await this.X(r,i,s,!0);try{await this.rename(r,t,{overwrite:!0})}catch(o){try{await this.delete(r,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async X(t,r,i,s){let n;try{const o=this.J(t);if(!i.create||!i.overwrite){if(await st.exists(o)){if(!i.overwrite)throw Ss(d(2003,null),ae.FileExists)}else if(!i.create)throw Ss(d(2004,null),ae.FileNotFound)}n=await this.open(t,{create:!0,unlock:i.unlock},s),await this.write(n,0,r,0,r.byteLength)}catch(o){throw await this.jb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.ab=!0}static configureFlushOnWrite(t){$h.ab=t}async open(t,r,i){const s=this.J(t);let n;Ea(r)&&!i&&(n=await this.R(t));let o;try{if(Ea(r)&&r.unlock)try{const{stat:a}=await vr.stat(s);a.mode&128||await Ho.chmod(s,a.mode|128)}catch(a){a.code!=="ENOENT"&&this.a.trace(a)}if(Ue&&Ea(r))try{o=await st.open(s,"r+"),await st.ftruncate(o,0)}catch(a){if(a.code!=="ENOENT"&&this.a.trace(a),typeof o=="number"){try{await st.close(o)}catch(c){this.a.trace(c)}o=void 0}}typeof o!="number"&&(o=await st.open(s,Ea(r)?"w":"r"))}catch(a){throw n?.dispose(),Ea(r)?await this.jb(t,a):this.ib(a)}if(this.Y.set(o,0),Ea(r)&&this.$.set(o,t),n){const a=this.Z.get(o);this.S(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${s})`),this.Z.set(o,n),a&&(this.S(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${s})`),a.dispose())}return o}async close(t){const r=this.Z.get(t);try{if(this.Y.delete(t),this.$.delete(t)&&$h.ab)try{await st.fdatasync(t)}catch(i){$h.configureFlushOnWrite(!1),this.a.error(i)}return await st.close(t)}catch(i){throw this.ib(i)}finally{r&&(this.Z.get(t)===r&&(this.S(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.Z.delete(t)),this.S(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),r.dispose())}}async read(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await st.read(t,i,s,n,o)).bytesRead}catch(c){throw this.ib(c)}finally{this.cb(t,o,a)}return a}bb(t,r){return r===this.Y.get(t)?null:r}cb(t,r,i){const s=this.Y.get(t);typeof s=="number"&&(typeof r=="number"||(typeof i=="number"?this.Y.set(t,s+i):this.Y.delete(t)))}async write(t,r,i,s,n){return tA(()=>this.db(t,r,i,s,n),100,3)}async db(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await st.write(t,i,s,n,o)).bytesWritten}catch(c){throw await this.jb(this.$.get(t),c)}finally{this.cb(t,o,a)}return a}async mkdir(t){try{await Ho.mkdir(this.J(t))}catch(r){throw this.ib(r)}}async delete(t,r){try{const i=this.J(t);if(r.recursive){let s;r?.atomic!==!1&&r.atomic.postfix&&(s=Ze(Nr(i),`${vt(i)}${r.atomic.postfix}`)),await st.rm(i,zn.MOVE,s)}else try{await Ho.unlink(i)}catch(s){if(s.code==="EPERM"||s.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await vr.stat(i);n=o.isDirectory()&&!a}catch{}if(n)await Ho.rmdir(i);else throw s}else throw s}}catch(i){throw this.ib(i)}}async rename(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"move",i.overwrite),await st.rename(s,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(d(2005,null,vt(s),vt(Nr(n)),o.toString()))),this.ib(o)}}async copy(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"copy",i.overwrite),await st.copy(s,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(d(2006,null,vt(s),vt(Nr(n)),o.toString()))),this.ib(o)}}async eb(t,r,i,s){const n=this.J(t),o=this.J(r);let a=!1;if(!!(this.capabilities&1024)||(a=Wh(n,o,!0)),a){if(i==="copy")throw Ss(d(2007,null),ae.FileExists);if(i==="move")return}const l=await this.O(t);if(!l)throw Ss(d(2008,null),ae.FileNotFound);const u=await this.O(r);if(u){if(!s)throw Ss(d(2009,null),ae.FileExists);(l.type&Mr.File)!==0&&(u.type&Mr.File)!==0||await this.delete(r,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,r){return this.fb(t,r,!1)}async fb(t,r,i){const s=this.J(t),n=this.J(r),o=!!(this.capabilities&1024);if(Wh(s,n,!o))return;const a=new se;try{a.add(await this.R(t)),a.add(await this.R(r)),i&&await Ho.mkdir(Nr(n),{recursive:!0}),await Ho.copyFile(s,n)}catch(c){if(c.code==="ENOENT"&&!i)return this.fb(t,r,!0);throw this.ib(c)}finally{a.dispose()}}u(t,r,i){return new Tz(s=>t(s),s=>r(s),i)}G(t,r,i){return new jz(s=>t(s),s=>r(s),i)}ib(t){if(t instanceof Ed)return t;let r=t,i;switch(t.code){case"ENOENT":i=ae.FileNotFound;break;case"EISDIR":i=ae.FileIsADirectory;break;case"ENOTDIR":i=ae.FileNotADirectory;break;case"EEXIST":i=ae.FileExists;break;case"EPERM":case"EACCES":i=ae.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":r=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,i=ae.Unknown;break;default:i=ae.Unknown}return Ss(r,i)}async jb(t,r){let i=this.ib(r);if(t&&i.code===ae.NoPermissions)try{const{stat:s}=await vr.stat(this.J(t));s.mode&128||(i=Ss(r,ae.FileWriteLocked))}catch(s){this.a.trace(s)}return i}},Ay=class{constructor(t,r){t.addFileSystemProvider(W.file,new _z(r),{isCaseSensitive:yt})}};Ay=__decorate([__param(0,Ou),__param(1,Ce)],Ay);var _z=class{constructor(e){this.b=e,this.a=new Bz(this.b)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===ln.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,r){return this.a.writeFile(e,t,{...r,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,r){return this.a.rename(e,t,r)}copy(e,t,r){return this.a.copy(e,t,r)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import{createRequire as Hz}from"node:module";var IC=Hz(import.meta.url),Wz=class extends by{j(){const e=this,t=IC("module"),r=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,E.file(UA(c.filename)),u=>r.apply(this,[u,c,l])):r.apply(this,arguments)};const i=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>i.call(this,n(o),a);const s=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),s.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},zz=class extends zw{constructor(){super(...arguments),this.extensionRuntime=Of.Node}async vb(){this.h.createInstance(Py);const e=this.h.invokeFunction(TW);if(this.h.createInstance($y),this.f.remote.isRemote&&this.f.remote.authority){const i=this.h.createInstance(Cy);process.env.VSCODE_IPC_HOOK_CLI=i.ipcHandlePath}this.h.createInstance(Ay),await this.h.createInstance(Wz,e,{mine:this.J,all:this.L}).install(),$t("code/extHost/didInitAPI");const r=await this.m.getConfigProvider();await sz(this.j,r,this,this.s,this.z,this.f,this.q),$t("code/extHost/didInitProxyResolver")}wb(e){return e.main}async xb(e,t,r){if(t.scheme!==W.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let i=null;r.codeLoadingStart(),this.s.trace(`ExtensionService#loadCommonJSModule ${t.toString(!0)}`),this.s.flush();const s=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{s&&$t(`code/extHost/willLoadExtensionCode/${s}`),i=IC(t.fsPath)}finally{s&&$t(`code/extHost/didLoadExtensionCode/${s}`),r.codeLoadingStop()}return i}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const r=e[t];r===null?delete process.env[t]:process.env[t]=r}}};import*as dh from"fs";import{exec as PC}from"child_process";var Vz=(e,t,r)=>{const i=new Uint8Array(16);for(let o=0;o<16;o++)i[o]=Math.round(Math.random()*256);const s=Zh(J.wrap(i));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${s}`].join(`\r
`)+`\r
\r
`},DC=J.fromString(`\r
\r
`);async function qz(e,t,r,i,s){e.write(J.fromString(Vz(t,r,i)));const n=new se;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=J.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(DC);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+DC.byteLength);h.byteLength&&s.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var Gz=class extends ee{constructor(e,t){super(),this.g=e,this.a=this.B(new Xc),this.onData=(...r)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...r)),this.b=this.B(new D),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(r=>this.a.fire(r))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){id.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},Jz="signService",fh=V(Jz);import*as Qz from"net";import*as Yz from"os";import*as Xz from"net";var AC={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function Zz(e,t,r,i="127.0.0.1"){let s=!1,n,o=1;const a=Xz.createServer({pauseOnConnect:!0});function c(l,u){s||(s=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},r),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,i)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,i)})}var Kz=30*1e3,TC;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"})(TC||(TC={}));function Ty(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function RC(e){const t=new it;return setTimeout(()=>t.cancel(),e),t.token}function eV(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Xe.Cancelled;const r=new it;return e.onCancellationRequested(()=>r.cancel()),t.onCancellationRequested(()=>r.cancel()),r.token}var Ry=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new se,{promise:this.promise,resolve:this.f,reject:this.g}=W5(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function tV(e,t){const r=new Ry(t);return r.registerDisposable(e.onControlMessage(i=>{const s=JSON.parse(i.toString()),n=hV(s);n?r.reject(n):r.resolve(s)})),r.promise}function rV(e,t,r,i,s,n,o,a){const c=new Ry(a),l=Tr.create(!1);return e.info(`Creating a socket (${o})...`),$t(`code/willCreateSocket/${n}`),t.connect(r,i,s,o).then(u=>{c.didTimeout?($t(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),u?.dispose()):($t(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),c.resolve(u))},u=>{$t(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),e.error(u),c.reject(u)}),c.promise}function Ly(e,t){const r=new Ry(t);return e.then(i=>{r.didTimeout||r.resolve(i)},i=>{r.didTimeout||r.reject(i)}),r.promise}async function iV(e,t,r,i){const s=MC(e,t);e.logService.trace(`${s} 1/6. invoking socketFactory.connect().`);let n;try{n=await rV(e.logService,e.remoteSocketFactoryService,e.connectTo,L5.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,Ty(t),`renderer-${Ty(t)}-${e.reconnectionToken}`,i)}catch(u){throw e.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),e.logService.error(u),u}e.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new Ym({socket:n}),a=!0),e.logService.trace(`${s} 3/6. sending AuthRequest control message.`);const c=await Ly(e.signService.createNewMessage(Ct()),i),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(J.fromString(JSON.stringify(l)));try{const u=await tV(o,eV(i,RC(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(e.logService.trace(`${s} 4/6. received SignRequest control message.`),!await Ly(e.signService.validate(c,u.signedData),i)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const f=await Ly(e.signService.sign(u.data),i),p={type:"connectionType",commit:e.commit,signedData:f,desiredConnectionType:t};return r&&(p.args=r),e.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),o.sendControl(J.fromString(JSON.stringify(p))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${s} the handshake timed out. Error:`),e.logService.error(u)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${s} received error control message when negotiating connection. Error:`),e.logService.error(u)),a&&OC(o),u}}async function sV(e,t,r){const i=Date.now(),s=MC(e,3),{protocol:n}=await iV(e,3,t,r);return e.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${pV(i)}!`),n}async function LC(e,t,r){const{connectTo:i,connectionToken:s}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:i,connectionToken:s,reconnectionToken:t,reconnectionProtocol:r,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function nV(e,t,r){const i=await LC(e,Ct(),null);return await sV(i,{host:t,port:r},Xe.None)}function oV(e){return gs(t=>new Promise((r,i)=>{const s=setTimeout(r,e*1e3);t.onCancellationRequested(()=>{clearTimeout(s),r()})}))}var NC;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})(NC||(NC={}));var aV=class{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.type=0}},cV=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=r,this.c=i,this.type=1}skipWait(){this.c.cancel()}},lV=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=2}},FC=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=4}},uV=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.handled=i,this.type=3}},tte=class Js extends ee{static triggerPermanentFailure(t,r,i){this._permanentFailure=!0,this.f=t,this.g=r,this.h=i,this.j.forEach(s=>s.D(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.y())}static debugPauseSocketWriting(){this.j.forEach(t=>t.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||Js._permanentFailure}constructor(t,r,i,s,n){super(),this.t=t,this.u=r,this.reconnectionToken=i,this.protocol=s,this.w=n,this.m=this.B(new D),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.m.fire(new FC(this.reconnectionToken,0,0)),this.B(s.onSocketClose(o=>{const a=Wg(this.t,this.reconnectionToken,!0);o?o.type===0?(this.u.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error&&this.u.logService.error(o.error)):(this.u.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),o.event&&this.u.logService.error(o.event)):this.u.logService.info(`${a} received socket close event.`),this.y()})),this.B(s.onSocketTimeout(o=>{const a=Wg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.y()})),Js.j.push(this),this.B(te(()=>{const o=Js.j.indexOf(this);o>=0&&Js.j.splice(o,1)})),this.n&&this.D(Js.f,Js.g,Js.h)}dispose(){super.dispose(),this.s=!0}async y(){if(!this.r)try{this.r=!0,await this.z()}finally{this.r=!1}}async z(){if(this.n||this.s)return;const t=Wg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new aV(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const r=[0,5,5,10,10,10,10,10,30];let i=-1;do{i++;const s=i<r.length?r[i]:r[r.length-1];try{if(s>0){const o=oV(s);this.m.fire(new cV(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s,o)),this.u.logService.info(`${t} waiting for ${s} seconds before reconnecting...`);try{await o}catch{}}if(this.n){this.u.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new lV(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1)),this.u.logService.info(`${t} resolving connection...`);const n=await LC(this.u,this.reconnectionToken,this.protocol);this.u.logService.info(`${t} connecting to ${n.connectTo}...`),await this.G(n,RC(Kz)),this.u.logService.info(`${t} reconnected!`),this.m.fire(new FC(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1));break}catch(n){if(n.code==="VSCODE_CONNECTION_ERROR"){this.u.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(i>360){this.u.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(dv.isTemporarilyNotAvailable(n)){this.u.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if((n.code==="ETIMEDOUT"||n.code==="ENETUNREACH"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET")&&n.syscall==="connect"){this.u.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(ji(n)){this.u.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(n instanceof dv){this.u.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,dv.isHandled(n));break}this.u.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}}while(!this.n&&!this.s)}C(t,r,i){this.w?Js.triggerPermanentFailure(t,r,i):this.D(t,r,i)}D(t,r,i){this.m.fire(new uV(this.reconnectionToken,t,r,i)),OC(this.protocol)}F(){this.protocol.pauseSocketWriting()}};function OC(e){try{e.acceptDisconnect();const t=e.getSocket();e.dispose(),t.dispose()}catch(t){mt(t)}}function hV(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function dV(e,t){for(;e.length<t;)e+=" ";return e}function fV(e,t){return`[remote-connection][${dV(Ty(e),13)}][${t.substr(0,5)}\u2026]`}function Wg(e,t,r){return`${fV(e,t)}[${r?"reconnect":"initial"}]`}function MC(e,t){return`${Wg(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function pV(e){return`${Date.now()-e} ms`}var Ny=V("remoteSocketFactoryService");async function gV(e,t,r,i,s){let n;for(let o=3;o&&(n?.dispose(),n=await new UC(e,t,r,i,s).waitForReady(),!(s&&AC[s]||!AC[n.tunnelLocalPort]));o--);return n}var UC=class extends ee{constructor(e,t,r,i,s){super(),this.m=t,this.n=s,this.privacy=Ki.Private,this.j=new Map,this.a=e,this.b=Qz.createServer(),this.c=new ei,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=i,this.tunnelRemoteHost=r}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=Fs(this.m)?"0.0.0.0":"127.0.0.1";let r=await Zz(e,2,1e3,t),i=null;return this.b.listen(r,this.m),await this.c.wait(),i=this.b.address(),i||(r=0,this.b.listen(r,this.m),await this.c.wait(),i=this.b.address()),this.tunnelLocalPort=i.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${i.port}`,this}async r(e){e.pause();const t=Lo(this.tunnelRemoteHost)||Fs(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,r=await nV(this.a,t,this.tunnelRemotePort),i=r.getSocket(),s=r.readEntireBuffer();r.dispose(),s.byteLength>0&&e.write(s.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),i.end()}),e.on("close",()=>i.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),i instanceof ll?i.socket.destroy():i.end()}),i instanceof ll?this.t(e,i):this.s(e,i),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),i.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(r=>e.write(r.buffer)),e.on("data",r=>t.write(J.wrap(r))),e.resume()}t(e,t){const r=t.socket;r.on("end",()=>e.end()),r.on("close",()=>e.end()),r.on("error",()=>{e.destroy()}),r.pipe(e),e.pipe(r)}},Fy=class extends bw{constructor(t,r,i,s,n){super(r,n),this.H=t,this.I=i,this.J=s}isPortPrivileged(t){return PM(t,this.t,Sm,Yz.release())}F(t,r,i,s,n,o,a,c){const l=this.D(r,i);if(l)return++l.refcount,l.value;if(CM(t))return this.G(t,r,i,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${r}:${i} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=gV(u,s,r,i,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(r,i,h),h}}};Fy=__decorate([__param(0,Ny),__param(1,Ce),__param(2,fh),__param(3,Cd),__param(4,$s)],Fy);var Oy=class extends Fy{constructor(t,r,i,s,n){super(t,r,i,s,n)}};Oy=__decorate([__param(0,Ny),__param(1,Ce),__param(2,fh),__param(3,Cd),__param(4,$s)],Oy);var jC=class extends ee{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.f=i,this.g=s,this.h=n,this.a=new Map}async openTunnel(t,r,i,s,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${i}:${s} on local port ${o}.`),!this.a.has(t)){const u=new Oy(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(r,i,s,n,o,a,c,l)}};jC=__decorate([__param(0,Ny),__param(1,Ce),__param(2,Cd),__param(3,fh),__param(4,$s)],jC);var mV=V("dialogService"),BC;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(BC||(BC={}));var nte=V("fileDialogService"),_C;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(_C||(_C={}));var vV=10*1e3,zg="remote.tunnels.toRestore",My="remote.tunnels.toRestoreExpiration",wV=1e3*60*60*24*14,HC="onTunnel",ote=new P("forwardedPortsViewEnabled",!1,d(13451,null)),bV=new P("forwardedPortsViewOnlyEnabled",!1,d(13452,null));function WC(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var ph;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})(ph||(ph={}));var zs;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(zs||(zs={}));var Uy={source:zs.User,description:d(13453,null)},ate={source:zs.Auto,description:d(13454,null)};function zC(e,t,r){const i=e.get(_r(t,r));if(i)return i;if(Lo(t))for(const s of Mu){const n=_r(s,r);if(e.has(n))return e.get(n)}else if(Fs(t))for(const s of _p){const n=_r(s,r);if(e.has(n))return e.get(n)}}function Pr(e,t,r){const i=zC(e,t,r);if(i)return i;const s=Fs(t)?"localhost":Lo(t)?"0.0.0.0":void 0;if(s)return zC(e,s,r)}function _r(e,t){return e+":"+t}var Dn;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(Dn||(Dn={}));function yV(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var VC=class Oi extends ee{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new D,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(r=>{(r.affectsConfiguration(Oi.c)||r.affectsConfiguration(Oi.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,r,i){let s=this.w(t,r,i,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;s>=0;){const o=this.j[s];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),s=this.w(t,r,i,this.j,s+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&Pe(t.host)&&Kr(t.port)}w(t,r,i,s,n){if(n>=s.length)return-1;const o=!Lo(r)&&!Fs(r),c=s.slice(n).findIndex(l=>Kr(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&r===l.key.host:i?l.key.test(i):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(Oi.c);if(!t||!bt(t))return[];const r=[];for(const s in t){if(s===void 0)continue;const n=t[s];let o;if(Number(s))o=Number(s);else if(Pe(s))if(Oi.g.test(s)){const a=s.match(Oi.g);o={start:Number(a[1]),end:Number(a[2])}}else if(Oi.h.test(s)){const a=s.match(Oi.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(s)}catch{}a&&(o=a)}o&&r.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const i=this.r.getValue(Oi.f);return i&&(this.m={elevateIfNeeded:i.elevateIfNeeded,label:i.label,onAutoForward:i.onAutoForward,requireLocalPort:i.requireLocalPort,protocol:i.protocol}),this.z(r)}z(t){function r(i,s){return Kr(i.key)?i.key:s.t(i.key)?i.key.start:s.u(i.key)?i.key.port:Number.MAX_VALUE}return t.sort((i,s)=>r(i,this)-r(s,this))}C(){return this.m}static providedActionToAction(t){switch(t){case Cn.Notify:return Dn.Notify;case Cn.OpenBrowser:return Dn.OpenBrowser;case Cn.OpenBrowserOnce:return Dn.OpenBrowserOnce;case Cn.OpenPreview:return Dn.OpenPreview;case Cn.Silent:return Dn.Silent;case Cn.Ignore:return Dn.Ignore;default:return}}async addAttributes(t,r,i){const n=this.r.inspect(Oi.c).userRemoteValue;let o;!n||!bt(n)?o={}:o=Ve(n),o[`${t}`]||(o[`${t}`]={});for(const a in r)o[`${t}`][a]=r[a];return this.r.updateValue(Oi.c,o,i)}},jy=class extends ee{constructor(t,r,i,s,n,o,a,c,l,u){super(),this.H=t,this.I=r,this.J=i,this.L=s,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new D,this.onForwardPort=this.g.event,this.h=new D,this.onClosePort=this.h.event,this.j=new D,this.onPortName=this.j.event,this.n=new D,this.onCandidatesChanged=this.n.event,this.t=new D,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new D,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new VC(i),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const f=await this.getAttributes(h.map(p=>({port:p.tunnelRemotePort,host:p.tunnelRemoteHost})));for(const p of h)if(p.localAddress){const g=_r(p.tunnelRemoteHost,p.tunnelRemotePort),v=Pr(this.m??new Map,p.tunnelRemoteHost,p.tunnelRemotePort);this.forwarded.set(g,{remotePort:p.tunnelRemotePort,remoteHost:p.tunnelRemoteHost,localAddress:p.localAddress,protocol:f?.get(p.tunnelRemotePort)?.protocol??oi.Http,localUri:await this.Y(p.localAddress,f?.get(p.tunnelRemotePort)),localPort:p.tunnelLocalPort,name:f?.get(p.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:p.privacy,source:Uy}),this.f.set(g,p)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const f=_r(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Pr(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Pr(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Pr(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const p=Pr(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(f,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??oi.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:p?.detail,hasRunningProcess:!!p,pid:p?.pid,privacy:h.privacy,source:Uy})}await this.db(),this.W(!0),this.f.set(f,h),this.g.fire(this.forwarded.get(f))})),this.B(this.H.onTunnelClosed(h=>this.X(h,ph.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(HC))?(this.R.createKey(bV.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const i=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&i.dispose()}))}async X(t,r){const i=_r(t.host,t.port);this.forwarded.has(i)&&(this.forwarded.delete(i),await this.db(),this.h.fire(t))}Y(t,r){if(t.startsWith("http"))return E.parse(t);const i=r?.protocol??"http";return E.parse(`${i}://${t}`)}async Z(t){const r=this.N.getWorkspace(),i=r.configuration?Es(r.configuration.path):r.folders.length>0?Es(r.folders[0].uri.path):void 0;if(i===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${i}`}async $(){return this.Z(zg)}async ab(){return this.Z(My)}async bb(){const t=this.I.get(zg,1);if(t)return this.I.remove(zg,1),await this.db(),t;const r=await this.$();if(r)return this.I.get(r,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const r=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${r.map(i=>i.remotePort).join(", ")}`);for(const i of r){const s=Pr(this.detected,i.remoteHost,i.remotePort);i.source.source!==zs.Extension&&!s||i.source.source===zs.Extension&&s?await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,elevateIfNeeded:!0,source:i.source}):i.source.source===zs.Extension&&!s&&this.D.set(_r(i.remoteHost,i.remotePort),i)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new se),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async r=>{r.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(r=>r.startsWith(My));for(const r of t){const i=this.I.getNumber(r,0);if(i&&i<Date.now()){this.s=Promise.resolve(void 0);const s=r.replace(My,zg);this.I.remove(r,0),this.I.remove(s,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),r=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let i;t.length>0&&(i=JSON.stringify(r));const s=await this.$(),n=await this.ab();!i&&s&&n?(this.I.remove(s,0),this.I.remove(n,0)):i!==this.y&&s&&n&&(this.I.store(s,i,0,0),this.I.store(n,Date.now()+wV,0,0)),this.y=i}}async fb(t,r,i){if(!t.tunnelLocalPort||!i?.requireLocalPort||t.tunnelLocalPort===r)return;const s=new Date;if(this.eb.getTime()+vV>s.getTime())return;this.eb=s;const n=d(13455,null,r,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,r){return!this.z&&this.L.remoteAuthority&&await Be.toPromise(this.C.event),this.gb(t,r)}async gb(t,r){await this.Q.activateByEvent(HC);const i=Pr(this.forwarded,t.remote.host,t.remote.port);r=r??(r!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const s=t.local!==void 0?t.local:t.remote.port;let n;if(i)return this.ib(i,t,r);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=_r(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,s,t.elevateIfNeeded?t.elevateIfNeeded:r?.elevateIfNeeded,t.privacy,r?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Pr(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===oi.Https?oi.Https:oi.Http:r?.protocol??oi.Http,f={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:r?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,r),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??Uy,privacy:l.privacy};return this.forwarded.set(c,f),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,s,r),this.g.fire(f),l}this.c.delete(c)}return n}hb(t,r){const i=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(i){const s=i.get(t);i.delete(t),s&&(r.name=s.name??r.name,r.local=("local"in s?s.local:"localPort"in s?s.localPort:void 0)??r.local,r.privacy=r.privacy)}return r}async ib(t,r,i){const s=i?.label??r.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(s!==t.name&&(t.name=s,o=n.Fire),(i?.protocol||t.protocol!==oi.Http)&&i?.protocol!==t.protocol&&(r.source=t.source,o=n.Reopen),r.privacy&&t.privacy!==r.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,ph.User),await this.gb(r,i)}return Pr(this.f,r.remote.host,r.remote.port)}async name(t,r,i){const s=Pr(this.forwarded,t,r),n=_r(t,r);if(s){s.name=i,await this.db(),this.j.fire({host:t,port:r});return}else this.detected.has(n)&&(this.detected.get(n).name=i,this.j.fire({host:t,port:r}))}async close(t,r,i){const s=_r(t,r),n=this.forwarded.get(s);return i===ph.AutoForwardEnd&&n&&n.source.source===zs.Auto&&this.F.set(s,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,r),this.X({host:t,port:r},i)}address(t,r){const i=_r(t,r);return(this.forwarded.get(i)||this.detected.get(i))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const r of t){const i=Pr(this.m??new Map,r.remoteAddress.host,r.remoteAddress.port),s=typeof r.localAddress=="string"?r.localAddress:_r(r.localAddress.host,r.localAddress.port);this.detected.set(_r(r.remoteAddress.host,r.remoteAddress.port),{remoteHost:r.remoteAddress.host,remotePort:r.remoteAddress.port,localAddress:s,protocol:oi.Http,localUri:this.Y(s),closeable:!1,runningProcess:i?.detail,hasRunningProcess:!!i,pid:i?.pid,privacy:Ki.ConstantPrivate,source:{source:zs.Extension,description:d(13456,null)}}),this.H.setEnvironmentTunnel(r.remoteAddress.host,r.remoteAddress.port,s,Ki.ConstantPrivate,oi.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let r=t;this.r&&(r=await this.r(t));const i=this.jb(r);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(i.values()).map(s=>s.port).join(", ")}`),this.n.fire(i)}jb(t){const r=this.m??new Map,i=new Map;return this.m=i,t.forEach(s=>{const n=_r(s.host,s.port);i.set(n,{host:s.host,port:s.port,detail:s.detail,pid:s.pid}),r.has(n)&&r.delete(n);const o=Pr(this.forwarded,s.host,s.port);o&&(o.runningProcess=s.detail,o.hasRunningProcess=!0,o.pid=s.pid)}),r.forEach((s,n)=>{const o=WC(n);if(!o)return;const a=Pr(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Pr(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),r}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),r=await this.getAttributes(t.map(i=>({port:i.remotePort,host:i.remoteHost})),!1);if(r)for(const i of t){const s=r.get(i.remotePort);(s?.protocol||i.protocol!==oi.Http)&&s?.protocol!==i.protocol&&await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,source:i.source},s),s&&s.label&&s.label!==i.name&&await this.name(i.remoteHost,i.remotePort,s.label)}}async getAttributes(t,r=!0){const i=new Map,s=new Map;t.forEach(l=>{const u=Pr(this.m??new Map,Mu[0],l.port)??l;if(u){i.set(l.port,u);const h=yV(u)?u.pid:void 0;s.has(h)||s.set(h,[]),s.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,i.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!r)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(s.entries()).map(u=>{const h=u[1],f=i.get(h[0]);return l.providePortAttributes(h,f?.pid,f?.detail,Xe.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??VC.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([rd(1e3)],jy.prototype,"db",null),jy=__decorate([__param(0,$M),__param(1,ev),__param(2,$s),__param(3,X8),__param(4,kO),__param(5,bl),__param(6,Ce),__param(7,mV),__param(8,pO),__param(9,g1)],jy);function EV(e){const t=e.trim().split(`
`),r=[];return t.forEach(s=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(s);n&&n.length>=3&&r.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),r.reduce((s,n)=>(s[n.socket]=n,s),{})}function xV(...e){const t=[].concat(...e.map(SV));return[...new Map(t.filter(r=>r.st==="0A").map(r=>{const i=r.local_address.split(":");return{socket:parseInt(r.inode,10),ip:kV(i[0]),port:parseInt(i[1],16)}}).map(r=>[r.ip+":"+r.port,r])).values()]}function kV(e){let t="";if(e.length===8)for(let r=e.length-2;r>=0;r-=2)t+=parseInt(e.substr(r,2),16),r!==0&&(t+=".");else for(let r=0;r<e.length;r+=8){const i=e.substring(r,r+8);let s="";for(let n=8;n>=2;n-=2)s+=i.substring(n-2,n),(n===6||n===2)&&(s=parseInt(s,16).toString(16),t+=`${s}`,s="",r+n!==e.length-6&&(t+=":"))}return t}function SV(e){const t=e.trim().split(`
`),r=t.shift().trim().split(/\s+/).filter(s=>s!=="rx_queue"&&s!=="tm->when");return t.map(s=>s.trim().split(/\s+/).reduce((n,o,a)=>(n[r[a]||a]=o,n),{}))}function $V(e){return e.length>500?!1:!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function CV(e){const t=e.trim().split(`
`),r=[];return t.forEach(i=>{const s=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(i);s&&s.length>=4&&r.push({pid:parseInt(s[1],10),ppid:parseInt(s[2]),cmd:s[3]})}),r}async function IV(e,t,r){const i=r.reduce((n,o)=>(n[o.pid]=o,n),{}),s=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?i[c]?.cmd:void 0;c&&l&&!$V(l)&&s.push({host:o,port:a,detail:l,pid:c})}),s}function PV(e,t,r){const i=new Map,s=CV(t);for(const n of e){const o=r.get(n.port);if(o){i.set(n.port,o);continue}const a=s.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=s.find(u=>u.ppid===c.pid),l&&(c=l);while(l);i.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else i.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return i}var By=class extends Wp{constructor(t,r,i,s){super(t,r,i),this.D=r,this.F=s,this.y=void 0,this.z=new Map,this.C=!1,yt&&r.remote.isRemote&&r.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let r;this.y&&(r=this.y,await this.a.$onFoundNewCandidates(this.y));const i=new eL;let s=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>Lo(l.host)||Fs(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),s++>3&&i.update(a),(!r||JSON.stringify(r)!==JSON.stringify(o))&&(r=o,await this.a.$onFoundNewCandidates(r));const c=this.G(i.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",r="";try{t=await dh.promises.readFile("/proc/net/tcp","utf8"),r=await dh.promises.readFile("/proc/net/tcp6","utf8")}catch{}const i=xV(t,r),s=await new Promise(f=>{PC("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(p,g,v)=>{f(g)})}),n=EV(s),o=await st.readdir("/proc"),a=[];for(const f of o)try{const p=Number(f),g=St(E.file("/proc"),f);if((await dh.promises.stat(g.fsPath)).isDirectory()&&!isNaN(p)){const b=await dh.promises.readlink(St(g,"cwd").fsPath),x=await dh.promises.readFile(St(g,"cmdline").fsPath,"utf8");a.push({pid:p,cwd:b,cmd:x})}}catch{}const c=[],l=i.filter(f=>{const p=n[f.socket];return p||c.push(f),p}),u=IV(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const f=await new Promise(p=>{PC("ps -F -A -l | grep root",(g,v,b)=>{p(v)})});this.z=PV(c,f,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(p=>p.port).join(", ")}`)}return u.then(f=>h?f.concat(h):f)}w(t){return async r=>{const i=new UC({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return DV.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new ok(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",r.remoteAddress.host||"localhost",r.remoteAddress.port,r.localAddressPort);await i.waitForReady();const s=new D;return{localAddress:WC(i.localAddress)??i.localAddress,remoteAddress:{port:i.tunnelRemotePort,host:i.tunnelRemoteHost},onDidDispose:s.event,dispose:()=>{i.dispose(),s.fire(),s.dispose()}}}}};By=__decorate([__param(0,Ae),__param(1,Ut),__param(2,Ce),__param(3,fh)],By);var DV=class hP extends Gz{static connect(t,r,i,s){const n=new se,o={onClose:n.add(new D),onData:n.add(new D),onEnd:n.add(new D)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(J.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new hP(t,s,o);return a.B(n),qz(a,r,i,s,o)}constructor(t,r,i){super(r,i),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as Wo from"fs";var AV=class extends ww{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==W.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const r=t.fsPath;let i=0;do{let s;i===0?s=r:s=/[/\\]$/.test(r)?`${r.substr(0,r.length-1)}-${i}`:`${r}-${i}`,await TV(s);const n=Ze(s,"vscode.lock"),o=await GC(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),E.file(s);i++}while(i<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function TV(e){try{await Wo.promises.stat(e);return}catch{}try{await Wo.promises.mkdir(e,{recursive:!0})}catch{}}var RV=1e3,qC=10*60*1e3,LV=class extends ee{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new q5),this.a.cancelAndSet(async()=>{const r=await _y(e,t);(!r||r.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await Wo.promises.utimes(t,new Date,new Date)}catch(i){e.error(i),e.info(`Lock '${t}': Could not update mtime.`)}},RV)}dispose(){super.dispose();try{Wo.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await st.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function GC(e,t,r){try{const s={pid:process.pid,willReleaseAt:0};await st.writeFile(t,JSON.stringify(s),{flag:"wx"})}catch(s){e.error(s)}const i=await _y(e,t);return!i||i.pid!==process.pid?r?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),FV(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new LV(e,t))}async function _y(e,t){let r;try{r=await Wo.promises.readFile(t)}catch(i){return e.error(i),null}try{return JSON.parse(String(r))}catch(i){return e.error(i),null}}async function Hy(e,t){let r;try{r=await Wo.promises.stat(t)}catch(i){return e.error(i),0}return r.mtime.getTime()}function NV(e){try{return process.kill(e,0),!0}catch{return!1}}async function FV(e,t){const r=await _y(e,t);if(!r)return e.info(`Lock '${t}': Could not read pid of lock holder.`),gh(e,t);if(r.willReleaseAt){let a=r.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await ar(Math.min(100,a)),await Hy(e,t)===0)return gh(e,t);a=r.willReleaseAt-Date.now()}return gh(e,t)}}if(!NV(r.pid))return e.info(`Lock '${t}': The pid ${r.pid} appears to be gone.`),gh(e,t);const i=await Hy(e,t),s=Date.now()-i;if(s<=qC)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${s} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await ar(2e3);const n=await Hy(e,t),o=Date.now()-n;return o<=qC?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),gh(e,t))}async function gh(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await Wo.promises.unlink(t)}catch{}return GC(e,t,!0)}var Vs;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(Vs||(Vs={}));async function OV(e,t,r,i,s){try{const n=await import("@vscode/spdlog");n.setFlushOn(Vs.Trace);const o=await n.createAsyncRotatingLogger(e,t,r,i);return s?o.clearFormatters():o.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),o}catch(n){console.error(n)}return null}function JC(e,t,r){switch(t){case fe.Trace:e.trace(r);break;case fe.Debug:e.debug(r);break;case fe.Info:e.info(r);break;case fe.Warning:e.warn(r);break;case fe.Error:e.error(r);break;case fe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function QC(e,t){switch(t){case fe.Trace:e.setLevel(Vs.Trace);break;case fe.Debug:e.setLevel(Vs.Debug);break;case fe.Info:e.setLevel(Vs.Info);break;case fe.Warning:e.setLevel(Vs.Warning);break;case fe.Error:e.setLevel(Vs.Error);break;case fe.Off:e.setLevel(Vs.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var MV=class extends m1{constructor(e,t,r,i,s){super(),this.n=[],this.setLevel(s),this.r=this.t(e,t,r,i),this.B(this.onDidChangeLogLevel(n=>{this.s&&QC(this.s,n)}))}async t(e,t,r,i){const s=r?6:1,n=30/s*ix.MB,o=await OV(e,t,n,s,i);if(o){this.s=o,QC(this.s,this.getLevel());for(const{level:a,message:c}of this.n)JC(this.s,a,c);this.n=[]}}m(e,t){this.s?JC(this.s,e,t):this.getLevel()<=e&&this.n.push({level:e,message:t})}flush(){this.s?this.w():this.r.then(()=>this.w())}dispose(){this.s?this.y():this.r.then(()=>this.y()),super.dispose()}w(){this.s&&this.s.flush()}y(){this.s&&(this.s.drop(),this.s=void 0)}},UV=class extends cg{t(e,t,r){return e.scheme===W.file?new MV(r?.name||Ct(),e.fsPath,!r?.donotRotate,!!r?.donotUseFormatters,t):super.t(e,t,r)}registerLogger(e){super.registerLogger(e),this.c.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.c.$deregisterLogger(e)}};import{homedir as jV}from"os";var BV=class extends sg{m(){return jV()}},_V=class extends ee{constructor(e,t=[]){super(),this.a=new BR([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Wy=class extends _V{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?d(2824,null):d(t?2825:2826,null);super(r.createLogger(s,{name:n}))}};Wy=__decorate([__param(1,ga),__param(2,Ut)],Wy),Ne(Ms,zz,0),Ne(ga,UV,1),Ne(Ce,new Vi(Wy,[!1],!0)),Ne(fh,QS,1),Ne(vw,AV,0),Ne(zp,new Vi(xw,[!1],!0)),Ne(fb,Pb,0),Ne(mb,Fb,0),Ne(ub,kb,0),Ne(Os,Eb,0),Ne(Hp,By,0),Ne($c,BV,0);import{createRequire as HV}from"node:module";var YC=HV(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var Vg=(0,NP.default)(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock"],string:["useHostProxy"]});(function(){const e=YC("module"),t=e._load;e._load=function(r){if(r==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var qg=process.exit.bind(process),WV=process.on.bind(process);function zV(e){process.exit=function(t){if(e)qg(t);else{const r=new Error("An extension called process.exit() and this was prevented.");console.warn(r.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,r){t==="uncaughtException"&&(r=function(){try{return r.call(void 0,arguments)}catch{}}),WV(t,r)}}var ts=function(e){qg()};function VV(){const e=kU(process.env);if(e.type===3)return new Promise((t,r)=>{const i=s=>{const n=s[0],o=new Gn;n.on("message",a=>o.fire(J.wrap(a.data))),n.on("close",()=>{ts("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",s=>i(s.ports))});if(e.type===2)return new Promise((t,r)=>{let i=null;const s=setTimeout(()=>{ts("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=108e5,o=3e5,a=new G5(()=>ts("renderer disconnected for too long (1)"),n),c=new G5(()=>ts("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0);const f=J.wrap(Buffer.from(u.initialDataChunk,"base64"));let p;if(u.skipWebSocketFrames)p=new ll(h,"extHost-socket");else{const g=J.wrap(Buffer.from(u.inflateBytes,"base64"));p=new eT(new ll(h,"extHost-socket"),u.permessageDeflate,g,!1)}i?(a.cancel(),c.cancel(),i.beginAcceptReconnection(p,f),i.endAcceptReconnection(),i.sendResume()):(clearTimeout(s),i=new Ym({socket:p,initialChunk:f}),i.sendResume(),i.onDidDispose(()=>ts("renderer disconnected")),t(i),i.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((r,i)=>{const s=FP.createConnection(t,()=>{s.removeListener("error",i);const n=new Ym({socket:new ll(s,"extHost-renderer")});n.sendResume(),r(n)});s.once("error",i),s.on("close",()=>{ts("renderer closed the socket")})})}}async function qV(){const e=await VV();return new class{constructor(){this.a=new Gn,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{MM(t,2)?(this.b=!0,this.d.dispose(),ts("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function GV(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString()),n=s.commit,o=j6.commit;if(n&&o&&n!==o&&qg(55),s.parentPid){let a=0;setInterval(function(){try{process.kill(s.parentPid,0),a=0}catch(l){l&&l.code==="EPERM"?(a++,a>=3&&ts(`parent process ${s.parentPid} does not exist anymore (3 x EPERM): ${l.message} (code: ${l.code}) (errno: ${l.errno})`)):ts(`parent process ${s.parentPid} does not exist anymore: ${l.message} (code: ${l.code}) (errno: ${l.errno})`)}},1e3);let c;try{c=YC("native-watchdog"),c.start(s.parentPid)}catch(l){mt(l)}}e.send(w8(0)),t({protocol:e,initData:s})});e.send(w8(1))})}async function JV(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),ji(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&mt(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){UP(a)||mt(a)}),$t("code/extHost/willConnectToRenderer");const t=await qV();$t("code/extHost/didConnectToRenderer");const r=await GV(t);$t("code/extHost/didWaitForInitData");const{initData:i}=r;zV(!!i.environment.extensionTestsLocationURI),i.environment.useHostProxy=Vg.useHostProxy!==void 0?Vg.useHostProxy!=="false":void 0,i.environment.skipWorkspaceStorageLock=Q(Vg.skipWorkspaceStorageLock,!1);const s=new class{constructor(){this.pid=process.pid}exit(c){qg(c)}fsExists(c){return st.exists(c)}fsRealpath(c){return l6(c)}};let n=null;i.remote.authority&&Vg.transformURIs&&(n=EU(i.remote.authority));const o=new bU(r.protocol,i,s,n);ts=a=>o.terminate(a)}JV().catch(e=>console.log(e));

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/ddc367ed5c8936efe395cffeec279b04ffd7db78/core/vs/workbench/api/node/extensionHostProcess.js.map
